{"version":3,"file":"Measure/Measure.min.js","mappings":"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","sources":["webpack://Autodesk.Extensions/./Measure/Calibration.css","webpack://Autodesk.Extensions/./Measure/Measure.css","webpack://Autodesk.Extensions/./node_modules/css-loader/dist/runtime/api.js","webpack://Autodesk.Extensions/./node_modules/css-loader/dist/runtime/getUrl.js","webpack://Autodesk.Extensions/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://Autodesk.Extensions/webpack/bootstrap","webpack://Autodesk.Extensions/webpack/runtime/compat get default export","webpack://Autodesk.Extensions/webpack/runtime/define property getters","webpack://Autodesk.Extensions/webpack/runtime/global","webpack://Autodesk.Extensions/webpack/runtime/hasOwnProperty shorthand","webpack://Autodesk.Extensions/webpack/runtime/make namespace object","webpack://Autodesk.Extensions/webpack/runtime/publicPath","webpack://Autodesk.Extensions/webpack/runtime/jsonp chunk loading","webpack://Autodesk.Extensions/webpack/runtime/nonce","webpack://Autodesk.Extensions/./Measure/MeasurementsManager.js","webpack://Autodesk.Extensions/./Measure/Indicator.js","webpack://Autodesk.Extensions/./Measure/PolygonCentroid.js","webpack://Autodesk.Extensions/./Measure/MeasureToolIndicator.js","webpack://Autodesk.Extensions/./Measure/MeasureTool.js","webpack://Autodesk.Extensions/./Measure/CalibrationToolIndicator.js","webpack://Autodesk.Extensions/./Measure/CalibrationPanels.js","webpack://Autodesk.Extensions/./Measure/CalibrationTool.js","webpack://Autodesk.Extensions/./Measure/MagnifyingGlass.js","webpack://Autodesk.Extensions/./Measure/MeasureToolbar.js","webpack://Autodesk.Extensions/./Measure/Measure.css?e2e8","webpack://Autodesk.Extensions/./Measure/Calibration.css?2585","webpack://Autodesk.Extensions/./Measure/Measure.js"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:application/octet-stream;base64,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\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@font-face {\\r\\n    font-family: 'calibration-icon';\\r\\n    src: url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \") format('woff');\\r\\n    font-weight: normal;\\r\\n    font-style: normal;\\r\\n}\\r\\n\\r\\n[class^=\\\"calibration-icon\\\"], [class*=\\\" calibration-icon\\\"] {\\r\\n    font-family: 'calibration-icon';\\r\\n    font-style: normal;\\r\\n    font-weight: normal;\\r\\n    font-variant: normal;\\r\\n    line-height: 1;\\r\\n    padding-top: 2px;\\r\\n    speak: none;\\r\\n    text-transform: none;\\r\\n    -webkit-font-smoothing: antialiased;\\r\\n    -moz-osx-font-smoothing: grayscale;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-icon:before {\\r\\n    content: 'a';\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-panel {\\r\\n    left:calc(50% - 190px);\\r\\n    top: calc(50% - 145px);\\r\\n    width: 300px;\\r\\n    height: auto;\\r\\n    z-index: 4;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-popup .option-drop-down,\\r\\n.adsk-viewing-viewer .calibration-panel .option-drop-down {\\r\\n    width: 100%;\\r\\n    padding-right: 0px;\\r\\n    box-sizing: border-box;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-popup .adsk-lmv-tftable tr td,\\r\\n.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td {\\r\\n    width: auto;\\r\\n    padding: 2px 15px 2px 0px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td input {\\r\\n    margin: 0px;\\r\\n    box-sizing: border-box;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-popup .switch {\\r\\n    margin-left: 25px;\\r\\n}\\r\\n.adsk-viewing-viewer .measure-settings-popup .switch .slider {\\r\\n    width: 26px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-textbox::-webkit-inner-spin-button, \\r\\n.adsk-viewing-viewer .calibration-textbox::-webkit-outer-spin-button { \\r\\n    -webkit-appearance: none; \\r\\n    margin: 0; \\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-text {\\r\\n    text-align: left;\\r\\n    padding: 6px 10px 6px 10px;\\r\\n    margin: 20px 20px 14px 20px;\\r\\n    font-size: 14px;\\r\\n    -webkit-font-smoothing: antialiased;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-button {\\r\\n    margin-top: 15px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-button-left {\\r\\n    width: calc(50% - 15px);\\r\\n    margin-right: 5px !important;\\r\\n    display: inline-block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-button-right {\\r\\n    width: calc(50% - 15px);\\r\\n    margin-left: 5px !important;\\r\\n    display: inline-block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-line {\\r\\n    position: absolute;\\r\\n    display: block;    \\r\\n    top:0;\\r\\n    left:0;\\r\\n    pointer-events: none;\\r\\n    z-index: 0;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-label {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n    pointer-events: none;\\r\\n    text-align: 'center';\\r\\n    vertical-align: middle;\\r\\n    cursor: default;\\r\\n    padding: 2px;\\r\\n    color: #000000;\\r\\n    background: #FFFFFF;\\r\\n    border-radius: 10px;\\r\\n    -webkit-transform-origin: 50%  53%;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-label-text {\\r\\n    display: inline-block;\\r\\n    pointer-events: none;\\r\\n    text-align: 'center';\\r\\n    vertical-align: middle;\\r\\n    font-size: 12px;\\r\\n    cursor: default;\\r\\n    padding: 2px;\\r\\n    color: #000000;\\r\\n    background: #FFFFFF;\\r\\n    border-bottom: 1px dashed #000000;\\r\\n    text-decoration: none;\\r\\n    text-transform: uppercase;\\r\\n    -webkit-font-smoothing: antialiased;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-label-text:hover {\\r\\n    color: #039be5;\\r\\n    border-bottom: 1px dashed #039be5;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-label.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover,\\r\\n.adsk-viewing-viewer .calibration-endpoint.edit {\\r\\n    background-color: #039be5;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover > * ,\\r\\n.adsk-viewing-viewer .calibration-endpoint.edit > * {\\r\\n    color: #ffffff;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint.editable {\\r\\n    pointer-events: all;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n    cursor: move;\\r\\n    pointer-events: none;\\r\\n    width: 30px;\\r\\n    height: 30px;\\r\\n    background-color: #ffffff;\\r\\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.24), 0 0 8px 0 rgba(0, 0, 0, 0.12);\\r\\n    -moz-border-radius: 50px;\\r\\n    -webkit-border-radius: 50px;\\r\\n    border-radius: 50px;\\r\\n    justify-content:center;\\r\\n    align-items:center;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint-text {\\r\\n    display: inline-block;\\r\\n    font-size: 14px;\\r\\n    vertical-align: middle;\\r\\n    cursor: default;\\r\\n    margin: 5px 5px 5px 5px;\\r\\n    vertical-align: middle;\\r\\n    text-align: center;\\r\\n    color: #039be5;\\r\\n    text-decoration: none;\\r\\n    text-transform: uppercase;\\r\\n    pointer-events: none;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-buttons-wrapper {\\r\\n    text-align: center;\\r\\n}\\r\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./Measure/Calibration.css\"],\"names\":[],\"mappings\":\"AAAA;IACI,+BAA+B;IAC/B,2DAAg2H;IACh2H,mBAAmB;IACnB,kBAAkB;AACtB;;AAEA;IACI,+BAA+B;IAC/B,kBAAkB;IAClB,mBAAmB;IACnB,oBAAoB;IACpB,cAAc;IACd,gBAAgB;IAChB,WAAW;IACX,oBAAoB;IACpB,mCAAmC;IACnC,kCAAkC;AACtC;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,sBAAsB;IACtB,sBAAsB;IACtB,YAAY;IACZ,YAAY;IACZ,UAAU;AACd;;AAEA;;IAEI,WAAW;IACX,kBAAkB;IAClB,sBAAsB;AAC1B;;AAEA;;IAEI,WAAW;IACX,yBAAyB;AAC7B;;AAEA;IACI,WAAW;IACX,sBAAsB;IACtB,WAAW;AACf;;AAEA;IACI,iBAAiB;AACrB;AACA;IACI,WAAW;AACf;;AAEA;;IAEI,wBAAwB;IACxB,SAAS;AACb;;AAEA;IACI,gBAAgB;IAChB,0BAA0B;IAC1B,2BAA2B;IAC3B,eAAe;IACf,mCAAmC;AACvC;;AAEA;IACI,gBAAgB;AACpB;;AAEA;IACI,uBAAuB;IACvB,4BAA4B;IAC5B,qBAAqB;AACzB;;AAEA;IACI,uBAAuB;IACvB,2BAA2B;IAC3B,qBAAqB;AACzB;;AAEA;IACI,kBAAkB;IAClB,cAAc;IACd,KAAK;IACL,MAAM;IACN,oBAAoB;IACpB,UAAU;AACd;;AAEA;IACI,aAAa;IACb,kBAAkB;IAClB,oBAAoB;IACpB,oBAAoB;IACpB,sBAAsB;IACtB,eAAe;IACf,YAAY;IACZ,cAAc;IACd,mBAAmB;IACnB,mBAAmB;IACnB,kCAAkC;AACtC;;AAEA;IACI,qBAAqB;IACrB,oBAAoB;IACpB,oBAAoB;IACpB,sBAAsB;IACtB,eAAe;IACf,eAAe;IACf,YAAY;IACZ,cAAc;IACd,mBAAmB;IACnB,iCAAiC;IACjC,qBAAqB;IACrB,yBAAyB;IACzB,mCAAmC;AACvC;;AAEA;IACI,cAAc;IACd,iCAAiC;AACrC;;AAEA;IACI,cAAc;AAClB;;AAEA;;IAEI,yBAAyB;AAC7B;;AAEA;;IAEI,cAAc;AAClB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,aAAa;IACb,kBAAkB;IAClB,YAAY;IACZ,oBAAoB;IACpB,WAAW;IACX,YAAY;IACZ,yBAAyB;IACzB,0EAA0E;IAC1E,wBAAwB;IACxB,2BAA2B;IAC3B,mBAAmB;IACnB,sBAAsB;IACtB,kBAAkB;IAClB,kBAAkB;AACtB;;AAEA;IACI,cAAc;AAClB;;AAEA;IACI,qBAAqB;IACrB,eAAe;IACf,sBAAsB;IACtB,eAAe;IACf,uBAAuB;IACvB,sBAAsB;IACtB,kBAAkB;IAClB,cAAc;IACd,qBAAqB;IACrB,yBAAyB;IACzB,oBAAoB;AACxB;;AAEA;IACI,kBAAkB;AACtB\",\"sourcesContent\":[\"@font-face {\\r\\n    font-family: 'calibration-icon';\\r\\n    src: url('data:application/octet-stream;base64,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') format('woff');\\r\\n    font-weight: normal;\\r\\n    font-style: normal;\\r\\n}\\r\\n\\r\\n[class^=\\\"calibration-icon\\\"], [class*=\\\" calibration-icon\\\"] {\\r\\n    font-family: 'calibration-icon';\\r\\n    font-style: normal;\\r\\n    font-weight: normal;\\r\\n    font-variant: normal;\\r\\n    line-height: 1;\\r\\n    padding-top: 2px;\\r\\n    speak: none;\\r\\n    text-transform: none;\\r\\n    -webkit-font-smoothing: antialiased;\\r\\n    -moz-osx-font-smoothing: grayscale;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-icon:before {\\r\\n    content: 'a';\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-panel {\\r\\n    left:calc(50% - 190px);\\r\\n    top: calc(50% - 145px);\\r\\n    width: 300px;\\r\\n    height: auto;\\r\\n    z-index: 4;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-popup .option-drop-down,\\r\\n.adsk-viewing-viewer .calibration-panel .option-drop-down {\\r\\n    width: 100%;\\r\\n    padding-right: 0px;\\r\\n    box-sizing: border-box;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-popup .adsk-lmv-tftable tr td,\\r\\n.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td {\\r\\n    width: auto;\\r\\n    padding: 2px 15px 2px 0px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td input {\\r\\n    margin: 0px;\\r\\n    box-sizing: border-box;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-popup .switch {\\r\\n    margin-left: 25px;\\r\\n}\\r\\n.adsk-viewing-viewer .measure-settings-popup .switch .slider {\\r\\n    width: 26px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-textbox::-webkit-inner-spin-button, \\r\\n.adsk-viewing-viewer .calibration-textbox::-webkit-outer-spin-button { \\r\\n    -webkit-appearance: none; \\r\\n    margin: 0; \\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-text {\\r\\n    text-align: left;\\r\\n    padding: 6px 10px 6px 10px;\\r\\n    margin: 20px 20px 14px 20px;\\r\\n    font-size: 14px;\\r\\n    -webkit-font-smoothing: antialiased;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-button {\\r\\n    margin-top: 15px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-button-left {\\r\\n    width: calc(50% - 15px);\\r\\n    margin-right: 5px !important;\\r\\n    display: inline-block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-button-right {\\r\\n    width: calc(50% - 15px);\\r\\n    margin-left: 5px !important;\\r\\n    display: inline-block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-line {\\r\\n    position: absolute;\\r\\n    display: block;    \\r\\n    top:0;\\r\\n    left:0;\\r\\n    pointer-events: none;\\r\\n    z-index: 0;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-label {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n    pointer-events: none;\\r\\n    text-align: 'center';\\r\\n    vertical-align: middle;\\r\\n    cursor: default;\\r\\n    padding: 2px;\\r\\n    color: #000000;\\r\\n    background: #FFFFFF;\\r\\n    border-radius: 10px;\\r\\n    -webkit-transform-origin: 50%  53%;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-label-text {\\r\\n    display: inline-block;\\r\\n    pointer-events: none;\\r\\n    text-align: 'center';\\r\\n    vertical-align: middle;\\r\\n    font-size: 12px;\\r\\n    cursor: default;\\r\\n    padding: 2px;\\r\\n    color: #000000;\\r\\n    background: #FFFFFF;\\r\\n    border-bottom: 1px dashed #000000;\\r\\n    text-decoration: none;\\r\\n    text-transform: uppercase;\\r\\n    -webkit-font-smoothing: antialiased;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-label-text:hover {\\r\\n    color: #039be5;\\r\\n    border-bottom: 1px dashed #039be5;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-label.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover,\\r\\n.adsk-viewing-viewer .calibration-endpoint.edit {\\r\\n    background-color: #039be5;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover > * ,\\r\\n.adsk-viewing-viewer .calibration-endpoint.edit > * {\\r\\n    color: #ffffff;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint.editable {\\r\\n    pointer-events: all;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n    cursor: move;\\r\\n    pointer-events: none;\\r\\n    width: 30px;\\r\\n    height: 30px;\\r\\n    background-color: #ffffff;\\r\\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.24), 0 0 8px 0 rgba(0, 0, 0, 0.12);\\r\\n    -moz-border-radius: 50px;\\r\\n    -webkit-border-radius: 50px;\\r\\n    border-radius: 50px;\\r\\n    justify-content:center;\\r\\n    align-items:center;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint-text {\\r\\n    display: inline-block;\\r\\n    font-size: 14px;\\r\\n    vertical-align: middle;\\r\\n    cursor: default;\\r\\n    margin: 5px 5px 5px 5px;\\r\\n    vertical-align: middle;\\r\\n    text-align: center;\\r\\n    color: #039be5;\\r\\n    text-decoration: none;\\r\\n    text-transform: uppercase;\\r\\n    pointer-events: none;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-buttons-wrapper {\\r\\n    text-align: center;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEwMDhBMzY4QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEwMDhBMzY5QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTAwOEEzNjZBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTAwOEEzNjdBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6WHWu4AAAAcElEQVR42mL8//8/AzmAiYFMgEtjGSFDcUmGAfEEIOYix6lWQLwUiGXJ8SNI00IgNiIncPiAeCoQ+5ITqsxQA+CAhQhN34C4AoiPkaLxGRAXAfEdUvx4DohjsGkCA1CSw4LrgZgVhxwYM9I9rQIEGACZNDs01yUXlAAAAABJRU5ErkJggg==\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_1___ = new URL(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE3QzFFQUQ1QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE3QzFFQUQ2QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTdDMUVBRDNBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTdDMUVBRDRBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6XuY60AAAARklEQVR42mL8//8/AzmAiYFMQBeNqSg8kB+JwKlAfAZZjIlIm9JJdSpWTYQ04tSETyNeTbg0EtSETSNRmkCAcegkOYAAAwDGjDZHvY373AAAAABJRU5ErkJggg==\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_2___ = new URL(\"res/icon-spinner-sm.svg\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"/* hover shouldn't work on mobile devices */\\r\\n.adsk-viewing-viewer .measure-length:hover.measure-length.enable-hover\\r\\n{\\r\\n\\tbox-shadow: 0 0 16px 3px rgba(0, 117, 210, 0.7);\\r\\n\\t-webkit-box-shadow: 0 0 16px 3px rgba(0, 117, 210, 0.7);\\r\\n    -moz-box-shadow: 0 0 16px 3px rgba(0, 117, 210, 0.7);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n\\r\\n    height: 19px;\\r\\n\\r\\n    left: 0px;\\r\\n    top:  0px;\\r\\n\\r\\n    padding: 2px 0 2px 0;\\r\\n\\r\\n    background-color: #009bff;\\r\\n    box-shadow: 0px 1px 3px 1px rgba(0,0,0,0.25);\\r\\n\\r\\n    color: #f4f4f4;\\r\\n    font-size:12px;\\r\\n    text-align: center;\\r\\n    line-height: 1.2;\\r\\n    white-space: nowrap;\\r\\n\\r\\n    border-radius: 8px;\\r\\n    pointer-events: none;\\r\\n    cursor: pointer;\\r\\n    z-index: 2;\\r\\n\\r\\n    -webkit-tap-highlight-color: rgba(0,0,0,0);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length.fetching-topology {\\r\\n    background-color: rgba(34, 34, 34, 0.8);\\r\\n    box-shadow: 0 0.5px 1.5px 0 rgba(0, 0, 0, 0.3);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length-text {\\r\\n    display: inline-block;\\r\\n    margin: 0 5px 0 5px;\\r\\n    vertical-align: middle;\\r\\n    font-size: 16px;\\r\\n    pointer-events: none;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-text {\\r\\n    margin: 0 5px 0 5px;\\r\\n    align-self: center;\\r\\n    font-size: 14px;\\r\\n\\toverflow: hidden;\\r\\n\\twhite-space: nowrap;\\r\\n\\theight: 16px;\\r\\n\\tline-height: 16px;\\r\\n\\tvertical-align: middle;\\r\\n\\tpointer-events: none;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length-button {\\r\\n    display: inline-block;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 16px;\\r\\n    float: right;\\r\\n\\r\\n    color: #FFFFFF;\\r\\n    opacity: 0.7;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length-button:hover {\\r\\n    background-color: rgba(166,194,255, 0.7);\\r\\n    -webkit-transition: all 0.2s ease;\\r\\n    -moz-transition: all 0.2s ease;\\r\\n    -ms-transition: all 0.2s ease;\\r\\n    -o-transition: all 0.2s ease;\\r\\n    transition: all 0.2s ease;\\r\\n}\\r\\n\\r\\n/* hover shouldn't work on mobile devices */\\r\\n.adsk-viewing-viewer .measure-label:hover.measure-label.enable-hover,\\r\\n.adsk-viewing-viewer .measure-label.on-edit {\\r\\n\\tbox-shadow: 0 0 4px 4px #0d69ca;\\r\\n\\t-webkit-box-shadow: 0 0 4px 4px #0d69ca;\\r\\n    -moz-box-shadow: 0 0 4px 4px #0d69ca;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label.editable {\\r\\n\\tpointer-events: all;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n    width: 7px;\\r\\n    height: 7px;\\r\\n    cursor: move;\\r\\n    pointer-events: none; \\r\\n    border-radius:100px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-hit-area {\\r\\n\\tdisplay: inline-block;\\r\\n    position: absolute;\\r\\n    width: 44px;\\r\\n    height: 44px;\\r\\n    left: -22px;\\r\\n    top: -22px;\\r\\n    border-radius:100px;\\r\\n    z-index: 2;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-icon {\\r\\n    display: inline-block;\\r\\n    position: absolute;\\r\\n    width: 7px;\\r\\n    height: 7px;\\r\\n    left: -2px;\\r\\n    top: -2px;\\r\\n    background-color: #009bff;\\r\\n    border-style: solid;\\r\\n    border-width: 2px;\\r\\n    border-color: #FFFFFF;\\r\\n    border-radius:100px;\\r\\n\\tbox-shadow: 0 2px 5px 0 #182A3D;\\r\\n\\tz-index: 2;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-text {\\r\\n    display: inline-block;\\r\\n    margin: 0px 5px 0px 5px;\\r\\n    vertical-align: middle;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-horizontal-divider\\r\\n{\\r\\n    height: 1px;\\r\\n    border-top: 1px solid rgba(200,200,200,0.8);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-submenu-select\\r\\n{\\r\\n    display: block;\\r\\n    position: relative;\\r\\n    width: calc(100% - 40px);\\r\\n    padding: 10px 20px 0px 20px;\\r\\n    opacity: 0.3;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .option-drop-down:disabled {\\r\\n    opacity: 0.3;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-submenu-selectlabel\\r\\n{\\r\\n    position: relative;\\r\\n    display:  inline-block;\\r\\n    padding-right:  20px;\\r\\n    padding-bottom:  4px;\\r\\n}\\r\\n\\r\\n/*.measure-result {*/\\r\\n    /*display: inline-block;*/\\r\\n    /*padding: 10px 0px  10px 20px;*/\\r\\n/*}*/\\r\\n\\r\\n.adsk-viewing-viewer .measure-results {\\r\\n    position: relative;\\r\\n    display: block;\\r\\n    padding: 5px 0px  10px 30px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-result-label {\\r\\n    display: inline-block;\\r\\n    padding-right: 10px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-result-number {\\r\\n    display: inline-block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-collapse {\\r\\n    position: absolute;\\r\\n    right: 20px;\\r\\n    display: inline-block;\\r\\n    background-color: rgba(255,255,255, .12);\\r\\n    margin: 0px 4px 0px 4px;\\r\\n    padding: 0px 4px 0px 4px;\\r\\n    cursor: pointer;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-collapse:hover {\\r\\n    background-color: rgba(166,194,255, 0.7);\\r\\n    -webkit-transition: all 0.2s ease;\\r\\n    -moz-transition: all 0.2s ease;\\r\\n    -ms-transition: all 0.2s ease;\\r\\n    -o-transition: all 0.2s ease;\\r\\n    transition: all 0.2s ease;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-repick {\\r\\n    position: absolute;\\r\\n    right: 20px;\\r\\n    display: inline-block;\\r\\n    background-color: rgba(255,255,255, .12);\\r\\n    margin: 4px 4px 4px 4px;\\r\\n    padding: 4px 4px 4px 4px;\\r\\n    cursor: pointer;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-repick:hover {\\r\\n    background-color: rgba(166,194,255, 0.7);\\r\\n    -webkit-transition: all 0.2s ease;\\r\\n    -moz-transition: all 0.2s ease;\\r\\n    -ms-transition: all 0.2s ease;\\r\\n    -o-transition: all 0.2s ease;\\r\\n    transition: all 0.2s ease;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-restart {\\r\\n    margin: 10px 20px 15px 20px;\\r\\n    padding: 6px 10px 6px 10px;\\r\\n    width: calc(100% - 55px);\\r\\n    cursor: pointer;\\r\\n    text-align: center;\\r\\n    border-style: solid;\\r\\n    border-width: 1px;\\r\\n    border-color: rgba(255, 255, 255, 0.2);\\r\\n    border-radius: 3px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .docking-panel:hover .measure-restart {\\r\\n    background-color: rgba(255,255,255, .12);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .docking-panel .measure-restart:hover {\\r\\n    background-color: rgba(166,194,255, 0.7);\\r\\n    -webkit-transition: all 0.2s ease;\\r\\n    -moz-transition: all 0.2s ease;\\r\\n    -ms-transition: all 0.2s ease;\\r\\n    -o-transition: all 0.2s ease;\\r\\n    transition: all 0.2s ease;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-panel-title {\\r\\n    padding-top:   0px;\\r\\n    padding-left: 20px;\\r\\n    margin-top: 10px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-panel-title:hover {\\r\\n    cursor: pointer;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-panel-title.collapsed  {\\r\\n    background-image: url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \");\\r\\n    background-repeat:no-repeat;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-panel-title.expanded  {\\r\\n    background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \");\\r\\n    background-repeat:no-repeat;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .adsk-viewing-viewer .measure-table td {\\r\\n    padding: 10px 0px  10px 20px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-result-container {\\r\\n\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-one-label {\\r\\n    display: inline-block;\\r\\n    margin: 18px 18px 18px 18px;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 16px;\\r\\n    float: left;\\r\\n\\r\\n    padding: 2px;\\r\\n    background-color: #0033FF;\\r\\n    border-radius:         10px;\\r\\n    opacity: 0.6;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-two-label {\\r\\n    display: inline-block;\\r\\n    margin: 18px 18px 18px 18px;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 16px;\\r\\n    float: left;\\r\\n\\r\\n    padding: 2px;\\r\\n    background-color: #0033FF;\\r\\n    border-radius:         10px;\\r\\n    opacity: 0.6;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-repick {\\r\\n    display: inline-block;\\r\\n    cursor: default;\\r\\n    margin: 20px 20px 20px 20px;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 16px;\\r\\n    float: right;\\r\\n    opacity: 0.5;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-repick:hover {\\r\\n    opacity: 1;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-result {\\r\\n    display: inline-block;\\r\\n    margin: 21px 0px 21px 0px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-distance-icon {\\r\\n    display: inline-block;\\r\\n    margin: 20px 2px 20px 2px;\\r\\n    font-size: 52px;\\r\\n    color: #FF9900;\\r\\n    float: left;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-angle-icon {\\r\\n    display: inline-block;\\r\\n    margin: 20px 2px 20px 2px;\\r\\n    font-size: 52px;\\r\\n    color: #FF9900;\\r\\n    float: left;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .adsk-viewing-viewer .measure-result {\\r\\n    font-size: 20px;\\r\\n    color: #FF9900;\\r\\n    display: inline-block;\\r\\n    margin: 38px 0px 38px 0px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-initial {\\r\\n    font-size: 20px;\\r\\n    display: inline-block;\\r\\n    margin: 38px 0px 38px 56px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-button {\\r\\n    cursor: default;\\r\\n    position: relative;\\r\\n    top: 20px;\\r\\n    right: 20px;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 18px;\\r\\n    float: right;\\r\\n    opacity: 0.5;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-button:hover {\\r\\n    opacity: 1;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-button {\\r\\n    position: relative;\\r\\n    top: 56px;\\r\\n    right: 4px;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 16px;\\r\\n    float: right;\\r\\n    opacity: 0.5;\\r\\n    -webkit-transform : rotate(-90deg);\\r\\n    -moz-transform : rotate(-90deg);\\r\\n    -ms-transform : rotate(-90deg);\\r\\n    -o-transform : rotate(-90deg);\\r\\n    transform : rotate(-90deg);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-button.rotated {\\r\\n    -webkit-transform : rotate(90deg);\\r\\n    -moz-transform : rotate(90deg);\\r\\n    -ms-transform : rotate(90deg);\\r\\n    -o-transform : rotate(90deg);\\r\\n    transform : rotate(90deg);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-button:hover {\\r\\n    opacity: 1;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-result {\\r\\n    display: inline-block;\\r\\n    margin: 0px 0px 20px 0px;\\r\\n    padding: 0px 0px 0px 56px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n\\r\\n    left: 0px;\\r\\n    top:  0px;\\r\\n\\r\\n    background-color: #f4f4f4;\\r\\n    border-radius: 8px;\\r\\n    pointer-events: none;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-icon.X {\\r\\n    background-color: #EC4545;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-icon.Y {\\r\\n    background-color: #45C345;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-icon.Z {\\r\\n    background-color: #5757DA;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-icon {\\r\\n\\twidth: 20px;\\r\\n    height: 18px;\\r\\n    color: #f4f4f4;\\r\\n    border-radius: 8px 0 0 8px;\\r\\n    font-size: 12px;\\r\\n    padding-top: 4px;\\r\\n    line-height: 15px;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n/* hover shouldn't work on mobile devices */\\r\\n.adsk-viewing-viewer .measure-label-axis-delta.enableTransition{\\r\\n\\ttransition: opacity 0.1s linear;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-delta {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n    font-size: 18px;\\r\\n\\r\\n    left: 0px;\\r\\n    top:  0px;\\r\\n\\r\\n    background-color: #ffffff;\\r\\n    pointer-events: none;\\r\\n    \\r\\n    opacity: 0;\\r\\n\\r\\n    border-radius: 8px;\\r\\n    box-shadow: 0px 1px 3px 1px rgba(0,0,0,0.25);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-delta.visible {\\r\\n    display: flex;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-x {\\r\\n    color: #EC4545;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-y {\\r\\n    color: #45C345;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-z {\\r\\n    color: #5757DA;\\r\\n}\\r\\n\\r\\n\\r\\n.adsk-viewing-viewer .magnifying-glass.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .magnifying-glass {\\r\\n    position: absolute;\\r\\n    display: none;\\r\\n    -moz-border-radius: 100%;\\r\\n    -webkit-border-radius: 100%;\\r\\n    border-radius: 100%;\\r\\n    background: transparent;\\r\\n    box-shadow: 2px 2px 4px rgba(0,0,0,0.5), inset 2px 2px 4px rgba(0,0,0,.5);\\r\\n    -webkit-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5), inset 2px 2px 4px rgba(0,0,0,.5);  \\r\\n    -moz-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5), inset 2px 2px 4px rgba(0,0,0,.5);\\r\\n    z-index: 4;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-fetching-topology {\\r\\n    display: inline-block;\\r\\n    width: 10px;\\r\\n    height: 10px;\\r\\n    background: url(\" + ___CSS_LOADER_URL_REPLACEMENT_2___ + \");\\r\\n    margin: 3px 0px -2px 3px;\\r\\n    animation: measure-topology-fetching-anim 1.4s infinite linear;\\r\\n    -webkit-animation: measure-topology-fetching-anim 1.4s infinite linear;\\r\\n}\\r\\n\\r\\n@keyframes measure-topology-fetching-anim {\\r\\n    0% {\\r\\n        -webkit-transform: rotate(0deg);\\r\\n        transform: rotate(0deg);\\r\\n    }\\r\\n    100% {\\r\\n        -webkit-transform: rotate(360deg);\\r\\n        transform: rotate(360deg);\\r\\n    }\\r\\n}\\r\\n\\r\\n@-webkit-keyframes measure-topology-fetching-anim {\\r\\n    0% {\\r\\n        -webkit-transform: rotate(0deg);\\r\\n        transform: rotate(0deg);\\r\\n    }\\r\\n    100% {\\r\\n        -webkit-transform: rotate(360deg);\\r\\n        transform: rotate(360deg);\\r\\n    }\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .docking-panel.measure-settings-popup {\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    flex-direction: column;\\r\\n    bottom: 120%;\\r\\n    box-sizing: border-box;\\r\\n    text-align: left;\\r\\n    position: absolute;\\r\\n    padding-top: 15px;\\r\\n    padding-bottom: 15px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .adsk-toolbar-vertical .docking-panel.measure-settings-popup {\\r\\n    right: 120%;\\r\\n    bottom: unset;\\r\\n    height: max-content;\\r\\n    width: max-content;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .docking-panel.measure-settings-popup .adsk-lmv-tftable tr.switch-slider-row td {\\r\\n    width: auto;\\r\\n    padding-bottom: 0px;\\r\\n    padding-top: 0px;\\r\\n    vertical-align: inherit;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .docking-panel.measure-settings-popup.hide {\\r\\n    display: none;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-popup tbody {\\r\\n    top: 15px;\\r\\n}\\r\\n\\r\\n.adsk-toolbar .measure-toolbar-seperator {\\r\\n    height: 18px;\\r\\n    width: 1px;\\r\\n    background-color: #999;\\r\\n    float: left;\\r\\n    margin: 16px 5px;\\r\\n}\\r\\n\\r\\n.adsk-toolbar.adsk-toolbar-vertical .measure-toolbar-seperator {\\r\\n    height: 1px;\\r\\n    width: 18px;\\r\\n    margin: 5px 16px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-area {\\r\\n\\tdisplay: block;\\r\\n\\tposition: absolute;\\r\\n\\tcursor: pointer;\\r\\n\\tz-index: 1;\\r\\n\\t-webkit-tap-highlight-color: rgba(0,0,0,0);\\r\\n}\\r\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./Measure/Measure.css\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"/* hover shouldn't work on mobile devices */\\r\\n.adsk-viewing-viewer .measure-length:hover.measure-length.enable-hover\\r\\n{\\r\\n\\tbox-shadow: 0 0 16px 3px rgba(0, 117, 210, 0.7);\\r\\n\\t-webkit-box-shadow: 0 0 16px 3px rgba(0, 117, 210, 0.7);\\r\\n    -moz-box-shadow: 0 0 16px 3px rgba(0, 117, 210, 0.7);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n\\r\\n    height: 19px;\\r\\n\\r\\n    left: 0px;\\r\\n    top:  0px;\\r\\n\\r\\n    padding: 2px 0 2px 0;\\r\\n\\r\\n    background-color: #009bff;\\r\\n    box-shadow: 0px 1px 3px 1px rgba(0,0,0,0.25);\\r\\n\\r\\n    color: #f4f4f4;\\r\\n    font-size:12px;\\r\\n    text-align: center;\\r\\n    line-height: 1.2;\\r\\n    white-space: nowrap;\\r\\n\\r\\n    border-radius: 8px;\\r\\n    pointer-events: none;\\r\\n    cursor: pointer;\\r\\n    z-index: 2;\\r\\n\\r\\n    -webkit-tap-highlight-color: rgba(0,0,0,0);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length.fetching-topology {\\r\\n    background-color: rgba(34, 34, 34, 0.8);\\r\\n    box-shadow: 0 0.5px 1.5px 0 rgba(0, 0, 0, 0.3);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length-text {\\r\\n    display: inline-block;\\r\\n    margin: 0 5px 0 5px;\\r\\n    vertical-align: middle;\\r\\n    font-size: 16px;\\r\\n    pointer-events: none;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-text {\\r\\n    margin: 0 5px 0 5px;\\r\\n    align-self: center;\\r\\n    font-size: 14px;\\r\\n\\toverflow: hidden;\\r\\n\\twhite-space: nowrap;\\r\\n\\theight: 16px;\\r\\n\\tline-height: 16px;\\r\\n\\tvertical-align: middle;\\r\\n\\tpointer-events: none;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length-button {\\r\\n    display: inline-block;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 16px;\\r\\n    float: right;\\r\\n\\r\\n    color: #FFFFFF;\\r\\n    opacity: 0.7;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length-button:hover {\\r\\n    background-color: rgba(166,194,255, 0.7);\\r\\n    -webkit-transition: all 0.2s ease;\\r\\n    -moz-transition: all 0.2s ease;\\r\\n    -ms-transition: all 0.2s ease;\\r\\n    -o-transition: all 0.2s ease;\\r\\n    transition: all 0.2s ease;\\r\\n}\\r\\n\\r\\n/* hover shouldn't work on mobile devices */\\r\\n.adsk-viewing-viewer .measure-label:hover.measure-label.enable-hover,\\r\\n.adsk-viewing-viewer .measure-label.on-edit {\\r\\n\\tbox-shadow: 0 0 4px 4px #0d69ca;\\r\\n\\t-webkit-box-shadow: 0 0 4px 4px #0d69ca;\\r\\n    -moz-box-shadow: 0 0 4px 4px #0d69ca;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label.editable {\\r\\n\\tpointer-events: all;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n    width: 7px;\\r\\n    height: 7px;\\r\\n    cursor: move;\\r\\n    pointer-events: none; \\r\\n    border-radius:100px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-hit-area {\\r\\n\\tdisplay: inline-block;\\r\\n    position: absolute;\\r\\n    width: 44px;\\r\\n    height: 44px;\\r\\n    left: -22px;\\r\\n    top: -22px;\\r\\n    border-radius:100px;\\r\\n    z-index: 2;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-icon {\\r\\n    display: inline-block;\\r\\n    position: absolute;\\r\\n    width: 7px;\\r\\n    height: 7px;\\r\\n    left: -2px;\\r\\n    top: -2px;\\r\\n    background-color: #009bff;\\r\\n    border-style: solid;\\r\\n    border-width: 2px;\\r\\n    border-color: #FFFFFF;\\r\\n    border-radius:100px;\\r\\n\\tbox-shadow: 0 2px 5px 0 #182A3D;\\r\\n\\tz-index: 2;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-text {\\r\\n    display: inline-block;\\r\\n    margin: 0px 5px 0px 5px;\\r\\n    vertical-align: middle;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-horizontal-divider\\r\\n{\\r\\n    height: 1px;\\r\\n    border-top: 1px solid rgba(200,200,200,0.8);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-submenu-select\\r\\n{\\r\\n    display: block;\\r\\n    position: relative;\\r\\n    width: calc(100% - 40px);\\r\\n    padding: 10px 20px 0px 20px;\\r\\n    opacity: 0.3;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .option-drop-down:disabled {\\r\\n    opacity: 0.3;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-submenu-selectlabel\\r\\n{\\r\\n    position: relative;\\r\\n    display:  inline-block;\\r\\n    padding-right:  20px;\\r\\n    padding-bottom:  4px;\\r\\n}\\r\\n\\r\\n/*.measure-result {*/\\r\\n    /*display: inline-block;*/\\r\\n    /*padding: 10px 0px  10px 20px;*/\\r\\n/*}*/\\r\\n\\r\\n.adsk-viewing-viewer .measure-results {\\r\\n    position: relative;\\r\\n    display: block;\\r\\n    padding: 5px 0px  10px 30px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-result-label {\\r\\n    display: inline-block;\\r\\n    padding-right: 10px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-result-number {\\r\\n    display: inline-block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-collapse {\\r\\n    position: absolute;\\r\\n    right: 20px;\\r\\n    display: inline-block;\\r\\n    background-color: rgba(255,255,255, .12);\\r\\n    margin: 0px 4px 0px 4px;\\r\\n    padding: 0px 4px 0px 4px;\\r\\n    cursor: pointer;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-collapse:hover {\\r\\n    background-color: rgba(166,194,255, 0.7);\\r\\n    -webkit-transition: all 0.2s ease;\\r\\n    -moz-transition: all 0.2s ease;\\r\\n    -ms-transition: all 0.2s ease;\\r\\n    -o-transition: all 0.2s ease;\\r\\n    transition: all 0.2s ease;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-repick {\\r\\n    position: absolute;\\r\\n    right: 20px;\\r\\n    display: inline-block;\\r\\n    background-color: rgba(255,255,255, .12);\\r\\n    margin: 4px 4px 4px 4px;\\r\\n    padding: 4px 4px 4px 4px;\\r\\n    cursor: pointer;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-repick:hover {\\r\\n    background-color: rgba(166,194,255, 0.7);\\r\\n    -webkit-transition: all 0.2s ease;\\r\\n    -moz-transition: all 0.2s ease;\\r\\n    -ms-transition: all 0.2s ease;\\r\\n    -o-transition: all 0.2s ease;\\r\\n    transition: all 0.2s ease;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-restart {\\r\\n    margin: 10px 20px 15px 20px;\\r\\n    padding: 6px 10px 6px 10px;\\r\\n    width: calc(100% - 55px);\\r\\n    cursor: pointer;\\r\\n    text-align: center;\\r\\n    border-style: solid;\\r\\n    border-width: 1px;\\r\\n    border-color: rgba(255, 255, 255, 0.2);\\r\\n    border-radius: 3px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .docking-panel:hover .measure-restart {\\r\\n    background-color: rgba(255,255,255, .12);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .docking-panel .measure-restart:hover {\\r\\n    background-color: rgba(166,194,255, 0.7);\\r\\n    -webkit-transition: all 0.2s ease;\\r\\n    -moz-transition: all 0.2s ease;\\r\\n    -ms-transition: all 0.2s ease;\\r\\n    -o-transition: all 0.2s ease;\\r\\n    transition: all 0.2s ease;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-panel-title {\\r\\n    padding-top:   0px;\\r\\n    padding-left: 20px;\\r\\n    margin-top: 10px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-panel-title:hover {\\r\\n    cursor: pointer;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-panel-title.collapsed  {\\r\\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEwMDhBMzY4QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEwMDhBMzY5QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTAwOEEzNjZBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTAwOEEzNjdBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6WHWu4AAAAcElEQVR42mL8//8/AzmAiYFMgEtjGSFDcUmGAfEEIOYix6lWQLwUiGXJ8SNI00IgNiIncPiAeCoQ+5ITqsxQA+CAhQhN34C4AoiPkaLxGRAXAfEdUvx4DohjsGkCA1CSw4LrgZgVhxwYM9I9rQIEGACZNDs01yUXlAAAAABJRU5ErkJggg==);\\r\\n    background-repeat:no-repeat;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-panel-title.expanded  {\\r\\n    background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE3QzFFQUQ1QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE3QzFFQUQ2QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTdDMUVBRDNBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTdDMUVBRDRBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6XuY60AAAARklEQVR42mL8//8/AzmAiYFMQBeNqSg8kB+JwKlAfAZZjIlIm9JJdSpWTYQ04tSETyNeTbg0EtSETSNRmkCAcegkOYAAAwDGjDZHvY373AAAAABJRU5ErkJggg==);\\r\\n    background-repeat:no-repeat;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .adsk-viewing-viewer .measure-table td {\\r\\n    padding: 10px 0px  10px 20px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-result-container {\\r\\n\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-one-label {\\r\\n    display: inline-block;\\r\\n    margin: 18px 18px 18px 18px;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 16px;\\r\\n    float: left;\\r\\n\\r\\n    padding: 2px;\\r\\n    background-color: #0033FF;\\r\\n    border-radius:         10px;\\r\\n    opacity: 0.6;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-two-label {\\r\\n    display: inline-block;\\r\\n    margin: 18px 18px 18px 18px;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 16px;\\r\\n    float: left;\\r\\n\\r\\n    padding: 2px;\\r\\n    background-color: #0033FF;\\r\\n    border-radius:         10px;\\r\\n    opacity: 0.6;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-repick {\\r\\n    display: inline-block;\\r\\n    cursor: default;\\r\\n    margin: 20px 20px 20px 20px;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 16px;\\r\\n    float: right;\\r\\n    opacity: 0.5;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-repick:hover {\\r\\n    opacity: 1;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-result {\\r\\n    display: inline-block;\\r\\n    margin: 21px 0px 21px 0px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-distance-icon {\\r\\n    display: inline-block;\\r\\n    margin: 20px 2px 20px 2px;\\r\\n    font-size: 52px;\\r\\n    color: #FF9900;\\r\\n    float: left;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-angle-icon {\\r\\n    display: inline-block;\\r\\n    margin: 20px 2px 20px 2px;\\r\\n    font-size: 52px;\\r\\n    color: #FF9900;\\r\\n    float: left;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .adsk-viewing-viewer .measure-result {\\r\\n    font-size: 20px;\\r\\n    color: #FF9900;\\r\\n    display: inline-block;\\r\\n    margin: 38px 0px 38px 0px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-initial {\\r\\n    font-size: 20px;\\r\\n    display: inline-block;\\r\\n    margin: 38px 0px 38px 56px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-button {\\r\\n    cursor: default;\\r\\n    position: relative;\\r\\n    top: 20px;\\r\\n    right: 20px;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 18px;\\r\\n    float: right;\\r\\n    opacity: 0.5;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-button:hover {\\r\\n    opacity: 1;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-button {\\r\\n    position: relative;\\r\\n    top: 56px;\\r\\n    right: 4px;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 16px;\\r\\n    float: right;\\r\\n    opacity: 0.5;\\r\\n    -webkit-transform : rotate(-90deg);\\r\\n    -moz-transform : rotate(-90deg);\\r\\n    -ms-transform : rotate(-90deg);\\r\\n    -o-transform : rotate(-90deg);\\r\\n    transform : rotate(-90deg);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-button.rotated {\\r\\n    -webkit-transform : rotate(90deg);\\r\\n    -moz-transform : rotate(90deg);\\r\\n    -ms-transform : rotate(90deg);\\r\\n    -o-transform : rotate(90deg);\\r\\n    transform : rotate(90deg);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-button:hover {\\r\\n    opacity: 1;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-result {\\r\\n    display: inline-block;\\r\\n    margin: 0px 0px 20px 0px;\\r\\n    padding: 0px 0px 0px 56px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n\\r\\n    left: 0px;\\r\\n    top:  0px;\\r\\n\\r\\n    background-color: #f4f4f4;\\r\\n    border-radius: 8px;\\r\\n    pointer-events: none;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-icon.X {\\r\\n    background-color: #EC4545;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-icon.Y {\\r\\n    background-color: #45C345;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-icon.Z {\\r\\n    background-color: #5757DA;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-icon {\\r\\n\\twidth: 20px;\\r\\n    height: 18px;\\r\\n    color: #f4f4f4;\\r\\n    border-radius: 8px 0 0 8px;\\r\\n    font-size: 12px;\\r\\n    padding-top: 4px;\\r\\n    line-height: 15px;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n/* hover shouldn't work on mobile devices */\\r\\n.adsk-viewing-viewer .measure-label-axis-delta.enableTransition{\\r\\n\\ttransition: opacity 0.1s linear;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-delta {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n    font-size: 18px;\\r\\n\\r\\n    left: 0px;\\r\\n    top:  0px;\\r\\n\\r\\n    background-color: #ffffff;\\r\\n    pointer-events: none;\\r\\n    \\r\\n    opacity: 0;\\r\\n\\r\\n    border-radius: 8px;\\r\\n    box-shadow: 0px 1px 3px 1px rgba(0,0,0,0.25);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-delta.visible {\\r\\n    display: flex;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-x {\\r\\n    color: #EC4545;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-y {\\r\\n    color: #45C345;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-z {\\r\\n    color: #5757DA;\\r\\n}\\r\\n\\r\\n\\r\\n.adsk-viewing-viewer .magnifying-glass.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .magnifying-glass {\\r\\n    position: absolute;\\r\\n    display: none;\\r\\n    -moz-border-radius: 100%;\\r\\n    -webkit-border-radius: 100%;\\r\\n    border-radius: 100%;\\r\\n    background: transparent;\\r\\n    box-shadow: 2px 2px 4px rgba(0,0,0,0.5), inset 2px 2px 4px rgba(0,0,0,.5);\\r\\n    -webkit-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5), inset 2px 2px 4px rgba(0,0,0,.5);  \\r\\n    -moz-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5), inset 2px 2px 4px rgba(0,0,0,.5);\\r\\n    z-index: 4;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-fetching-topology {\\r\\n    display: inline-block;\\r\\n    width: 10px;\\r\\n    height: 10px;\\r\\n    background: url(res/icon-spinner-sm.svg);\\r\\n    margin: 3px 0px -2px 3px;\\r\\n    animation: measure-topology-fetching-anim 1.4s infinite linear;\\r\\n    -webkit-animation: measure-topology-fetching-anim 1.4s infinite linear;\\r\\n}\\r\\n\\r\\n@keyframes measure-topology-fetching-anim {\\r\\n    0% {\\r\\n        -webkit-transform: rotate(0deg);\\r\\n        transform: rotate(0deg);\\r\\n    }\\r\\n    100% {\\r\\n        -webkit-transform: rotate(360deg);\\r\\n        transform: rotate(360deg);\\r\\n    }\\r\\n}\\r\\n\\r\\n@-webkit-keyframes measure-topology-fetching-anim {\\r\\n    0% {\\r\\n        -webkit-transform: rotate(0deg);\\r\\n        transform: rotate(0deg);\\r\\n    }\\r\\n    100% {\\r\\n        -webkit-transform: rotate(360deg);\\r\\n        transform: rotate(360deg);\\r\\n    }\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .docking-panel.measure-settings-popup {\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    flex-direction: column;\\r\\n    bottom: 120%;\\r\\n    box-sizing: border-box;\\r\\n    text-align: left;\\r\\n    position: absolute;\\r\\n    padding-top: 15px;\\r\\n    padding-bottom: 15px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .adsk-toolbar-vertical .docking-panel.measure-settings-popup {\\r\\n    right: 120%;\\r\\n    bottom: unset;\\r\\n    height: max-content;\\r\\n    width: max-content;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .docking-panel.measure-settings-popup .adsk-lmv-tftable tr.switch-slider-row td {\\r\\n    width: auto;\\r\\n    padding-bottom: 0px;\\r\\n    padding-top: 0px;\\r\\n    vertical-align: inherit;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .docking-panel.measure-settings-popup.hide {\\r\\n    display: none;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-popup tbody {\\r\\n    top: 15px;\\r\\n}\\r\\n\\r\\n.adsk-toolbar .measure-toolbar-seperator {\\r\\n    height: 18px;\\r\\n    width: 1px;\\r\\n    background-color: #999;\\r\\n    float: left;\\r\\n    margin: 16px 5px;\\r\\n}\\r\\n\\r\\n.adsk-toolbar.adsk-toolbar-vertical .measure-toolbar-seperator {\\r\\n    height: 1px;\\r\\n    width: 18px;\\r\\n    margin: 5px 16px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-area {\\r\\n\\tdisplay: block;\\r\\n\\tposition: absolute;\\r\\n\\tcursor: pointer;\\r\\n\\tz-index: 1;\\r\\n\\t-webkit-tap-highlight-color: rgba(0,0,0,0);\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n\n      content += cssWithMappingToString(item);\n\n      if (needLayer) {\n        content += \"}\";\n      }\n\n      if (item[2]) {\n        content += \"}\";\n      }\n\n      if (item[4]) {\n        content += \"}\";\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n\n\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    options = {};\n  }\n\n  if (!url) {\n    return url;\n  }\n\n  url = String(url.__esModule ? url.default : url); // If url is already wrapped in quotes, remove them\n\n  if (/^['\"].*['\"]$/.test(url)) {\n    url = url.slice(1, -1);\n  }\n\n  if (options.hash) {\n    url += options.hash;\n  } // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n\n\n  if (/[\"'() \\t\\n]|(%20)/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, \"\\\\n\"), \"\\\"\");\n  }\n\n  return url;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl + \"../\";","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t900: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","__webpack_require__.nc = undefined;","\r\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon; //These come from main lmv bundle.\r\n\r\n    // /** @constructor */\r\n    export function MeasurementsManager(viewer)\r\n    {   \r\n        this.viewer = viewer;\r\n        this.init();\r\n\r\n        this.restoredMeasurementData = [];\r\n    }\r\n\r\n    var proto = MeasurementsManager.prototype;\r\n\r\n    proto.getCurrentMeasurement = function() {\r\n        return this.currentMeasurement;\r\n    };\r\n\r\n    proto.getRestoredMeasurementData = function() {\r\n        return this.restoredMeasurementData.slice();\r\n    }\r\n\r\n    proto.selectMeasurementById = function(id) {\r\n        var measurement = this.measurementsList[id];\r\n        \r\n        if (measurement) {\r\n            this.changeCurrentMeasurement(measurement);\r\n            return this.currentMeasurement;    \r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    proto.createMeasurement = function(measurementType) {\r\n        var id = this.measurementsCounter;\r\n        var measurement = new MeasureCommon.Measurement(measurementType, id);\r\n        this.measurementsList[id] = measurement;\r\n        this.measurementsCounter++;\r\n        this.changeCurrentMeasurement(measurement);\r\n        return this.currentMeasurement;\r\n    };\r\n\r\n    // Renders measurements from data.\r\n    proto.createMeasurementFromData = function(measurementData, measurementType, createIndicatorCb, preparePicksCb) {\r\n        this.createMeasurement(measurementType);\r\n        if (createIndicatorCb instanceof Function) {\r\n            createIndicatorCb(this.currentMeasurement);\r\n        }\r\n\r\n        this.initPicks(measurementData.picks);\r\n\r\n        if (preparePicksCb instanceof Function) {\r\n            preparePicksCb();\r\n        }\r\n\r\n        if (this.currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA) {\r\n            this.currentMeasurement.closedArea = true;\r\n        }\r\n\r\n        this.currentMeasurement.isRestored = true;\r\n\r\n        const convertUnits = (value, square) => {\r\n            return Autodesk.Viewing.Private.convertUnits(\r\n                measurementData.sharedUnits,\r\n                this.viewer.model.getUnitString(),\r\n                measurementData.sharedCalibrationFactor,\r\n                parseFloat(value),\r\n                square\r\n            );\r\n        };\r\n\r\n        this.currentMeasurement.distanceXYZ = convertUnits(measurementData.distance);\r\n        this.currentMeasurement.distanceX = convertUnits(measurementData.deltaX);\r\n        this.currentMeasurement.distanceY = convertUnits(measurementData.deltaY);\r\n        this.currentMeasurement.distanceZ = convertUnits(measurementData.deltaZ);\r\n\r\n        this.currentMeasurement.area = convertUnits(measurementData.area, 'square');\r\n        this.currentMeasurement.angle = parseFloat(measurementData.angle);\r\n\r\n        const getIntersectPoints = () => {\r\n            const points = this.restoredMeasurementData[this.currentMeasurement.id];\r\n            const keys = Object.keys(points);\r\n            const intersectPoints = [];\r\n            for (let i = 0; i < keys.length; i++) {\r\n                const key = keys[i];\r\n                const pointData = points[key];\r\n                intersectPoints[key] = pointData.intersection;\r\n            }\r\n            return intersectPoints;\r\n        };\r\n\r\n        // This will render the measurements\r\n        this.currentMeasurement.indicator.renderFromPoints(getIntersectPoints(), true);\r\n\r\n        this.currentMeasurement.indicator.changeAllEndpointsEditableStyle(true);\r\n        this.currentMeasurement.indicator.enableSelectionAreas(true);\r\n        this.currentMeasurement.indicator.enableLabelsTouchEvents(true);\r\n\r\n        this.activatePicks();\r\n    };\r\n\r\n    // Initializes picks from pick data\r\n    proto.initPicks = function(pickData) {\r\n        if (!pickData) return;\r\n        const points = [];\r\n\r\n        for (let i = 0; i < pickData.length; i++) {\r\n            const pick = pickData[i];\r\n            if (!pick) continue;\r\n            const key = i + 1;\r\n\r\n            let pickPoint = new THREE.Vector3(pick.intersection.x, pick.intersection.y, pick.intersection.z);\r\n            const model =\r\n                pick.hasOwnProperty('modelId') && pick.modelId\r\n                    ? this.viewer.impl.findModel(pick.modelId)\r\n                    : this.viewer.model;\r\n\r\n            if (model) {\r\n                const modelData = model.getData();\r\n                pickPoint =\r\n                    modelData && modelData.hasOwnProperty('globalOffset')\r\n                        ? pickPoint.add(modelData.globalOffset).clone()\r\n                        : pickPoint.clone();\r\n            }\r\n\r\n            points[key] = {\r\n                intersection: pickPoint,\r\n                viewportId: pick.viewportIndex2d,\r\n                hasTopology: pick.hasTopology,\r\n                modelId: pick.modelId\r\n            };\r\n            this.currentMeasurement.getPick(key);\r\n        }\r\n\r\n        this.restoredMeasurementData[this.currentMeasurement.id] = points;\r\n    };\r\n\r\n    // Stores information from the restored measurement pick data in the current measurement picks\r\n    proto.activatePicks = function() {\r\n        if (!this.currentMeasurement.picks) return;\r\n        const keys = Object.keys(this.currentMeasurement.picks);\r\n\r\n        const id = this.currentMeasurement.id;\r\n        for (let i = 0; i < keys.length; i++) {\r\n            const key = keys[i];\r\n\r\n            const pick = this.currentMeasurement.picks[key];\r\n            const restoredMeasurements = this.getRestoredMeasurementData();\r\n            const pointInfo = restoredMeasurements[id][key];\r\n            let p = pointInfo.intersection.clone();\r\n\r\n            if (!pick.getGeometry() && pointInfo.intersection) {\r\n                pick.geomType = MeasureCommon.SnapType.SNAP_VERTEX;\r\n                pick.geomVertex = p;\r\n                pick.intersectPoint = p;\r\n                pick.modelId = pointInfo.modelId;\r\n\r\n                // Set the isRestored flag if all of the picks are valid.\r\n                pick.viewportIndex2d = pointInfo.viewportId;\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.changeCurrentMeasurement = function(measurement) {\r\n        this.currentMeasurement = measurement;\r\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, data: { type: measurement.measurementType, id: measurement.id }});\r\n    };\r\n\r\n    proto.removeCurrentMeasurement = function() { \r\n        // Remove current measurement from the list\r\n        if (Object.keys(this.measurementsList).length > 0) {\r\n            delete this.measurementsList[this.currentMeasurement.id];\r\n        }\r\n    };\r\n\r\n    proto.init = function() {\r\n        this.reset();\r\n    };\r\n\r\n    proto.destroy = function() {\r\n        this.reset();\r\n    };\r\n\r\n    proto.reset = function() {\r\n        this.currentMeasurement = null;\r\n        this.measurementsList = {};\r\n        this.measurementsCounter = 0;\r\n    };\r\n\r\n","\r\n    var av = Autodesk.Viewing;\r\n    var MeasureCommon = av.MeasureCommon;\r\n    \r\n    /**\r\n     * Base class for an indicator.\r\n     */\r\n\r\n    export var Indicator = function(viewer, measurement, tool)\r\n    {\r\n        this.viewer = viewer;\r\n        this.setGlobalManager(viewer.globalManager);\r\n        this.measurement = measurement;\r\n        this.tool = tool;\r\n        this.snapper = tool.getSnapper();\r\n        this.materialExtensionLine = null;\r\n        this.materialExtensionFace = null;\r\n        this.extensionLines = [];\r\n        this.extensionFaces = [];\r\n        this.grayOutPlane = [];\r\n        this.materialPoint = null;\r\n        this.materialLine = null;\r\n        this.materialAngle = null;\r\n        this.materialAngleOutline = null;\r\n        this.materialGreyOutPlane = null;\r\n        this.materialFace = null;\r\n        this.angleArc = null;\r\n        this.angleOutline = [];\r\n        this.showMeasureResult = false;\r\n        this.visibleLabels = [];\r\n        this.overlayName = 'measure-indicator-overlay-' + (measurement.id || '');\r\n        this.xAxis = this.viewer.autocam.getWorldRightVector();\r\n        this.yAxis = this.viewer.autocam.getWorldUpVector();\r\n        this.zAxis = this.viewer.autocam.getWorldFrontVector();\r\n    };\r\n\r\n\r\n\r\n    var proto = Indicator.prototype;\r\n    av.GlobalManagerMixin.call(proto);\r\n\r\n    proto.init = function() {\r\n        return false;\r\n    };\r\n\r\n    proto.updateDistance = function() {\r\n        return false;\r\n    };\r\n\r\n    proto.updateAngle = function() {\r\n        return false;\r\n    };\r\n\r\n    proto.clear = function() {\r\n        return false;\r\n    };\r\n\r\n    proto.updateLabelsPosition = function() {\r\n        return false;\r\n    };\r\n\r\n    proto.renderFromPoints = function(points, showMeasureResult) {\r\n        this.showMeasureResult = showMeasureResult;\r\n\r\n        this.clear();\r\n\r\n        for (var i = 1; i <= Object.keys(points).length; i++) {\r\n            const p = points[i];\r\n            if (!this.endpoints[i]) {\r\n                this.createEndpoint(i);\r\n            }\r\n    \r\n            this.endpoints[i].position = new THREE.Vector3(p.x, p.y, p.z);\r\n            this.showClick(i);\r\n        }\r\n            \r\n        this.renderRubberbandFromPoints(points);\r\n        \r\n        this.updateLabelsPosition();\r\n    };\r\n\r\n    // Renders the measurement and the labels.\r\n    proto.render = function(picks, showMeasureResult) {\r\n\r\n        this.showMeasureResult = showMeasureResult;\r\n\r\n        this.clear();\r\n\r\n        for (var i = 1; i <= Object.keys(picks).length; i++) {\r\n            if (this.measurement.hasPick(i)) {\r\n                this.renderPick(i);\r\n            }\r\n        }\r\n            \r\n        this.renderRubberband(picks);\r\n        \r\n        this.updateLabelsPosition();\r\n    };\r\n\r\n    proto.changeEndpointOnEditStyle = function(endpointNumber, isEditing) {\r\n        return false;\r\n    };\r\n\r\n    proto.handleResize = function() {\r\n        return false;\r\n    };\r\n\r\n    proto.setNoTopology = function() {\r\n        return false;\r\n    };\r\n\r\n    proto.setFetchingTopology = function() {\r\n        return false;\r\n    };\r\n\r\n    proto.setTopologyAvailable = function() {\r\n        return false;\r\n    };\r\n\r\n    proto.clientToCanvasCoords = function(event) {\r\n        var rect = this.viewer.impl.getCanvasBoundingClientRect();\r\n        var res = {};\r\n        if( event.hasOwnProperty(\"center\") )\r\n        {\r\n            event.canvasX = res.x = event.center.x - rect.left;\r\n            event.canvasY = res.y = event.center.y - rect.top;\r\n        }\r\n        else\r\n        {\r\n            event.canvasX = res.x = event.pointers[0].clientX - rect.left;\r\n            event.canvasY = res.y = event.pointers[0].clientY - rect.top;\r\n        }\r\n\r\n        return res;\r\n    };\r\n\r\n    proto.initLabelMobileGestures = function(label, pointNumber) {\r\n        var magnifyingGlass = this.viewer.toolController.getTool(\"magnifyingGlass\");\r\n\r\n        this.hammer = new av.Hammer.Manager(label, {\r\n                recognizers: [\r\n                    av.GestureRecognizers.drag,\r\n                    av.GestureRecognizers.singletap\r\n                ],\r\n                handlePointerEventMouse: false,\r\n                inputClass: av.isIE11 ? av.Hammer.PointerEventInput : av.Hammer.TouchInput\r\n            });\r\n\r\n        this.onSingleTapBinded = function(event) { \r\n                                    var pos = this.clientToCanvasCoords(event);\r\n                                    this.snapper.onMouseDown(pos);\r\n                                    this.tool.editEndpoint(event, pointNumber, this.measurement.id); \r\n                                }.bind(this);\r\n\r\n        this.onDragStartBinded = function(event) {\r\n                                    var pos = this.clientToCanvasCoords(event);\r\n                                    this.snapper.onMouseDown(pos);\r\n                                    this.tool.editEndpoint(event, pointNumber, this.measurement.id);\r\n                                    this.tool.editByDrag = true;\r\n\r\n                                    // Activate Magnifying Glass and tool by faking press event.\r\n                                    event.type = \"press\";\r\n                                    magnifyingGlass.handlePressHold(event);\r\n                                    this.tool.handlePressHold(event);\r\n                                    event.type = \"dragstart\";\r\n                                    magnifyingGlass.handleGesture(event);\r\n                                    this.tool.handleGesture(event);\r\n                                }.bind(this);\r\n\r\n        this.onDragMoveBinded = function(event){ \r\n                                    var pos = this.clientToCanvasCoords(event);\r\n                                    this.snapper.onMouseDown(pos);\r\n\r\n                                    magnifyingGlass.handleGesture(event);\r\n                                    this.tool.handleGesture(event);\r\n                                }.bind(this);\r\n\r\n        this.onDragEndBinded = function(event){ \r\n                                    var pos = this.clientToCanvasCoords(event);\r\n                                    this.snapper.onMouseDown(pos);\r\n                                    \r\n                                    // Deactivate Magnifying Glass and tool by faking pressup event.\r\n                                    magnifyingGlass.handleGesture(event);\r\n                                    this.tool.handleGesture(event);\r\n                                    event.type = \"pressup\";\r\n                                    magnifyingGlass.handlePressHold(event);\r\n                                    this.tool.handlePressHold(event);\r\n\r\n                                    this.tool.handleButtonUp(event);\r\n                                }.bind(this);\r\n\r\n        this.hammer.on(\"singletap\", this.onSingleTapBinded);\r\n        this.hammer.on(\"dragstart\", this.onDragStartBinded);\r\n        this.hammer.on(\"dragmove\", this.onDragMoveBinded);\r\n        this.hammer.on(\"dragend\", this.onDragEndBinded);\r\n    };\r\n\r\n    proto.clearLabelMobileGestures = function() {\r\n        if (this.hammer) {\r\n            this.hammer.off(\"singletap\", this.onSingleTapBinded);\r\n            this.hammer.off(\"dragstart\", this.onDragStartBinded);\r\n            this.hammer.off(\"dragmove\", this.onDragMoveBinded);\r\n            this.hammer.off(\"dragend\", this.onDragEndBinded);\r\n            this.hammer = null;\r\n        }\r\n    };\r\n\r\n    proto.updateVisibleLabelsArray = function(label, isVisible) {\r\n        if (isVisible) {\r\n            if (!(this.visibleLabels.indexOf(label) > -1)) {\r\n                this.visibleLabels.push(label);        \r\n            }\r\n        } else {\r\n            // remove from array\r\n            var index = this.visibleLabels.indexOf(label);\r\n            if (index > -1) {\r\n                this.visibleLabels.splice(index, 1);\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.hideEndpoints = function() {\r\n        for (var name in this.endpoints) {\r\n            if (this.endpoints.hasOwnProperty(name)) {\r\n                var endpoint = this.endpoints[name];\r\n                if (endpoint.label) {\r\n                    this.hideLabel(endpoint.label);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.showEndpoints = function() {\r\n        for (var name in this.endpoints) {\r\n            if (this.endpoints.hasOwnProperty(name)) {\r\n                var endpoint = this.endpoints[name];\r\n                if (this.measurement.hasPick(name) && endpoint.label) {\r\n                    this.showLabel(endpoint.label);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.hideLabel = function(label) {\r\n        if (label) {\r\n            MeasureCommon.safeToggle(label, 'visible', false);\r\n            this.updateVisibleLabelsArray(label, false);      \r\n        }\r\n    };\r\n\r\n    proto.showLabel = function(label) {\r\n        if (label) {\r\n            MeasureCommon.safeToggle(label, 'visible', true);\r\n            this.updateVisibleLabelsArray(label, true);\r\n        }\r\n    };\r\n\r\n    proto.changeEndpointOnEditStyle = function(endpointNumber, isEditing) {\r\n        if (this.endpoints[endpointNumber] && this.endpoints[endpointNumber].label) {\r\n            MeasureCommon.safeToggle(this.endpoints[endpointNumber].label, 'on-edit', isEditing);\r\n        }\r\n    };\r\n\r\n    proto.changeEndpointEditableStyle = function(endpointNumber, isEditable) {\r\n        if (this.endpoints[endpointNumber] && this.endpoints[endpointNumber].label) {\r\n            MeasureCommon.safeToggle(this.endpoints[endpointNumber].label, 'editable', isEditable);\r\n        }\r\n    };\r\n\r\n    proto.changeAllEndpointsEditableStyle = function(isEditable) {\r\n        for (var name in this.endpoints) {\r\n            if (this.endpoints.hasOwnProperty(name)) {\r\n                this.changeEndpointEditableStyle(name, isEditable);    \r\n            }\r\n        }\r\n    };\r\n\r\n    proto.changeAllEndpointsOnEditStyle = function(isEditing) {\r\n        for (var name in this.endpoints) {\r\n            if (this.endpoints.hasOwnProperty(name)) {\r\n                this.changeEndpointOnEditStyle(name, isEditing);\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.hideLabelsOutsideOfView = function() {\r\n        // For each label, check if it's inside the camera viewport.\r\n        if (this.viewer.model && !this.viewer.model.is2d()) {\r\n            this.visibleLabels.forEach(function(label) {\r\n\r\n                // Ignore labels if position is not computed yet. This may temporarily happen, because label positions are not\r\n                // always immediately assigned. (see MeasureToolIndicator.js)\r\n                // Note that we must not set them to invisible here, because this may cause a hen-and-egg-problem: \r\n                // Some code sections in MeasureToolIndicator.updatePositions() don't set the label position for invisible labels.\r\n                if (!label.point) {\r\n                    return;\r\n                }\r\n\r\n                var show = this.viewer.navigation.isPointVisible(label.point);\r\n\r\n                if ((label.classList.contains('visible') && !show) || (!label.classList.contains('visible') && show)) {\r\n                    label.classList.toggle('visible', show);    \r\n                } \r\n\r\n            }.bind(this));\r\n        }\r\n    };\r\n\r\n    proto.showClick = function(pickNumber) {\r\n        if (this.tool.getActivePointIndex() !== pickNumber) {\r\n            this.showLabel(this.endpoints[pickNumber].label);\r\n        }\r\n    };\r\n\r\n    proto.hideClick = function(pickNumber) {\r\n\r\n        if (this.endpoints[pickNumber]) {\r\n            this.hideLabel(this.endpoints[pickNumber].label);    \r\n        }\r\n    };\r\n\r\n    proto.renderPick = function(pickNumber) {\r\n        if (!this.endpoints[pickNumber]) {\r\n            this.createEndpoint(pickNumber);\r\n        }\r\n\r\n        this.renderEndpointGeometry(pickNumber);\r\n        this.showClick(pickNumber);\r\n    };\r\n\r\n    proto.renderEndpointGeometry = function(pickNumber) {\r\n        var geometry = MeasureCommon.getSnapResultPosition(this.measurement.getPick(pickNumber), this.viewer);\r\n        \r\n        if (geometry !== null) {\r\n            this.endpoints[pickNumber].position = geometry.clone();\r\n        }\r\n    };\r\n\r\n\r\n    // This is a workaround to deal with the limitation on linewidth on Windows due to the ANGLE library\r\n    proto.drawEdgeAsCylinder = function(geom, material, linewidth, type, cylinderGeometry) {\r\n\r\n        // The array for all cylinders\r\n        var edge = [];\r\n        var cylinder;\r\n\r\n        if (type == 1) { // LinePieces\r\n            for (var i = 0; i < geom.vertices.length; i += 2) {\r\n                cylinder = this.cylinderMesh(geom.vertices[i], geom.vertices[i + 1], material, linewidth, cylinderGeometry);\r\n                this.setCylinderScale(cylinder, geom.vertices[i], geom.vertices[i + 1]);\r\n                edge.push(cylinder);\r\n            }\r\n        }\r\n        else { // LineStrip\r\n            for (var i = 0; i < geom.vertices.length - 1; i++) {\r\n                cylinder = this.cylinderMesh(geom.vertices[i], geom.vertices[i + 1], material, linewidth, cylinderGeometry);\r\n                this.setCylinderScale(cylinder, geom.vertices[i], geom.vertices[i + 1]);\r\n                edge.push(cylinder);\r\n            }\r\n        }\r\n\r\n\r\n        return edge;\r\n    };\r\n\r\n    proto.drawDashedLine = function(p1, p2, dashSize, gapSize, material, width, overlayName) {\r\n\r\n        var geometry = new THREE.Geometry();\r\n        var line = new THREE.Vector3().subVectors(p2, p1);\r\n        var lineLength = line.length() - gapSize;\r\n        var lineDirection = line.normalize();\r\n        \r\n        var i = 0;\r\n        var pos = p1.clone();\r\n        var currLength = 0;\r\n\r\n        while (currLength < lineLength) {\r\n            var isPointVisible = this.viewer.navigation.isPointVisible(pos);\r\n            \r\n            if (isPointVisible) {\r\n                geometry.vertices[i] = pos.clone();\r\n                i++;\r\n            }\r\n            \r\n            pos.addVectors(pos, lineDirection.clone().multiplyScalar(dashSize));\r\n            \r\n            if (isPointVisible) {\r\n                geometry.vertices[i] = pos.clone();\r\n                i++;\r\n            }\r\n            \r\n            pos.addVectors(pos, lineDirection.clone().multiplyScalar(gapSize));\r\n\r\n            currLength += dashSize + gapSize;\r\n        }\r\n        \r\n        line = this.drawEdgeAsCylinder(geometry, material, width, 1, this.getNewCylinderGeometry());\r\n        this.viewer.impl.addMultipleOverlays(overlayName, line);\r\n\r\n        return line;\r\n    };\r\n\r\n    // This is a workaround to deal with the limitation on linewidth on Windows due to the ANGLE library\r\n    proto.drawLineAsCylinder = function(geom, material, linewidth, overlayName) {\r\n\r\n        var line;\r\n\r\n        if (geom.vertices.length == 2) {\r\n            line = this.cylinderMesh(geom.vertices[0], geom.vertices[1], material, linewidth, this.getNewCylinderGeometry());\r\n            this.setCylinderScale(line, geom.vertices[0], geom.vertices[1]);\r\n            this.viewer.impl.addOverlay(overlayName, line);\r\n        }\r\n\r\n        return line;\r\n    };\r\n\r\n    proto.getNewCylinderGeometry = function() {\r\n        return new THREE.CylinderGeometry(0.1, 0.1, 1, 8, 1, true);\r\n    };\r\n\r\n\r\n    proto.cylinderMesh = function(pointX, pointY, material, linewidth, cylinderGeometry) {\r\n\r\n        var direction = new THREE.Vector3().subVectors(pointY, pointX);\r\n        var orientation = new THREE.Matrix4();\r\n        orientation.lookAt(pointX, pointY, new THREE.Object3D().up);\r\n        orientation.multiply(new THREE.Matrix4().set(linewidth, 0, 0, 0,\r\n            0, 0, linewidth, 0,\r\n            0, -direction.length(), 0, 0,\r\n            0, 0, 0, 1));\r\n\r\n        var edge = new THREE.Mesh(cylinderGeometry, material);\r\n        edge.applyMatrix(orientation);\r\n        edge.lmv_line_width = linewidth;\r\n        edge.position.x = (pointY.x + pointX.x) / 2;\r\n        edge.position.y = (pointY.y + pointX.y) / 2;\r\n        edge.position.z = (pointY.z + pointX.z) / 2;\r\n\r\n        return edge;\r\n    };\r\n\r\n    // Set scale for cylinder\r\n    proto.setCylinderScale = function(cylinderMesh, p1, p2) {\r\n        var scale;\r\n\r\n        if (p1 && p2) {\r\n            var point = MeasureCommon.nearestPointInPointToSegment(this.viewer.navigation.getPosition(), p1, p2);\r\n            scale = this.setScale(point);    \r\n        } else {\r\n            scale = this.setScale(cylinderMesh.position);\r\n        }\r\n\r\n        if (cylinderMesh.hasOwnProperty(\"lmv_line_width\"))\r\n            scale *= cylinderMesh.lmv_line_width;\r\n        cylinderMesh.scale.x = scale;\r\n        cylinderMesh.scale.z = scale;\r\n    };\r\n\r\n\r\n    // Set scale for vertex and extension dashed line\r\n    proto.setScale = function(point) {\r\n\r\n        var pixelSize = 5;\r\n\r\n        var navapi = this.viewer.navigation;\r\n        var camera = navapi.getCamera();\r\n        var position = navapi.getPosition();\r\n\r\n        var p = point.clone();\r\n\r\n        var distance = camera.isPerspective ? p.sub(position).length()\r\n            : navapi.getEyeVector().length();\r\n\r\n        var fov = navapi.getVerticalFov();\r\n        var worldHeight = 2.0 * distance * Math.tan(THREE.Math.degToRad(fov * 0.5));\r\n\r\n        var viewport = navapi.getScreenViewport();\r\n        var scale = pixelSize * worldHeight / viewport.height;\r\n\r\n        return scale;\r\n    };\r\n\r\n    proto.alignLabelWithLine = function(label, p1, p2, offset, viewer){\r\n        var camUpVector = viewer.navigation.getCameraUpVector();\r\n        var worldUpVec = new THREE.Vector3(0,1,0);\r\n        var cameraAngle = worldUpVec.angleTo(camUpVector) * 180 / Math.PI;\r\n\r\n        cameraAngle = camUpVector.x >= 0 ? cameraAngle : -cameraAngle;\r\n        \r\n        var angle = null;\r\n\r\n        var deltaX = p1.x - p2.x;\r\n        var deltaY = p1.y - p2.y;\r\n\r\n        if (p1.x < p2.x) {\r\n            angle =  Math.atan2(-deltaY , -deltaX) * 180 / Math.PI;    \r\n        } \r\n        else {\r\n            angle =  Math.atan2(deltaY , deltaX) * 180 / Math.PI;    \r\n        }\r\n\r\n        angle = -(angle + cameraAngle);\r\n\r\n        if (Math.abs(angle) > 90){\r\n            angle = angle + 180;\r\n        }\r\n\r\n        label.style.transform = 'rotate('+ angle +'deg) translate(0px, ' + offset + 'px)';\r\n    };\r\n\r\n    proto.destroy = function() {\r\n        this.materialPoint = null;\r\n        this.materialFace = null;\r\n        this.materialLine = null;\r\n        this.materialAngle = null;\r\n\r\n        if (av.isTouchDevice()) {\r\n            this.clearLabelMobileGestures();    \r\n        }\r\n\r\n        for (var name in this.endpoints) {\r\n            if (this.endpoints.hasOwnProperty(name)) {\r\n                var endPoint = this.endpoints[name];\r\n\r\n                if (endPoint.label) {\r\n                    endPoint.label.removeEventListener(av.isSafari() ? 'mousedown' : 'pointerdown', this.onMouseClickBinded);\r\n                    endPoint.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n                    endPoint.label.parentNode.removeChild(endPoint.label);\r\n                    endPoint.label = null;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.visibleLabels = [];\r\n    };\r\n\r\n    proto.renderRubberbandFromPoints = function(points) {\r\n        switch (this.measurement.measurementType) {\r\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE:\r\n                var start = points[1];\r\n                var end = points[2];\r\n                \r\n                if (start && end) {\r\n                    this.renderDistanceMeasurementFromPoints(start, end);\r\n                }\r\n                break;\r\n\r\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE:\r\n                this.renderAngleMeasurementFromPoints(points);\r\n                break;\r\n\r\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_AREA:\r\n                this.renderAreaMeasurementFromPoints(points);\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n    proto.renderRubberband = function(picks) {\r\n\r\n        switch (this.measurement.measurementType) {\r\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE:\r\n                var previewsPick = picks[1];\r\n                var activePick = picks[2];\r\n                var start = MeasureCommon.getSnapResultPosition(previewsPick, this.viewer);\r\n                var end = MeasureCommon.getSnapResultPosition(activePick, this.viewer);\r\n                \r\n                if (start && end) {\r\n                    this.renderDistanceMeasurement(start, end);\r\n                }\r\n                break;\r\n\r\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE:\r\n                this.renderAngleMeasurement(picks);\r\n                break;\r\n\r\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_AREA:\r\n                this.renderAreaMeasurement(picks);\r\n                break;\r\n        }\r\n    };\r\n\r\n    proto.initMouseEvent = function(label, pointNumber) {\r\n        \r\n        var isSafari = av.isSafari();\r\n        this.onMouseClickBinded = function(event) { \r\n            if(isSafari || event.pointerType === 'mouse'){\r\n                event.canvasX = event.clientX;\r\n                event.canvasY = event.clientY;\r\n                this.tool.editEndpoint(event, pointNumber, this.measurement.id); \r\n            }\r\n        }.bind(this);\r\n        label.addEventListener(isSafari ? 'mousedown' : 'pointerdown', this.onMouseClickBinded);         \r\n    };\r\n","    // Centroid of a polygon is the average of its points.\r\n    export function getCentroidOfPolygon(points) {\r\n        var centroid = new THREE.Vector3();\r\n        var n = points.length;\r\n\r\n        for (var i = 0; i < n; i++) {\r\n            centroid.add(points[i]);\r\n        }\r\n\r\n        centroid.multiplyScalar(1 / n);\r\n        return centroid;\r\n    }\r\n\r\n    // Algorithm based on https://github.com/mapbox/polylabel\r\n    export function getPolygonVisualCenter(polygon) {\r\n        function compareMax(a, b) {\r\n            return b.max - a.max;\r\n        }\r\n\r\n        function Cell(x, y, h, polygon) {\r\n            this.x = x; // cell center x\r\n            this.y = y; // cell center y\r\n            this.h = h; // half the cell size\r\n            this.d = pointToPolygonDist(x, y, polygon); // distance from cell center to polygon\r\n            this.max = this.d + this.h * Math.SQRT2; // max distance to polygon within a cell\r\n        }\r\n\r\n        // signed distance from point to polygon outline (negative if point is outside)\r\n        function pointToPolygonDist(x, y, polygon) {\r\n            var inside = false;\r\n            var minDistSq = Infinity;\r\n\r\n            for (var k = 0; k < polygon.length; k++) {\r\n                var ring = polygon[k];\r\n\r\n                for (var i = 0, len = ring.length, j = len - 1; i < len; j = i++) {\r\n                    var a = ring[i];\r\n                    var b = ring[j];\r\n\r\n                    if ((a.y > y !== b.y > y) &&\r\n                        (x < (b.x - a.x) * (y - a.y) / (b.y - a.y) + a.x)) inside = !inside;\r\n\r\n                    minDistSq = Math.min(minDistSq, getSegDistSq(x, y, a, b));\r\n                }\r\n            }\r\n\r\n            return (inside ? 1 : -1) * Math.sqrt(minDistSq);\r\n        }\r\n\r\n        // get polygon centroid\r\n        function getCentroidCell(polygon) {\r\n            var area = 0;\r\n            var x = 0;\r\n            var y = 0;\r\n            var points = polygon[0];\r\n\r\n            for (var i = 0, len = points.length, j = len - 1; i < len; j = i++) {\r\n                var a = points[i];\r\n                var b = points[j];\r\n                var f = a.x * b.y - b.x * a.y;\r\n                x += (a.x + b.x) * f;\r\n                y += (a.y + b.y) * f;\r\n                area += f * 3;\r\n            }\r\n            if (area === 0) return new Cell(points[0].x, points[0].y, 0, polygon);\r\n            return new Cell(x / area, y / area, 0, polygon);\r\n        }\r\n\r\n        // get squared distance from a point to a segment\r\n        function getSegDistSq(px, py, a, b) {\r\n\r\n            var x = a.x;\r\n            var y = a.y;\r\n            var dx = b.x - x;\r\n            var dy = b.y - y;\r\n\r\n            if (dx !== 0 || dy !== 0) {\r\n\r\n                var t = ((px - x) * dx + (py - y) * dy) / (dx * dx + dy * dy);\r\n\r\n                if (t > 1) {\r\n                    x = b.x;\r\n                    y = b.y;\r\n\r\n                } else if (t > 0) {\r\n                    x += dx * t;\r\n                    y += dy * t;\r\n                }\r\n            }\r\n\r\n            dx = px - x;\r\n            dy = py - y;\r\n\r\n            return dx * dx + dy * dy;\r\n        }\r\n\r\n        function TinyQueue(data, compare) {\r\n\r\n            function defaultCompare(a, b) {\r\n                return a < b ? -1 : a > b ? 1 : 0;\r\n            }\r\n\r\n            if (!(this instanceof TinyQueue)) return new TinyQueue(data, compare);\r\n\r\n            this.data = data || [];\r\n            this.length = this.data.length;\r\n            this.compare = compare || defaultCompare;\r\n\r\n            if (this.length > 0) {\r\n                for (var i = (this.length >> 1); i >= 0; i--) this._down(i);\r\n            }\r\n        }\r\n\r\n        TinyQueue.prototype = {\r\n\r\n            push: function (item) {\r\n                this.data.push(item);\r\n                this.length++;\r\n                this._up(this.length - 1);\r\n            },\r\n\r\n            pop: function () {\r\n                if (this.length === 0) return undefined;\r\n\r\n                var top = this.data[0];\r\n                this.length--;\r\n\r\n                if (this.length > 0) {\r\n                    this.data[0] = this.data[this.length];\r\n                    this._down(0);\r\n                }\r\n                this.data.pop();\r\n\r\n                return top;\r\n            },\r\n\r\n            peek: function () {\r\n                return this.data[0];\r\n            },\r\n\r\n            _up: function (pos) {\r\n                var data = this.data;\r\n                var compare = this.compare;\r\n                var item = data[pos];\r\n\r\n                while (pos > 0) {\r\n                    var parent = (pos - 1) >> 1;\r\n                    var current = data[parent];\r\n                    if (compare(item, current) >= 0) break;\r\n                    data[pos] = current;\r\n                    pos = parent;\r\n                }\r\n\r\n                data[pos] = item;\r\n            },\r\n\r\n            _down: function (pos) {\r\n                var data = this.data;\r\n                var compare = this.compare;\r\n                var halfLength = this.length >> 1;\r\n                var item = data[pos];\r\n\r\n                while (pos < halfLength) {\r\n                    var left = (pos << 1) + 1;\r\n                    var right = left + 1;\r\n                    var best = data[left];\r\n\r\n                    if (right < this.length && compare(data[right], best) < 0) {\r\n                        left = right;\r\n                        best = data[right];\r\n                    }\r\n                    if (compare(best, item) >= 0) break;\r\n\r\n                    data[pos] = best;\r\n                    pos = left;\r\n                }\r\n\r\n                data[pos] = item;\r\n            }\r\n        };\r\n\r\n        if (polygon.length === 3) {\r\n            return getCentroidOfPolygon(polygon);\r\n        }\r\n\r\n        var precision = 0.01;\r\n        polygon = [polygon];\r\n\r\n        // find the bounding box of the outer ring\r\n        var minX, minY, maxX, maxY;\r\n        for (var i = 0; i < polygon[0].length; i++) {\r\n            var p = polygon[0][i];\r\n            if (!i || p.x < minX) minX = p.x;\r\n            if (!i || p.y < minY) minY = p.y;\r\n            if (!i || p.x > maxX) maxX = p.x;\r\n            if (!i || p.y > maxY) maxY = p.y;\r\n        }\r\n\r\n        var width = maxX - minX;\r\n        var height = maxY - minY;\r\n        var cellSize = Math.min(width, height);\r\n        var h = cellSize / 2;\r\n\r\n        // a priority queue of cells in order of their \"potential\" (max distance to polygon)\r\n        var cellQueue = new TinyQueue(null, compareMax);\r\n\r\n        if (cellSize === 0) return [minX, minY];\r\n\r\n        // cover polygon with initial cells\r\n        for (var x = minX; x < maxX; x += cellSize) {\r\n            for (var y = minY; y < maxY; y += cellSize) {\r\n                cellQueue.push(new Cell(x + h, y + h, h, polygon));\r\n            }\r\n        }\r\n\r\n        // take centroid as the first best guess\r\n        var bestCell = getCentroidCell(polygon);\r\n\r\n        // special case for rectangular polygons\r\n        var bboxCell = new Cell(minX + width / 2, minY + height / 2, 0, polygon);\r\n        if (bboxCell.d > bestCell.d) bestCell = bboxCell;\r\n\r\n        while (cellQueue.length) {\r\n            // pick the most promising cell from the queue\r\n            var cell = cellQueue.pop();\r\n\r\n            // update the best cell if we found a better one\r\n            if (cell.d > bestCell.d) {\r\n                bestCell = cell;\r\n            }\r\n\r\n            // do not drill down further if there's no chance of a better solution\r\n            if (cell.max - bestCell.d <= precision) continue;\r\n\r\n            // split the cell into four cells\r\n            h = cell.h / 2;\r\n            cellQueue.push(new Cell(cell.x - h, cell.y - h, h, polygon));\r\n            cellQueue.push(new Cell(cell.x + h, cell.y - h, h, polygon));\r\n            cellQueue.push(new Cell(cell.x - h, cell.y + h, h, polygon));\r\n            cellQueue.push(new Cell(cell.x + h, cell.y + h, h, polygon));\r\n        }\r\n\r\n        return {x:bestCell.x, y:bestCell.y};\r\n    };\r\n","import { Indicator } from './Indicator'\r\nimport { getPolygonVisualCenter } from \"./PolygonCentroid\";\r\n\r\n    var av = Autodesk.Viewing;\r\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\r\n\r\n\r\n    // /** @constructor */\r\n    export function MeasureToolIndicator( viewer, measurement, measureTool )\r\n    {\r\n        Indicator.call(this, viewer, measurement, measureTool);\r\n        this.measureTool = measureTool;\r\n        this.endpoints = [];\r\n        this.lines = { \r\n            xyz: {axis: false, material: createLineMaterial('005BCE'), className: 'adsk-icon-axis-delta' + '-xyz measure-label-axis-delta' + ' measure-label-axis-xyz'},\r\n            x:   {axis: true,  material: createLineMaterial('F12C2C'), className: 'adsk-icon-axis-delta' + '-x measure-label-axis-delta' + ' measure-label-axis-x', iconText: 'X'},\r\n            y:   {axis: true,  material: createLineMaterial('0BB80B'), className: 'adsk-icon-axis-delta' + '-y measure-label-axis-delta' + ' measure-label-axis-y', iconText: 'Y'},\r\n            z:   {axis: true,  material: createLineMaterial('2C2CF1'), className: 'adsk-icon-axis-delta' + '-z measure-label-axis-delta' + ' measure-label-axis-z', iconText: 'Z'}\r\n        };\r\n        this.segments = [];\r\n        this.dashedLine = {};\r\n        this.simple = false;\r\n        this.angleLabel = {};\r\n        this.areaLabel = {};\r\n        this.labels = [];\r\n        this.isLeaflet = false;\r\n        this.topologyStatus = TOPOLOGY_NOT_AVAILABLE;\r\n        this.tmpVector = new THREE.Vector3();\r\n        this.surfaceColor = new THREE.MeshBasicMaterial({\r\n            color: parseInt('005BCE', 16),\r\n            opacity: 0.15,\r\n            transparent: true,\r\n            depthTest: false,\r\n            depthWrite: false,\r\n            side: THREE.DoubleSide\r\n        });   \r\n    }\r\n\r\n    MeasureToolIndicator.prototype = Object.create(Indicator.prototype);\r\n    MeasureToolIndicator.prototype.constructor = MeasureToolIndicator;\r\n    var proto = MeasureToolIndicator.prototype;\r\n\r\n    function createLineMaterial(color) {\r\n        return new THREE.MeshBasicMaterial({\r\n            color: parseInt(color, 16),\r\n            depthTest: false,\r\n            depthWrite: false,\r\n            side: THREE.DoubleSide\r\n        });   \r\n    }\r\n\r\n    var _labelsSpace = 4;\r\n    var _angleLabelOffset = 5;\r\n    var TOPOLOGY_NOT_AVAILABLE = 0;\r\n    var TOPOLOGY_FETCHING = 1; \r\n    var TOPOLOGY_AVAILABLE = 2;\r\n    var _selectorAreaSize = 15;\r\n\r\n    var _tipHeight = 2;\r\n    var _tipWidth = 3;\r\n    var _segmentWidth = 4;\r\n    var _dashedSegmentWidth = 3;\r\n    var _axisLineWidth = 2;\r\n    var _dashSize = 2;\r\n    var _gapSize = 1;\r\n\r\n    var _angleArcWidth = 2;\r\n\r\n    function isVisible(label) {\r\n        return label.classList.contains('visible');\r\n    }\r\n\r\n    proto.init = function() {\r\n        this.isLeaflet = this.viewer.model.getData().isLeaflet;\r\n        // Create HTML Labels\r\n        var currLabel;\r\n\r\n        this.onSelectionAreaClickedBinded = this.onSelectionAreaClicked.bind(this);\r\n        this.onSelectionAreaDbClickedBinded = this.onSelectionAreaDbClicked.bind(this);\r\n\r\n        // Line\r\n        if (!this.lines.xyz.label) {\r\n            currLabel = this.lines.xyz.label = this.createMeasurementLabel(); // Measurement result\r\n            currLabel.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n            currLabel.addEventListener('click', this.onSelectionAreaClickedBinded);\r\n            currLabel.addEventListener('dblclick', this.onSelectionAreaDbClickedBinded);\r\n            this.viewer.container.appendChild(currLabel);\r\n        }\r\n        switch (this.topologyStatus) {\r\n            case TOPOLOGY_FETCHING:\r\n                this.setFetchingTopology();\r\n                break;\r\n            case TOPOLOGY_AVAILABLE:\r\n                this.setTopologyAvailable();\r\n                break;\r\n            case TOPOLOGY_NOT_AVAILABLE:\r\n                this.setNoTopology();\r\n                break;\r\n        }\r\n\r\n        this.showMeasureResult = false;\r\n\r\n        this.onCameraChangeBinded = this.onCameraChange.bind(this);\r\n        this.viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\r\n\r\n        this.handleButtonUpBinded = this.measureTool.handleButtonUp.bind(this.measureTool);\r\n        this.addWindowEventListener('mouseup', this.handleButtonUpBinded);\r\n    };\r\n\r\n    proto.createEndpoint = function(index) {\r\n        this.endpoints[index] = {};\r\n        var currLabel = this.endpoints[index].label = this.createSnapResultLabel(index);\r\n        this.viewer.container.appendChild(currLabel);    \r\n    };\r\n\r\n    proto.updateLabelsPosition = function() {\r\n\r\n        var point,\r\n            xy,\r\n            label,\r\n            key;\r\n\r\n\r\n        for (key in this.endpoints) {\r\n            if (this.endpoints.hasOwnProperty(key)) {\r\n                    label = this.endpoints[key].label;\r\n                    point = this.endpoints[key].position;\r\n\r\n                if (label && point && isVisible(label)) {\r\n                    xy = MeasureCommon.project(point, this.viewer);\r\n\r\n                    xy.x = xy.x - label.getBoundingClientRect().width / 2;\r\n                    xy.y = xy.y - label.getBoundingClientRect().height / 2;\r\n                    \r\n                    label.style.top  = xy.y + 'px';\r\n                    label.style.left = xy.x + 'px';\r\n                    label.point = point;\r\n                    this.labels.push(label);\r\n                }\r\n            }\r\n        }\r\n\r\n        for (var name in this.lines) {\r\n            if (this.lines.hasOwnProperty(name)) {\r\n                var item = this.lines[name];\r\n                    label = item.label;\r\n\r\n                if (label && item.p1 && item.p2 && isVisible(label)) {\r\n                    \r\n                    item.line.visible = item.visible;\r\n\r\n                    point = { x: (item.p1.x + item.p2.x)/2, y: (item.p1.y + item.p2.y)/2, z: (item.p1.z + item.p2.z)/2 };\r\n                    \r\n                    xy = MeasureCommon.project(point, this.viewer);\r\n                    label.style.top  = xy.y - Math.floor(label.clientHeight / 2) + 'px';\r\n                    label.style.left = xy.x - Math.floor(label.clientWidth / 2) + 'px';\r\n\r\n                    if (this.viewer.model && this.viewer.model.is2d()) {\r\n                        var offset = item === this.lines.xyz ? 0 : label.clientHeight;\r\n\r\n                        var p1Projected = MeasureCommon.project(item.p1, this.viewer);\r\n                        var p2Projected = MeasureCommon.project(item.p2, this.viewer);\r\n\r\n                        if (label.clientWidth >= p1Projected.distanceTo(p2Projected) - this.endpoints[1].label.clientWidth) {\r\n                            if (item === this.lines.xyz) {\r\n                                offset = label.clientHeight;\r\n                            } else {\r\n                                // Hide all axis labels and quit the loop\r\n                            \r\n                                this.lines.x.line.visible = false;\r\n                                this.lines.y.line.visible = false;\r\n\r\n                                this.viewer.impl.invalidate(false, false, /*overlayDirty=*/true);\r\n\r\n                                for (name in this.lines) {\r\n                                    if (this.lines.hasOwnProperty(name)) {\r\n                                        if (this.lines[name] !== this.lines.xyz) {\r\n                                            var currLabel = this.lines[name].label;\r\n                                            if (currLabel) {\r\n                                                currLabel.style.opacity = 0;\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n\r\n                                break;\r\n                                \r\n                            }\r\n                        }\r\n\r\n                        if (item !== this.lines.xyz) {\r\n                            var xyzDirection = new THREE.Vector3();\r\n                            var itemDirection = new THREE.Vector3();\r\n                            xyzDirection.subVectors(this.lines.xyz.p1, this.lines.xyz.p2).normalize();\r\n                            itemDirection.subVectors(item.p1, item.p2).normalize();\r\n                            var normal = xyzDirection.cross(this.viewer.navigation.getEyeVector()).normalize();\r\n                            var angle = normal.dot(itemDirection);\r\n                            \r\n                            if (angle < 0) {\r\n                                offset = -offset;\r\n                            }\r\n                        }\r\n\r\n                        this.alignLabelWithLine(label, item.p1, item.p2, offset, this.viewer);\r\n                    }\r\n\r\n                    label.style.opacity = 1;\r\n                    label.point = point;\r\n                    this.labels.push(label);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.angleLabel) {\r\n\r\n            label = this.angleLabel.label;\r\n\r\n            if (label && this.angleLabel.p1 && this.angleLabel.p2 && isVisible(label)) {\r\n                point = { x: (this.angleLabel.p1.x + this.angleLabel.p2.x)/2, y: (this.angleLabel.p1.y + this.angleLabel.p2.y)/2, z: (this.angleLabel.p1.z + this.angleLabel.p2.z)/2 };\r\n                xy = MeasureCommon.project(point, this.viewer, _angleLabelOffset);\r\n                label.style.top = xy.y - Math.floor(label.clientHeight / 2) + 'px';\r\n                label.style.left = xy.x - Math.floor(label.clientWidth / 2) + 'px';\r\n                label.point = point;\r\n                this.labels.push(label);\r\n            }\r\n        }\r\n\r\n        if (this.areaLabel) {\r\n\r\n            label = this.areaLabel.label;\r\n\r\n            if (label && this.areaLabel.p1 && this.areaLabel.p2 && isVisible(label)) {\r\n                point = { x: (this.areaLabel.p1.x + this.areaLabel.p2.x)/2, y: (this.areaLabel.p1.y + this.areaLabel.p2.y)/2, z: (this.areaLabel.p1.z + this.areaLabel.p2.z)/2 };\r\n                xy = MeasureCommon.project(point, this.viewer);\r\n                label.style.top  = xy.y - Math.floor(label.clientHeight / 2) + 'px';\r\n                label.style.left = xy.x - Math.floor(label.clientWidth / 2) + 'px';\r\n                label.point = point;\r\n                this.labels.push(label);\r\n            }\r\n        }\r\n\r\n        if (this.viewer.model && !this.viewer.model.is2d()) {\r\n    \r\n            var needToStackLabels = false;\r\n            this.labelsStacked = false;\r\n            var currentLabel, i;\r\n\r\n            // Backup lable's positions in case of the need of stacking them later\r\n            var backupPositions = [];\r\n            for (i = 0; i < this.labels.length; i++) {\r\n                backupPositions.push({left: this.labels[i].style.left, top:this.labels[i].style.top});\r\n            }\r\n\r\n            // Detect and move in case of overlapping.\r\n            for (i = 0; i < this.labels.length && !needToStackLabels; i++) {\r\n                currentLabel = this.labels[i];\r\n                needToStackLabels = this.labelsOverlapDetection(currentLabel, this.labels);\r\n            }\r\n\r\n            // If we found out that the labels need to be stacked, restore their positions from the backup first, and then start again.\r\n            if (needToStackLabels) {\r\n\r\n                for (i = 0; i < this.labels.length; i++) {\r\n                    this.labels[i].style.left = backupPositions[i].left;\r\n                    this.labels[i].style.top = backupPositions[i].top;\r\n                }\r\n\r\n                this.stackLabels(this.labels);\r\n\r\n                for (i = 0; i < this.labels.length; i++) {\r\n                    currentLabel = this.labels[i];\r\n                    this.labelsOverlapDetection(currentLabel, this.labels);\r\n                }\r\n            } \r\n        }\r\n\r\n        this.labels = [];\r\n        \r\n    };\r\n\r\n    function isLeftIntersect(current, other) {\r\n        return current.right >= other.left && current.right <= other.right;\r\n    }\r\n\r\n    function isRightIntersect(current, other) {\r\n        return current.left >= other.left && current.left <= other.right;\r\n    }\r\n\r\n    function isMiddleIntersect(current, other) {\r\n        return current.left <= other.left && current.right >= other.right;\r\n    }\r\n\r\n    function isVerticalIntersect(current, other) {\r\n        return current.top < other.bottom && current.bottom > other.top;\r\n    }\r\n\r\n    function moveLeft(currentLabel, currentRect, otherRect) {\r\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) - (currentRect.right - otherRect.left) + 'px';\r\n    }\r\n\r\n    function moveRight(currentLabel, currentRect, otherRect) {\r\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) + (otherRect.right - currentRect.left) + 'px';\r\n    }\r\n\r\n    function moveDown(currentLabel, currentRect, otherRect) {\r\n        currentLabel.style.top = parseInt(currentLabel.style.top, 10) + (otherRect.bottom - currentRect.top) + 'px';\r\n    }\r\n\r\n\r\n    proto.labelsOverlapDetection = function(staticLabel, labelsList) {\r\n\r\n        var needToStackLabels = false;\r\n\r\n        for (var i = 0; i < labelsList.length ; i++) {\r\n\r\n            var dynamicLabel = labelsList[i];\r\n            var moved = false;\r\n\r\n            if (staticLabel !== dynamicLabel) {\r\n                var staticRect = staticLabel.getBoundingClientRect();\r\n                var dynamicRect = dynamicLabel.getBoundingClientRect();\r\n\r\n                if (isVerticalIntersect(dynamicRect, staticRect)) {\r\n\r\n                    if (isLeftIntersect(dynamicRect, staticRect)) {\r\n                        moveLeft(dynamicLabel, dynamicRect, staticRect);\r\n                        moved = true;\r\n                    }\r\n                    else if (isRightIntersect(dynamicRect, staticRect)) {\r\n                        moveRight(dynamicLabel, dynamicRect, staticRect);\r\n                        moved = true;\r\n                    }\r\n                    else if (isMiddleIntersect(dynamicRect, staticRect)) {\r\n                        moveDown(dynamicLabel, dynamicRect, staticRect);\r\n                        moved = true;\r\n                    }\r\n\r\n                    if (moved) {\r\n                        var newList = labelsList.slice(0);\r\n                        newList.splice(newList.indexOf(staticLabel), 1);\r\n                        this.labelsOverlapDetection(dynamicLabel, newList);    \r\n                        \r\n                        if (dynamicLabel.causeStacking && staticLabel.causeStacking) {\r\n                            needToStackLabels = true;\r\n                        }\r\n\r\n                        // We don't want that after the labels have been stacked, only one of them will move alone.\r\n                        if (dynamicLabel.causeStacking && this.labelsStacked) {\r\n                            this.stackLabels(this.labels);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return needToStackLabels;\r\n    };\r\n\r\n    proto.stackLabels = function(labels) { \r\n        var topLabel = this.lines.xyz.label;\r\n\r\n        for (var i = 1; i < labels.length; i++) {\r\n            if (labels[i].causeStacking) {\r\n                labels[i].style.left = topLabel.style.left;\r\n            \r\n                var rect = labels[i-1].getBoundingClientRect();\r\n                var space = (labels[i-1] == topLabel) ? _labelsSpace : 0;\r\n                var top = (labels[i] === topLabel) ? topLabel.style.top : labels[i-1].style.top;\r\n                labels[i].style.top = parseInt(top, 10) + rect.height + space + 'px';\r\n            }\r\n            labels[i].style.transform = '';\r\n        }\r\n\r\n        this.labelsStacked = true;\r\n    };\r\n\r\n    proto.drawXYZLine = function(item) {\r\n        var self = this;\r\n\r\n        var p1 = item.p1;\r\n        var p2 = item.p2;\r\n\r\n        if (!p1 || !p2)\r\n            return;\r\n\r\n        var tmpVec = new THREE.Vector3();\r\n        var geometry = item.geometry = new THREE.Geometry();\r\n        var direction = new THREE.Vector3().subVectors(p2, p1).normalize();\r\n        var normal = direction.clone().cross(self.viewer.navigation.getEyeVector()).normalize();\r\n        var point = MeasureCommon.nearestPointInPointToSegment(self.viewer.navigation.getPosition(), p1, p2);\r\n        var scale = self.setScale(point);\r\n\r\n        item.line = this.drawLineSegment(p1, p2, _segmentWidth, item.material);\r\n        item.visible = true;\r\n\r\n        this.segments.push(item);\r\n        \r\n        function drawTip(p) {\r\n            geometry.vertices = [];\r\n\r\n            // Edge\r\n            tmpVec.addVectors(p, normal.clone().multiplyScalar(_tipHeight * scale));\r\n            geometry.vertices[0] = tmpVec.clone();\r\n            tmpVec.subVectors(p, normal.clone().multiplyScalar(_tipHeight * scale));\r\n            geometry.vertices[1] = tmpVec.clone();\r\n            var line = self.drawLineAsCylinder(geometry, item.material, _tipWidth, self.overlayName);\r\n            self.setCylinderScale(line, p1 ,p2);\r\n            line.visible = true;\r\n            item.tips.push(line);\r\n        }\r\n\r\n        if (self.showMeasureResult) {\r\n            item.tips = [];\r\n\r\n            drawTip(p1);\r\n            drawTip(p2);    \r\n        }        \r\n    };\r\n\r\n    proto.redrawDashedLine = function() {\r\n        if (!this.dashedLine.p1 || !this.dashedLine.p2)\r\n            return;\r\n\r\n        this.viewer.impl.removeMultipleOverlays(this.overlayName, this.dashedLine.line);\r\n        \r\n        var p1Scale = this.setScale(this.dashedLine.p2);\r\n        var dashSize = _dashSize * p1Scale;\r\n        var gapSize = _gapSize * p1Scale;\r\n        this.dashedLine.line = this.drawDashedLine(this.dashedLine.p2, this.dashedLine.p1, dashSize, gapSize, this.lines.xyz.material, _dashedSegmentWidth, this.overlayName);\r\n\r\n        return this.dashedLine.line;\r\n    }; \r\n\r\n    proto.drawLineSegment = function(p1, p2, width, material, isDashedLine) {\r\n        var line;\r\n\r\n        if (isDashedLine) {\r\n            this.dashedLine.p1 = p1;\r\n            this.dashedLine.p2 = p2;\r\n            line = this.redrawDashedLine();\r\n        } else {\r\n            var geometry = new THREE.Geometry();\r\n            geometry.vertices.push(p1);\r\n            geometry.vertices.push(p2);\r\n            line = this.drawLineAsCylinder(geometry, material, width, this.overlayName);\r\n            this.setCylinderScale(line, p1, p2);\r\n        }\r\n\r\n        line.visible = true;\r\n\r\n        return line;\r\n    };\r\n\r\n    proto.drawSurface = function(points) {\r\n\r\n        const cg = Autodesk.Viewing.Extensions.CompGeom;\r\n\r\n        let cset = new cg.ContourSet();\r\n\r\n        cset.addContour(points);\r\n\r\n        cset.triangulate();\r\n\r\n        if (cset.triangulationFailed)\r\n            return false;\r\n\r\n        let bufferGeometry = cset.toPolygonMesh();\r\n\r\n        var face = new THREE.Mesh(bufferGeometry, this.surfaceColor);\r\n\r\n        this.viewer.impl.addOverlay(this.overlayName, face);\r\n\r\n        return true;\r\n    };\r\n\r\n    proto.drawSegmentAndPush = function(p1, p2, isDashedLine) {\r\n        if (!p1 || !p2) {\r\n            return;\r\n        }\r\n\r\n         var line = this.drawLineSegment(p1, p2, _segmentWidth, this.lines.xyz.material, isDashedLine);\r\n            \r\n        if (!isDashedLine) {\r\n            var item = { line: line, p1: p1, p2: p2 };\r\n            this.segments.push(item);    \r\n        }\r\n    };\r\n\r\n\r\n    proto.renderAreaMeasurementFromPoints = function(pickPositions) {\r\n        let p1, p2;\r\n        let firstPoint;\r\n\r\n        const points = [];\r\n\r\n        const keys = Object.keys(pickPositions);\r\n\r\n        for (var i = 0; i < keys.length - 1; i++) {\r\n            const key = parseFloat(keys[i]);\r\n            const position1 = pickPositions[key];\r\n            const position2 = pickPositions[key+1];\r\n\r\n            if (i === 0) {\r\n                firstPoint = new THREE.Vector3(position1.x, position1.y, position1.z);\r\n            }\r\n\r\n            p1 = new THREE.Vector3(position1.x, position1.y, position1.z);\r\n            p2 = new THREE.Vector3(position2.x, position2.y, position2.z);\r\n\r\n            this.drawSegmentAndPush(p1, p2);\r\n            points.push(p1);\r\n        }\r\n\r\n        if (keys.length > 2) {\r\n            // Draw last line\r\n            this.drawSegmentAndPush(firstPoint, p2, !this.measurement.closedArea);\r\n            \r\n            if(!MeasureCommon.isEqualVectors(firstPoint,p2,MeasureCommon.EPSILON)){\r\n                points.push(p2);\r\n            }\r\n            \r\n            if (this.measurement.area !== 0) {\r\n                //Draw surface will return false if it failed to triangulate the polygon (e.g. it has self-intersections)\r\n                if (this.drawSurface(points)) {\r\n                    this.showAreaLabel(getPolygonVisualCenter(points));\r\n                    this.updateArea();\r\n                }\r\n            }\r\n        }        \r\n    };\r\n\r\n    proto.renderAreaMeasurement = function(picks) {\r\n\r\n        var count = this.measurement.countPicks();\r\n        var p1, p2;\r\n\r\n        var points = [];\r\n        \r\n        for (var i = 1; i < count; i++) {\r\n            p1 = MeasureCommon.getSnapResultPosition(picks[i], this.viewer);\r\n            p2 = MeasureCommon.getSnapResultPosition(picks[i + 1], this.viewer);\r\n\r\n            this.drawSegmentAndPush(p1, p2);\r\n            points.push(p1);\r\n        }\r\n\r\n        if (count > 2) {\r\n            // Draw last line\r\n            p1 = MeasureCommon.getSnapResultPosition(picks[1], this.viewer);\r\n            this.drawSegmentAndPush(p1, p2, !this.measurement.closedArea);\r\n            \r\n            if(!MeasureCommon.isEqualVectors(p1,p2,MeasureCommon.EPSILON)){\r\n                points.push(p2);\r\n            }\r\n            \r\n            if (this.measurement.area !== 0) {\r\n                //Draw surface will return false if it failed to triangulate the polygon (e.g. it has self-intersections)\r\n                if (this.drawSurface(points)) {\r\n                    this.showAreaLabel(getPolygonVisualCenter(points));\r\n                    this.updateArea();\r\n                }\r\n            }\r\n        }        \r\n    };\r\n\r\n    proto.clearAngleMeshes = function() {\r\n        if (this.angleArc) {\r\n            this.viewer.impl.removeOverlay(this.overlayName, this.angleArc);\r\n            this.angleArc = null;\r\n        }\r\n        if (this.angleOutline.length > 0) {\r\n            this.viewer.impl.removeMultipleOverlays(this.overlayName, this.angleOutline);\r\n            this.angleOutline.length = 0;\r\n        }\r\n    };\r\n\r\n    proto.drawAngle = function(p, ep1, ep2, n, angle, midPoint) {\r\n\r\n        var smallNum = 0.001;\r\n\r\n        if (!this.materialAngle) {\r\n\r\n            this.materialAngle = new THREE.MeshPhongMaterial({\r\n                    color: 0x999999,\r\n                    ambient: 0x999999,\r\n                    opacity: 0.5,\r\n                    transparent: true,\r\n                    depthTest: false,\r\n                    depthWrite: false,\r\n                    side: THREE.DoubleSide\r\n                }\r\n            );\r\n\r\n            this.materialAngleOutline = new THREE.MeshBasicMaterial({\r\n                color: 0xFF9900,\r\n                depthTest: false,\r\n                depthWrite: false\r\n            });\r\n\r\n        }\r\n\r\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\r\n        this.clearAngleMeshes();\r\n\r\n        // draw arc of angle\r\n        var radius = Math.min(p.distanceTo(ep1), p.distanceTo(ep2)) / 4;\r\n        var segments = 100;\r\n        //angle = angle * Math.PI / 180;\r\n\r\n        var circleGeometry = new THREE.CircleGeometry(radius, segments, 0, angle * Math.PI / 180);\r\n        var arc = new THREE.Mesh(circleGeometry, this.surfaceColor);\r\n\r\n        var center = arc.geometry.vertices[0].clone();\r\n        arc.geometry.vertices.push(center);\r\n\r\n\r\n        // Translate and rotate the arc to the plane where it should lie in\r\n        arc.position.set(p.x, p.y, p.z);\r\n        var V = arc.position.clone();\r\n        V.add(n);\r\n        arc.lookAt(V);\r\n        arc.updateMatrixWorld();\r\n\r\n\r\n        // Rotate the arc in the plane to the right place\r\n        var vA = arc.geometry.vertices[1].clone();\r\n        var vB = arc.geometry.vertices[arc.geometry.vertices.length - 2].clone();\r\n        vA.applyMatrix4(arc.matrixWorld);\r\n        vB.applyMatrix4(arc.matrixWorld);\r\n\r\n        var v1 = new THREE.Vector3();\r\n        var v2 = new THREE.Vector3();\r\n        var v3 = new THREE.Vector3();\r\n        var v4 = new THREE.Vector3();\r\n        v1.subVectors(vA, p);\r\n        v2.subVectors(vB, p);\r\n        v3.subVectors(ep1, p);\r\n        v4.subVectors(ep2, p);\r\n\r\n        var a13 = v1.angleTo(v3);\r\n        var a14 = v1.angleTo(v4);\r\n        var a23 = v2.angleTo(v3);\r\n        var a24 = v2.angleTo(v4);\r\n\r\n        //console.log(a13 * 180 / Math.PI + \" \" + a14 * 180 / Math.PI + \" \" + a23 * 180 / Math.PI + \" \" + a24 * 180 / Math.PI);\r\n\r\n        var ra;\r\n        // The arc is in the right place\r\n        if (((a13 <= smallNum && a13 >= -smallNum) || (a14 <= smallNum && a14 >= -smallNum))\r\n            && ((a23 <= smallNum && a23 >= -smallNum) || (a24 <= smallNum && a24 >= -smallNum))) {\r\n\r\n            ra =0;\r\n        }\r\n        // The arc needs to be rotated 180 degree to the right place\r\n        else if (((a13 <= Math.PI + smallNum && a13 >= Math.PI - smallNum) || (a14 <= Math.PI + smallNum && a14 >= Math.PI - smallNum))\r\n            && ((a23 <= Math.PI + smallNum && a23 >= Math.PI - smallNum) || (a24 <= Math.PI + smallNum && a24 >= Math.PI - smallNum))) {\r\n\r\n            ra = Math.PI;\r\n        }\r\n        // The arc needs to be rotated a13 radian\r\n        else if ((a13 <= a23 + smallNum && a13 >= a23 - smallNum) || (a13 <= a24 + smallNum && a13 >= a24 - smallNum)) {\r\n\r\n            ra = a13;\r\n        }\r\n        // The arc needs to be rotated a14 radian\r\n        else {\r\n\r\n            ra = a14;\r\n        }\r\n\r\n        var rotWorldMatrix = new THREE.Matrix4();\r\n        rotWorldMatrix.makeRotationAxis(n, ra);\r\n        //arc.matrix.multiply(rotWorldMatrix);\r\n        rotWorldMatrix.multiply(arc.matrix);\r\n        arc.matrix = rotWorldMatrix;\r\n        arc.rotation.setFromRotationMatrix(arc.matrix);\r\n\r\n        // Check if rotate to the wrong direction, if so, rotate back twice of the degree\r\n        arc.updateMatrixWorld();\r\n        vA = arc.geometry.vertices[1].clone();\r\n        vB = arc.geometry.vertices[arc.geometry.vertices.length - 2].clone();\r\n        vA.applyMatrix4(arc.matrixWorld);\r\n        vB.applyMatrix4(arc.matrixWorld);\r\n\r\n        v1.subVectors(vA, p);\r\n        v2.subVectors(vB, p);\r\n\r\n        a13 = v1.angleTo(v3);\r\n        a14 = v1.angleTo(v4);\r\n        a23 = v2.angleTo(v3);\r\n        a24 = v2.angleTo(v4);\r\n\r\n        //console.log(a13 * 180 / Math.PI + \" \" + a14 * 180 / Math.PI + \" \" + a23 * 180 / Math.PI + \" \" + a24 * 180 / Math.PI);\r\n\r\n        if (a13 >= smallNum && a14 >= smallNum) {\r\n\r\n            rotWorldMatrix = new THREE.Matrix4();\r\n            rotWorldMatrix.makeRotationAxis(n, - ra * 2);\r\n            //arc.matrix.multiply(rotWorldMatrix);\r\n            rotWorldMatrix.multiply(arc.matrix);\r\n            arc.matrix = rotWorldMatrix;\r\n            arc.rotation.setFromRotationMatrix(arc.matrix);\r\n        }\r\n\r\n        // draw outline of the arc\r\n        var outlineGeometry = new THREE.CircleGeometry(radius, segments, 0, angle * Math.PI / 180);\r\n        outlineGeometry.vertices.splice(0, 1);\r\n        arc.updateMatrixWorld();\r\n        outlineGeometry.applyMatrix(arc.matrixWorld);\r\n        this.angleOutline = this.drawEdgeAsCylinder(outlineGeometry, this.lines.xyz.material, _angleArcWidth, 0, this.getNewCylinderGeometry());\r\n\r\n        this.angleArc = arc;\r\n        this.viewer.impl.addOverlay(this.overlayName, this.angleArc);\r\n        this.viewer.impl.addMultipleOverlays(this.overlayName, this.angleOutline);\r\n\r\n        // This is used for angle label's position\r\n        midPoint.copy(arc.geometry.vertices[Math.round(arc.geometry.vertices.length / 2) - 1]);\r\n        midPoint.applyMatrix4(arc.matrixWorld);\r\n        var dir = new THREE.Vector3();\r\n        dir.subVectors(midPoint, p).normalize();\r\n        dir.multiplyScalar(radius / 2);\r\n        midPoint.add(dir);\r\n    };\r\n\r\n    proto.renderAngleMeasurementFromPoints = function(pickPositions) {\r\n        var p1, p2;\r\n\r\n        var points = [];\r\n        \r\n        const keys = Object.keys(pickPositions);\r\n        for (var i = 0; i < keys.length - 1; i++) {\r\n            const key = parseFloat(keys[i]);\r\n            const position1 = pickPositions[key];\r\n            const position2 = pickPositions[key+1];\r\n\r\n            p1 = new THREE.Vector3(position1.x, position1.y, position1.z);\r\n            p2 = new THREE.Vector3(position2.x, position2.y, position2.z);\r\n\r\n            this.drawSegmentAndPush(p1, p2);\r\n\r\n            if (p1) {\r\n                points.push(p1);    \r\n            }\r\n        }\r\n\r\n        if (p2) {\r\n            points.push(p2);\r\n        }\r\n        \r\n        if (points.length === 3 && this.measurement.angle) {\r\n            var n = new THREE.Vector3();\r\n            var v1 = new THREE.Vector3();\r\n            var v2 = new THREE.Vector3();\r\n            v1.subVectors(points[0], points[1]);\r\n            v2.subVectors(points[1], points[2]);\r\n            n.crossVectors(v1, v2);\r\n            n.normalize();\r\n\r\n            var midPoint = new THREE.Vector3();\r\n            this.drawAngle(points[1], points[0], points[2], n, this.measurement.angle, midPoint);\r\n            this.showAngleLabel(midPoint);\r\n            this.updateAngle();\r\n        }        \r\n    };\r\n\r\n    proto.renderAngleMeasurement = function(picks) {\r\n\r\n        var count = this.measurement.countPicks();\r\n        var p1, p2;\r\n\r\n        var points = [];\r\n        \r\n        for (var i = 1; i < count; i++) {\r\n            p1 = MeasureCommon.getSnapResultPosition(picks[i], this.viewer);\r\n            p2 = MeasureCommon.getSnapResultPosition(picks[i + 1], this.viewer);\r\n\r\n            this.drawSegmentAndPush(p1, p2);\r\n\r\n            if (p1) {\r\n                points.push(p1);    \r\n            }\r\n        }\r\n\r\n        if (p2) {\r\n            points.push(p2);\r\n        }\r\n        \r\n        if (points.length === 3 && this.measurement.angle) {\r\n            var n = new THREE.Vector3();\r\n            var v1 = new THREE.Vector3();\r\n            var v2 = new THREE.Vector3();\r\n            v1.subVectors(points[0], points[1]);\r\n            v2.subVectors(points[1], points[2]);\r\n            n.crossVectors(v1, v2);\r\n            n.normalize();\r\n\r\n            var midPoint = new THREE.Vector3();\r\n            this.drawAngle(points[1], points[0], points[2], n, this.measurement.angle, midPoint);\r\n            this.showAngleLabel(midPoint);\r\n            this.updateAngle();\r\n        }        \r\n    };\r\n\r\n    proto.createDistanceLabel = function(item) {\r\n        var label = item.label = this.createMeasurementLabel();\r\n        \r\n        setVisibilityMeasurementLabelText(label, item === this.lines.xyz);\r\n\r\n        const _document = this.getDocument();\r\n        // Override main label when displaying only an axis label (X, Y or Z)\r\n        if (item.axis) {\r\n            label.className = item.className;\r\n            var axisIcon = _document.createElement('div');\r\n            axisIcon.className = 'measure-label-axis-icon ' + item.iconText;\r\n            axisIcon.innerText = item.iconText;\r\n            label.insertBefore(axisIcon, label.firstChild);\r\n\r\n            if (!av.isMobileDevice()) {\r\n                MeasureCommon.safeToggle(label, 'enableTransition', true);\r\n            }\r\n        }\r\n\r\n        this.viewer.container.appendChild(label);\r\n\r\n        return label;\r\n    };\r\n\r\n    proto.updateLine = function(item, x1, y1, z1, x2, y2, z2, showAxis) {\r\n        var line = item.line,\r\n            label = item.label,\r\n            p1 = new THREE.Vector3(x1, y1, z1),\r\n            p2 = new THREE.Vector3(x2, y2, z2);\r\n\r\n        // Swap points if needed to have consistent axis directions.\r\n        var tmpVec;\r\n        if (item === this.lines.x && p2.x > p1.x) {\r\n            tmpVec = p1.clone();\r\n            p1 = p2.clone();\r\n            p2 = tmpVec.clone();\r\n        } \r\n        else if (item === this.lines.y && p2.y > p1.y) {\r\n            tmpVec = p1.clone();\r\n            p1 = p2.clone();\r\n            p2 = tmpVec.clone();\r\n        } \r\n        else if (item === this.lines.z && p2.z > p1.z) {\r\n            tmpVec = p1.clone();\r\n            p1 = p2.clone();\r\n            p2 = tmpVec.clone();\r\n        }\r\n\r\n        item.line = null;            \r\n\r\n        if (!label) {\r\n            label = this.createDistanceLabel(item);\r\n        }\r\n        else {\r\n            this.hideLabel(label);\r\n        }\r\n        \r\n        if (((this.isLeaflet && item !== this.lines.z) || (p1.distanceTo(p2) >= MeasureCommon.EPSILON)) && showAxis) {\r\n\r\n            item.p1 = p1;\r\n            item.p2 = p2;\r\n\r\n            if (item === this.lines.xyz) {\r\n                this.drawXYZLine(item);\r\n                this.showLabel(label);\r\n                this.updateDistance();\r\n            }\r\n            else {\r\n                line = item.line = this.drawLineSegment(p1, p2, _axisLineWidth, item.material);\r\n                var show = !this.simple && this.showMeasureResult;\r\n\r\n                line.visible = show;\r\n                item.visible = show;\r\n\r\n                if (show) {\r\n                    this.showLabel(label);\r\n                }\r\n                else {\r\n                    this.hideLabel(label);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Draw distance measurement\r\n    proto.renderDistanceMeasurementFromPoints = function(p1, p2) {\r\n\r\n        this.updateLine(this.lines.xyz, p1.x, p1.y, p1.z, p2.x, p2.y, p2.z, true);\r\n\r\n        var up = this.viewer.navigation.getAlignedUpVector(),\r\n            x = Math.abs(up.x),\r\n            y = Math.abs(up.y),\r\n            z = Math.abs(up.z);\r\n\r\n        var showAxis = false;\r\n\r\n        if (z > x && z > y) { // z up\r\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\r\n            this.updateLine(this.lines.y, p2.x, p1.y, p1.z, p2.x, p2.y, p1.z, showAxis);\r\n            this.updateLine(this.lines.z, p2.x, p2.y, p1.z, p2.x, p2.y, p2.z, showAxis);\r\n\r\n        } else if (y > x && y > z) { // y up\r\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\r\n            this.updateLine(this.lines.z, p2.x, p1.y, p1.z, p2.x, p1.y, p2.z, showAxis);\r\n            this.updateLine(this.lines.y, p2.x, p1.y, p2.z, p2.x, p2.y, p2.z, showAxis);\r\n\r\n        } else { // x up - do we ever see this?\r\n            this.updateLine(this.lines.y, p1.x, p1.y, p1.z, p1.x, p2.y, p1.z, showAxis);\r\n            this.updateLine(this.lines.z, p1.x, p2.y, p1.z, p1.x, p2.y, p2.z, showAxis);\r\n            this.updateLine(this.lines.x, p1.x, p2.y, p2.z, p2.x, p2.y, p2.z, showAxis);\r\n        }\r\n\r\n    };\r\n\r\n    // Draw distance measurement\r\n    proto.renderDistanceMeasurement = function(p1, p2)\r\n    {\r\n        var self = this;\r\n\r\n        // If the line aligns with one of axis, then don't show axis\r\n        function displayAxis(p1, p2) {\r\n            self.tmpVector.subVectors(p1, p2);\r\n            self.tmpVector.normalize();\r\n\r\n            return !MeasureCommon.isParallel(self.tmpVector, self.xAxis) && !MeasureCommon.isParallel(self.tmpVector, self.yAxis) && !MeasureCommon.isParallel(self.tmpVector, self.zAxis);\r\n        }\r\n\r\n        this.updateLine(this.lines.xyz, p1.x, p1.y, p1.z, p2.x, p2.y, p2.z, true);\r\n\r\n        var up = this.viewer.navigation.getAlignedUpVector(),\r\n            x = Math.abs(up.x),\r\n            y = Math.abs(up.y),\r\n            z = Math.abs(up.z);\r\n\r\n        var showAxis = displayAxis(p1, p2);\r\n\r\n        if (z > x && z > y) { // z up\r\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\r\n            this.updateLine(this.lines.y, p2.x, p1.y, p1.z, p2.x, p2.y, p1.z, showAxis);\r\n            this.updateLine(this.lines.z, p2.x, p2.y, p1.z, p2.x, p2.y, p2.z, showAxis);\r\n\r\n        } else if (y > x && y > z) { // y up\r\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\r\n            this.updateLine(this.lines.z, p2.x, p1.y, p1.z, p2.x, p1.y, p2.z, showAxis);\r\n            this.updateLine(this.lines.y, p2.x, p1.y, p2.z, p2.x, p2.y, p2.z, showAxis);\r\n\r\n        } else { // x up - do we ever see this?\r\n            this.updateLine(this.lines.y, p1.x, p1.y, p1.z, p1.x, p2.y, p1.z, showAxis);\r\n            this.updateLine(this.lines.z, p1.x, p2.y, p1.z, p1.x, p2.y, p2.z, showAxis);\r\n            this.updateLine(this.lines.x, p1.x, p2.y, p2.z, p2.x, p2.y, p2.z, showAxis);\r\n        }\r\n\r\n    };\r\n\r\n    proto.updateResults = function() {\r\n        this.updateDistance();\r\n        this.updateAngle();\r\n        this.updateArea();\r\n        \r\n        setTimeout(function(){\r\n            // This can get called after the viewer is unloaded\r\n            if (this.viewer.impl)\r\n                this.updateLabelsPosition();\r\n        }.bind(this), 0);\r\n    };\r\n\r\n    // Update distance measurement label\r\n    proto.updateDistance = function() {\r\n\r\n        function setWidth(label, value) {\r\n            if (!label) return;\r\n            label.style.width = value;\r\n        }\r\n\r\n        function getWidth(label) {\r\n            return label ? label.clientWidth : 0;\r\n        }\r\n\r\n        Object.keys(this.lines).forEach(function(name) {\r\n            setWidth(this.lines[name].label, '');\r\n        }.bind(this));\r\n        \r\n        setDeltaMeasurementLabelText(this.lines.x.label, \"~ \" + this.measureTool.getDistanceX(this.measurement));\r\n        setDeltaMeasurementLabelText(this.lines.y.label, \"~ \" + this.measureTool.getDistanceY(this.measurement));\r\n        setDeltaMeasurementLabelText(this.lines.z.label, \"~ \" + this.measureTool.getDistanceZ(this.measurement));\r\n        setValueMeasurementLabelText(this.lines.xyz.label, \"~ \" + this.measureTool.getDistanceXYZ(this.measurement));\r\n\r\n        if (this.viewer.model && this.viewer.model.is3d()) {\r\n            setTimeout(function(){\r\n                var maxWidth = Math.max(getWidth(this.lines.x.label), getWidth(this.lines.y.label), getWidth(this.lines.z.label), getWidth(this.lines.xyz.label));                \r\n                Object.keys(this.lines).forEach(function(name) {\r\n                    setWidth(this.lines[name].label, maxWidth + 'px');\r\n                }.bind(this));\r\n            }.bind(this), 0);\r\n        }\r\n    };\r\n\r\n    // Update angle measurement label\r\n    proto.updateAngle = function() {\r\n        setValueMeasurementLabelText(this.angleLabel.label, \"~ \" + this.measureTool.getAngle(this.measurement));\r\n    };\r\n\r\n    // Update area measurement label\r\n    proto.updateArea = function() {\r\n        setValueMeasurementLabelText(this.areaLabel.label, \"~ \" + this.measureTool.getArea(this.measurement));\r\n    };\r\n\r\n    // Set if collapse or expand the xyz delta distance\r\n    proto.setSimple = function(simple) {\r\n        if (this.simple != simple) {\r\n            this.simple = simple;\r\n\r\n            var isVisible = !simple;\r\n            this.setLineVisible(this.lines.x, isVisible);\r\n            this.setLineVisible(this.lines.y, isVisible);\r\n            this.setLineVisible(this.lines.z, isVisible);\r\n\r\n            this.updateLabelsPosition();\r\n\r\n            this.viewer.impl.invalidate(false, false, /*overlayDirty=*/true);\r\n        }\r\n    };\r\n\r\n    proto.setLineVisible = function(item, isVisible) {\r\n        if (item.line) {\r\n            item.line.visible = isVisible;\r\n            item.visible = isVisible;\r\n\r\n            if (item.label) {\r\n                if (isVisible) {\r\n                    this.showLabel(item.label);\r\n                }\r\n                else {\r\n                    this.hideLabel(item.label);\r\n                    item.label.style.opacity = 0;\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.enableLabelsTouchEvents = function(enable) {\r\n        var value = enable ? 'all' : 'none';\r\n\r\n        if (this.lines.xyz.label) {\r\n            this.lines.xyz.label.style.pointerEvents = value;   \r\n        }\r\n\r\n        if (this.angleLabel.label) {\r\n            this.angleLabel.label.style.pointerEvents = value;   \r\n        }\r\n\r\n        if (this.areaLabel.label) {\r\n            this.areaLabel.label.style.pointerEvents = value;\r\n        }\r\n    };\r\n\r\n    proto.setLabelsZIndex = function(zIndex) {\r\n        for (var name in this.lines) {\r\n            if (this.lines.hasOwnProperty(name)) {\r\n                var item = this.lines[name];\r\n                if (item.label) {\r\n                    item.label.style.zIndex = zIndex;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.angleLabel && this.angleLabel.label) {\r\n            this.angleLabel.label.style.zIndex = zIndex;    \r\n        }\r\n\r\n        if (this.areaLabel && this.areaLabel.label) {\r\n            this.areaLabel.label.style.zIndex = zIndex;    \r\n        }\r\n\r\n        for (name in this.endpoints) {\r\n            if (this.endpoints.hasOwnProperty(name)) {\r\n                var endpoint = this.endpoints[name];\r\n                if (endpoint.label) {\r\n                    endpoint.label.style.zIndex = zIndex - 1;\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.focusLabels = function() {\r\n        this.setLabelsZIndex(3);\r\n    };\r\n\r\n    proto.unfocusLabels = function() {\r\n        this.setLabelsZIndex(2);\r\n    };\r\n\r\n    proto.clear = function() {\r\n        var name;\r\n\r\n        for (name in this.endpoints) {\r\n            if (this.endpoints.hasOwnProperty(name)) {\r\n                var endpoint = this.endpoints[name];\r\n                if (endpoint.label) {\r\n                    this.hideLabel(endpoint.label);\r\n                }\r\n            }\r\n        }\r\n\r\n        for (name in this.lines) {\r\n            if (this.lines.hasOwnProperty(name)) {\r\n                var item = this.lines[name];\r\n                if (item.line) {\r\n                    item.line.visible = false;\r\n                    item.visible = false;\r\n\r\n                    item.tips && item.tips.forEach(function(tip) {\r\n                        tip.visible = false;\r\n                    });\r\n                }\r\n                if (item.label) {\r\n                    this.hideLabel(item.label);\r\n                    item.label.style.opacity = 0;\r\n                    item.label.style.zIndex = 2;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.angleLabel && this.angleLabel.label) {\r\n            this.hideLabel(this.angleLabel.label);\r\n        }\r\n\r\n        if (this.areaLabel && this.areaLabel.label) {\r\n            this.hideLabel(this.areaLabel.label);\r\n        }\r\n        \r\n        this.clearSelectionAreas();\r\n\r\n        this.segments = [];\r\n        this.dashedLine = {};\r\n\r\n        this.viewer.impl.clearOverlay(this.overlayName);\r\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\r\n    };\r\n\r\n    proto.hideClick = function(pickNumber) {\r\n\r\n        Indicator.prototype.hideClick.call(this, pickNumber);\r\n\r\n        for (var name in this.lines) {\r\n            if (this.lines.hasOwnProperty(name)) {\r\n                var item = this.lines[name];\r\n                if (item.line) {\r\n                    item.line.visible = false;\r\n                    item.visible = false;\r\n\r\n                    item.tips && item.tips.forEach(function(tip) {\r\n                        tip.visible = false;\r\n                    });\r\n                }\r\n                if (item.label) {\r\n                    this.hideLabel(item.label);\r\n                    item.label.style.opacity = 0;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.angleLabel && this.angleLabel.label) {\r\n            this.hideLabel(this.angleLabel.label);\r\n        }\r\n\r\n        if (this.areaLabel && this.areaLabel.label) {\r\n            this.hideLabel(this.areaLabel.label);\r\n        }\r\n\r\n        this.enableSelectionAreas(item.selectionArea, false);\r\n    };\r\n\r\n    proto.destroy = function() {\r\n        var name;\r\n\r\n        Indicator.prototype.destroy.call(this);\r\n\r\n        for (name in this.lines) {\r\n            if (this.lines.hasOwnProperty(name)) {\r\n                var item = this.lines[name];\r\n                if (item.line) {\r\n                    this.viewer.impl.clearOverlay(self.overlayName);\r\n                    item.material = item.line = item.geometry = null;\r\n                }\r\n\r\n                if (item.label) {\r\n                    if (name === 'xyz') {\r\n                        item.label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n                        item.label.removeEventListener('click', this.onSelectionAreaClickedBinded);    \r\n                        item.label.removeEventListener('dblclick', this.onSelectionAreaDbClickedBinded);    \r\n                    }\r\n\r\n                    item.label.parentNode.removeChild(item.label);\r\n                    item.label = null;\r\n                }\r\n                item.material = item.line = item.geometry = item.label = item.p1 = item.p2 = null;\r\n            }\r\n        }\r\n\r\n        this.clearAngleMeshes();\r\n        \r\n        if (this.angleLabel && this.angleLabel.label) {\r\n            this.angleLabel.label.parentNode.removeChild(this.angleLabel.label);\r\n            this.angleLabel.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n            this.angleLabel.label.removeEventListener('click', this.onSelectionAreaClickedBinded);\r\n            this.angleLabel.label.removeEventListener('dblclick', this.onSelectionAreaDbClickedBinded);\r\n             this.angleLabel.label = this.angleLabel.p1 = this.angleLabel.p2 = null;\r\n        }\r\n\r\n        \r\n\r\n        if (this.areaLabel && this.areaLabel.label) {\r\n            this.areaLabel.label.parentNode.removeChild(this.areaLabel.label);\r\n            this.areaLabel.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n            this.areaLabel.label.removeEventListener('click', this.onSelectionAreaClickedBinded);\r\n            this.areaLabel.label.removeEventListener('dblclick', this.onSelectionAreaDbClickedBinded);\r\n            this.areaLabel.label = this.areaLabel.p1 = this.areaLabel.p2 = null;\r\n        }\r\n        \r\n        \r\n\r\n        if (this.viewer.impl.overlayScenes[this.overlayName]){\r\n            this.viewer.impl.removeOverlayScene(this.overlayName);\r\n        }\r\n\r\n        this.viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\r\n        this.removeWindowEventListener('mouseup', this.handleButtonUpBinded);\r\n    };\r\n\r\n    proto.clearXYZLine = function() {\r\n        this.viewer.impl.removeOverlay(this.overlayName, this.lines.xyz.line);\r\n\r\n        this.lines.xyz.tips && this.lines.xyz.tips.forEach(function(tip) {\r\n            this.viewer.impl.removeOverlay(this.overlayName, tip);\r\n        }.bind(this));\r\n    };\r\n\r\n    // Update scale for vertex, edge, line and extension dash line\r\n    proto.updateScale = function() {\r\n        var name;\r\n\r\n        this.angleOutline.forEach(cylinderMesh => this.setCylinderScale(cylinderMesh));\r\n\r\n        for (name in this.lines) {\r\n            if (this.lines.hasOwnProperty(name)) {\r\n                var item = this.lines[name];\r\n                if (item.line && item !== this.lines.xyz) {\r\n                    this.setCylinderScale(item.line, item.p1, item.p2);\r\n                }\r\n            }\r\n        }\r\n        \r\n        for (name in this.segments) {\r\n            if (this.segments.hasOwnProperty(name)) {\r\n                var segment = this.segments[name];\r\n                if (segment.line) {\r\n                    this.setCylinderScale(segment.line, segment.p1, segment.p2);\r\n                } \r\n            }\r\n        }\r\n        \r\n        if (this.measurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE) {\r\n            if (this.measurement.isComplete()) {\r\n                this.clearXYZLine();\r\n                this.drawXYZLine(this.lines.xyz);\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.setNoTopology = function(){\r\n        this.topologyStatus = TOPOLOGY_NOT_AVAILABLE;\r\n        if (this.lines.xyz.label) {\r\n            setVisibilityMeasurementLabelSpinner(this.lines.xyz.label, false, this.topologyStatus);\r\n            this.lines.xyz.label.classList.remove('fetching-topology');\r\n        }\r\n    };\r\n    proto.setFetchingTopology = function() {\r\n        this.topologyStatus = TOPOLOGY_FETCHING;\r\n        if (this.lines.xyz.label) {\r\n            setVisibilityMeasurementLabelSpinner(this.lines.xyz.label, true, this.topologyStatus);\r\n                this.lines.xyz.label.classList.add('fetching-topology');\r\n        }\r\n    };\r\n    proto.setTopologyAvailable = function() {\r\n        this.topologyStatus = TOPOLOGY_AVAILABLE;\r\n        if (this.lines.xyz.label) {\r\n            setVisibilityMeasurementLabelSpinner(this.lines.xyz.label, false, this.topologyStatus);\r\n            this.lines.xyz.label.classList.remove('fetching-topology');\r\n        }\r\n    };\r\n\r\n    proto.createMeasurementLabel = function() {\r\n      \r\n        const _document = this.getDocument();\r\n\r\n        var label = _document.createElement('div');\r\n        label.className = 'measure-length';\r\n        \r\n        var spinner = _document.createElement('div');\r\n        spinner.className = 'measure-fetching-topology';\r\n        spinner.style.display = 'none';\r\n        label.appendChild(spinner);\r\n\r\n        var text = _document.createElement('div');\r\n        text.className = 'measure-length-text';\r\n        label.appendChild(text);    \r\n\r\n        var delta = _document.createElement('div');\r\n        delta.className = 'measure-delta-text';\r\n        label.appendChild(delta);\r\n\r\n        label.causeStacking = true;\r\n        \r\n        if (!av.isMobileDevice()) {\r\n            MeasureCommon.safeToggle(label, 'enable-hover', true);\r\n        }\r\n\r\n        return label;\r\n    };\r\n\r\n    // Receives an object created with createMeasurementLabel()\r\n    function setVisibilityMeasurementLabelText(label, isVisible) {\r\n        var div = label.querySelector('.measure-length-text');\r\n        div && (div.style.display = isVisible ? '' : 'none');\r\n    }\r\n\r\n    // Receives an object created with createMeasurementLabel()\r\n    function setValueMeasurementLabelText(label, strValue) {\r\n        if (!label) return;\r\n        var div = label.querySelector('.measure-length-text');\r\n        div && (div.textContent = strValue);\r\n    }\r\n\r\n    // Receives an object created with createMeasurementLabel()\r\n    function setDeltaMeasurementLabelText(label, strValue) {\r\n        if (!label) return;\r\n        var div = label.querySelector('.measure-delta-text');\r\n        div && (div.textContent = strValue);\r\n    }\r\n\r\n    // Receives an object created with createMeasurementLabel()\r\n    function setVisibilityMeasurementLabelSpinner(label, isVisible, topologyStatus) {\r\n        if (!label) return;\r\n        var div = label.querySelector('.measure-fetching-topology');\r\n        div && (div.style.display = \r\n            (isVisible && topologyStatus === TOPOLOGY_FETCHING) ? 'inline-block' : 'none');\r\n    }\r\n\r\n    /**\r\n     * Helper function that creates the label used for (1) and (2),\r\n     * which are the 2 mouse clicks for the measurement.\r\n     */\r\n    proto.createSnapResultLabel = function(pointNumber) {\r\n        const _document = this.getDocument();\r\n\r\n        var label = _document.createElement('div');\r\n        label.className = 'measure-label';\r\n\r\n        var label_icon = _document.createElement('div');\r\n        label_icon.className = 'measure-label-icon';\r\n        label.appendChild(label_icon);\r\n\r\n        if (av.isTouchDevice()) {\r\n            this.initLabelMobileGestures(label, pointNumber, this.measureTool);\r\n            var hitArea = _document.createElement('div');\r\n            hitArea.className = 'measure-label-hit-area';\r\n            label.appendChild(hitArea);                      \r\n        } \r\n         \r\n        if (!av.isMobileDevice()) {\r\n            this.initMouseEvent(label, pointNumber);\r\n\r\n            label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n            MeasureCommon.safeToggle(label, 'enable-hover', true);  \r\n        }\r\n        \r\n \r\n        label.causeStacking = false;\r\n        \r\n        return label;\r\n    };\r\n\r\n    proto.showAngleLabel = function(midPoint) {\r\n\r\n            var label = this.angleLabel.label;\r\n\r\n            if (!label) {\r\n                label = this.angleLabel.label = this.createMeasurementLabel();\r\n                this.viewer.container.appendChild(label);\r\n                label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n                label.addEventListener('click', this.onSelectionAreaClickedBinded);\r\n                label.addEventListener('dblclick', this.onSelectionAreaDbClickedBinded);\r\n            }\r\n\r\n            this.updateAngle();\r\n            this.showLabel(label);\r\n\r\n            this.angleLabel.p1 = midPoint.clone();\r\n            this.angleLabel.p2 = midPoint.clone();\r\n\r\n    };\r\n\r\n    proto.showAreaLabel = function(midPoint) {\r\n\r\n            var label = this.areaLabel.label;\r\n\r\n            if (!label) {\r\n                label = this.areaLabel.label = this.createMeasurementLabel();\r\n                this.viewer.container.appendChild(label);\r\n                label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n                label.addEventListener('click', this.onSelectionAreaClickedBinded);\r\n                label.addEventListener('dblclick', this.onSelectionAreaDbClickedBinded);\r\n            }\r\n\r\n            this.updateArea();\r\n            this.showLabel(label);\r\n\r\n            this.areaLabel.p1 = midPoint;\r\n            this.areaLabel.p2 = midPoint;\r\n\r\n    };\r\n\r\n    proto.onSelectionAreaClicked = function() {\r\n        console.log('Select label ahihi');\r\n        this.measureTool.selectMeasurementById(this.measurement.id);\r\n    };\r\n\r\n    proto.onSelectionAreaDbClicked = function() {\r\n        console.log('Double click label ahihi');\r\n        this.measureTool.selectMeasurementById(this.measurement.id);\r\n    };\r\n\r\n    proto.createSelectionArea = function() {\r\n        const _document = this.getDocument();\r\n        var selectionArea = _document.createElement('div');\r\n        selectionArea.id = 'measurement-selection-area-' + this.measurement.id;\r\n        this.viewer.container.appendChild(selectionArea);\r\n        selectionArea.className = 'measure-selection-area';\r\n        selectionArea.style.display = 'none';\r\n        selectionArea.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n        selectionArea.addEventListener('click', this.onSelectionAreaClickedBinded);\r\n        selectionArea.addEventListener('dblclick', this.onSelectionAreaDbClickedBinded);\r\n        return selectionArea;\r\n    };\r\n\r\n    proto.updateSelectionArea = function() {\r\n\r\n        this.segments.forEach(function(item) \r\n        {\r\n            if (item.p1 && item.p2) {\r\n                var p1 = MeasureCommon.project(item.p1, this.viewer);\r\n                var p2 = MeasureCommon.project(item.p2, this.viewer);\r\n\r\n                if (!item.selectionArea) {\r\n                    item.selectionArea = this.createSelectionArea();\r\n                }\r\n\r\n                var selectionArea = item.selectionArea;\r\n\r\n                var v = new THREE.Vector2();\r\n\r\n                selectionArea.style.top = (p1.y - (_selectorAreaSize / 2)) + 'px';\r\n                selectionArea.style.left = p1.x  + 'px';\r\n                selectionArea.style.width = v.subVectors(p1, p2).length() + 'px';\r\n                selectionArea.style.height = _selectorAreaSize + 'px';\r\n\r\n                var angle = null;\r\n                var deltaX = p1.x - p2.x;\r\n                var deltaY = p1.y - p2.y;\r\n\r\n                angle =  Math.atan2(-deltaY , -deltaX) * 180 / Math.PI;    \r\n\r\n                selectionArea.style.transform = 'rotate('+ angle +'deg)';\r\n                selectionArea.style.transformOrigin = '0px ' + (_selectorAreaSize / 2) + 'px';\r\n            }\r\n        }.bind(this));\r\n\r\n        if (this.measureTool.areAllPicksSet()) {\r\n            this.enableSelectionAreas(true);    \r\n        }\r\n    };\r\n\r\n    proto.clearSelectionAreas = function() {\r\n        const _document = this.getDocument();\r\n        this.segments.forEach(function(item) \r\n        {  \r\n            if (item.selectionArea) {\r\n                item.selectionArea.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n                item.selectionArea.removeEventListener('click', this.onSelectionAreaClickedBinded);\r\n                item.selectionArea.removeEventListener('dblclick', this.onSelectionAreaDbClickedBinded);\r\n                var element = _document.getElementById('measurement-selection-area-' + this.measurement.id);\r\n                if (element) {\r\n                    element.parentNode.removeChild(element);\r\n                }\r\n                item.selectionArea = null;\r\n            }\r\n        }.bind(this));\r\n    };\r\n\r\n    proto.enableSelectionAreas = function(enable) {\r\n        this.segments.forEach(function(item) \r\n        {   \r\n            if (item.selectionArea) {\r\n                if (enable) {\r\n                    item.selectionArea.style.display = 'block';\r\n                } \r\n                else {\r\n                    item.selectionArea.style.display = 'none';\r\n                }\r\n            }\r\n        }.bind(this));\r\n    };\r\n\r\n    proto.render = function(picks, showMeasureResult) {\r\n        Indicator.prototype.render.call(this, picks, showMeasureResult);\r\n\r\n        this.updateSelectionArea();\r\n    };\r\n\r\n    proto.renderFromPoints = function(points, showMeasureResult) {\r\n        Indicator.prototype.renderFromPoints.call(this, points, showMeasureResult);\r\n\r\n        this.updateSelectionArea();\r\n    }\r\n\r\n    proto.onCameraChange = function() {\r\n        this.redrawDashedLine();\r\n        this.updateSelectionArea();\r\n        this.hideLabelsOutsideOfView();\r\n        this.updateLabelsPosition();\r\n    };\r\n\r\n    proto.handleResize = function() {\r\n        this.redrawDashedLine();\r\n        this.updateSelectionArea();\r\n        this.updateLabelsPosition();\r\n    };\r\n\r\n","import { MeasurementsManager } from './MeasurementsManager'\r\nimport { MeasureToolIndicator } from './MeasureToolIndicator'\r\n\r\nconst av = Autodesk.Viewing;\r\n\r\n//\r\n// /** @constructor */\r\n//\r\n//\r\nexport function MeasureTool( viewer, options, sharedMeasureConfig, snapper )\r\n{\r\n    var _viewer  = viewer;\r\n    var _options = options || {};\r\n    var _names  = [\"measure\"];\r\n    var _priority = 50;\r\n\r\n    this.setGlobalManager(viewer.globalManager);\r\n\r\n    // Shared State with CalibrationTool and Indicator\r\n    var _sharedMeasureConfig = sharedMeasureConfig;\r\n\r\n    var av = Autodesk.Viewing;\r\n    var avem = Autodesk.Viewing.Extensions.Measure;\r\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\r\n    // var MeasureCommon = Autodesk.Viewing.MeasureCommon;\r\n    \r\n    // Not shared with Indicator.js\r\n    var _active = false;\r\n    var _isDragging = false;\r\n    var _endpointMoved = false;\r\n    var _activePoint = 0;\r\n    var _consumeSingleClick = false;\r\n    var _singleClickHandled = false;\r\n    var _downX = null;\r\n    var _downY = null;\r\n    var _isolateMeasure = false;\r\n\r\n    var _measurementsManager = new MeasurementsManager(_viewer);\r\n    var _currentMeasurement = null;\r\n    var _onIndicatorCreatedCB = null;\r\n    \r\n    var _cursor = \"url(data:image/png;base64,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), auto\";\r\n\r\n    // Snapper\r\n    var _snapper = snapper;\r\n    \r\n    var _isPressing = false;\r\n\r\n    var _picksBackup = [];\r\n    var _cursorPosition = null;\r\n\r\n    var _closeAreaSnapRange = 25;\r\n    var _preMeasureState = null;\r\n\r\n    var _measurementType = avem.MEASUREMENT_AREA;\r\n    // var _measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE;\r\n\r\n    var _sessionMeasurements = null;\r\n\r\n    function getActivePick()\r\n    {   \r\n        if(!_currentMeasurement)\r\n            return null;\r\n\r\n        var index;\r\n\r\n        if (_activePoint === 0) {\r\n            return null;\r\n        } else if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\r\n            index = _currentMeasurement.countPicks();\r\n        } else {\r\n               index = _activePoint;\r\n        }\r\n\r\n        return _currentMeasurement.getPick(index);\r\n    }\r\n\r\n    function getPreviousPick()\r\n    {\r\n        if(!_currentMeasurement)\r\n            return null;\r\n\r\n        var index;\r\n\r\n        if (_activePoint === 0) {\r\n            return null;\r\n        } else if (_activePoint === 1) {\r\n            index = _currentMeasurement.countPicks();\r\n        } else if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\r\n            index = _currentMeasurement.countPicks() - 1;\r\n        } else {\r\n            index = _activePoint - 1;\r\n        }\r\n        \r\n        return _currentMeasurement.getPick(index);\r\n    }\r\n\r\n    function hasPreviousPick()\r\n    {\r\n        if(!_currentMeasurement)\r\n            return false;\r\n\r\n        var index;\r\n\r\n        if (_activePoint === 0) {\r\n            return false;\r\n        } else if (_activePoint === 1) {\r\n            index = _currentMeasurement.countPicks();\r\n        } else if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\r\n            index = _currentMeasurement.countPicks() - 1;\r\n        } else {\r\n            index = _activePoint - 1;\r\n        }\r\n        \r\n        return _currentMeasurement.hasPick(index);\r\n    }\r\n\r\n    function noPicksSet() {\r\n        _activePoint = 0;\r\n    }\r\n\r\n    function allPicksSet() {\r\n        _activePoint = _currentMeasurement.countPicks() + 1;\r\n        enableMeasurementsTouchEvents(true);\r\n        _currentMeasurement.indicator.enableSelectionAreas(true);\r\n    }\r\n\r\n    function isNoPicksSet() {\r\n        return _activePoint === 0 || !_currentMeasurement;\r\n    }\r\n\r\n    this.areAllPicksSet = function() {\r\n        return _currentMeasurement && (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1);\r\n    };\r\n\r\n    this.setSessionMeasurements = function(measurementList) {\r\n        // Store the clone of the measurementList\r\n        _sessionMeasurements = JSON.parse(JSON.stringify(measurementList));\r\n    };\r\n\r\n    this.getSessionMeasurements = function() {\r\n        return JSON.parse(JSON.stringify(_sessionMeasurements));\r\n    };\r\n\r\n    this.register = function()\r\n    {\r\n\r\n    };\r\n\r\n    this.deregister = function()\r\n    {\r\n        this.deactivate();\r\n    };\r\n\r\n    this.isActive = function()\r\n    {\r\n        return _active;\r\n    };\r\n\r\n    this.getNames = function()\r\n    {\r\n        return _names;\r\n    };\r\n\r\n    this.getName = function()\r\n    {\r\n        return _names[0];\r\n    };\r\n\r\n    this.getPriority = function()\r\n    {\r\n        return _priority;\r\n    };\r\n\r\n    this.getCursor = function() {\r\n        return _isDragging ? null : _cursor;\r\n    };\r\n\r\n    this.getCurrentMeasurementRaw = function() {\r\n        return _currentMeasurement;\r\n    };\r\n\r\n    this.getActivePointIndex = function() {\r\n        return _activePoint;\r\n    };\r\n\r\n    this.getMeasurementsManager = function() {\r\n        return _measurementsManager;\r\n    }\r\n    \r\n    // ROM COCA\r\n    this.getJson = function() {\r\n        const list = _measurementsManager.measurementsList;\r\n            Object.keys(list).map(i=>{ delete(list[i].indicator) });\r\n            var tmp = JSON.stringify(list);\r\n            Object.keys(list).map(i=>{ console.log(i); list[i].attachIndicator(_viewer, this, MeasureToolIndicator) })\r\n            return tmp;\r\n        }\r\n        this.addPick = function(inp) {\r\n            var json = JSON.parse(JSON.stringify(inp));\r\n            // var p = _currentMeasurement.setPick(json.id, new Autodesk.Viewing.Extensions.Measure.SnapResult())\r\n        \r\n            var p = _currentMeasurement.setPick(json.id, _currentMeasurement.getPick(1).clone())\r\n\r\n            if (json.geomEdge) {\r\n                p.geomEdge = new THREE.Geometry();\r\n                var a = json.geomEdge.data.vertices;\r\n                p.geomEdge.vertices.push( new THREE.Vector3( a[0],a[1],a[2]) );\r\n                p.geomEdge.vertices.push( new THREE.Vector3( a[3],a[4],a[5]) );\r\n            }\r\n            if (json.geomVertex) {\r\n                p.geomVertex = new THREE.Vector3(json.geomVertex.x,json.geomVertex.y,json.geomVertex.z);\r\n            }\r\n\r\n            if (json.snapPoint) {\r\n                p.snapPoint = new THREE.Vector3(json.snapPoint.x,json.snapPoint.y,json.snapPoint.z);\r\n            } \r\n            \r\n            if (json.intersectPoint) {\r\n                p.intersectPoint = new THREE.Vector3(json.intersectPoint.x,json.intersectPoint.y,json.intersectPoint.z);\r\n            }\r\n\r\n            Object.assign(p, {\r\n                geomType:json.geomType,\r\n                fromTopology:false,\r\n                isPerpendicular:false,\r\n                modelId:json.modelId,\r\n                viewportIndex2d:json.viewportIndex2d,\r\n                radius:json.radius\r\n            });\r\n        }\r\n        this.addMeasurement = function(json, MarkupID) {\r\n            console.log('add MarkupID', MarkupID)\r\n            _currentMeasurement = _measurementsManager.createMeasurement(json.measurementType);\r\n            _currentMeasurement.MarkupID = MarkupID;\r\n            for (var key in json.picks) {\r\n                if (!json.picks[key] || json.picks[key] === null) {\r\n                    delete(json.picks[key])\r\n                }\r\n                    \r\n                else\r\n                    this.addPick(json.picks[key])\r\n            }\r\n            _currentMeasurement.closedArea = true;\r\n            _activePoint = Object.keys(json.picks).length+1;\r\n            //clean up non object arrays\r\n            _currentMeasurement.attachIndicator(_viewer, this, MeasureToolIndicator);\r\n            this.onMeasurementChanged();\r\n        }\r\n        this.onSwitchMeasurement = function(e) {\r\n            this.loadJson(e.detail[0], e.detail[1]);\r\n        }\r\n        this.onRemoveMeasurement = function(e) {\r\n            var MarkupID = e.detail;\r\n            \r\n            //var item = _measurementsManager.measurementsList.filter(i=>{return i.MarkupID=MarkupID});\r\n            var item = _measurementsManager.measurementsList[Object.keys(_measurementsManager.measurementsList).filter(i=>{return _measurementsManager.measurementsList[i].MarkupID==MarkupID})];\r\n            \r\n            console.log('removing MarkupID / itemid',MarkupID, item.id);\r\n            \r\n            if (item) {\r\n                console.log('removing MarkupID / itemid',MarkupID, item.id);\r\n                this.selectMeasurementById(item.id);\r\n                this.clearCurrentMeasurement();  \r\n            } else {\r\n                console.log('MarkupID NOT FOUND: removing MarkupID');\r\n            }\r\n      \r\n        }\r\n\r\n        this.loadJson = function(json, id) {\r\n            for (var key in json)\r\n                this.addMeasurement(json[key], id)\r\n        }\r\n\r\n\r\n    this.startNewMeasurement = function() {\r\n        _currentMeasurement = _measurementsManager.createMeasurement(_measurementType);\r\n        _currentMeasurement.attachIndicator(_viewer, this, MeasureToolIndicator);\r\n\r\n        if (_onIndicatorCreatedCB instanceof Function) {\r\n            _onIndicatorCreatedCB();\r\n            _onIndicatorCreatedCB = null;\r\n        }\r\n\r\n        enableMeasurementsTouchEvents(false);\r\n    };\r\n\r\n    this.changeMeasurementType = function(type) {\r\n        _measurementType = type;\r\n    };\r\n\r\n    this.activate = function()\r\n    {\r\n        _active = true;\r\n        _measurementsManager.init();\r\n\r\n        // ROM COCA\r\n        this.setUnits(\"decimal-ft\");\r\n        this.setPrecision(0);\r\n        this.changeMeasurementType(avem.MEASUREMENT_AREA);\r\n\r\n        noPicksSet();\r\n        _isDragging = false;\r\n        this.isEditingEndpoint = false;\r\n        this.editByDrag = false;\r\n\r\n        _viewer.impl.pauseHighlight(true);\r\n\r\n        _viewer.clearSelection();\r\n        _preMeasureState = _viewer.getState({objectSet: true});\r\n        \r\n        _viewer.toolController.activateTool(\"snapper\");\r\n        _viewer.toolController.activateTool(\"magnifyingGlass\");\r\n \r\n       this.onMeasurementChangedBinded = this.onMeasurementChanged.bind(this);\r\n\r\n       // ROM COCA\r\n       this.onSwitchMeasurementBinded = this.onSwitchMeasurement.bind(this);\r\n       this.onRemoveMeasurementBinded = this.onRemoveMeasurement.bind(this);\r\n\r\n       _viewer.addEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChangedBinded);\r\n       _viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChange);\r\n       _viewer.addEventListener(av.SHOW_ALL_EVENT, this.onShowAllEvent);\r\n\r\n       // ROMCOCA\r\n       _viewer.addEventListener(\"newData\", this.onSwitchMeasurementBinded);\r\n       _viewer.addEventListener(\"removeData\", this.onRemoveMeasurementBinded);\r\n\r\n       // Set the stored session measurements only if the preference is enabled\r\n       const restoreSessionMeasurements = _viewer.prefs.get(av.Private.Prefs.RESTORE_SESSION_MEASUREMENTS);\r\n       if (restoreSessionMeasurements) {\r\n           const sessionMeasurements = this.getSessionMeasurements();\r\n           this.setMeasurements(sessionMeasurements);\r\n       }\r\n    };\r\n\r\n    this.deactivate = function()\r\n    {\r\n        if (!_active)\r\n            return;\r\n\r\n        // Store the session measurements only if the preference is enabled\r\n        const restoreSessionMeasurements = _viewer.prefs.get(av.Private.Prefs.RESTORE_SESSION_MEASUREMENTS);\r\n        if (restoreSessionMeasurements) {\r\n            const measurementList = this.getMeasurementList();\r\n            this.setSessionMeasurements(measurementList);\r\n        }\r\n\r\n        _active = false;\r\n        \r\n        this.clearIsolate(); // restore initial isolation\r\n        _preMeasureState = null;\r\n\r\n        while (Object.keys(_measurementsManager.measurementsList).length > 0) {\r\n            _currentMeasurement = _measurementsManager.measurementsList[Object.keys(_measurementsManager.measurementsList)[0]];\r\n            _measurementsManager.changeCurrentMeasurement(_currentMeasurement);\r\n            this.clearCurrentMeasurement();\r\n            _currentMeasurement = null;\r\n        }\r\n\r\n        if(_snapper && _snapper.isActive()) {\r\n            _viewer.toolController.deactivateTool(\"snapper\");\r\n        }\r\n\r\n        _viewer.toolController.deactivateTool(\"magnifyingGlass\");\r\n\r\n        _viewer.impl.pauseHighlight(false);\r\n\r\n        _measurementsManager.destroy();\r\n        _viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChange);\r\n        _viewer.removeEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChangedBinded);\r\n        _viewer.removeEventListener(av.SHOW_ALL_EVENT, this.onShowAllEvent);\r\n\r\n        // ROMCOCA \r\n        _viewer.removeEventListener(\"newData\", this.onSwitchMeasurementBinded);\r\n        _viewer.removeEventListener(\"removeData\", this.onRemoveMeasurementBinded);\r\n    };\r\n\r\n    this.update = function()\r\n    {\r\n        return false;\r\n    };\r\n\r\n    this.getUnits = function() {\r\n        return _sharedMeasureConfig.units;\r\n    };\r\n\r\n    this.setUnits = function( units )\r\n    {\r\n        if (_sharedMeasureConfig.units !== units ) {\r\n            _sharedMeasureConfig.units = units;\r\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.DISPLAY_UNITS_CHANGED, units: units});\r\n\r\n            for (var key in _measurementsManager.measurementsList) {\r\n                if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\r\n                    // Update UI\r\n                    var measurement = _measurementsManager.measurementsList[key];\r\n                    if (measurement.indicator) {\r\n                        measurement.indicator.updateResults();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    this.getPrecision = function() {\r\n        return _sharedMeasureConfig.precision;\r\n    };\r\n\r\n    this.setPrecision = function( precision ) {\r\n\r\n        if (_sharedMeasureConfig.precision !== precision ) {\r\n            _sharedMeasureConfig.precision = precision;\r\n\r\n            for (var key in _measurementsManager.measurementsList) {\r\n                if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\r\n                    // Update UI\r\n                    var measurement = _measurementsManager.measurementsList[key];\r\n                    if (measurement.indicator) {\r\n                        measurement.indicator.updateResults();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Prepare the measurement snap result information into a serializable object.\r\n     * @param {*} measurement \r\n     */\r\n    function getPickData(measurement) {\r\n        measurement = measurement || _currentMeasurement;\r\n        const picks = measurement.clonePicks();\r\n        const picksData = [];\r\n        for (let i = 0; i < picks.length; i++) {\r\n            const pick = picks[i];\r\n\r\n            let pickPoint = MeasureCommon.getSnapResultPosition(pick, _viewer);\r\n            const model = pick.hasOwnProperty('modelId') && pick.modelId ? _viewer.impl.findModel(pick.modelId) : _viewer.model;\r\n            if (model) {\r\n                const modelData = model.getData();\r\n                pickPoint = modelData && modelData.hasOwnProperty('globalOffset') ? pickPoint.clone().sub(modelData.globalOffset) : pickPoint.clone();\r\n            }\r\n\r\n            const pickData = {\r\n                intersection: JSON.parse(JSON.stringify(pickPoint)),\r\n                modelId: pick.modelId,\r\n                viewportIndex2d: pick.viewportIndex2d\r\n            };\r\n            picksData.push(pickData);\r\n        }\r\n\r\n        return picksData;\r\n    };\r\n\r\n    this.getDistanceXYZ = function(measurement) {\r\n        if (!measurement) {\r\n            measurement = _currentMeasurement;\r\n        }\r\n        return this.getDistanceAux(measurement.distanceXYZ);\r\n    };\r\n    this.getDistanceX = function(measurement) {\r\n        if (!measurement) {\r\n            measurement = _currentMeasurement;\r\n        }\r\n        return this.getDistanceAux(measurement.distanceX);\r\n    };\r\n    this.getDistanceY = function(measurement) {\r\n        if (!measurement) {\r\n            measurement = _currentMeasurement;\r\n        }\r\n        return this.getDistanceAux(measurement.distanceY);\r\n    };\r\n    this.getDistanceZ = function(measurement) {\r\n        if (!measurement) {\r\n            measurement = _currentMeasurement;\r\n        }\r\n        return this.getDistanceAux(measurement.distanceZ);\r\n    };\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    this.getDistanceAux = function (measurementDistance) {\r\n\r\n        if (_viewer.model) {\r\n            var d = Autodesk.Viewing.Private.convertUnits(_viewer.model.getUnitString(), _sharedMeasureConfig.units, _sharedMeasureConfig.calibrationFactor, measurementDistance || 0);\r\n            return Autodesk.Viewing.Private.formatValueWithUnits(d, _sharedMeasureConfig.units, 3, _sharedMeasureConfig.precision);\r\n        }\r\n    };\r\n\r\n    this.getAngle = function(measurement) {\r\n\r\n        if (!measurement) {\r\n            measurement = _currentMeasurement;\r\n        }\r\n        var angle = measurement.angle;\r\n        return Autodesk.Viewing.Private.formatValueWithUnits(angle, String.fromCharCode(0xb0), 3, _sharedMeasureConfig.precision);\r\n    };\r\n\r\n    this.getArea = function(measurement) { \r\n\r\n        if (_viewer.model) {\r\n\r\n            if (!measurement) {\r\n                measurement = _currentMeasurement;\r\n            }\r\n\r\n            var area = Autodesk.Viewing.Private.convertUnits(viewer.model.getUnitString(), _sharedMeasureConfig.units, _sharedMeasureConfig.calibrationFactor, measurement.area, 'square');\r\n\r\n            if (_sharedMeasureConfig.units) {\r\n                return Autodesk.Viewing.Private.formatValueWithUnits(area, _sharedMeasureConfig.units+'^2', 3, _sharedMeasureConfig.precision);\r\n            }\r\n            else {\r\n                return Autodesk.Viewing.Private.formatValueWithUnits(area, null, 3, _sharedMeasureConfig.precision);\r\n            }\r\n        }\r\n    };\r\n\r\n    function snapToFirstPick(currentPick, forceSnap) {\r\n        if (_currentMeasurement.hasPick(1) && _activePoint > 3 && !_currentMeasurement.closedArea) {\r\n            var firstPick = _currentMeasurement.getPick(1);\r\n            var firstPickPoint = MeasureCommon.getSnapResultPosition(firstPick, _viewer);\r\n            var firstPickPosition = MeasureCommon.project(firstPickPoint, viewer);\r\n            var currentPickPoint = MeasureCommon.getSnapResultPosition(currentPick, _viewer);\r\n            var currentPickPosition = MeasureCommon.project(currentPickPoint, viewer);\r\n            \r\n            if (forceSnap || currentPickPosition.distanceTo(firstPickPosition) < _closeAreaSnapRange) {\r\n                _snapper.onMouseMove(firstPickPosition);\r\n                firstPick.copyTo(currentPick);\r\n            }\r\n        }\r\n    }\r\n\r\n    function render(showResult) {\r\n\r\n        var hasResult = _currentMeasurement.computeResult(_currentMeasurement.picks, _viewer, _snapper);\r\n        _currentMeasurement.indicator.render(_currentMeasurement.picks, _consumeSingleClick || !!showResult);\r\n\r\n        return hasResult;\r\n    }\r\n\r\n    /**\r\n     * Sets existing measurements from the passed in measurement list. Reference getMeasurementList.\r\n     * \r\n     * @param {Object[]} measurementList - measurements to set.\r\n     */\r\n    this.setMeasurements = function(measurementList) {\r\n        if (!measurementList) return; // Only set the a measurementList is passed in.\r\n        measurementList = !Array.isArray(measurementList) ? [measurementList] : measurementList;\r\n\r\n        if (measurementList.length === 0) return;\r\n\r\n        function getMeasureType(measureData) {\r\n            let measurementType;\r\n            switch (measureData.type) {\r\n                case 'Distance':\r\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE;\r\n                    break;\r\n                case 'Angle':\r\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE;\r\n                    break;\r\n                case 'Area':\r\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_AREA;\r\n                    break;\r\n                default:\r\n                    return;\r\n            }\r\n            return measurementType;\r\n        }\r\n\r\n        // Restore the supplied measurementList.\r\n        for (let i = 0; i < measurementList.length; i++) {\r\n            const measureData = measurementList[i];\r\n\r\n            const unitType = measureData.unitType;\r\n            const precision = measureData.precision;\r\n            const measurementType = getMeasureType(measureData);\r\n            if (!measurementType) continue;\r\n\r\n            this.setUnits(unitType);\r\n            this.setPrecision(precision);\r\n\r\n            const attachIndicatorCb = (measurement) => {\r\n                _currentMeasurement = measurement; // _currentMeasurement needs to be set for the onMeasurementChanged to work\r\n                measurement.attachIndicator(_viewer, this, MeasureToolIndicator);\r\n\r\n                if (_onIndicatorCreatedCB instanceof Function) {\r\n                    _onIndicatorCreatedCB();\r\n                    _onIndicatorCreatedCB = null;\r\n                }\r\n\r\n                enableMeasurementsTouchEvents(false);\r\n            };\r\n\r\n            const initPicksCb = () => {\r\n                const restoredMeasurements = _measurementsManager.getRestoredMeasurementData();\r\n                const points = restoredMeasurements[_currentMeasurement.id];\r\n                _activePoint = points.length;\r\n            };\r\n\r\n            measureData.sharedUnits = _sharedMeasureConfig.units;\r\n            measureData.sharedCalibrationFactor = _sharedMeasureConfig.calibrationFactor;\r\n\r\n            _measurementsManager.createMeasurementFromData(\r\n                measureData,\r\n                measurementType,\r\n                attachIndicatorCb,\r\n                initPicksCb\r\n            );\r\n        }\r\n\r\n        this.deselectAllMeasurements();\r\n    };\r\n\r\n    function getMeasurementType(measurement) {\r\n        measurement = measurement || _currentMeasurement;\r\n        const types = MeasureCommon.MeasurementTypes;\r\n        const type = measurement.measurementType;\r\n        switch (type) {\r\n            case types.MEASUREMENT_DISTANCE:\r\n                return 'Distance';\r\n            case types.MEASUREMENT_ANGLE:\r\n                return 'Angle';\r\n            case types.MEASUREMENT_AREA:\r\n                return 'Area';\r\n            case types.CALIBRATION:\r\n                return 'Calibration';\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * TODO: We need to flesh out the return value here.\r\n     *\r\n     * @param unitType\r\n     * @param precision\r\n     * @returns {Object}\r\n     */\r\n    this.getMeasurement = function(unitType, precision) {\r\n\r\n        _sharedMeasureConfig.units = unitType || _sharedMeasureConfig.units;\r\n        _sharedMeasureConfig.precision = precision || _sharedMeasureConfig.precision;\r\n\r\n        var geomTypes = ['Vertex', 'Edge', 'Face', 'Circular Arc', 'Curved Edge', 'Curved Face'];\r\n        var picks = getPickData();\r\n        var type = getMeasurementType();\r\n        var measurement = {\r\n            from: geomTypes[_currentMeasurement.getGeometry(1).type],\r\n            to: geomTypes[_currentMeasurement.getGeometry(2).type],\r\n            distance: this.getDistanceXYZ(),\r\n            deltaX: this.getDistanceX(),\r\n            deltaY: this.getDistanceY(),\r\n            deltaZ: this.getDistanceZ(),\r\n            angle: this.getAngle(),\r\n            area: this.getArea(),\r\n            unitType: _sharedMeasureConfig.units,\r\n            precision: _sharedMeasureConfig.precision,\r\n            picks,\r\n            type\r\n        };\r\n\r\n        return measurement;\r\n    };\r\n\r\n    /**\r\n     * @returns {SnapResult[]} list of points for the selected measurement.\r\n     */\r\n    this.getMeasurementPoints = function() {\r\n\r\n        return _currentMeasurement.clonePicks();\r\n    };\r\n\r\n    /**\r\n     * @param unitType\r\n     * @param precision\r\n     * @returns {Array.<Object>}\r\n     */\r\n\r\n    this.getMeasurementList = function(unitType, precision) {\r\n        var list = [];\r\n        var measurement = null;\r\n        // TODO: These need to match the measurement SnapTypes\r\n        var geomTypes = ['Vertex', 'Edge', 'Face', 'Circular Arc', 'Curved Edge', 'Curved Face'];\r\n        var measurementList = Object.keys(_measurementsManager.measurementsList);\r\n\r\n        for(let i = 0; i < measurementList.length; i++) {\r\n            measurement = _measurementsManager.measurementsList[measurementList[i]];\r\n            var picks = getPickData(measurement);\r\n            var type = getMeasurementType(measurement);\r\n            var result = {\r\n              from: geomTypes[measurement.getGeometry(1).type],\r\n              to: geomTypes[measurement.getGeometry(2).type],\r\n              distance: this.getDistanceXYZ(measurement),\r\n              deltaX: this.getDistanceX(measurement),\r\n              deltaY: this.getDistanceY(measurement),\r\n              deltaZ: this.getDistanceZ(measurement),\r\n              angle: this.getAngle(measurement),\r\n              area: this.getArea(measurement),\r\n              unitType: unitType || _sharedMeasureConfig.units,\r\n              precision: precision || _sharedMeasureConfig.precision,\r\n              picks,\r\n              type\r\n            }\r\n            list.push(result);\r\n        }\r\n        return list;\r\n    };\r\n\r\n    this.clearCurrentMeasurement = function() {\r\n        if (_currentMeasurement) {\r\n            noPicksSet();\r\n\r\n            for (var key in _currentMeasurement.picks) {\r\n                if (_currentMeasurement.picks.hasOwnProperty(key)) {\r\n                    this.clearPick(key);    \r\n                }\r\n            }\r\n            \r\n            this.updateViewportId(true);\r\n\r\n            if (_isolateMeasure) {\r\n                this.clearIsolate();    \r\n            }\r\n\r\n            _currentMeasurement.indicator.clear();\r\n            _currentMeasurement.indicator.destroy();\r\n            _currentMeasurement = _measurementsManager.removeCurrentMeasurement();\r\n            _currentMeasurement = null;\r\n        }\r\n\r\n        enableMeasurementsTouchEvents(true);\r\n    };\r\n\r\n    this.clearPick = function(pickNumber) {\r\n        if (_currentMeasurement && _currentMeasurement.hasPick(pickNumber)) {\r\n            _currentMeasurement.clearPick(pickNumber);\r\n            _currentMeasurement.indicator.hideClick(pickNumber);\r\n        }\r\n    };\r\n\r\n    this.setIsolateMeasure = function(enable) {\r\n        _isolateMeasure = enable;\r\n    };\r\n\r\n    this.isolateMeasurement = function () {\r\n\r\n        if (!_active || !_isolateMeasure) {\r\n            return;\r\n        }\r\n\r\n        var defaultModelId = _viewer.model.id;\r\n        var isolationGroups = {};\r\n\r\n        for (var key in _measurementsManager.measurementsList) {\r\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\r\n\r\n                var measurement = _measurementsManager.measurementsList[key];\r\n                for (var key in measurement.picks) {\r\n                    if (measurement.picks.hasOwnProperty(key)) {\r\n                        var pick = measurement.getPick(key);\r\n\r\n                        var modelId = pick.modelId || defaultModelId;\r\n                        if (!Array.isArray(isolationGroups[modelId])) {\r\n                            isolationGroups[modelId] = [];\r\n                        }\r\n                        if (isolationGroups[modelId].indexOf(pick.snapNode) == -1) {\r\n                            isolationGroups[modelId].push(pick.snapNode);\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n    \r\n\r\n        // convert to expected format\r\n        var isolationSet = [];\r\n        for (var modelId in isolationGroups) {\r\n            if (isolationGroups.hasOwnProperty(modelId)) {\r\n\r\n                var modelInstance = _viewer.impl.findModel(parseInt(modelId));\r\n                isolationSet.push({\r\n                    model: modelInstance,\r\n                    ids: isolationGroups[modelId]\r\n                });\r\n            }\r\n        }\r\n\r\n        if (isolationSet.length) {\r\n            _viewer.impl.visibilityManager.aggregateIsolate(isolationSet);\r\n        }\r\n    };\r\n\r\n    // It actually restores the isolation state to the one just before\r\n    // the measure tool was enabled...\r\n    this.clearIsolate = function() {\r\n        if (_preMeasureState) {\r\n            _viewer.restoreState(_preMeasureState, undefined, true);\r\n        }\r\n    };\r\n\r\n    this.onShowAllEvent = function (event) {\r\n        _preMeasureState = null;\r\n    };\r\n\r\n    this.deselectAllMeasurements = function() {\r\n        if (_currentMeasurement && !this.areAllPicksSet()) {\r\n            if (this.isEditingEndpoint) {\r\n                this.undoEditEndpoint();\r\n            }\r\n            else {\r\n                this.clearCurrentMeasurement();\r\n            }\r\n        }\r\n\r\n        for (var key in _measurementsManager.measurementsList) {\r\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\r\n                var measurement = _measurementsManager.measurementsList[key];\r\n                if (measurement.indicator) {\r\n                    measurement.indicator.setSimple(true);        \r\n                    measurement.indicator.hideEndpoints();\r\n                    measurement.indicator.unfocusLabels();\r\n                }\r\n            }\r\n        }\r\n\r\n        _currentMeasurement = null;\r\n    };\r\n\r\n    this.onMeasurementChanged = function() {\r\n        \r\n        this.deselectAllMeasurements();\r\n\r\n        _currentMeasurement = _measurementsManager.getCurrentMeasurement();\r\n        if (_currentMeasurement.isComplete()) {\r\n        \r\n            _currentMeasurement.indicator.setSimple(false);        \r\n            allPicksSet();\r\n            render(true); \r\n            this.updateResults();\r\n\r\n            this.setValueMeasurementLabelText(_currentMeasurement.indicator.areaLabel.label, 'Id: ' + _currentMeasurement?.MarkupID);\r\n            console.log('check _currentMeasurement: ', _currentMeasurement)\r\n        }\r\n    };\r\n\r\n    // Receives an object created with createMeasurementLabel()\r\n    this.setValueMeasurementLabelText = function(label, strValue) {\r\n        if (!label) return;\r\n        var div = label.querySelector('.measure-length-text');\r\n        div && (div.textContent = strValue);\r\n    }\r\n\r\n    this.selectMeasurementById = function(measurementId) {\r\n        \r\n        if (!_currentMeasurement) {\r\n            _currentMeasurement = _measurementsManager.selectMeasurementById(measurementId);\r\n        }\r\n\r\n        if (_currentMeasurement.id !== measurementId) {\r\n            if (!this.areAllPicksSet()) {\r\n                if (this.isEditingEndpoint) {\r\n                    this.undoEditEndpoint();\r\n                }\r\n                else {\r\n                    this.clearCurrentMeasurement();\r\n                }\r\n            }\r\n            \r\n            _currentMeasurement = _measurementsManager.selectMeasurementById(measurementId);\r\n        }\r\n\r\n        console.log('Select Measurement by Id:', measurementId)\r\n        console.log('Current Measurement:', _currentMeasurement)\r\n    };\r\n\r\n    function enableMeasurementsTouchEvents(enable) {\r\n        for (var key in _measurementsManager.measurementsList) {\r\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\r\n                var measurement = _measurementsManager.measurementsList[key];\r\n                measurement.indicator.changeAllEndpointsEditableStyle(enable);   \r\n                measurement.indicator.enableSelectionAreas(enable);\r\n                measurement.indicator.enableLabelsTouchEvents(enable);\r\n            }\r\n        }\r\n    }\r\n\r\n    this.editEndpoint = function(event, endpointNumber, measurementId) {\r\n        if (_currentMeasurement.id === measurementId && _activePoint === endpointNumber) {\r\n            _currentMeasurement.indicator.changeEndpointOnEditStyle(endpointNumber, false);\r\n            this.undoEditEndpoint();\r\n            return;\r\n        }\r\n\r\n        this.selectMeasurementById(measurementId);\r\n\r\n        _activePoint = endpointNumber;\r\n        this.isEditingEndpoint = true;\r\n\r\n        _currentMeasurement.indicator.changeEndpointOnEditStyle(endpointNumber, true);\r\n        enableMeasurementsTouchEvents(false);\r\n\r\n        for (var key in _currentMeasurement.picks) {\r\n            if (_currentMeasurement.picks.hasOwnProperty(key)) {\r\n                _picksBackup[key] = _currentMeasurement.getPick(key).clone();\r\n            }\r\n        }\r\n\r\n        this.updateViewportId();\r\n\r\n        if (_isolateMeasure) {\r\n            this.clearIsolate();    \r\n        }\r\n\r\n        if (_currentMeasurement.isRestored) {\r\n            // populate the existing picks with the new snap result from the snapper\r\n            _snapper.onMouseMove({x: event.canvasX, y: event.canvasY});\r\n            const snapResult = _snapper.getSnapResult().clone();\r\n            const pick = _currentMeasurement.getPick(_activePoint);\r\n            snapResult.copyTo(pick);\r\n\r\n            // Keep track of the pick that was updated.\r\n            pick.isValid = true;\r\n\r\n            // Set isRestored flag back to false if all of the picks have been validated\r\n            _currentMeasurement.isRestored = !function() {\r\n                const picks = _currentMeasurement.picks;\r\n                for (var key in picks) {\r\n                    if (picks.hasOwnProperty(key)) {\r\n                        const pick = picks[key];\r\n                        if (!pick.isValid) {\r\n                            return false;\r\n                        }\r\n                    }\r\n                }\r\n                return true;\r\n            }();\r\n        }\r\n\r\n        if(!av.isMobileDevice()) {\r\n            this._handleMouseEvent(event);\r\n        }\r\n    };\r\n\r\n    function canCloseArea() {\r\n        return _currentMeasurement.countPicks() > 3;\r\n    }\r\n\r\n    this.undoEditEndpoint = function() {\r\n        _currentMeasurement.indicator.clear();\r\n\r\n        for (var key in _currentMeasurement.picks) {\r\n            if (_currentMeasurement.picks.hasOwnProperty(key)) {\r\n                _currentMeasurement.setPick(key, _picksBackup[key].clone());\r\n            }\r\n        }\r\n        \r\n        _currentMeasurement.indicator.changeEndpointOnEditStyle(_activePoint, false);\r\n        \r\n        this.isEditingEndpoint = false;\r\n        this.updateViewportId(true);\r\n        allPicksSet();\r\n        render(true);\r\n    };\r\n\r\n    this.updateResults = function() {\r\n\r\n        _currentMeasurement.indicator.updateResults();\r\n        _currentMeasurement.indicator.showEndpoints();\r\n        _currentMeasurement.indicator.focusLabels();\r\n\r\n        if (_currentMeasurement.isComplete()) {\r\n            this.isolateMeasurement();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Delete all measurements.\r\n     */\r\n    this.deleteMeasurements = function() {\r\n        const measurements = _measurementsManager.measurementsList;\r\n        const keys = Object.keys(measurements);\r\n        for (let i = 0; i < keys.length; i++) {\r\n            const key = keys[i];\r\n            _measurementsManager.currentMeasurement = measurements[key];\r\n            _currentMeasurement = _measurementsManager.getCurrentMeasurement();\r\n            this.deleteCurrentMeasurement();\r\n        }\r\n    }\r\n\r\n    this.deleteCurrentMeasurement = function() {\r\n        this.clearCurrentMeasurement();\r\n        this.isEditingEndpoint = false;\r\n        this.editByDrag = false;\r\n        _isDragging = false;\r\n        this.isolateMeasurement();\r\n    };\r\n\r\n    this.deleteCurrentPick = function() {\r\n\r\n        var pick = getActivePick();\r\n        var id = pick.id;\r\n\r\n        while (_currentMeasurement.hasPick(id + 1)) {\r\n            _currentMeasurement.setPick(id, _currentMeasurement.getPick(id + 1));\r\n            id++;\r\n        }\r\n\r\n        delete _currentMeasurement.picks[id];\r\n        \r\n        \r\n        \r\n        var count = _currentMeasurement.countPicks();\r\n        \r\n        _activePoint--;\r\n        \r\n        if (_activePoint <= 0) {\r\n            _activePoint = count;\r\n        }\r\n\r\n        if (this.isEditingEndpoint) {\r\n            if (count == 2) {\r\n                this.deleteCurrentMeasurement();\r\n                return;\r\n            }\r\n\r\n            _currentMeasurement.indicator.changeAllEndpointsOnEditStyle(false);\r\n            this.isEditingEndpoint = false;\r\n            this.updateViewportId(true);\r\n            allPicksSet();\r\n            render();\r\n        } else {\r\n            this._handleMouseEvent();    \r\n        }\r\n    };\r\n\r\n    this.updateViewportId = function(clear) {\r\n        if (_viewer.model && _viewer.model.is2d()) {\r\n            if (clear || isNoPicksSet()) {\r\n                _viewer.impl.updateViewportId(0);\r\n                _snapper.setViewportId(null);\r\n            }\r\n            else if (!_isPressing) {\r\n                var viewport = getPreviousPick().viewportIndex2d || getActivePick().viewportIndex2d;\r\n                \r\n                // Pass viewport Id to LineShader to make all other geometries with different viewport transparent\r\n                _viewer.impl.updateViewportId(viewport);\r\n                if (_snapper)\r\n                    _snapper.setViewportId(viewport);  \r\n            \r\n            }\r\n        }\r\n    };\r\n\r\n    this.setNoTopology = function() {\r\n        if (_currentMeasurement && _currentMeasurement.indicator) {\r\n            _currentMeasurement.indicator.setNoTopology();\r\n        }\r\n        else {\r\n            _onIndicatorCreatedCB = function() { _currentMeasurement.indicator.setNoTopology(); };\r\n        }\r\n    };\r\n    this.setFetchingTopology = function() {\r\n        if (_currentMeasurement && _currentMeasurement.indicator) {\r\n            _currentMeasurement.indicator.setFetchingTopology();\r\n        }\r\n        else {\r\n            _onIndicatorCreatedCB = function() { _currentMeasurement.indicator.setFetchingTopology(); };\r\n        }\r\n    };\r\n    this.setTopologyAvailable = function() {\r\n        if (_currentMeasurement && _currentMeasurement.indicator) {\r\n            _currentMeasurement.indicator.setTopologyAvailable();\r\n        }\r\n        else {\r\n            _onIndicatorCreatedCB = function() { _currentMeasurement.indicator.setTopologyAvailable(); };\r\n        }\r\n    };\r\n\r\n    this.getSnapper = function() {\r\n        return _snapper;\r\n    };\r\n\r\n    this.correctPickPosition = function() {\r\n        \r\n        var active = getActivePick();\r\n        \r\n        if (active && !active.getGeometry() && _cursorPosition) {\r\n            active.geomType = MeasureCommon.SnapType.SNAP_VERTEX;\r\n            active.geomVertex = _cursorPosition;\r\n            active.intersectPoint = _cursorPosition;\r\n        }\r\n\r\n        if (hasPreviousPick()) {\r\n            var passive = getPreviousPick();\r\n            var corrected = MeasureCommon.correctPerpendicularPicks(passive, active, viewer, _snapper);\r\n            if (!corrected) {\r\n\r\n                // get next pick in case of closed loop measurement.\r\n                var id = (active.id + 1) % (_currentMeasurement.countPicks() + 1);\r\n                \r\n                if (id === 0)\r\n                    id = 1;\r\n\r\n                if (id !== active.id && _currentMeasurement.hasPick(id)) {\r\n                    var nextPick = _currentMeasurement.getPick(id);   \r\n                    MeasureCommon.correctPerpendicularPicks(nextPick, active, viewer, _snapper);\r\n                }\r\n            }\r\n            \r\n            if (_currentMeasurement.measurementType == MeasureCommon.MeasurementTypes.MEASUREMENT_AREA) {\r\n                snapToFirstPick(active);    \r\n            }\r\n        }\r\n    };\r\n\r\n    this._handleMouseEvent = function (event) {\r\n\r\n        var valid = false;\r\n\r\n        if (_snapper.isSnapped()) {\r\n            \r\n            // User picked a new point after two points where already set (or none) - Start a new measurement.\r\n            if (this.areAllPicksSet() || isNoPicksSet()) {\r\n                this.startNewMeasurement();\r\n\r\n                _activePoint = 1;\r\n            }\r\n\r\n            _snapper.copyResults(getActivePick());\r\n\r\n            valid = true;\r\n\r\n        } \r\n        else { \r\n            // In order to draw rubber-band, set the cursor position, so the indicator will use it as active point.\r\n            if (event && _viewer.model && _viewer.model.is2d()) {\r\n                var viewport = _viewer.container.getBoundingClientRect();\r\n                var x = event.canvasX || event.clientX - viewport.left;\r\n                var y = event.canvasY || event.clientY - viewport.top;\r\n\r\n                if (x && y) {\r\n                    _cursorPosition = MeasureCommon.inverseProject({ x:x, y:y }, _viewer);\r\n                }\r\n            }\r\n\r\n            // In case a measurement is set, and the user clicks on a blank spot - don't do nothing.\r\n            if (_consumeSingleClick && _currentMeasurement && !this.isEditingEndpoint) {\r\n                if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            var lastPick = getActivePick();\r\n            if (lastPick) {\r\n                lastPick.clear();\r\n            }\r\n        }\r\n\r\n        if (_currentMeasurement) {\r\n            this.correctPickPosition();\r\n            \r\n            if (_consumeSingleClick) {\r\n                this._doConsumeSingleClick();\r\n            }\r\n\r\n            if (!isNoPicksSet()) {\r\n                var renderSucceeded = render();\r\n                \r\n                // If it's the first pick, we don't expect the render of the rubberband to be succeeded.\r\n                // So enter here only if it's not the first pick.\r\n                if (_currentMeasurement.hasPick(2)) {\r\n                    valid &= renderSucceeded;\r\n                }\r\n            }\r\n        }\r\n\r\n        // If valid is false, the last pick is not revelant, and will clear it in case of a click.\r\n        return valid;\r\n    };\r\n\r\n    this._doConsumeSingleClick = function() {\r\n        // In case the measurement is a closed loop, eliminate the last pick.\r\n        if (_currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && !_currentMeasurement.closedArea) {\r\n            var length = _currentMeasurement.countPicks();\r\n            var firstPick = _currentMeasurement.getPick(1);\r\n            var lastPick = _currentMeasurement.getPick(length);\r\n\r\n            if (length >= 3 && _currentMeasurement.hasEqualPicks(firstPick, lastPick)) {\r\n                lastPick.clear();\r\n                delete _currentMeasurement.picks[length];\r\n                _currentMeasurement.closedArea = true;\r\n            }\r\n        }\r\n\r\n        this.updateResults();\r\n\r\n        var measurementComplete = _currentMeasurement.isComplete();\r\n        this.updateViewportId(measurementComplete);\r\n    };\r\n\r\n\r\n    this.handleButtonDown = function (event, button) {\r\n        if (av.isMobileDevice()) \r\n            return false;\r\n\r\n        _isDragging = true;\r\n        if (button === 0 && !event.ctrlKey && !event.metaKey && !event.shiftKey && !event.altKey) {\r\n            _consumeSingleClick = true;\r\n            _downX = event.canvasX;\r\n            _downY = event.canvasY;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    this.handleMouseMove = function (event) {\r\n\r\n        if (av.isMobileDevice())\r\n            return false;\r\n\r\n        if (event.canvasX !== _downX || event.canvasY !== _downY) {\r\n            _consumeSingleClick = false;    \r\n        } \r\n\r\n        _endpointMoved = this.isEditingEndpoint;\r\n\r\n        if (!isNoPicksSet() && !this.areAllPicksSet()) {\r\n            this.clearPick(_activePoint);\r\n            this._handleMouseEvent(event);\r\n        }\r\n\r\n        _snapper.indicator.render();\r\n\r\n        return false;\r\n    };\r\n\r\n    this.restoreMouseListeners = function () {\r\n\r\n        // When a press event has happend, the default behavior of firefly.js is to disable other mouse events,\r\n        // So they won't be triggered as well.\r\n        // The solution is to enable them after the end of the pressing.\r\n\r\n        _viewer.toolController.getTool(\"gestures\").controller.enableMouseButtons(true);\r\n    };\r\n\r\n    this.handlePressHold = function (event) {\r\n        _consumeSingleClick = false;\r\n\r\n        if (av.isTouchDevice()) {\r\n            switch( event.type )\r\n            {\r\n                case \"press\":\r\n                    _isPressing = true;\r\n\r\n                    if (this.areAllPicksSet() || isNoPicksSet()) {\r\n                        this.startNewMeasurement();\r\n\r\n                        if (_isolateMeasure) { \r\n                            this.clearIsolate();\r\n                        }\r\n\r\n                        _activePoint = 1;\r\n                    }\r\n\r\n                    this._handleMouseEvent(event);\r\n                    _snapper.indicator.render();\r\n\r\n                    return true;\r\n\r\n                case \"pressup\":\r\n                    _consumeSingleClick = true;\r\n                    this.restoreMouseListeners();\r\n                    _singleClickHandled = !_singleClickHandled;\r\n                    this.handleSingleClick(event);\r\n                    _isPressing = false;\r\n                    return true;\r\n            }\r\n        }\r\n        return false;\r\n\r\n    };\r\n\r\n\r\n\r\n    this.handleGesture = function( event )\r\n    {   \r\n        if (av.isTouchDevice()){\r\n            \r\n            _consumeSingleClick = false;\r\n        \r\n            if (_isPressing) {\r\n                \r\n                this.clearPick(_activePoint);\r\n\r\n                switch( event.type )\r\n                {\r\n                    case \"dragstart\":\r\n                        this._handleMouseEvent(event);\r\n                        _snapper.indicator.render();\r\n\r\n                        return true;\r\n\r\n                    case \"dragmove\":\r\n                        this._handleMouseEvent(event);\r\n                        _snapper.indicator.render();\r\n\r\n                        return true;\r\n\r\n                    case \"dragend\":\r\n                        _isPressing = false;\r\n                        _consumeSingleClick = true;\r\n\r\n                        if (!this.editByDrag) {\r\n                            _singleClickHandled = !_singleClickHandled;\r\n                            this.handleSingleClick(event);    \r\n                        }\r\n\r\n                        this.editByDrag = false;\r\n                        this.restoreMouseListeners();\r\n                        return true;\r\n\r\n                    case \"pinchstart\":\r\n                        this._handleMouseEvent(event);\r\n                        _snapper.indicator.render();\r\n\r\n                        break;\r\n\r\n                    case \"pinchmove\":\r\n                        this._handleMouseEvent(event);\r\n                        _snapper.indicator.render();\r\n\r\n                        break;\r\n\r\n                    case \"pinchend\":\r\n                        _consumeSingleClick = true;\r\n                        _singleClickHandled = !_singleClickHandled;\r\n                        this.handleSingleClick(event);\r\n                        this.restoreMouseListeners();\r\n                        return true;\r\n                }\r\n            }\r\n\r\n            if (event.type.indexOf('pinch') !== -1) {\r\n                for (var key in _measurementsManager.measurementsList) {\r\n                    if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\r\n                        var measurement = _measurementsManager.measurementsList[key];\r\n                        measurement.indicator.updateScale();    \r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    this.handleButtonUp = function (event, button) {\r\n        _isDragging = false;\r\n        _downX = null;\r\n        _downY = null;\r\n        \r\n        if (_endpointMoved) {\r\n            _consumeSingleClick = true;\r\n            _singleClickHandled = !_singleClickHandled;\r\n            this.handleSingleClick(event);\r\n            _endpointMoved = false;\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    this.handleSingleClick = function (event, button) {\r\n        var checkRoomId = _currentMeasurement?.indicator?.areaLabel?.label?.innerText;\r\n        if (_consumeSingleClick) {\r\n\r\n            _snapper.indicator.clearOverlays();\r\n\r\n            if (_currentMeasurement) {\r\n                _currentMeasurement.indicator.changeEndpointOnEditStyle(_activePoint, false);    \r\n            }\r\n\r\n            if (this._handleMouseEvent(event)) {\r\n                this.updateResults();\r\n                _activePoint++;\r\n            }\r\n            else {\r\n                if (this.isEditingEndpoint) {\r\n                    this.undoEditEndpoint();\r\n                }\r\n                else {\r\n                    if (_currentMeasurement && _currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && canCloseArea()) {\r\n                        snapToFirstPick(getActivePick(), true);\r\n                        this._handleMouseEvent();\r\n                    } else {\r\n                        this.clearCurrentMeasurement();    \r\n                    }\r\n                }\r\n            }\r\n\r\n            if (_currentMeasurement && _currentMeasurement.isComplete()) {\r\n\r\n                if (!checkRoomId.includes('Id: ')) {\r\n                    this.setValueMeasurementLabelText(_currentMeasurement.indicator.areaLabel.label, 'Id: --');\r\n                }\r\n                \r\n                if (_measurementsManager) {\r\n                    console.log('checkRoomId', checkRoomId)\r\n\r\n                    if (!checkRoomId.includes('Id: ') || (checkRoomId.includes('Id: ') && checkRoomId.replace('Id: ', '') == '--')) {\r\n                        // console.log('save it: ', Items);\r\n                        // $('#input-name').removeClass('invisible')\r\n                        let roomID = prompt(\"Please enter Room: \", '');\r\n                        if (roomID != undefined) {\r\n                            _currentMeasurement.MarkupID = roomID;\r\n                            this.setValueMeasurementLabelText(_currentMeasurement.indicator.areaLabel.label, 'Id: ' + _currentMeasurement?.MarkupID);\r\n                            var clone = {..._currentMeasurement};\r\n                            delete(clone.indicator)\r\n                            document.dispatchEvent(new CustomEvent('addNewRoom', {'detail': JSON.stringify(clone)}));\r\n                        }\r\n                    }                    \r\n                }\r\n                console.log('check 0-----------------:::: ', _currentMeasurement)\r\n                allPicksSet();\r\n            }\r\n\r\n            _consumeSingleClick = false;\r\n            _singleClickHandled = !_singleClickHandled;\r\n            this.isEditingEndpoint = false;\r\n\r\n            _snapper.clearSnapped();\r\n        }\r\n        return true;\r\n    };\r\n\r\n    this.handleDoubleClick = function(event) {\r\n        return true;\r\n    };\r\n\r\n    this.onCameraChange = function () {\r\n        for (var key in _measurementsManager.measurementsList) {\r\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\r\n                var measurement = _measurementsManager.measurementsList[key];\r\n                measurement.indicator.updateScale();\r\n            }\r\n        }\r\n\r\n        _snapper.indicator.onCameraChange();\r\n    };\r\n\r\n    this.handleSingleTap = function (event) {\r\n        if (!_singleClickHandled) {\r\n            _consumeSingleClick = true;\r\n            _snapper.onMouseDown({x: event.canvasX, y:event.canvasY});\r\n            this.handleSingleClick(event);\r\n        }\r\n        _singleClickHandled = !_singleClickHandled;\r\n\r\n        return true;\r\n    };\r\n\r\n    this.handleDoubleTap = function(event) {\r\n        if (_currentMeasurement && _currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && _currentMeasurement.countPicks() > 2) {\r\n            // fake single click over the first handle, to close the area.\r\n            var firstPick = _currentMeasurement.getPick(1);\r\n            var firstPickPoint = MeasureCommon.getSnapResultPosition(firstPick, _viewer);\r\n            var firstPickPosition = MeasureCommon.project(firstPickPoint, viewer);\r\n            event.canvasX = firstPickPosition.x;\r\n            event.canvasY = firstPickPosition.y;\r\n            _consumeSingleClick = true;\r\n            _snapper.onMouseDown(firstPickPosition);\r\n            this.handleSingleClick(event);\r\n            _singleClickHandled = !_singleClickHandled;\r\n        }\r\n\r\n        return true;\r\n    };\r\n\r\n    this.handleResize = function() {\r\n        for (var key in _measurementsManager.measurementsList) {\r\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\r\n                var measurement = _measurementsManager.measurementsList[key];\r\n                if (measurement.indicator) {\r\n                    measurement.indicator.handleResize();\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    this.handleKeyDown = function(event, keyCode) {\r\n        const approvalID = 1;\r\n\r\n        switch (keyCode) {\r\n            case 65: { // key 'A' to load from DB\r\n                fetch(`${window.DBURL}/allMarkup?approvalid=1`).then(r => r.json()).then( data => {\r\n                    console.log(data);\r\n                    this.loadJson(JSON.parse(data[1].json));\r\n                });\r\n                return true;\r\n            }\r\n            case 83: { // key 'S' to save to DB\r\n                // SAVE MARKUP\r\n                // fetch(`${window.DBURL}/savemarkup`, {\r\n                //   method: 'post',\r\n                //   headers: {\r\n                //     'Accept': 'application/json, text/plain, */*',\r\n                //     'Content-Type': 'application/json'\r\n                //   },\r\n                //   body: JSON.stringify({\"UserID\":2, \"sqrfoot\": Math.round(_currentMeasurement.area/144), \"json\":this.getJson() })\r\n                // }).then(res=>res.json())\r\n                //   .then(res => console.log(res));\r\n                console.log('JSON AREA:', this.getJson())\r\n                return true;\r\n            }\r\n            case 89: { // Y\r\n                this.addMeasurement();\r\n                return true;\r\n            }\r\n            case Autodesk.Viewing.KeyCode.BACKSPACE:\r\n            case Autodesk.Viewing.KeyCode.DELETE:\r\n            if (_currentMeasurement && _currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && !this.areAllPicksSet()) {\r\n                if (_currentMeasurement.countPicks() > 2 ) {\r\n                    this.deleteCurrentPick();\r\n                } else {\r\n                    this.deleteCurrentMeasurement();    \r\n                }\r\n            } else {\r\n                this.deleteCurrentMeasurement();\r\n            }\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    };\r\n};\r\n\r\nav.GlobalManagerMixin.call(MeasureTool.prototype);\r\n\r\n","import { Indicator } from './Indicator'\r\n\r\n    var av = Autodesk.Viewing;\r\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\r\n\r\n    // /** @constructor */\r\n    export function CalibrationToolIndicator(viewer, measurement, calibrationTool)\r\n    {\r\n        Indicator.call(this, viewer, measurement, calibrationTool);\r\n        this.calibrationTool = calibrationTool;\r\n        this.calibrationLabel = null;\r\n        this.endpoints = null;\r\n        this.tmpVector = new THREE.Vector3();\r\n        this.p1 = null;\r\n        this.p2 = null;\r\n\r\n        this.rubberbandDefaultMaterial = new THREE.MeshBasicMaterial({\r\n            color: 0xe8b22c,\r\n            opacity: 1,\r\n            transparent: false,\r\n            depthTest: false,\r\n            depthWrite: false,\r\n            side: THREE.DoubleSide\r\n        });\r\n\r\n        this.rubberbandSnappedMaterial = new THREE.MeshBasicMaterial({\r\n            color: 0x005BCE,\r\n            opacity: 1,\r\n            transparent: false,\r\n            depthTest: false,\r\n            depthWrite: false,\r\n            side: THREE.DoubleSide\r\n        });\r\n\r\n        this.rubberbandTipMaterial = new THREE.MeshBasicMaterial({\r\n            color: 0x000000,\r\n            opacity: 1,\r\n            transparent: false,\r\n            depthTest: false,\r\n            depthWrite: false,\r\n            side: THREE.DoubleSide\r\n        });\r\n\r\n    }\r\n\r\n    CalibrationToolIndicator.prototype = Object.create(Indicator.prototype);\r\n    CalibrationToolIndicator.prototype.constructor = CalibrationToolIndicator;\r\n    var proto = CalibrationToolIndicator.prototype;\r\n    \r\n    var kEndpointOffset = 15;\r\n    \r\n    var kCrossWidth = 1.5;\r\n    var kTipXWidth = 2;\r\n    var kLineWidth = 3;\r\n\r\n    var kTipXLength = 3;\r\n    var kCrossLength = 5;\r\n\r\n    var kDashSize = 2;\r\n    var kGapSize = 1;\r\n\r\n    proto.createEndpoint = function(name) {\r\n        this.endpoints[name] = {};\r\n        this.endpoints[name].position = null;\r\n\r\n        const _document = this.getDocument();\r\n        var label = this.endpoints[name].label = _document.createElement('div');\r\n        label.className = 'calibration-endpoint';\r\n\r\n        this.viewer.container.appendChild(label);\r\n\r\n        var text = _document.createElement('div');\r\n        text.className = 'calibration-endpoint-text';\r\n        text.textContent = name.toString();\r\n        label.appendChild(text);\r\n        \r\n        if (av.isTouchDevice()) {\r\n            this.initLabelMobileGestures(label, name, this.calibrationTool);\r\n        }\r\n        // Disable hover for mobile devices\r\n        if(!av.isMobileDevice()) {\r\n            MeasureCommon.safeToggle(label, 'enable-hover', true);\r\n\r\n            this.initMouseEvent(label, name);\r\n    \r\n            label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n            \r\n        }   \r\n    };\r\n\r\n    proto.init = function() {\r\n\r\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\r\n        \r\n        if (!this.calibrationLabel) {\r\n            const _document = this.getDocument();\r\n            this.calibrationLabel = _document.createElement('div');\r\n            this.calibrationLabel.className = 'calibration-label';\r\n            this.hideLabel(this.calibrationLabel);\r\n            this.viewer.container.appendChild(this.calibrationLabel);\r\n            this.calibrationLabel.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n\r\n            var text = _document.createElement('div');\r\n            text.className = 'calibration-label-text';\r\n            this.calibrationLabel.appendChild(text);\r\n        }\r\n\r\n        this.endpoints = [];\r\n\r\n        this.handleButtonUpBinded = this.calibrationTool.handleButtonUp.bind(this.calibrationTool);\r\n        this.addWindowEventListener('mouseup', this.handleButtonUpBinded);\r\n\r\n        this.onCameraChangeBinded = this.onCameraChange.bind(this);\r\n        this.viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\r\n    };\r\n\r\n    proto.destroy = function() {\r\n        this.clear();\r\n\r\n        Indicator.prototype.destroy.call(this);\r\n\r\n        if (this.calibrationLabel) {\r\n            this.calibrationLabel.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n            this.viewer.container.removeChild(this.calibrationLabel);\r\n            this.calibrationLabel = null;\r\n        }\r\n\r\n        \r\n        this.viewer.impl.clearOverlay(this.overlayName);\r\n        this.viewer.impl.removeOverlayScene(this.overlayName);\r\n        \r\n        this.removeWindowEventListener('mouseup', this.handleButtonUpBinded);\r\n        this.viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\r\n    };\r\n\r\n    proto.clearRubberband = function() {\r\n        this.viewer.impl.clearOverlay(this.overlayName);\r\n    };\r\n\r\n    proto.clear = function() {\r\n\r\n        this.clearRubberband();\r\n        \r\n        this.hideLabel(this.calibrationLabel);\r\n        \r\n        for (var name in this.endpoints) {\r\n            if (this.endpoints.hasOwnProperty(name)) {\r\n                this.hideClick(name);\r\n                this.endpoints[name].position = null;\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.updateLabelValue = function(text) {\r\n        if (!text || text === \"\") {\r\n            this.calibrationLabel.childNodes[0].textContent = null;\r\n            this.hideLabel(this.calibrationLabel);\r\n        }\r\n        else {\r\n            this.calibrationLabel.childNodes[0].setAttribute(\"data-i18n\", text);\r\n            this.calibrationLabel.childNodes[0].textContent = av.i18n.translate(text);\r\n            this.showLabel(this.calibrationLabel);\r\n            this.calibrationTool.render();\r\n        }\r\n    };\r\n\r\n    proto.changeLabelClickableMode = function(clickable) {\r\n        if (clickable) {\r\n            this.calibrationLabel.childNodes[0].style.pointerEvents='all';\r\n        }\r\n        else {\r\n            this.calibrationLabel.childNodes[0].style.pointerEvents='none';\r\n        }\r\n    };\r\n\r\n    proto.showAddCalibrationLabel = function() {\r\n        var self = this;\r\n        this.updateLabelValue(\"Add Calibration\");\r\n        this.changeLabelClickableMode(true);\r\n        this.calibrationTool.render();\r\n        \r\n        this.calibrationLabel.addEventListener(\"click\", function onClick() {\r\n            self.calibrationLabel.childNodes[0].style.pointerEvents = 'none';\r\n            self.calibrationTool.render();\r\n            self.updateLabelValue(null);\r\n            self.calibrationTool.showPanel();\r\n            self.calibrationLabel.removeEventListener(\"click\", onClick);\r\n        });    \r\n    };\r\n\r\n    proto.updateLabelsPosition = function() {\r\n        for (var i = 1; i <= Object.keys(this.endpoints).length; i++) {\r\n            if (this.endpoints[i].position) {\r\n                var label = this.endpoints[i].label;\r\n                var pos = MeasureCommon.project(this.endpoints[i].position, this.viewer, kEndpointOffset);\r\n                label.style.left = (pos.x - parseInt(label.clientWidth) / 2) + 'px';\r\n                label.style.top = (pos.y - parseInt(label.clientHeight) / 2) + 'px';\r\n                label.point = this.endpoints[i].position;\r\n\r\n                // Detect and move in case of overlapping.\r\n                this.labelsOverlapDetection(this.endpoints[i].label, this.endpoints);\r\n            }\r\n        }\r\n\r\n        this.hideLabelsOutsideOfView();\r\n    };\r\n\r\n    function isLeftIntersect(current, other) {\r\n        return current.right >= other.left && current.right <= other.right;\r\n    }\r\n\r\n    function isRightIntersect(current, other) {\r\n        return current.left >= other.left && current.left <= other.right;\r\n    }\r\n\r\n    function isMiddleIntersect(current, other) {\r\n        return current.left <= other.left && current.right >= other.right;\r\n    }\r\n\r\n    function isVerticalIntersect(current, other) {\r\n        return current.top < other.bottom && current.bottom > other.top;\r\n    }\r\n\r\n    function moveLeft(currentLabel, currentRect, otherRect) {\r\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) - (currentRect.right - otherRect.left) + 'px';\r\n    }\r\n\r\n    function moveRight(currentLabel, currentRect, otherRect) {\r\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) + (otherRect.right - currentRect.left) + 'px';\r\n    }\r\n\r\n    function moveDown(currentLabel, currentRect, otherRect) {\r\n        currentLabel.style.top = parseInt(currentLabel.style.top, 10) + (otherRect.bottom - currentRect.top) + 'px';\r\n    }\r\n\r\n\r\n    proto.labelsOverlapDetection = function(staticLabel, labelsList) {\r\n\r\n        for (var i = 1; i <= Object.keys(labelsList).length ; i++) {\r\n\r\n            var dynamicLabel = labelsList[i].label;\r\n\r\n            if (staticLabel !== dynamicLabel) {\r\n                var staticRect = staticLabel.getBoundingClientRect();\r\n                var dynamicRect = dynamicLabel.getBoundingClientRect();\r\n\r\n                if (isVerticalIntersect(dynamicRect, staticRect)) {\r\n\r\n                    if (isLeftIntersect(dynamicRect, staticRect)) {\r\n                        moveLeft(dynamicLabel, dynamicRect, staticRect);\r\n                    }\r\n                    else if (isRightIntersect(dynamicRect, staticRect)) {\r\n                        moveRight(dynamicLabel, dynamicRect, staticRect);\r\n                    }\r\n                    else if (isMiddleIntersect(dynamicRect, staticRect)) {\r\n                        moveDown(dynamicLabel, dynamicRect, staticRect);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.renderCalibrationLabel = function() {\r\n\r\n        if (this.showMeasureResult && this.calibrationLabel && this.p1 && this.p2) {\r\n            \r\n            var point = { x: (this.p1.x + this.p2.x)/2, y: (this.p1.y + this.p2.y)/2, z: (this.p1.z + this.p2.z)/2 };\r\n            var mid = MeasureCommon.project(point, this.viewer);\r\n\r\n            this.labelPosition = new THREE.Vector2(mid.x, mid.y);\r\n\r\n            if (this.calibrationLabel.childNodes[0].textContent) {\r\n                this.showLabel(this.calibrationLabel);\r\n            }\r\n\r\n            this.calibrationLabel.style.top  = this.labelPosition.y - Math.floor(this.calibrationLabel.clientHeight / 2) + 'px';\r\n            this.calibrationLabel.style.left = this.labelPosition.x - Math.floor(this.calibrationLabel.clientWidth / 2) + 'px' ;\r\n            this.calibrationLabel.point = point;\r\n\r\n            if (this.viewer.model.is2d()) {\r\n                this.alignLabelWithLine(this.calibrationLabel, this.p1, this.p2, this.calibrationLabel.clientHeight, this.viewer);\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.drawMeasurementLineTip = function(point, direction, normal, flip) {\r\n\r\n        var tmpVec = new THREE.Vector3();\r\n        var geometry = new THREE.Geometry();\r\n        var p1Scale = this.setScale(point);\r\n\r\n        flip = flip ? -1 : 1;\r\n\r\n        var tipMaterial = (this.snapper.isSnapped() && !this.showMeasureResult) ? this.rubberbandSnappedMaterial : this.rubberbandTipMaterial;\r\n\r\n        // black tip\r\n        tmpVec.addVectors(point, normal.clone().multiplyScalar(kCrossLength * p1Scale));\r\n        geometry.vertices[0] = tmpVec.clone();\r\n        tmpVec.subVectors(point, normal.clone().multiplyScalar(kCrossLength * p1Scale));\r\n        geometry.vertices[1] = tmpVec.clone();\r\n        this.drawLineAsCylinder(geometry, tipMaterial, kCrossWidth, this.overlayName);\r\n\r\n        geometry.vertices[0] = point;\r\n        tmpVec.subVectors(point, direction.clone().multiplyScalar(kCrossLength * p1Scale * flip));\r\n        geometry.vertices[1] = tmpVec.clone();\r\n        this.drawLineAsCylinder(geometry, tipMaterial, kCrossWidth, this.overlayName);\r\n\r\n        // yellow tip\r\n        tmpVec.addVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\r\n        geometry.vertices[0] = tmpVec.clone();\r\n        tmpVec.subVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\r\n        geometry.vertices[1] = tmpVec.clone();\r\n        this.drawLineAsCylinder(geometry, this.rubberbandDefaultMaterial, kTipXWidth, this.overlayName);\r\n\r\n        tmpVec.addVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\r\n        tmpVec.addVectors(tmpVec, direction.clone().multiplyScalar(kTipXLength * p1Scale));\r\n        geometry.vertices[0] = tmpVec.clone();\r\n        tmpVec.subVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\r\n        tmpVec.subVectors(tmpVec, direction.clone().multiplyScalar(kTipXLength * p1Scale));\r\n        geometry.vertices[1] = tmpVec.clone();\r\n        this.drawLineAsCylinder(geometry, this.rubberbandDefaultMaterial, kTipXWidth, this.overlayName);\r\n    };\r\n\r\n    proto.renderDistanceMeasurement = function(p1, p2) {\r\n\r\n        this.viewer.impl.clearOverlay(this.overlayName);\r\n\r\n        if (!p1 || !p2)\r\n            return;\r\n\r\n        var geometry = new THREE.Geometry();\r\n        var lineDirection = new THREE.Vector3().subVectors(p2, p1).normalize();\r\n        var lineNormal = lineDirection.clone().cross(this.viewer.navigation.getEyeVector()).normalize();\r\n        var p1Scale = this.setScale(p1);\r\n        \r\n        var dashSize = kDashSize * p1Scale;\r\n        var gapSize = kGapSize * p1Scale;\r\n\r\n        // Main line\r\n        \r\n        var lineMaterial = ((Math.abs(p1.x - p2.x) <= 0.1 || Math.abs(p1.y - p2.y) <= 0.1 \r\n                            || this.snapper.getSnapResult().isPerpendicular) && !this.showMeasureResult) \r\n                            ? this.rubberbandSnappedMaterial : this.rubberbandDefaultMaterial;\r\n\r\n        if (this.showMeasureResult) {\r\n            // Single solid line.\r\n            geometry.vertices[0] = p1;\r\n            geometry.vertices[1] = p2;\r\n            this.drawLineAsCylinder(geometry, lineMaterial, kLineWidth, this.overlayName);\r\n        }\r\n        else {\r\n            this.drawDashedLine(p1, p2, dashSize, gapSize, lineMaterial, kLineWidth, this.overlayName); \r\n        }\r\n        \r\n        this.drawMeasurementLineTip(p1, lineDirection, lineNormal, false);\r\n        \r\n        if (this.showMeasureResult) {\r\n            this.drawMeasurementLineTip(p2, lineDirection, lineNormal, true);\r\n        }\r\n\r\n        this.p1 = p1;\r\n        this.p2 = p2;\r\n\r\n        this.renderCalibrationLabel();\r\n    };\r\n\r\n    proto.onCameraChange = function() {\r\n        if (this.measurement.isComplete()) {\r\n            this.renderDistanceMeasurement(this.p1, this.p2);\r\n        }   \r\n        this.updateLabelsPosition();         \r\n    };\r\n\r\n","\r\n\r\n    \"use strict\";\r\n\r\n    var av = Autodesk.Viewing,\r\n        ave = Autodesk.Viewing.Extensions,\r\n        avp = Autodesk.Viewing.Private,\r\n        avu = Autodesk.Viewing.UI,\r\n        MeasureCommon = Autodesk.Viewing.MeasureCommon;\r\n\r\n    // This strange code is there because we \r\n    // don't want DockingPanel, which is used as a base class later\r\n    // to be undefined during headless mode.\r\n    // Simply deriving from undefined will cause an exception (from babel env preset) \r\n    // even if the class is never instantiated\r\n    const DockingPanel = (avu && avu.DockingPanel) || class {};\r\n    // et ViewerPanelMixin to a no-op in headless mode\r\n    const ViewerPanelMixin = (ave && ave.ViewerPanelMixin) || function () {};\r\n\r\n    const _gWindow = av.getGlobal();\r\n    const _gDocument = _gWindow.document;\r\n\r\n    //\r\n    // /** @constructor */\r\n    //\r\n    //\r\n    export var CalibrationPanel = function(calibrationTool, viewer, id, title, options)\r\n    {\r\n        var self = this;\r\n\r\n        options = options || {};\r\n        options.addFooter = false;\r\n\r\n        DockingPanel.call(this, viewer.container, id, title, options);\r\n\r\n        this.viewer = viewer;\r\n        this.calibrationTool = calibrationTool;\r\n        this.parentContainer = viewer.container;\r\n        this.container.style.left = '0px';\r\n        this.container.style.top = '0px';\r\n        this.container.style.resize = 'none';\r\n\r\n        this.container.classList.add('calibration-panel');\r\n\r\n        this.setGlobalManager && this.setGlobalManager(viewer.globalManager);\r\n\r\n        this.addEventListener( this.closer, \"click\", function(e) {\r\n            self.setVisible(false);\r\n            self.calibrationTool.clearSize();\r\n            self.calibrationTool.showAddCalibrationLabel();\r\n        });\r\n\r\n        if (!options.heightAdjustment)\r\n            options.heightAdjustment = 40;\r\n        if (!options.marginTop)\r\n            options.marginTop = 0;\r\n        options.left = false;\r\n\r\n        this.createScrollContainer(options);\r\n\r\n        const _document = (this.getDocument && this.getDocument()) || _gDocument;\r\n\r\n        this.calibrationMenu = _document.createElement(\"div\");\r\n\r\n        this.scrollContainer.appendChild( this.calibrationMenu );\r\n\r\n        // Table\r\n        this.table = _document.createElement(\"table\");\r\n        this.table.className = \"adsk-lmv-tftable calibration-table\";\r\n        this.tbody = _document.createElement(\"tbody\");\r\n        this.table.appendChild(this.tbody);\r\n        this.calibrationMenu.appendChild(this.table);\r\n\r\n        // Define Size Row\r\n        this.row = this.tbody.insertRow(0);\r\n        this.requestedSizeTextbox = _document.createElement('input');\r\n        this.requestedSizeTextbox.className = 'docking-panel-textbox';\r\n        this.requestedSizeTextbox.type = 'text';\r\n        this.requestedSizeTextbox.autofocus= 'true';\r\n\r\n        this.addEventListener(this.requestedSizeTextbox, \"keyup\", function(e) {\r\n            var value = self.requestedSizeTextbox.value;\r\n            if (value !== \"\" && value.split(\".\")[0] === \"\") {\r\n                self.requestedSizeTextbox.value = \"0\" + value;\r\n            }\r\n            self.updateLabel();\r\n        });\r\n\r\n\r\n        this.addEventListener(this.requestedSizeTextbox, \"keypress\", function(e) {\r\n            var key = e.key || String.fromCharCode(e.keyCode);\r\n            // Handling backspace and arrows for firefox\r\n            if (key == \"Backspace\" || key == \"ArrowLeft\" || key == \"ArrowRight\"){\r\n                return;\r\n            }\r\n\r\n            // Escape (For IE11)\r\n            if (e.keyCode == av.KeyCode.ESCAPE) {\r\n                self.setVisible(false);\r\n                self.calibrationTool.clearSize();\r\n                self.calibrationTool.showAddCalibrationLabel();\r\n                return;\r\n            }\r\n\r\n            var requestedSize = self.requestedSizeTextbox.value;\r\n            var cursorIndex = self.requestedSizeTextbox.selectionStart;\r\n            requestedSize = [requestedSize.slice(0, cursorIndex), key, requestedSize.slice(cursorIndex)].join('');\r\n            \r\n            if (requestedSize == \".\") {\r\n                return;\r\n            }\r\n\r\n            var isSimple = self.units[self.unitList.selectedIndex].simpleInput;\r\n        \r\n            if (!isPositiveNumber(requestedSize) || (isSimple && (!isSimpleDecimal(requestedSize) || Autodesk.Viewing.Private.calculatePrecision(requestedSize) > self.calibrationTool.getMaxPrecision()))) {\r\n                    e.preventDefault();\r\n            }\r\n        });\r\n\r\n        var caption = \"Define Size\";\r\n        var cell = this.row.insertCell(0);\r\n        this.caption = _document.createElement(\"div\");\r\n        this.caption.setAttribute(\"data-i18n\", caption);\r\n        this.caption.textContent = av.i18n.translate(caption);\r\n        cell.appendChild(this.caption);\r\n\r\n        cell = this.row.insertCell(1);\r\n        cell.appendChild(this.requestedSizeTextbox);\r\n\r\n        // Unit Type Row\r\n        this.units = [\r\n            { name: 'Feet and fractional inches', units: 'ft-and-fractional-in', matches: ['ft-and-fractional-in'], simpleInput: false },\r\n            { name: 'Feet and decimal inches', units: 'ft-and-decimal-in', matches: ['ft-and-decimal-in'], simpleInput: false },\r\n            { name: 'Meters', units: 'm', matches: ['m'], simpleInput: true },\r\n            { name: 'Centimeters', units: 'cm', matches: ['cm'], simpleInput: true },\r\n            { name: 'Millimeters', units: 'mm', matches: ['mm'], simpleInput: true }\r\n        ];\r\n\r\n        var unitNames = [];\r\n        for (var i = 0; i < this.units.length; ++i) {\r\n            unitNames.push(this.units[i].name);\r\n        }\r\n        this.unitList = new avp.OptionDropDown(\"Unit type\", this.tbody, unitNames, 0, null, { paddingLeft: 0, paddingRight: 15 });\r\n        this.unitList.setGlobalManager(this.globalManager);\r\n        this.addEventListener(this.unitList, \"change\", function(e) {\r\n            self.updateLabel();\r\n        });\r\n\r\n        // Set Calibration button\r\n        var setCalibration = _document.createElement('div');\r\n        setCalibration.classList.add('docking-panel-primary-button');\r\n        setCalibration.classList.add('calibration-button');\r\n\r\n        setCalibration.setAttribute(\"data-i18n\", \"Set Calibration\");\r\n        setCalibration.textContent = av.i18n.translate(\"Set Calibration\");\r\n\r\n        setCalibration.addEventListener('click', function () {\r\n            var index = self.unitList.selectedIndex;\r\n            var requestedUnits = self.units[index].units;\r\n            self.calibrationTool.calibrate(requestedUnits, self.requestedSizeTextbox.value);\r\n        }, false);\r\n\r\n        this.calibrationMenu.appendChild(setCalibration);\r\n        \r\n\r\n    }; // end constructor\r\n\r\n    var isPositiveNumber = function (n) {\r\n        // The first character of the string has to be a digit.\r\n        return n.match(/^(\\d+)/);\r\n    };\r\n\r\n    var isSimpleDecimal = function (n) {\r\n        // Add \"0\" to the end of the string, to check if there are trailing spaces.\r\n        n += '0';\r\n        return !isNaN(parseFloat(n)) && !isNaN(+n) && parseFloat(n) >= 0;\r\n    };\r\n\r\n    CalibrationPanel.prototype = Object.create(DockingPanel.prototype);\r\n    ViewerPanelMixin.call(CalibrationPanel.prototype);\r\n\r\n\r\n    CalibrationPanel.prototype.uninitialize = function uninitialize() {\r\n        this.viewer = null;\r\n        DockingPanel.prototype.uninitialize.call(this);\r\n    };\r\n\r\n    CalibrationPanel.prototype.findUnits = function findUnits() {\r\n        var i,\r\n            j,\r\n            selectedUnits = this.calibrationTool.getCurrentUnits();\r\n        for (i = 0; i < this.units.length; ++i) {\r\n            var matches = this.units[i].matches;\r\n            if (matches) {\r\n                for (j = 0; j < matches.length; ++j) {\r\n                    if (matches[j] === selectedUnits) {\r\n                        return i;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return 0;\r\n    };\r\n\r\n    CalibrationPanel.prototype.setPanelValue = function(size) {\r\n        this.unitList.setSelectedIndex(this.findUnits());\r\n        this.requestedSizeTextbox.value = size;\r\n    };\r\n\r\n    CalibrationPanel.prototype.updateLabel = function() {\r\n        var index = this.unitList.selectedIndex;\r\n        var requestedUnits = this.units[index].units;\r\n        var size = this.requestedSizeTextbox.value;\r\n        var parsedNumber = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(size, requestedUnits);\r\n        var text = Autodesk.Viewing.Private.formatValueWithUnits(parsedNumber, requestedUnits, 3, Autodesk.Viewing.Private.calculatePrecision(size));\r\n\r\n        if (size === \"\") {\r\n            this.calibrationTool.updateLabelValue(null);\r\n        } else if (!isNaN(parsedNumber)) {\r\n            this.calibrationTool.updateLabelValue(text);\r\n        }\r\n    };\r\n\r\n    CalibrationPanel.prototype.updatePanelPosition = function (labelPosition, p1, p2, labelOffset) {\r\n\r\n        var width = parseInt(this.container.getBoundingClientRect().width);\r\n        var height = parseInt(this.container.getBoundingClientRect().height);\r\n\r\n        var cornerX;\r\n        var cornerY;\r\n\r\n        if (!labelPosition || !p1 || !p2) {\r\n            cornerX = Math.floor((this.viewer.canvas.clientWidth - width) / 2);\r\n            cornerY = Math.floor((this.viewer.canvas.clientHeight - height) / 2);\r\n        }\r\n        else {\r\n            p1 = MeasureCommon.project(p1, this.viewer);\r\n            p2 = MeasureCommon.project(p2, this.viewer);\r\n            var rubberbandDirection = new THREE.Vector2().copy(p1).sub(p2).normalize();\r\n\r\n            var normal;\r\n            if (p1.x < p2.x) {\r\n                normal = new THREE.Vector2(rubberbandDirection.y, -rubberbandDirection.x);\r\n            } else {\r\n                normal = new THREE.Vector2(-rubberbandDirection.y, rubberbandDirection.x);\r\n            }\r\n\r\n            var offset = labelOffset + Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)) / 2;\r\n\r\n            normal = normal.multiplyScalar(offset);\r\n            var pos =  labelPosition.sub(normal);\r\n\r\n            cornerX = pos.x - Math.floor(width / 2);\r\n            cornerY = pos.y - Math.floor(height / 2);\r\n\r\n            // if panel exceeds screen bounds, just put the panel in the center of the screen.\r\n            if ((cornerX < 0) || (cornerX + width > this.viewer.canvas.clientWidth) || (cornerY < 0) || (cornerY + height > this.viewer.canvas.clientHeight)) {\r\n                cornerX = Math.floor((this.viewer.canvas.clientWidth - width) / 2);\r\n                cornerY = Math.floor((this.viewer.canvas.clientHeight - height) / 2);\r\n            }\r\n        }\r\n\r\n        this.container.style.left = cornerX + 'px';\r\n        this.container.style.top  = cornerY + 'px';\r\n    };\r\n\r\n    //\r\n    // /** @constructor */\r\n    //\r\n    //\r\n    export var CalibrationRequiredDialog = function(measureExt, viewer, id, title, options)\r\n    {\r\n        var self = this;\r\n\r\n        options = options || {};\r\n        options.addFooter = false;\r\n\r\n        DockingPanel.call(this, viewer.container, id, title, options);\r\n\r\n        this.viewer = viewer;\r\n        this.measureExt = measureExt;\r\n        this.parentContainer = viewer.container;\r\n        this.container.classList.add('calibration-panel');\r\n        this.container.style.width = \"380px\";\r\n        this.container.style.height = \"190px\";\r\n        \r\n        this.setGlobalManager && this.setGlobalManager(viewer.globalManager);\r\n\r\n        if (!options.heightAdjustment)\r\n            options.heightAdjustment = 70;\r\n        if (!options.marginTop)\r\n            options.marginTop = 0;\r\n        options.left = false;\r\n\r\n        const _document = (this.getDocument && this.getDocument()) || _gDocument;\r\n\r\n        this.createScrollContainer(options);\r\n        this.dialogBox = _document.createElement(\"div\");\r\n        this.scrollContainer.appendChild( this.dialogBox );\r\n\r\n        // text\r\n        var calibrateNow = _document.createElement('div');\r\n        calibrateNow.className = 'calibration-text';\r\n        var text = \"Calibration Message\";\r\n        calibrateNow.setAttribute(\"data-i18n\", text);\r\n        calibrateNow.textContent = av.i18n.translate(text);\r\n        this.dialogBox.appendChild(calibrateNow);\r\n\r\n        var buttonsWrapper = _document.createElement('div');\r\n        buttonsWrapper.className = 'calibration-buttons-wrapper';\r\n        this.dialogBox.appendChild(buttonsWrapper);\r\n        \r\n        // Cancel button\r\n        var cancel = _document.createElement('div');\r\n        cancel.classList.add('docking-panel-secondary-button');\r\n        cancel.classList.add('calibration-button-left');\r\n        cancel.setAttribute(\"data-i18n\", \"Cancel\");\r\n        cancel.textContent = av.i18n.translate(\"Cancel\");\r\n        cancel.addEventListener('click', function () {\r\n            self.setVisible(false);\r\n        }, false);\r\n        buttonsWrapper.appendChild(cancel);\r\n\r\n        // Calibrate-Now button\r\n        var calibrateNowButton = _document.createElement('div');\r\n        calibrateNowButton.classList.add('docking-panel-primary-button');\r\n        calibrateNowButton.classList.add('calibration-button-right');\r\n        calibrateNowButton.setAttribute(\"data-i18n\", \"Calibrate Now\");\r\n        calibrateNowButton.textContent = av.i18n.translate(\"Calibrate Now\");\r\n        calibrateNowButton.addEventListener('click', function () {\r\n            self.measureExt.enableCalibrationTool(true);\r\n            self.setVisible(false);\r\n        }, false);\r\n        buttonsWrapper.appendChild(calibrateNowButton);\r\n        \r\n\r\n    }; // end constructor\r\n\r\n    CalibrationRequiredDialog.prototype = Object.create(DockingPanel.prototype);\r\n    ViewerPanelMixin.call(CalibrationRequiredDialog.prototype);\r\n\r\n\r\n    CalibrationRequiredDialog.prototype.uninitialize = function uninitialize() {\r\n        this.viewer = null;\r\n        DockingPanel.prototype.uninitialize.call(this);\r\n    };\r\n","import { CalibrationToolIndicator } from './CalibrationToolIndicator'\r\nimport { CalibrationPanel } from './CalibrationPanels'\r\n\r\nconst av = Autodesk.Viewing;\r\n\r\n//\r\n// /** @constructor */\r\n//\r\n//\r\nexport var CalibrationTool = function( viewer, options, sharedMeasureConfig, snapper)\r\n{   \r\n    var av = Autodesk.Viewing;\r\n    var avem = Autodesk.Viewing.Extensions.Measure;\r\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\r\n\r\n    var _names  = [\"calibration\"];\r\n    var _priority = 50;\r\n    var _viewer  = viewer;\r\n    var _measurement = new MeasureCommon.Measurement(MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE);\r\n    var _options = options || {};\r\n\r\n    this.setGlobalManager(viewer.globalManager);\r\n\r\n    // Shared State with MeasureTool and Indicator\r\n    var _sharedMeasureConfig = sharedMeasureConfig;\r\n\r\n    var _maxPrecision = options.maxPrecision || 5;\r\n    var _isCalibrated = (sharedMeasureConfig.calibrationFactor != null); // True when the user set the calibration, or used a Previous calibration factor.\r\n    \r\n    var _snapper = snapper;\r\n\r\n    var _active = false;\r\n    var _isDragging = false;\r\n    var _isPressing = false;\r\n\r\n    var _distance = null; // The length of the current measurement.\r\n    var _calibrationTaken = false; // True when the user selected two valid points and set the calibration.\r\n    var _selectedSize = null;\r\n    var _selectedUnits = null;\r\n    var _selectedP1 = null;\r\n    var _selectedP2 = null;\r\n    var _waitingForInput = false; // True when the user selected two valid points.\r\n    var _picksBackup = [];\r\n    var _cursorPosition = null;\r\n\r\n    var _activePoint = 0;\r\n    \r\n    var _endpointMoved = false;\r\n\r\n    var _consumeSingleClick = false;\r\n    var _singleClickHandled = false;\r\n    var _downX = null;\r\n    var _downY = null;\r\n\r\n    // GUI.\r\n    var _calibrationPanel = null;\r\n    var _cursor = \"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAYCAYAAAD+vg1LAAAAAXNSR0IArs4c6QAAAwZJREFUSA2tVEtLW0EUvjGJefoqSY0x0WBSiY+oNWiUINkU6ioLaaAlG1eudNVFoT+grgopiCkEIbUK1o0lusmurRSEWmmKG6MNtNhNosWqyU2CZPpN8cr15nFD7YHDzHnON2fOGYZhmHkw4XEW+wD4xkT4lMvl6CE0+Y2ohh+dz+cZn89HVS/5+n/d/wVMkXq9Xor2v5SBgsmymQwZHx+vOqlKpXKDXWI3eU6Tg+kqSjSh3W4/s9lsvzUajaNcAK3xY7Dyci3nd6WXSCS60dHRvMfjSRcKBfWV4SYbrVarB8p0PB5nY7HYmdVq/aDX67WlckpKKcvpOjs7X09OTvoPDw8z2Wy2Bu+imJqa+npycnJXGHOt3YRGoSyVSvvMZrNkYWFBs7GxkaoBAXFJcDJhcCW5rq5ur62trQ/EOhyOBhDT2Nj4qVKMqA31ve1yub7Rfufo/PycDA4OxpuamhqECaouhVqtfuD3+1tqa2uZQCCQDoVCWTwknVQDDvIKE1clI1ja09Ozg0cjx8fHpL+/P+50OhMU8f7+Punt7f2I5NdqXRXi9fV1z9jYWCuIWV5eziSTyWAqlXq1urqaw6AwOMiCG4lOYtEturu732xubhK0FQHSvfr6+lsog4HWPIPvIBqNErRiqCiwkkKpVFowZd8xZSQYDLImk+kJ52+xWJ4tLS3hU8yTkZGRBD2Ms4mu6Nun4XA4f3p6SoaGhuJ0+rgg/Bsmt9udYFmWzM3NZdDT05ztWsE5JV0R1AqUCfTt0fb2tjESiRRmZmaOUOcI3w9DY5mdnb03PDzMoDQ/MZFRzM20lO/E38vl8vt46UdAq0WNJWixlEwmu8B1bXioOxwjpgXJ0hMTE1og1qysrDghf+HnKtoD7c7u7i5ZXFzMGY3GF7iFuRR3dHTMr62tXWxtbZH29vZ3RYmECozu54ODAzpdP2hphHZOVigUVjChvgMDA+85fdm1q6vrrU6n+4WR9Zd1ujQ0Nzc/NBgMScSExXwZ2j5oL5Wo46UD/ZvxUemo+AdW1zJzUYr16wAAAABJRU5ErkJggg==), auto\";\r\n    var _hasUI = Autodesk.Viewing.GuiViewer3D && viewer instanceof Autodesk.Viewing.GuiViewer3D;\r\n\r\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\r\n\r\n    function getActivePick()\r\n    {\r\n        switch (_activePoint) {\r\n            case 0:\r\n                return null;\r\n            case 1:\r\n            case 2:\r\n                return _measurement.getPick(_activePoint);\r\n            case 3:\r\n                return _measurement.getPick(_measurement.countPicks());\r\n        }\r\n    }\r\n\r\n    function getPreviousPick()\r\n    {\r\n        switch (_activePoint) {\r\n            case 0:\r\n                return null;\r\n            case 1:\r\n                return _measurement.getPick(_measurement.countPicks());\r\n            case 2:\r\n            case 3:\r\n                return _measurement.getPick(1);\r\n        }\r\n    }\r\n\r\n    function hasPreviousPick()\r\n    {\r\n        switch (_activePoint) {\r\n            case 0:\r\n                return false;\r\n            case 1:\r\n                return _measurement.hasPick(_measurement.countPicks());\r\n            case 2:\r\n            case 3:\r\n                return _measurement.hasPick(1);\r\n        }\r\n    }\r\n\r\n    function noPicksSet() {\r\n        _activePoint = 0;\r\n    }\r\n\r\n    function allPicksSet() {\r\n        _activePoint = 3;\r\n        _measurement.indicator.changeAllEndpointsEditableStyle(true);\r\n    }\r\n\r\n    function isNoPicksSet() {\r\n        return _activePoint === 0;\r\n    }\r\n\r\n    function areAllPicksSet() {\r\n        return _activePoint === 3;   \r\n    }\r\n\r\n    this.register = function()\r\n    {\r\n        if (_hasUI && !_calibrationPanel) {\r\n            _calibrationPanel = new CalibrationPanel( this, _viewer, \"calibration-panel\", \"Calibration\", _options );\r\n            _viewer.addPanel(_calibrationPanel);\r\n        }\r\n\r\n        this.onCameraChangeBinded = this.onCameraChange.bind(this);\r\n        this.screenSizeChangedBinded = this.screenSizeChanged.bind(this);\r\n    };\r\n\r\n    this.deregister = function()\r\n    {   \r\n        this.deactivate();\r\n        \r\n        if (_calibrationPanel) {\r\n            _viewer.removePanel( _calibrationPanel );\r\n            _calibrationPanel.uninitialize();\r\n            _calibrationPanel = null;\r\n        }\r\n    };\r\n\r\n    this.isActive = function()\r\n    {\r\n        return _active;\r\n    };\r\n\r\n    this.getNames = function()\r\n    {\r\n        return _names;\r\n    };\r\n\r\n    this.getName = function()\r\n    {\r\n        return _names[0];\r\n    };\r\n\r\n    this.getPriority = function()\r\n    {\r\n        return _priority;\r\n    };\r\n\r\n    this.getCursor = function() {\r\n        return _isDragging ? null : _cursor;\r\n    };\r\n\r\n    this.activate = function()\r\n    {\r\n        _active = true;\r\n        _isDragging = false;\r\n        this.isEditingEndpoint = false;\r\n        this.editByDrag = false;\r\n        noPicksSet();\r\n\r\n        _viewer.toolController.activateTool(_snapper.getName());\r\n        _viewer.toolController.activateTool(\"magnifyingGlass\");\r\n\r\n\r\n        if (!_measurement.indicator) {\r\n            _measurement.attachIndicator(_viewer, this, CalibrationToolIndicator);\r\n        }\r\n\r\n        _measurement.indicator.clear();\r\n\r\n        if (_calibrationTaken && _selectedP1 && _selectedP2) {\r\n            _measurement.setPick(1, _selectedP1.clone());\r\n            _measurement.setPick(2, _selectedP2.clone());\r\n\r\n            allPicksSet();\r\n\r\n            var parsedRequestedSize = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(_selectedSize, _selectedUnits);\r\n            _measurement.indicator.updateLabelValue(Autodesk.Viewing.Private.formatValueWithUnits(parsedRequestedSize, _selectedUnits, 3, _sharedMeasureConfig.precision));\r\n            _distance = _measurement.distanceXYZ;\r\n            _measurement.indicator.changeLabelClickableMode(false);\r\n            _waitingForInput = true;\r\n            var valid = this.render();\r\n            _measurement.indicator.changeAllEndpointsEditableStyle(true);\r\n\r\n            if (valid) {\r\n                if (_calibrationPanel) {\r\n                    _calibrationPanel.setPanelValue(_selectedSize);\r\n                }\r\n                \r\n                this.showPanel();\r\n            }\r\n        }\r\n\r\n        _viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\r\n        _viewer.addEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.screenSizeChangedBinded);\r\n    };\r\n\r\n    this.deactivate = function()\r\n    {   \r\n        if (!_active)\r\n            return;\r\n\r\n        _active = false;\r\n\r\n        this.hidePanel();\r\n        this.updateViewportId(true);\r\n        _waitingForInput = false;\r\n        _measurement.clearAllPicks();\r\n\r\n        if(_snapper && _snapper.isActive()) {\r\n            _viewer.toolController.deactivateTool(_snapper.getName());\r\n        }\r\n\r\n        _viewer.toolController.deactivateTool(\"magnifyingGlass\");\r\n\r\n        if (_measurement.indicator) {\r\n            _measurement.indicator.clear();\r\n            _measurement.indicator.destroy();\r\n            _measurement.indicator = null;\r\n        }\r\n\r\n        _viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\r\n        _viewer.removeEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.screenSizeChangedBinded);\r\n    };\r\n\r\n    this.getActivePointIndex = function() {\r\n        return _activePoint;\r\n    };\r\n\r\n    this.setCalibrationFactor = function ( calibrationFactor ) {\r\n        _sharedMeasureConfig.calibrationFactor = calibrationFactor;\r\n    };\r\n\r\n    this.getCalibrationFactor = function () {\r\n        return _sharedMeasureConfig.calibrationFactor;\r\n    };\r\n\r\n    this.updateLabelValue = function (value) {\r\n        _measurement.indicator.updateLabelValue(value);\r\n    };\r\n\r\n    this.isCalibrationValid = function(requestedUnits, requestedSize) { \r\n        var parsedRequestedSize = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(requestedSize, requestedUnits); \r\n        return !isNaN(parsedRequestedSize); \r\n    };\r\n\r\n    this.calibrate = function(requestedUnits, requestedSize)\r\n    {\r\n\r\n        var calibrationFactor = null;\r\n        \r\n        var parsedRequestedSize = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(requestedSize, requestedUnits);\r\n\r\n        if (!isNaN(parsedRequestedSize)) {\r\n            var currentSize = Autodesk.Viewing.Private.convertUnits(_viewer.model.getUnitString(), requestedUnits, 1, _distance);\r\n            if (currentSize !== 0 && !isNaN(currentSize)) {\r\n                calibrationFactor = parsedRequestedSize / currentSize;\r\n                _sharedMeasureConfig.calibrationFactor = calibrationFactor;\r\n                _sharedMeasureConfig.units = requestedUnits;\r\n                var defualtPrecision = _viewer.model.is2d() ? 3 : 1;\r\n                var requestedPrecision = Autodesk.Viewing.Private.calculatePrecision(requestedSize);\r\n                _sharedMeasureConfig.precision = Math.max((_sharedMeasureConfig.precision ? _sharedMeasureConfig.precision : defualtPrecision), requestedPrecision);\r\n                _selectedSize = requestedSize;\r\n                _selectedUnits = requestedUnits;\r\n                _isCalibrated = true;\r\n                _calibrationTaken = true;\r\n                _selectedP1 = _measurement.getPick(1).clone();\r\n                _selectedP2 = _measurement.getPick(2).clone();\r\n            }\r\n        }\r\n        \r\n        if (calibrationFactor) {\r\n            _viewer.getExtension('Autodesk.Measure').enableCalibrationTool(false);\r\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.FINISHED_CALIBRATION , units: requestedUnits , scaleFactor: calibrationFactor, size: requestedSize});\r\n        }\r\n    };\r\n\r\n    this.calibrateByScale = function(requestedUnits, requestedScale) {\r\n        _sharedMeasureConfig.calibrationFactor = requestedScale;\r\n        \r\n        if (_sharedMeasureConfig.units !== requestedUnits ) {\r\n            _sharedMeasureConfig.units = requestedUnits;\r\n            _selectedUnits = requestedUnits;\r\n        }\r\n\r\n        _isCalibrated = true;\r\n    };\r\n\r\n    this.getCurrentUnits = function () {\r\n        return _sharedMeasureConfig.units;\r\n    };\r\n\r\n    this.hidePanel = function() {\r\n        if (_calibrationPanel) {\r\n            _calibrationPanel.setVisible(false);\r\n        }\r\n        else {\r\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.CLOSE_CALIBRATION_PANEL_EVENT });\r\n        }\r\n    };\r\n\r\n    this.showPanel = function() {\r\n\r\n        var self = this;\r\n        const _window = this.getWindow();\r\n\r\n        if (_calibrationPanel) {\r\n            _window.setTimeout(function () { _calibrationPanel.requestedSizeTextbox.focus();}, 0);\r\n            _calibrationPanel.setVisible(true);\r\n            _calibrationPanel.updatePanelPosition(_measurement.indicator.labelPosition, _measurement.indicator.p1, _measurement.indicator.p2, _measurement.indicator.calibrationLabel.clientHeight);\r\n            self.addWindowEventListener(\"keyup\", function onKeyUp(e){\r\n                var key = e.key || String.fromCharCode(e.keyCode);\r\n                if (key == \"Escape\" && self.isActive()) {\r\n                    self.hidePanel();\r\n                    self.clearSize();\r\n                    self.showAddCalibrationLabel();\r\n                    \r\n                    self.removeWindowEventListener(\"keyup\", onKeyUp);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.OPEN_CALIBRATION_PANEL_EVENT, data: {size: _selectedSize, units: _selectedUnits } });\r\n        }\r\n    };\r\n\r\n    this.showAddCalibrationLabel = function() {\r\n        _measurement.indicator.showAddCalibrationLabel();\r\n    };\r\n\r\n    this.isCalibrated = function() {\r\n        return _isCalibrated;\r\n    };\r\n\r\n    this.clearSize = function () {\r\n        _measurement.indicator.updateLabelValue(null);\r\n\r\n        if (_calibrationPanel) {\r\n            _calibrationPanel.requestedSizeTextbox.value = \"\";   \r\n        }\r\n        else {\r\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.CLEAR_CALIBRATION_SIZE_EVENT });\r\n        }\r\n    };\r\n\r\n    this.getMaxPrecision = function() {\r\n        return _maxPrecision;\r\n    };\r\n    \r\n    this.clearMeasurement = function() {\r\n\r\n        noPicksSet();\r\n\r\n        this.clearPick(1);\r\n        this.clearPick(2);\r\n\r\n        _measurement.indicator.clear();\r\n        \r\n        this.updateViewportId(true);\r\n        this.hidePanel();\r\n\r\n        _waitingForInput = false;\r\n    };\r\n\r\n    this.clearPick = function(pickNumber) {\r\n        if (_measurement.hasPick(pickNumber)) {\r\n            _measurement.clearPick(pickNumber);\r\n            _measurement.indicator.hideClick(pickNumber);\r\n        }\r\n    };\r\n\r\n    this.repickEndpoint = function(pickNumber) {\r\n        this.clearPick(pickNumber);\r\n        this.editEndpoint(null, pickNumber);\r\n    };\r\n\r\n    this.getSnapper = function() {\r\n        return _snapper;\r\n    };\r\n\r\n    this._handleMouseEvent = function (event) {\r\n\r\n        var valid = false;\r\n\r\n        if (_snapper.isSnapped()) {\r\n\r\n            // User picked a new point after two points where already set (or none) - Start a new measurement.\r\n            if (areAllPicksSet() || isNoPicksSet()) {\r\n                this.clearMeasurement();\r\n                _activePoint = 1;\r\n            }\r\n            \r\n            _snapper.copyResults(getActivePick());\r\n\r\n            valid = true;\r\n\r\n        } \r\n        else { \r\n            // In order to draw rubber-band, set the cursor position, so the indicator will use it as active point.\r\n            if (event && _viewer.model.is2d()) {\r\n                var viewport = _viewer.container.getBoundingClientRect();\r\n                var x = event.canvasX || event.clientX - viewport.left;\r\n                var y = event.canvasY || event.clientY - viewport.top;\r\n\r\n                if (x && y) {\r\n                    _cursorPosition = MeasureCommon.inverseProject({ x:x, y:y }, _viewer);\r\n                }\r\n            }\r\n\r\n            // In case a measurement is set, and the user clicks on a blank spot - don't do nothing.\r\n            if (_consumeSingleClick && _measurement && !this.isEditingEndpoint) {\r\n                if (_activePoint === _measurement.getMaxNumberOfPicks() + 1) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            var lastPick = getActivePick();\r\n            if (lastPick) {\r\n                lastPick.clear();\r\n            }\r\n        }\r\n\r\n        this.correctPickPosition();\r\n\r\n        if (_consumeSingleClick) {\r\n            this._doConsumeSingleClick(valid);\r\n        }\r\n        \r\n        if (!isNoPicksSet()) {\r\n            var renderSucceeded = this.render();\r\n\r\n            // If it's the first pick, we don't expect the render of the rubberband to be succeeded.\r\n            // So enter here only if it's not the first pick.\r\n            if (_measurement.hasPick(2)) {\r\n                valid &= renderSucceeded;\r\n            }\r\n        }\r\n\r\n        if (_consumeSingleClick) {\r\n            if (_measurement.isComplete() && valid) {\r\n                _distance = _measurement.distanceXYZ;\r\n                this.clearSize();\r\n                this.showPanel();\r\n                _waitingForInput = true;\r\n            }\r\n            else {\r\n                this.hidePanel();\r\n                _measurement.indicator.updateLabelValue(null);\r\n                _waitingForInput = false;\r\n            }\r\n        }\r\n\r\n        // If valid is false, the last pick is not revelant, and will clear it in case of a click.\r\n        return valid;\r\n    };\r\n\r\n    this.updateViewportId = function(clear) {\r\n        if (_viewer.model && _viewer.model.is2d()) {\r\n            if (clear || isNoPicksSet()) {\r\n                viewer.impl.updateViewportId(0);\r\n                _snapper.setViewportId(null);\r\n            }\r\n            else if (!_isPressing) {\r\n                var viewport = getPreviousPick().viewportIndex2d || getActivePick().viewportIndex2d;\r\n                \r\n                // Pass viewport Id to LineShader to make all other geometries with different viewport transparent\r\n                viewer.impl.updateViewportId(viewport);\r\n                if (_snapper)\r\n                    _snapper.setViewportId(viewport);  \r\n            \r\n            }\r\n        }\r\n    };\r\n\r\n    this._doConsumeSingleClick = function(valid) {\r\n\r\n        this.updateViewportId(_measurement.isComplete());\r\n\r\n        _measurement.indicator.clear();\r\n    };\r\n\r\n\r\n    this.handleButtonDown = function (event, button) {\r\n        if (av.isMobileDevice()) \r\n            return false;\r\n\r\n        _isDragging = true;\r\n        if (button === 0 && !event.ctrlKey && !event.metaKey && !event.shiftKey && !event.altKey) {\r\n            _consumeSingleClick = true;\r\n            _downX = event.canvasX;\r\n            _downY = event.canvasY;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    this.handleMouseMove = function (event) {\r\n        if (av.isMobileDevice())\r\n            return false;\r\n\r\n        if (event.canvasX !== _downX || event.canvasY !== _downY) {\r\n            _consumeSingleClick = false;    \r\n        }\r\n\r\n        _endpointMoved = this.isEditingEndpoint;    \r\n\r\n        if (!isNoPicksSet() && !areAllPicksSet()) {\r\n            this.clearPick(_activePoint);\r\n            this._handleMouseEvent(event);\r\n        }\r\n\r\n        _snapper.indicator.render();\r\n        \r\n        return false;\r\n    };\r\n\r\n    this.restoreMouseListeners = function () {\r\n\r\n        // When a press event has happend, the default behavior of firefly.js is to disable other mouse events,\r\n        // So they won't be triggered as well.\r\n        // The solution is to enable them after the end of the pressing.\r\n\r\n        _viewer.toolController.getTool(\"gestures\").controller.enableMouseButtons(true);\r\n    };\r\n\r\n    this.handlePressHold = function (event) {\r\n        _consumeSingleClick = false;\r\n\r\n        if (av.isTouchDevice()) {\r\n            switch( event.type )\r\n            {\r\n                case \"press\":\r\n                    _isPressing = true;\r\n                    if (areAllPicksSet()) {\r\n                        this.clearMeasurement();\r\n                    } else {\r\n                        this.clearPick(_activePoint);\r\n                    }\r\n                    this._handleMouseEvent(event);\r\n                    _snapper.indicator.render();\r\n\r\n                    return true;\r\n\r\n                case \"pressup\":\r\n                    _consumeSingleClick = true;\r\n                    this.restoreMouseListeners();\r\n                    _singleClickHandled = !_singleClickHandled;\r\n                    this.handleSingleClick(event);\r\n                    _isPressing = false;\r\n                    return true;\r\n            }\r\n        }\r\n        return false;\r\n\r\n    };\r\n\r\n    this.correctPickPosition = function() {\r\n        \r\n        var active = getActivePick();\r\n            \r\n        if (active && !active.getGeometry() && _cursorPosition) {\r\n            active.geomType = MeasureCommon.SnapType.SNAP_VERTEX;\r\n            active.geomVertex = _cursorPosition;\r\n            active.intersectPoint = _cursorPosition;\r\n        }\r\n\r\n        if (hasPreviousPick()) {\r\n            var passive = getPreviousPick();\r\n            MeasureCommon.correctPerpendicularPicks(passive, active, viewer, _snapper);\r\n        }\r\n    };\r\n\r\n    this.render = function() {\r\n\r\n        var hasResult = _measurement.computeResult(_measurement.picks, _viewer, _snapper);\r\n        _measurement.indicator.render(_measurement.picks, _consumeSingleClick || _waitingForInput);\r\n\r\n        return hasResult;\r\n    };\r\n\r\n    this.editEndpoint = function(event, endpointNumber) {\r\n        if (_activePoint === endpointNumber) {\r\n            _measurement.indicator.changeEndpointOnEditStyle(endpointNumber, false);\r\n            this.undoEditEndpoint();\r\n            return;\r\n        }\r\n\r\n        _activePoint = endpointNumber;\r\n        this.isEditingEndpoint = true;\r\n\r\n        _measurement.indicator.changeEndpointOnEditStyle(endpointNumber, true);\r\n        _measurement.indicator.changeAllEndpointsEditableStyle(false);\r\n\r\n        for (var key in _measurement.picks) {\r\n            if (_measurement.picks.hasOwnProperty(key)) {\r\n                _picksBackup[key] = _measurement.getPick(key).clone();\r\n            }\r\n        }\r\n\r\n        this.updateViewportId();\r\n\r\n        this.hidePanel();\r\n        _measurement.indicator.updateLabelValue(null);\r\n        _waitingForInput = false;\r\n\r\n        if(!av.isMobileDevice()) {\r\n            this._handleMouseEvent(event);\r\n        }\r\n    };\r\n\r\n    this.undoEditEndpoint = function() {\r\n        _measurement.indicator.clear();\r\n\r\n        for (var key in _measurement.picks) {\r\n            if (_measurement.picks.hasOwnProperty(key)) {\r\n                _measurement.setPick(key, _picksBackup[key].clone());\r\n            }\r\n        }\r\n        \r\n        this.updateViewportId(true);\r\n        this.isEditingEndpoint = false;\r\n        _waitingForInput = true;\r\n\r\n        allPicksSet();\r\n        var valid = this.render();\r\n        \r\n        if (valid) {\r\n            this.showPanel();\r\n        }\r\n    };\r\n\r\n    this.handleGesture = function(event)\r\n    {   \r\n        if (av.isTouchDevice()){\r\n            \r\n            _consumeSingleClick = false;\r\n        \r\n            if (_isPressing) {\r\n                \r\n                this.clearPick(_activePoint);\r\n\r\n                switch( event.type )\r\n                {\r\n                    case \"dragstart\":\r\n                        this._handleMouseEvent(event);\r\n                        _snapper.indicator.render();\r\n\r\n                        return true;\r\n\r\n                    case \"dragmove\":\r\n                        this._handleMouseEvent(event);\r\n                        _snapper.indicator.render();\r\n\r\n                        return true;\r\n\r\n                    case \"dragend\":\r\n                        _isPressing = false;\r\n                        _consumeSingleClick = true;\r\n\r\n                        if (!this.editByDrag) {\r\n                            _singleClickHandled = !_singleClickHandled;\r\n                            this.handleSingleClick(event);    \r\n                        }\r\n\r\n                        this.editByDrag = false;\r\n                        this.restoreMouseListeners();\r\n                        return true;\r\n\r\n                    case \"pinchend\":\r\n                        _consumeSingleClick = true;\r\n                        _singleClickHandled = !_singleClickHandled;\r\n                        this.handleSingleClick(event);\r\n                        this.restoreMouseListeners();\r\n                        return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    this.handleButtonUp = function (event) {\r\n        _isDragging = false;\r\n        _downX = null;\r\n        _downY = null;\r\n        \r\n        if (_endpointMoved) {\r\n            _consumeSingleClick = true;\r\n            _singleClickHandled = !_singleClickHandled;\r\n            this.handleSingleClick(event);\r\n            _endpointMoved = false;\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    this.handleSingleClick = function (event) {\r\n        if (_consumeSingleClick) {\r\n            \r\n            _snapper.indicator.clearOverlays();\r\n\r\n            _measurement.indicator.changeEndpointOnEditStyle(_activePoint, false);\r\n\r\n            if (this._handleMouseEvent(event)) {\r\n                _measurement.indicator.showEndpoints();\r\n                _measurement.indicator.updateLabelsPosition();\r\n                _activePoint++;\r\n            }\r\n            else {\r\n                if (this.isEditingEndpoint) {\r\n                    this.undoEditEndpoint();\r\n                }\r\n                else {\r\n                    this.clearMeasurement();\r\n                }\r\n            }\r\n\r\n            if (_measurement.isComplete()) {\r\n                allPicksSet();\r\n            }\r\n\r\n            _consumeSingleClick = false;\r\n            _singleClickHandled = !_singleClickHandled;\r\n            this.isEditingEndpoint = false;\r\n\r\n            _snapper.clearSnapped();\r\n        }\r\n        return true;\r\n    };\r\n\r\n    this.handleDoubleClick = function() {\r\n        return true;\r\n    };\r\n\r\n    this.handleSingleTap = function (event) {\r\n        if (!_singleClickHandled) {\r\n            _consumeSingleClick = true;\r\n            _snapper.onMouseDown({x: event.canvasX, y:event.canvasY});\r\n            this.handleSingleClick(event);\r\n        }\r\n        _singleClickHandled = !_singleClickHandled;\r\n\r\n        return true;\r\n    };\r\n\r\n    this.handleDoubleTap = function() {\r\n        return true;\r\n    };\r\n\r\n    this.handleResize = function() {\r\n        if (_measurement.indicator) {\r\n            _measurement.indicator.handleResize();\r\n        }\r\n    };\r\n\r\n    this.onCameraChange = function() {\r\n        if (_snapper.indicator) {\r\n            _snapper.indicator.onCameraChange();\r\n        }\r\n    };\r\n\r\n    this.screenSizeChanged = function(event) {\r\n        this.onCameraChange();\r\n    };\r\n};\r\n\r\nav.GlobalManagerMixin.call(CalibrationTool.prototype);","\r\nconst av = Autodesk.Viewing;\r\n\r\nexport var MagnifyingGlass = function(viewer) {\r\n\r\n    var _viewer = viewer;\r\n    var _active = false;\r\n    var _names = [\"magnifyingGlass\"];\r\n    var _priority = 70;\r\n    var _isPressing = false;\r\n    var _radius = 60;\r\n    var _zoom = 2;\r\n    var _offset = 15;\r\n    var _magnifyingGlassCanvas = null;\r\n    var _imageData = null;\r\n    var _imageBuffer = null;\r\n    var _clientX = null;\r\n    var _clientY = null;\r\n    var _needsClear = false;\r\n    var av = Autodesk.Viewing;\r\n    \r\n    this.setGlobalManager(viewer.globalManager);\r\n\r\n    this.isActive = function() {\r\n\r\n        return _active;\r\n    };\r\n\r\n    this.activate = function() {\r\n\r\n        _active = true;\r\n        this.updateMagnifyingGlassBinded = this.updateMagnifyingGlass.bind(this);\r\n    };\r\n\r\n    this.updateMagnifyingGlass = function() {\r\n        const _window = this.getWindow();\r\n        const _document = this.getDocument();\r\n        if (_needsClear) {\r\n            _magnifyingGlassCanvas && _magnifyingGlassCanvas.classList.remove('visible');\r\n            _needsClear = false;\r\n        }\r\n        else {\r\n            var pixelRatio = _window.devicePixelRatio;\r\n            var diameter = 2 * _radius;\r\n            var normlizedDiameter = diameter * pixelRatio;\r\n            var x = pixelRatio * (_clientX - (_radius  / _zoom));\r\n            var y = pixelRatio * (_clientY - (_radius  / _zoom));\r\n            \r\n            if (!_magnifyingGlassCanvas) {\r\n                _magnifyingGlassCanvas = _document.createElement(\"canvas\");\r\n                _magnifyingGlassCanvas.className = 'magnifying-glass';\r\n                _magnifyingGlassCanvas.width = normlizedDiameter;\r\n                _magnifyingGlassCanvas.height = normlizedDiameter;\r\n                _magnifyingGlassCanvas.style.width = diameter + 'px';\r\n                _magnifyingGlassCanvas.style.height = diameter + 'px';\r\n\r\n                // Swap canvas\r\n                _magnifyingGlassCanvas.getContext(\"2d\").translate(0, normlizedDiameter);\r\n                _magnifyingGlassCanvas.getContext(\"2d\").scale(1,-1);\r\n\r\n                _viewer.container.appendChild(_magnifyingGlassCanvas);\r\n                _imageData = _magnifyingGlassCanvas.getContext(\"2d\").createImageData(Math.ceil(normlizedDiameter / _zoom), Math.ceil(normlizedDiameter / _zoom));\r\n                _imageBuffer = new Uint8Array(_imageData.data.buffer);\r\n            }\r\n\r\n            var ctx = _magnifyingGlassCanvas.getContext(\"2d\");\r\n            \r\n            // Read the pixels from the frame buffer\r\n            var gl = _viewer.canvas.getContext(\"webgl2\") || _viewer.canvas.getContext(\"webgl\") || _viewer.canvas.getContext(\"experimental-webgl\");         \r\n            gl.readPixels(x, _viewer.canvas.height - y - _imageData.height, _imageData.width, _imageData.height, gl.RGBA, gl.UNSIGNED_BYTE, _imageBuffer);\r\n            // Put the pixel into the magnifying context.\r\n            ctx.putImageData(_imageData, 0, 0);\r\n            // Scale the image\r\n            ctx.drawImage(_magnifyingGlassCanvas, 0, 0, _imageData.width, _imageData.height, 0, 0, normlizedDiameter, normlizedDiameter);\r\n            this.setGlassPosition(_magnifyingGlassCanvas, _clientX, _clientY, diameter, _offset); \r\n\r\n            _magnifyingGlassCanvas.classList.toggle('visible', true);\r\n        }\r\n    };\r\n\r\n    this.deactivate = function() {\r\n        this.clearMagnifyingGlass();\r\n        _active = false;\r\n    };\r\n\r\n    this.getNames = function() {\r\n\r\n        return _names;\r\n    };\r\n\r\n    this.getName = function() {\r\n\r\n        return _names[0];\r\n    };\r\n\r\n    this.getPriority = function() {\r\n        return _priority;\r\n    };\r\n\r\n    this.setGlassPosition = function(canvas, x, y, diameter, offset) {\r\n            \r\n        // check the left border of canvas\r\n        canvas.style.left = (x - diameter/2) + 'px';\r\n\r\n        // check the top border of canvas\r\n        if (y - diameter - offset > 0) {\r\n            canvas.style.top  = (y - diameter - offset) + 'px';    \r\n        }\r\n        else {\r\n            canvas.style.top = (y + offset) + 'px';    \r\n        }\r\n    };\r\n\r\n    this.requestUpdate = function() {\r\n        if(!_viewer.hasEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.updateMagnifyingGlassBinded)) {\r\n           _viewer.addEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.updateMagnifyingGlassBinded, { once: true });\r\n        }\r\n    };\r\n\r\n    this.drawMagnifyingGlass = function(clientX, clientY) {\r\n        _clientX = clientX;\r\n        _clientY = clientY;\r\n        _viewer.impl.invalidate(false, false, true);\r\n        this.requestUpdate();\r\n    };\r\n\r\n    this.clearMagnifyingGlass = function () {\r\n        _needsClear = true;\r\n        this.requestUpdate();\r\n    };\r\n\r\n    this.handlePressHold = function (event) {\r\n\r\n        if (av.isTouchDevice()) {\r\n            switch( event.type )\r\n            {\r\n                case \"press\":\r\n                    _isPressing = true;\r\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\r\n                    break;\r\n\r\n                case \"pressup\":\r\n                    this.clearMagnifyingGlass();\r\n                    _isPressing = false;\r\n                    break;\r\n            }\r\n        }\r\n        return false;\r\n\r\n    };\r\n\r\n    this.handleGesture = function(event) {\r\n\r\n        if (_isPressing && av.isTouchDevice()) {\r\n            switch( event.type )\r\n            {\r\n                case \"dragstart\":\r\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\r\n                    break;\r\n\r\n                case \"dragmove\":\r\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\r\n                    break;\r\n\r\n                case \"dragend\":\r\n                    this.clearMagnifyingGlass();\r\n                    _isPressing = false;\r\n                    break;\r\n\r\n                case \"pinchstart\":\r\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\r\n                    break;\r\n\r\n                case \"pinchmove\":\r\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\r\n                    break;\r\n\r\n                case \"pinchend\":\r\n                    this.clearMagnifyingGlass();\r\n                    break;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    this.handleMouseMove = function (event) {\r\n        return false;\r\n    };\r\n\r\n    this.handleWheelInput = function (delta) {\r\n        return false;\r\n    };\r\n\r\n    this.handleButtonUp = function (event, button) {\r\n        return false;\r\n    };\r\n\r\n};\r\n\r\nav.GlobalManagerMixin.call(MagnifyingGlass.prototype);\r\n","\r\n    var av = Autodesk.Viewing;\r\n    var avu = Autodesk.Viewing.UI;\r\n    var avp = Autodesk.Viewing.Private;\r\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\r\n\r\n    // /** @constructor */\r\n    export function MeasureToolbar(measureExtension)\r\n    {\r\n        this.measureExtension = measureExtension;\r\n        this.measureTool = this.measureExtension.measureTool;\r\n        this.viewer = this.measureExtension.viewer;\r\n        this.setGlobalManager(this.viewer.globalManager);\r\n        this.visible = false;\r\n        this.buttonsList = [];\r\n    }\r\n\r\n    var proto = MeasureToolbar.prototype;\r\n    av.GlobalManagerMixin.call(MeasureToolbar.prototype);\r\n\r\n    proto.init = function() {\r\n        var self = this;\r\n\r\n        const _document = this.getDocument();\r\n\r\n        // Add Measure tool toolbar to main toolbar\r\n        var toolbar = this.viewer.getToolbar();\r\n        var navigationBar = toolbar.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);\r\n        var toolbarOptions = {};\r\n        toolbarOptions.index = toolbar.indexOf(navigationBar) + 1;\r\n        this.measureToolbar = new avu.ControlGroup(Autodesk.Viewing.TOOLBAR.MEASURETOOLSID);\r\n        this.measureToolbar.setGlobalManager(this.globalManager);\r\n        toolbar.addControl(this.measureToolbar, toolbarOptions);\r\n    \r\n\r\n        // Create a button for the measure simple distance.\r\n        this.measureSimpleDistanceBtn = new avu.Button(\"toolbar-measureTool-simple-distance\");\r\n        this.measureSimpleDistanceBtn.setGlobalManager(this.globalManager);\r\n        this.measureSimpleDistanceBtn.setToolTip(\"Distance\");\r\n        this.measureSimpleDistanceBtn.setIcon(\"adsk-icon-measure-distance-new\");\r\n        this.measureSimpleDistanceBtn.onClick = function() {\r\n            var enable = self.measureSimpleDistanceBtn.getState() !== avu.Button.State.ACTIVE;\r\n            if (enable) {\r\n                self.measureExtension.activate('distance');\r\n            } else {\r\n                self.measureTool.deselectAllMeasurements();\r\n            }\r\n        };\r\n\r\n        this.measureToolbar.addControl(this.measureSimpleDistanceBtn);\r\n        this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE] = this.measureSimpleDistanceBtn;\r\n\r\n\r\n        // Create a button for the measure Angle.\r\n        this.measureAngleBtn = new avu.Button(\"toolbar-measureTool-angle\");\r\n        this.measureAngleBtn.setGlobalManager(this.globalManager);\r\n        this.measureAngleBtn.setToolTip(\"Angle\");\r\n        this.measureAngleBtn.setIcon(\"adsk-icon-measure-angle-new\");\r\n        this.measureAngleBtn.onClick = function () {\r\n            var enable = self.measureAngleBtn.getState() !== avu.Button.State.ACTIVE;\r\n            if (enable) {\r\n                self.measureExtension.activate('angle');\r\n            } else {\r\n                self.measureTool.deselectAllMeasurements();\r\n            }\r\n        };\r\n        this.measureToolbar.addControl(this.measureAngleBtn);\r\n        this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE] = this.measureAngleBtn;\r\n\r\n        if (this.viewer.model && this.viewer.model.is2d()) {\r\n            // Create a button for the measure distance.\r\n            this.measureAreaBtn = new avu.Button(\"toolbar-measureTool-area\");\r\n            this.measureAreaBtn.setGlobalManager(this.globalManager);\r\n            this.measureAreaBtn.setToolTip(\"Area\");\r\n            this.measureAreaBtn.setIcon(\"adsk-icon-measure-area-new\");\r\n            this.measureAreaBtn.onClick = function() {\r\n                var enable = self.measureAreaBtn.getState() !== avu.Button.State.ACTIVE;\r\n                if (enable) {\r\n                    self.measureExtension.activate('area');\r\n                } else {\r\n                    self.measureTool.deselectAllMeasurements();\r\n                }\r\n            };\r\n\r\n            this.measureToolbar.addControl(this.measureAreaBtn);\r\n            this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_AREA] = this.measureAreaBtn;\r\n        }\r\n\r\n        // Create a button for the Calibration tool.\r\n        this.calibrationToolBtn = new avu.Button( \"toolbar-calibrationTool\");\r\n        this.calibrationToolBtn.setGlobalManager(this.globalManager);\r\n        this.calibrationToolBtn.setToolTip(\"Calibrate\");\r\n        this.calibrationToolBtn.setIcon(\"adsk-icon-measure-calibration\");\r\n        this.calibrationToolBtn.onClick = function(e) {\r\n            var enable = self.calibrationToolBtn.getState() !== avu.Button.State.ACTIVE;\r\n            if(enable) {\r\n                self.measureExtension.activate('calibrate');\r\n            } else  {\r\n                self.measureExtension.enableCalibrationTool(false);\r\n            }\r\n        };\r\n\r\n        this.measureToolbar.addControl(this.calibrationToolBtn);\r\n        this.buttonsList[MeasureCommon.MeasurementTypes.CALIBRATION] = this.calibrationToolBtn;\r\n\r\n        var separator = _document.createElement('div');\r\n        separator.className = 'measure-toolbar-seperator';\r\n\r\n        this.measureToolbar.container.appendChild(separator);\r\n        \r\n\r\n        // Create a button for the Trash.\r\n        this.deleteBtn = new avu.Button( \"toolbar-delete\");\r\n        this.deleteBtn.setGlobalManager(this.globalManager);\r\n        this.deleteBtn.setToolTip(\"Delete measurement\");\r\n        this.deleteBtn.setIcon(\"adsk-icon-measure-trash\");\r\n        this.deleteBtn.onClick = function() {\r\n            self.measureExtension.deleteCurrentMeasurement();\r\n        };\r\n\r\n        this.measureToolbar.addControl(this.deleteBtn);\r\n\r\n        // Create a button for the Settings panel.\r\n        this.settingsBtn = new avu.Button( \"toolbar-settings\");\r\n        this.settingsBtn.setGlobalManager(this.globalManager);\r\n        this.settingsBtn.setToolTip(\"Measure settings\");\r\n        this.settingsBtn.setIcon(\"adsk-icon-measure-settings\");\r\n\r\n        this.settingsControlPanel = _document.createElement('div');\r\n        this.settingsControlPanel.classList.add('docking-panel');\r\n        this.settingsControlPanel.classList.add('docking-panel-container-solid-color-b');\r\n        this.settingsControlPanel.classList.add('measure-settings-popup');\r\n        this.settingsControlPanel.classList.add('hide');\r\n\r\n        this.settingsBtn.onClick = function (event) {\r\n            if (this.settingsControlPanel.classList.contains('hide')) {\r\n                this.settingsControlPanel.classList.remove('hide');\r\n                this.setButtonActive(this.settingsBtn);\r\n            }\r\n            else {\r\n                this.settingsControlPanel.classList.add('hide');\r\n                this.setButtonInactive(this.settingsBtn);\r\n            }\r\n        }.bind(this);\r\n\r\n        this.measureToolbar.container.appendChild(this.settingsControlPanel);\r\n        this.settingsControlPanel.root = this.settingsBtn;\r\n        this.measureToolbar.addControl(this.settingsBtn);\r\n\r\n\r\n        // Settings Panel\r\n        this.table = _document.createElement(\"table\");\r\n        this.table.classList.add(\"adsk-lmv-tftable\");\r\n        this.table.classList.add(\"calibration-table\");\r\n\r\n        this.tbody = _document.createElement(\"tbody\");\r\n        this.table.appendChild(this.tbody);\r\n        this.settingsControlPanel.appendChild(this.table);\r\n\r\n        this.units = [\r\n            { name: 'Unknown', units: '', matches: [''] },                                      // localized in OptionDropDown() call below\r\n            { name: 'Decimal feet', units: 'decimal-ft', matches: ['ft', 'decimal-ft'] },             // localized in OptionDropDown() call below\r\n            { name: 'Feet and fractional inches', units: 'ft-and-fractional-in', matches: ['ft-and-fractional-in'] },         // localized in OptionDropDown() call below\r\n            { name: 'Feet and decimal inches', units: 'ft-and-decimal-in', matches: ['ft-and-decimal-in'] }, // localized in OptionDropDown() call below\r\n            { name: 'Decimal inches', units: 'decimal-in', matches: ['in', 'decimal-in'] },           // localized in OptionDropDown() call below\r\n            { name: 'Fractional inches', units: 'fractional-in', matches: ['fractional-in'] },  // localized in OptionDropDown() call below\r\n            { name: 'Meters', units: 'm', matches: ['m'] },                                     // localized in OptionDropDown() call below\r\n            { name: 'Centimeters', units: 'cm', matches: ['cm'] },                              // localized in OptionDropDown() call below\r\n            { name: 'Millimeters', units: 'mm', matches: ['mm'] },                              // localized in OptionDropDown() call below\r\n            { name: 'Meters and centimeters', units: 'm-and-cm', matches: ['m-and-cm'] },        // localized in OptionDropDown() call below\r\n            { name: 'Points', units: 'pt', matches: ['pt'] }                                    // localized in OptionDropDown() call below\r\n        ];\r\n\r\n        var initialIndex = this.findUnits(),\r\n            unitNames = [];\r\n        \r\n        // It is not possible to hide elements in Safari.\r\n        if (av.isSafari() && this.viewer.model.getDisplayUnit()){\r\n            // We will remove the 'Unknown' unit from the units array.\r\n            this.units.shift();\r\n        }\r\n        \r\n        for (var i = 0; i < this.units.length; ++i) {\r\n            unitNames.push(this.units[i].name);\r\n        }\r\n\r\n        this.unitList = new avp.OptionDropDown(\"Unit type\", this.tbody, unitNames, initialIndex, null, { paddingLeft: 0, paddingRight: 15 });\r\n        this.unitList.setGlobalManager(this.globalManager);\r\n        this.unitList.addEventListener(\"change\", function(e) {\r\n            var index = self.unitList.selectedIndex;\r\n            var toUnits = self.units[index].units;\r\n            self.measureTool.setUnits(toUnits);\r\n            self.setupPrecision();\r\n            avp.logger.track({ category: 'pref_changed', name: 'measure/units', value: toUnits });\r\n        });\r\n\r\n        this.precisionList = new avp.OptionDropDown(\"Precision\", this.tbody, [], -1, null, { paddingLeft: 0, paddingRight: 15 });\r\n        this.precisionList.setGlobalManager(this.globalManager);\r\n        this.precisionList.addEventListener(\"change\", function(e) {\r\n            var index = self.precisionList.selectedIndex;\r\n            self.measureTool.setPrecision(index);\r\n            avp.logger.track({ category: 'pref_changed', name: 'measure/precision', value: index });\r\n        });\r\n\r\n        this.isolate = new avp.OptionCheckbox(\"Isolate measurement\", this.tbody, false);\r\n        this.isolate.setGlobalManager(this.globalManager);\r\n        this.isolate.addEventListener(\"change\", function(e) {\r\n            var enable = self.isolate.checked;\r\n            self.measureTool.setIsolateMeasure(enable);\r\n            if (enable) {\r\n                self.measureTool.isolateMeasurement();\r\n            }\r\n            else {\r\n                self.measureTool.clearIsolate();\r\n            }\r\n            avp.logger.track({ category: 'pref_changed', name: 'measure/isolate', value: enable });\r\n        });\r\n\r\n        this.setupPrecision();\r\n\r\n        this.updateSettingsPanel();\r\n\r\n        if (this.viewer.model && this.viewer.model.is2d()) {\r\n            this.isolate.setVisibility(false);\r\n        }\r\n\r\n        if (!this.measureExtension.sharedMeasureConfig.units) {\r\n            this.disableUnitOption();\r\n        }\r\n        // Only disable option if the browser is not Safari\r\n        else if (!Autodesk.Viewing.isSafari()){\r\n            this.disableUnitOption(0);  // disable \"Unknown\" option when the model has units\r\n        }\r\n\r\n\r\n        // Create a button for 'Done'.\r\n        this.measureDoneBtn = new avu.Button(\"toolbar-measureTool-done\");\r\n        this.measureDoneBtn.setGlobalManager(this.globalManager);\r\n        var doneText = Autodesk.Viewing.i18n.translate('Done');\r\n        this.measureDoneBtn.setToolTip(doneText);\r\n        var cancelLabel = _document.createElement('label');\r\n        cancelLabel.textContent = doneText;\r\n        var btnContainer = this.measureDoneBtn.container;\r\n        btnContainer.appendChild(cancelLabel);\r\n        btnContainer.classList.add('adsk-label-button');\r\n        var iconEle = btnContainer.getElementsByClassName('adsk-button-icon');\r\n        iconEle && iconEle[0] && (iconEle[0].style.display = 'none');\r\n\r\n        this.measureDoneBtn.onClick = function() {\r\n            this.measureExtension.exitMeasurementMode();\r\n        }.bind(this);\r\n        this.measureToolbar.addControl(this.measureDoneBtn);\r\n\r\n        // this.settingsControlPanel.style.width = this.measureToolbar.container.getBoundingClientRect().width + 'px';\r\n        this.measureToolbar.setVisible(false);\r\n\r\n    };\r\n\r\n    proto.destroy = function() {\r\n\r\n        // If toolbar was open, close it first. Otherwise, we leave ModelTools toolbar in a broken state.\r\n        if (this.visible) {\r\n            this.closeToolbar();\r\n        }\r\n\r\n        if (this.measureToolbar) {\r\n            this.measureToolbar.removeFromParent();\r\n            this.measureToolbar = null;\r\n        }\r\n    };\r\n\r\n    proto.closeToolbar = function() {\r\n\r\n        this.measureExtension.enableMeasureTool(false);\r\n        this.measureExtension.enableCalibrationTool(false);\r\n        this.toggleVisible();\r\n\r\n        var toolbar = this.viewer.getToolbar();\r\n        var viewerToolbarContainer = toolbar.container;\r\n        var viewerContainerChildrenCount = viewerToolbarContainer.children.length;\r\n        \r\n        for(var i = 0; i < viewerContainerChildrenCount; ++i) {\r\n            viewerToolbarContainer.children[i].style.display = \"\";\r\n        }\r\n\r\n        var modelTools = toolbar.getControl(av.TOOLBAR.MODELTOOLSID);\r\n        modelTools.addControl(this.measureExtension.measurementToolbarButton, {index: this.measureExtension.measurementToolbarButton.index });\r\n    };\r\n\r\n    proto.toggleVisible = function() {\r\n        this.visible = !this.visible;\r\n        this.measureToolbar.setVisible(this.visible);\r\n        if (!this.visible) {\r\n            this.settingsControlPanel.classList.add('hide');\r\n            this.setButtonInactive(this.settingsBtn);\r\n        }\r\n    };\r\n\r\n    proto.setButtonActive = function(button) {\r\n        button.setState(avu.Button.State.ACTIVE);\r\n    };\r\n\r\n    proto.setButtonInactive = function(button) {\r\n        button.setState(avu.Button.State.INACTIVE);\r\n    };\r\n\r\n    proto.deactivateAllButtons = function() {\r\n        for (var key in this.buttonsList) {\r\n            if (this.buttonsList.hasOwnProperty(key)) {\r\n                var button = this.buttonsList[key];\r\n                this.setButtonInactive(button);   \r\n            }\r\n        }\r\n    };\r\n\r\n    proto.activateButtonByType = function(measurementType) {\r\n        this.setButtonActive(this.buttonsList[measurementType]);\r\n    };            \r\n\r\n    proto.setupPrecision = function() {\r\n        const _document = this.getDocument();\r\n        while (this.precisionList.dropdownElement.lastChild) {\r\n            this.precisionList.dropdownElement.removeChild(this.precisionList.dropdownElement.lastChild);\r\n        }\r\n\r\n        var selectedUnits = this.measureTool.getUnits(),\r\n            precisions;\r\n\r\n        if (selectedUnits === 'ft-and-fractional-in' || selectedUnits === 'fractional-in') {\r\n            precisions = ['1', '1/2', '1/4', '1/8', '1/16', '1/32', '1/64'];\r\n        } else {\r\n            precisions = ['0', '0.1', '0.01', '0.001', '0.0001', '0.00001'];\r\n        }\r\n\r\n        for (var i = 0; i < precisions.length; ++i) {\r\n            var elem = _document.createElement('option');\r\n            elem.value = i;\r\n            elem.textContent = precisions[i];\r\n            this.precisionList.dropdownElement.appendChild(elem);\r\n        }\r\n\r\n        var selectedIndex = this.measureTool.getPrecision();\r\n        if (precisions.length <= selectedIndex) {\r\n            selectedIndex = precisions.length - 1;\r\n            this.measureTool.setPrecision(selectedIndex);\r\n        }\r\n        this.precisionList.dropdownElement.selectedIndex = selectedIndex;\r\n    };\r\n\r\n    proto.findUnits = function() {\r\n        var i,\r\n            j,\r\n            selectedUnits = this.measureTool.getUnits();\r\n        for (i = 0; i < this.units.length; ++i) {\r\n            var matches = this.units[i].matches;\r\n            if (matches) {\r\n                for (j = 0; j < matches.length; ++j) {\r\n                    if (matches[j] === selectedUnits) {\r\n                        return i;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return 0;\r\n    };\r\n\r\n    proto.disableUnitOption = function( index ) {\r\n        if (index != null) {\r\n            this.unitList.dropdownElement.children[index].style.display = \"none\";\r\n            if (av.isIE11) {\r\n                // IE11 can't hide <option> elements...\r\n                this.unitList.dropdownElement.children[index].disabled = true;\r\n                this.unitList.dropdownElement.children[index].style.visibility = \"hidden\";\r\n            }\r\n        } else {  // disable all options\r\n            this.unitList.dropdownElement.disabled = true;\r\n        }\r\n    };\r\n\r\n    proto.updateSettingsPanel = function() {\r\n        this.unitList.dropdownElement.selectedIndex = this.findUnits();\r\n        this.precisionList.dropdownElement.selectedIndex = this.measureTool.getPrecision();\r\n        this.setupPrecision();\r\n    };\r\n\r\n\r\n","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!./Measure.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!./Measure.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!./Calibration.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!./Calibration.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { MeasureTool } from './MeasureTool'\r\nimport { CalibrationTool } from './CalibrationTool'\r\nimport { MagnifyingGlass } from './MagnifyingGlass'\r\nimport { CalibrationRequiredDialog } from './CalibrationPanels'\r\nimport { MeasureToolbar } from './MeasureToolbar'\r\n\r\n\r\nimport CSS_1 from './Measure.css'       // IMPORTANT!!\r\nimport CSS_2 from './Calibration.css'   // IMPORTANT!!\r\n\r\n'use strict';\r\n\r\nvar avem = AutodeskNamespace('Autodesk.Viewing.Extensions.Measure'),\r\n    av = Autodesk.Viewing,\r\n    avp = Autodesk.Viewing.Private,\r\n    avu = av.UI;\r\nvar MeasureCommon = Autodesk.Viewing.MeasureCommon; // Comes form main viewer bundle.\r\n\r\nvar NONE = 0;\r\nvar MEASURE_TOOL = 1;\r\nvar CALIBRATION_TOOL = 2;\r\n\r\nvar DEFAULT_MEASUREMENT_TYPE = MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE;\r\n\r\n/**\r\n * Provides UI controls to perform distance and angle measurements for 2D and 3D models.\r\n * \r\n * The extension id is: `Autodesk.Measure`\r\n * \r\n * @example\r\n *   viewer.loadExtension('Autodesk.Measure')\r\n *  \r\n * @memberof Autodesk.Viewing.Extensions\r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension\r\n * @see {@link Autodesk.Viewing.Extension} for common inherited methods.\r\n * @constructor\r\n*/\r\nexport var MeasureExtension = function(viewer, options) {\r\n    Autodesk.Viewing.Extension.call(this, viewer, options);\r\n    this.modes = ['distance','angle','area','calibrate'];\r\n    this.name = 'measure';\r\n    this._onModelLoaded = this._onModelLoaded.bind(this);\r\n};\r\n\r\nMeasureExtension.prototype = Object.create(Autodesk.Viewing.Extension.prototype);\r\nMeasureExtension.prototype.constructor = MeasureExtension;\r\n\r\n\r\n/**\r\n * Load the measure extension.\r\n * @returns {boolean} True if measure extension is loaded successfully.\r\n * \r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#load\r\n*/\r\nMeasureExtension.prototype.load = async function() {\r\n\r\n    await this.viewer.loadExtension('Autodesk.Snapping');\r\n\r\n    var self   = this;\r\n    var viewer = this.viewer;\r\n    this.hasUI = Autodesk.Viewing.GuiViewer3D && viewer instanceof Autodesk.Viewing.GuiViewer3D;\r\n\r\n    this.escapeHotkeyId = 'Autodesk.Measure.Hotkeys.Escape';\r\n\r\n    // Register the Measure tool\r\n    if (!viewer.toolController){\r\n        return false;\r\n    }\r\n\r\n    this.options = this.options || {};\r\n    var measureToolOptions = {};\r\n\r\n    measureToolOptions.onCloseCallback = function() {\r\n        self.enableMeasureTool(false);\r\n    };\r\n\r\n    // Shared State with measureTool & calibrationTool.\r\n    // Gets populated when a model is received.\r\n    this.sharedMeasureConfig = { \r\n        units: null,\r\n        precision: null,\r\n        calibrationFactor: null\r\n    };\r\n\r\n\tmeasureToolOptions.snapperOptions = this.options.snapperOptions;\r\n\r\n    this.forceCalibrate = this.options.forceCalibrate;\r\n\r\n    this.snapper = new Autodesk.Viewing.Extensions.Snapping.Snapper(viewer, {\r\n        renderSnappedTopology: true\r\n    });\r\n    viewer.toolController.registerTool(this.snapper);\r\n\r\n    this.measureTool = new MeasureTool(viewer, measureToolOptions, this.sharedMeasureConfig, this.snapper);\r\n    viewer.toolController.registerTool(this.measureTool);\r\n\r\n    this.calibrationTool = new CalibrationTool(viewer, this.options, this.sharedMeasureConfig, this.snapper);\r\n    viewer.toolController.registerTool(this.calibrationTool);\r\n\r\n    this.magnifyingGlass = new MagnifyingGlass(viewer);\r\n    viewer.toolController.registerTool(this.magnifyingGlass);\r\n\r\n    this.calibration = {};\r\n    this.onFinishedCalibration = function(event) {\r\n        if (self.measureToolbar) {\r\n            self.measureToolbar.updateSettingsPanel();\r\n        }\r\n\r\n        self.activateInitiator && self.activateInitiator();\r\n\r\n        // Set the calibration values\r\n        self.calibration.units = event.units;\r\n        self.calibration.scaleFactor = event.scaleFactor;\r\n        self.calibration.size = event.size;\r\n        self.calibration.precision = self.sharedMeasureConfig.precision;\r\n    };\r\n\r\n    viewer.addEventListener('finished-calibration', this.onFinishedCalibration);\r\n\r\n    this.onMeasurementChanged = function(event) {\r\n        var type = event.data.type;\r\n        self.changeMeasurementType(type);\r\n    };\r\n\r\n    viewer.addEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChanged);\r\n\r\n    if (viewer.model) {\r\n        this._onModelLoaded({ model: viewer.model });\r\n    } else {\r\n        viewer.addEventListener(av.MODEL_ROOT_LOADED_EVENT, this._onModelLoaded, { once: true });\r\n    }\r\n\r\n    // If there is no model anymore, interrupt any ongoing interaction.\r\n    // We need at least one model to derive things like is2d() and model units.\r\n    this.onModelRemoved = function() {\r\n        // If UI was not created yet or destroyed, we don't have to disable anything\r\n        if (!self.measurementToolbarButton) {\r\n            return;\r\n        }\r\n                \r\n        if (!self.viewer.model) {\r\n            self.measurementToolbarButton.setState(Autodesk.Viewing.UI.Button.State.DISABLED);\r\n            self.exitMeasurementMode();\r\n        }\r\n    };\r\n    this.onModelAdded = function() {\r\n\r\n        // If UI was not created yet or destroyed, the button will be enabled in next createUI() call\r\n        if (!self.measurementToolbarButton) {\r\n            return;\r\n        }\r\n\r\n        // On first model-add, re-enable measure toolbar again\r\n        var modelCount = self.viewer.getVisibleModels().length;\r\n        if (modelCount === 1 && self.measurementToolbarButton) {\r\n            self.measurementToolbarButton.setState(Autodesk.Viewing.UI.Button.State.INACTIVE);\r\n        }\r\n    };\r\n    viewer.addEventListener(av.MODEL_ADDED_EVENT, this.onModelAdded);\r\n    viewer.addEventListener(av.MODEL_REMOVED_EVENT, this.onModelRemoved);\r\n};\r\n\r\nMeasureExtension.prototype._onModelLoaded = function(event) {\r\n    var model = event.model;\r\n\r\n    const setPdfUnits = !!model.getData().isPdf && !this.viewer.prefs.get(avp.Prefs2D.FORCE_PDF_CALIBRATION);\r\n    const setLeafletUnits = !!model.getData().isLeaflet && !this.viewer.prefs.get(avp.Prefs2D.FORCE_LEAFLET_CALIBRATION);\r\n\r\n    this.sharedMeasureConfig.units = this.options.calibrationUnits || model.getDisplayUnit();\r\n\r\n    // Set the units to points only for pdf and leaflet models that do not contain model units in the metadata.\r\n    if ((setPdfUnits || setLeafletUnits) && !model.getMetadata('page_dimensions', 'model_units', null)) {\r\n        this.sharedMeasureConfig.units = 'pt';\r\n    }\r\n\r\n    this.sharedMeasureConfig.precision = model.is2d() ? 3 : 1;\r\n\r\n    if (this.options.calibrationUnits && !isNaN(this.options.calibrationFactor)) {\r\n        this.calibrationTool.calibrateByScale(this.options.calibrationUnits, this.options.calibrationFactor);\r\n    }\r\n}\r\n\r\n/**\r\n * Unload the measure extension.\r\n * @returns {boolean} True if measure extension is unloaded successfully.\r\n * \r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#unload\r\n*/\r\nMeasureExtension.prototype.unload = function () {\r\n    var viewer = this.viewer;\r\n\r\n    // Remove the ui from the viewer.\r\n    this.destroyUI();\r\n\r\n    viewer.removeEventListener('finished-calibration', this.onFinishedCalibration);\r\n    viewer.removeEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChanged);\r\n    viewer.removeEventListener(av.MODEL_ADDED_EVENT, this.onModelAdded);\r\n    viewer.removeEventListener(av.MODEL_REMOVED_EVENT, this.onModelRemoved);\r\n    viewer.removeEventListener(av.MODEL_ROOT_LOADED_EVENT, this._onModelLoaded);\r\n\r\n    viewer.toolController.deregisterTool(this.snapper);\r\n    this.snapper = null;\r\n\r\n    viewer.toolController.deregisterTool(this.measureTool);\r\n    this.measureTool = null;\r\n\r\n    viewer.toolController.deregisterTool(this.calibrationTool);\r\n    this.calibrationTool = null;\r\n\r\n    viewer.toolController.deregisterTool(this.magnifyingGlass);\r\n    this.magnifyingGlass = null;\r\n\r\n    this.unloaded = true;\r\n    return true;\r\n};\r\n\r\n/**\r\n * Enable/disable the measure tool.\r\n * It does not update the toolbar UI.\r\n * \r\n * @param {boolean} active - True to activate, false to deactivate.\r\n * @returns {boolean} True if a change in activeness occurred.\r\n */\r\nMeasureExtension.prototype.setActive = function(active) {\r\n    return this.enableMeasureTool(active);\r\n};\r\n\r\n/**\r\n * Toggles activeness of the measure tool.\r\n * It does not update the toolbar UI.\r\n * \r\n * @return {boolean} Whether the tool is active.\r\n */\r\nMeasureExtension.prototype.toggle = function() {\r\n    if (this.isActive()) {\r\n        this.enableMeasureTool(false);\r\n    } else {\r\n        this.enableMeasureTool(true);\r\n    }\r\n    return this.isActive();\r\n};\r\n\r\n/**\r\n * Get the current measurement in the measure tool.\r\n * @param {string} [unitType] - Either: \"decimal-ft\", \"ft\", \"ft-and-decimal-in\", \"decimal-in\", \"fractional-in\", \"m\", \"cm\", \"mm\" or \"m-and-cm\".\r\n * @param {number} [precision] - precision index (0: 0, 1: 0.1, 2: 0.01, 3: 0.001, 4: 0.0001, 5: 0.00001).\r\n * When units type is \"ft\", \"in\" or \"fractional-in\", then the precisions are 0: 1, 1: 1/2, 2: 1/4, 3: 1/8, 4: 1/16, 5: 1/32, 6: 1/64.\r\n * @returns {object|null} Object with properties of the current measurement, or null.\r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#getMeasurement\r\n */\r\nMeasureExtension.prototype.getMeasurement = function(unitType, precision) {\r\n    var measurement = null;\r\n    if (this.measureTool.isActive()) {\r\n        measurement = this.measureTool.getMeasurement(unitType, precision);\r\n    }\r\n    return measurement;\r\n};\r\n\r\n/**\r\n * Get a list of all the measurements that are currently on the screen.\r\n * @param {string} [unitType] - Either: \"decimal-ft\", \"ft\", \"ft-and-decimal-in\", \"decimal-in\", \"fractional-in\", \"m\", \"cm\", \"mm\" or \"m-and-cm\".\r\n * @param {number} [precision] - precision index (0: 0, 1: 0.1, 2: 0.01, 3: 0.001, 4: 0.0001, 5: 0.00001).\r\n * When units type is \"ft\", \"in\" or \"fractional-in\", then the precisions are 0: 1, 1: 1/2, 2: 1/4, 3: 1/8, 4: 1/16, 5: 1/32, 6: 1/64.\r\n * @returns {Array.<Object>} An array of measurement objects with properties of the measurement.\r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#getMeasurementList\r\n */\r\n\r\nMeasureExtension.prototype.getMeasurementList = function(unitType, precision) {\r\n  var measurementList = [];\r\n  if(this.measureTool.isActive()) {\r\n      measurementList = this.measureTool.getMeasurementList(unitType, precision);\r\n  }\r\n  return measurementList;\r\n}\r\n\r\n/**\r\n * Restores existing measurements. The `measurements` object should be generated by either the {@link Autodesk.Viewing.Extensions.MeasureExtension#getMeasurementList|getMeasurementList} or the {@link Autodesk.Viewing.Extensions.MeasureExtension#getMeasurement|getMeasurement} methods.\r\n * @param {Object[]|Object} measurements - An array of measurement objects\r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#setMeasurements\r\n */\r\nMeasureExtension.prototype.setMeasurements = function(measurements) {\r\n    if (this.measureTool.isActive()) {\r\n        this.measureTool.setMeasurements(measurements);\r\n    }\r\n};\r\n\r\n\r\n/**\r\n * Get all available units in measure tool.\r\n * @returns {object[]} Array of all available units.\r\n*/\r\nMeasureExtension.prototype.getUnitOptions = function() {\r\n    var units = [\r\n        { name: 'Unknown', type: '' },\r\n        { name: 'Decimal feet', type: 'decimal-ft' },\r\n        { name: 'Feet and fractional inches', type: 'ft' },\r\n        { name: 'Feet and decimal inches', type: 'ft-and-decimal-in' },\r\n        { name: 'Decimal inches', type: 'decimal-in' },\r\n        { name: 'Fractional inches', type: 'fractional-in' },\r\n        { name: 'Meters', type: 'm' },\r\n        { name: 'Centimeters', type: 'cm' },\r\n        { name: 'Millimeters', type: 'mm' },\r\n        { name: 'Meters and centimeters', type: 'm-and-cm' },\r\n        { name: 'Points', type: 'pt' }\r\n    ];\r\n\r\n    return units;\r\n};\r\n\r\n/**\r\n * Get all available precisions in measure tool.\r\n * @param {boolean} isFractional - Set true to get fractional precisions.\r\n * @return {string[]} List of all available precisions.\r\n*/\r\nMeasureExtension.prototype.getPrecisionOptions = function(isFractional) {\r\n\r\n    var precisions;\r\n\r\n    if (isFractional)\r\n        precisions = ['1', '1/2', '1/4', '1/8', '1/16', '1/32', '1/64'];\r\n    else\r\n        precisions = ['0', '0.1', '0.01', '0.001', '0.0001', '0.00001'];\r\n\r\n    return precisions;\r\n};\r\n\r\n/**\r\n * Get the default measure unit in measure tool.\r\n * @returns {string} The default measure unit.\r\n*/\r\nMeasureExtension.prototype.getDefaultUnit = function() {\r\n    var unit = this.viewer.model.getDisplayUnit();\r\n\r\n    return unit;\r\n};\r\n\r\nMeasureExtension.prototype.openCalibrationRequiredDialog = function (initiator) {\r\n    if (this.hasUI) {\r\n        if (!this.CalibrationRequiredDialog) {\r\n            this.CalibrationRequiredDialog = new CalibrationRequiredDialog(this, this.viewer, \"calibration-required\", \"Calibration Required\", this.options );\r\n        }\r\n\r\n        this.CalibrationRequiredDialog.setVisible(true);\r\n    }\r\n    else {\r\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.CALIBRATION_REQUIRED_EVENT });\r\n    }\r\n\r\n    if (initiator === 'measure') {\r\n        this.activateInitiator = function() {\r\n            this.enableMeasureTool(true, DEFAULT_MEASUREMENT_TYPE);\r\n            this.activateInitiator = null;\r\n        };\r\n    } else if (initiator === 'dimension') {\r\n        this.activateInitiator = function() {\r\n            this.viewer.dispatchEvent({ type: MeasureCommon.Events.FINISHED_CALIBRATION_FOR_DIMENSION_EVENT });\r\n            this.activateInitiator = null;\r\n        };\r\n    }\r\n};\r\n\r\n/**\r\n * Get the calibration size, unit type and the calibration Factor of the model\r\n * @returns {Object}\r\n */\r\nMeasureExtension.prototype.getCalibration = function() {\r\n    return this.calibration;\r\n};\r\n\r\n\r\n/**\r\n * @param mode Measurement Mode\r\n * @returns {boolean}\r\n */\r\n\r\n /**\r\n  * Activates the tool and UI to start measuring.\r\n  * \r\n  * @param {string} [mode] - Either 'distance', 'angle', 'area' (2D only) or 'calibrate'. Default is 'distance'.\r\n * \r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#activate\r\n  */\r\nMeasureExtension.prototype.activate = function (mode) {\r\n    if (this.activeStatus && this.mode === mode) {\r\n        return true;\r\n    }\r\n    this.enterMeasurementMode();\r\n\r\n    var success;\r\n\r\n    switch (mode) {\r\n        default:\r\n            mode = 'distance';\r\n        case 'distance':\r\n            success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE);\r\n            break;\r\n        case 'angle':\r\n            success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE);\r\n            break;\r\n        case 'area':\r\n            if(!this.viewer.model.is2d()) {\r\n                console.warn('Area mode is applicable on 2D models only');\r\n            } else {\r\n                success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_AREA);\r\n            }\r\n            break;\r\n        case 'calibrate':\r\n            success = this.enableCalibrationTool(true);\r\n            break;\r\n    }\r\n\r\n    this.mode = success ? mode : '';\r\n    this.activeStatus = true;\r\n    return true;\r\n};\r\n\r\n/**\r\n * Deactivates measuring tool and UI.\r\n * \r\n * @returns {boolean}\r\n * \r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#deactivate\r\n */\r\nMeasureExtension.prototype.deactivate = function () {\r\n    if(this.activeStatus) {\r\n        this.exitMeasurementMode();\r\n        this.enableMeasureTool(false);\r\n        this.activeStatus = false;\r\n    }\r\n    return true;\r\n};\r\n\r\n/**\r\n * Force the calibration panel for pdf models\r\n * @param {Boolean} enable - true to force the calibration panel\r\n */\r\nMeasureExtension.prototype.setForcePDFCalibrate = function(enable) {\r\n    this.viewer.prefs.set(avp.Prefs2D.FORCE_PDF_CALIBRATION, enable);\r\n};\r\n\r\n/**\r\n * Force the calibration panel for leaflet models\r\n * @param {Boolean} enable - true to force the calibration panel\r\n */\r\nMeasureExtension.prototype.setForceLeafletCalibrate = function(enable) {\r\n    this.viewer.prefs.set(avp.Prefs2D.FORCE_LEAFLET_CALIBRATION, enable);\r\n};\r\n\r\n/**\r\n * Restore session measurements when enabling the measure tool.\r\n * @param {Boolean} enable - true to restore session measurements. \r\n */\r\nMeasureExtension.prototype.setRestoreSessionMeasurements = function(enable) {\r\n    this.viewer.prefs.set(avp.Prefs.RESTORE_SESSION_MEASUREMENTS, enable);\r\n}\r\n\r\n/**\r\n * Enable/disable the measure tool.\r\n * @param {boolean} enable - True to enable, false to disable.\r\n * @returns {boolean} True if the tool state was changed.\r\n * @private\r\n */\r\nMeasureExtension.prototype.enableMeasureTool = function(enable, measurementType) {\r\n    if (measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && this.viewer.model && !this.viewer.model.is2d()) {\r\n        return false;\r\n    }\r\n\r\n    var toolController = this.viewer.toolController,\r\n        isActive = (this.selectedTool === MEASURE_TOOL);\r\n\r\n    if (!this.viewer.model || (!enable && isActive)) {\r\n        if (this.measureTool.isActive()) {\r\n            toolController.deactivateTool(\"measure\");\r\n\r\n            if (this.measureToolbar) {\r\n                this.measureToolbar.deactivateAllButtons();\r\n            }\r\n\r\n            // No tool is active anymore. Only do this if measureTool was really the active one before.\r\n            // If not, changing selectedTool would produce an inconsistent state, e.g., CalibrationTool \r\n            // may still be active, but enableCalibrationTool(false) would not properly close it.\r\n            this.selectedTool = NONE;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    const forcePDFCalibration = this.viewer.model.getData().isPdf && this.viewer.prefs.get(avp.Prefs2D.FORCE_PDF_CALIBRATION);\r\n    const forceLeafletCalibration = this.viewer.model.getData().isLeaflet && this.viewer.prefs.get(avp.Prefs2D.FORCE_LEAFLET_CALIBRATION);\r\n\r\n    this.forceCalibrate |= forceLeafletCalibration || forcePDFCalibration;\r\n\r\n    if (!measurementType) {\r\n        measurementType = DEFAULT_MEASUREMENT_TYPE;\r\n    }\r\n\r\n    if (enable && !isActive) {\r\n        // Fetch topology when opening Measure tool for the first time.\r\n        this.checkAndFetchTopology(toolController.getTool('measure'));\r\n\r\n        if (!this.forceCalibrate || (this.forceCalibrate && this.calibrationTool.isCalibrated()) || measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE) {\r\n            if (this.calibrationTool.isActive()) {\r\n                toolController.deactivateTool(\"calibration\");\r\n            }\r\n            \r\n            if (this.measureToolbar) {\r\n                this.measureToolbar.updateSettingsPanel();\r\n            }\r\n\r\n            toolController.activateTool(\"measure\");\r\n\r\n            this.selectedTool = MEASURE_TOOL;\r\n\r\n            \r\n\r\n            this.changeMeasurementType(measurementType);\r\n            return true;\r\n        }\r\n        else {\r\n            this.viewer.addEventListener(avem.OPEN_TOOL_AFTER_CALIBRAION, function(){\r\n                this.enableMeasureTool(true);                \r\n            }.bind(this), {once: true});\r\n            \r\n            this.openCalibrationRequiredDialog('measure');\r\n            return false;\r\n        }\r\n\r\n    } else if (enable && isActive) {\r\n        if (!this.forceCalibrate || (this.forceCalibrate && this.calibrationTool.isCalibrated()) || measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE) {\r\n            this.changeMeasurementType(measurementType);\r\n            return true;\r\n        }\r\n        else {\r\n            this.openCalibrationRequiredDialog('measure');\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return false;\r\n};\r\n\r\nMeasureExtension.prototype.changeMeasurementType = function(measurementType) {\r\n    this.measureTool.changeMeasurementType(measurementType);\r\n    if (this.measureToolbar) {\r\n        this.measureToolbar.deactivateAllButtons();\r\n        this.measureToolbar.activateButtonByType(measurementType);\r\n    }\r\n\r\n    switch (measurementType) {\r\n        case MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE:\r\n            this.mode = 'distance';\r\n            break;\r\n        case MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE:\r\n            this.mode = 'angle'\r\n            break;\r\n        case MeasureCommon.MeasurementTypes.MEASUREMENT_AREA:\r\n            this.mode = 'area';\r\n            break;\r\n        default:\r\n            this.mode = '';\r\n    }\r\n};\r\n\r\n/**\r\n * When enabled, the Viewer will only render model parts that are included in\r\n * measurements.\r\n *\r\n * @param {boolean} enable - true to render only nodes being measured.\r\n * \r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#setIsolateMeasure\r\n */\r\nMeasureExtension.prototype.setIsolateMeasure = function(enable) {\r\n    this.measureTool.setIsolateMeasure(enable);\r\n    if (enable) {\r\n        this.measureTool.isolateMeasurement();\r\n    } else {\r\n        this.measureTool.clearIsolate();\r\n    }\r\n}\r\n\r\n/**\r\n * Enable/disable the measure tool.\r\n * @param {boolean} enable - True to enable, false to disable.\r\n * @returns {boolean} True if the tool state was changed.\r\n * @private\r\n */\r\nMeasureExtension.prototype.enableCalibrationTool = function(enable) {\r\n    var toolController = this.viewer.toolController,\r\n        isActive = (this.selectedTool == CALIBRATION_TOOL);\r\n\r\n    if (enable && !isActive) {\r\n        if (this.measureTool.isActive()) {\r\n            toolController.deactivateTool(\"measure\");\r\n        }\r\n        \r\n        toolController.activateTool(\"calibration\");\r\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.UNITS_CALIBRATION_STARTS_EVENT });\r\n        \r\n        if (this.measureToolbar) {\r\n            this.measureToolbar.deactivateAllButtons();\r\n            this.measureToolbar.activateButtonByType(MeasureCommon.MeasurementTypes.CALIBRATION);\r\n        }\r\n\r\n        this.selectedTool = CALIBRATION_TOOL;\r\n        return true;\r\n\r\n    } else if (!enable && isActive) {\r\n        if (this.calibrationTool.isActive()) {\r\n            this.mode = '';\r\n            toolController.deactivateTool(\"calibration\");\r\n            if (this.measureToolbar) {\r\n                this.measureToolbar.deactivateAllButtons();\r\n            }\r\n        }\r\n\r\n        this.selectedTool = NONE;\r\n        return true;\r\n    }\r\n    return false;\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nMeasureExtension.prototype.enterMeasurementMode = function() {\r\n\r\n    if (this._measurementMode) return;\r\n    this._measurementMode = true;\r\n\r\n    this.viewer.dispatchEvent({type: MeasureCommon.Events.MEASUREMENT_MODE_ENTER});\r\n\r\n    if (!this.viewer.getToolbar) {\r\n        return; // Adds support for Viewer3D instance\r\n    }\r\n\r\n    var toolbar = this.viewer.getToolbar();    \r\n    var viewerToolbarContainer = toolbar.container;\r\n    var viewerContainerChildrenCount = viewerToolbarContainer.children.length;\r\n    for(var i = 0; i < viewerContainerChildrenCount; ++i) {\r\n        viewerToolbarContainer.children[i].style.display = \"none\";\r\n    }\r\n\r\n    this.navigationControls = toolbar.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);\r\n    this.navigationControls.setVisible(true);\r\n    this.navigationControls.container.style.display = '';\r\n\r\n    this.measureControls = toolbar.getControl(Autodesk.Viewing.TOOLBAR.MEASURETOOLSID);\r\n    this.measureControls.setVisible(true);\r\n    this.measureControls.container.style.display = '';\r\n    \r\n    var measureButtonId = this.measurementToolbarButton.getId();\r\n    this.measurementToolbarButton.index = this.measurementToolbarButton.parent.indexOf(measureButtonId);\r\n    this.measurementToolbarButton.parent.removeControl(measureButtonId);\r\n\r\n    this.measureToolbar.toggleVisible();\r\n\r\n    if (this.viewer.centerToolBar) {\r\n        this.viewer.centerToolBar();\r\n    }\r\n\r\n    this.enableMeasureTool(true, DEFAULT_MEASUREMENT_TYPE);\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nMeasureExtension.prototype.exitMeasurementMode = function() {\r\n    if (!this._measurementMode) return;\r\n\r\n    this.viewer.dispatchEvent({type: MeasureCommon.Events.MEASUREMENT_MODE_LEAVE});\r\n\r\n    this.measureToolbar && this.measureToolbar.closeToolbar();\r\n    if (this.CalibrationRequiredDialog && this.CalibrationRequiredDialog.isVisible()) {\r\n        this.CalibrationRequiredDialog.setVisible(false);\r\n    }\r\n    this._measurementMode = false;\r\n};\r\n\r\n/**\r\n * Create measure button in toolbar.\r\n * @private\r\n*/\r\nMeasureExtension.prototype.onToolbarCreated = function(toolbar)\r\n{\r\n    if (this.measureToolbar) {\r\n        return;\r\n    }\r\n\r\n    var self   = this;\r\n    var viewer = this.viewer;\r\n\r\n    // Add Measure button to toolbar\r\n    var modelTools = toolbar.getControl(av.TOOLBAR.MODELTOOLSID);\r\n    this.measurementToolbarButton = new avu.Button('toolbar-measurementSubmenuTool');\r\n    this.measurementToolbarButton.setToolTip('Measure');\r\n    this.measurementToolbarButton.setIcon(\"adsk-icon-measure\");\r\n    modelTools.measurementToolbarButton = this.measurementToolbarButton;\r\n    modelTools.addControl(this.measurementToolbarButton, {index:0});\r\n\r\n    // Set button enabled if and only if there is >=1 visible model. Otherwise, it will remain disabled until next model-add event.\r\n    var state = this.viewer.model ? Autodesk.Viewing.UI.Button.State.INACTIVE : Autodesk.Viewing.UI.Button.State.DISABLED;\r\n    this.measurementToolbarButton.setState(state);\r\n\r\n    this.measureToolbar = new MeasureToolbar(this);\r\n    this.measureToolbar.init();\r\n\r\n    this.measurementToolbarButton.onClick = this.activate.bind(this);\r\n\r\n    // Escape hotkey to exit tool.\r\n    //\r\n    var hotkeys = [{\r\n        keycodes: [\r\n            Autodesk.Viewing.KeyCode.ESCAPE\r\n        ],\r\n        onRelease: function () {\r\n            if (self._measurementMode) {\r\n                self.exitMeasurementMode();\r\n                return true;\r\n            }\r\n        }\r\n    }];\r\n    viewer.getHotkeyManager().pushHotkeys(this.escapeHotkeyId, hotkeys);\r\n};\r\n\r\n\r\n/**\r\n * @private\r\n */\r\nMeasureExtension.prototype.checkAndFetchTopology = function(tool) {\r\n\r\n    if (this._checkedTopology) {\r\n        return;\r\n    }\r\n\r\n    this._checkedTopology = true;\r\n    if (!this.viewer.model.is3d()) {\r\n        tool && tool.setNoTopology();\r\n        return;\r\n    }\r\n\r\n    if (this.viewer.modelHasTopology()){\r\n        tool && tool.setTopologyAvailable();\r\n        return;\r\n    }\r\n\r\n    // Fetch topology from backend.\r\n    tool && tool.setFetchingTopology();\r\n    this.viewer.model.fetchTopology()\r\n    .then(function(topoData){\r\n        tool && tool.setTopologyAvailable();\r\n    })\r\n    .catch(function(err){\r\n        avp.logger.log(err); // No topology\r\n        tool && tool.setNoTopology();\r\n    });\r\n};\r\n\r\n/**\r\n * Destroy measure button in toolbar.\r\n * @private\r\n*/\r\nMeasureExtension.prototype.destroyUI = function()\r\n{\r\n    var viewer = this.viewer;\r\n\r\n    if (this.measureToolbar) {\r\n         this.measureToolbar.destroy();\r\n         this.measureToolbar = null;\r\n    }\r\n\r\n    if (this.measurementToolbarButton) {\r\n        this.measurementToolbarButton.removeFromParent();\r\n        this.measurementToolbarButton = null;\r\n    }\r\n\r\n    viewer.getHotkeyManager().popHotkeys(this.escapeHotkeyId);\r\n};\r\n\r\nMeasureExtension.prototype.setUnits = function(units) {\r\n    this.measureTool.setUnits(units);\r\n};\r\n\r\nMeasureExtension.prototype.getUnits = function() {\r\n    return this.measureTool.getUnits();\r\n};\r\n\r\nMeasureExtension.prototype.setPrecision = function(precision) {\r\n    this.measureTool.setPrecision(precision);\r\n};\r\n\r\nMeasureExtension.prototype.getPrecision = function() {\r\n    return this.measureTool.getPrecision();\r\n};\r\n\r\nMeasureExtension.prototype.calibrate = function(requestedUnits, requestedSize) {\r\n    this.calibrationTool.calibrate(requestedUnits, requestedSize);\r\n};\r\n\r\nMeasureExtension.prototype.calibrateByScale = function(requestedUnits, requestedScale) {\r\n    this.calibrationTool.calibrateByScale(requestedUnits, requestedScale);\r\n};\r\n\r\nMeasureExtension.prototype.isCalibrationValid = function(requestedUnits, requestedSize) { \r\n    return this.calibrationTool.isCalibrationValid(requestedUnits, requestedSize); \r\n};\r\n\r\nMeasureExtension.prototype.getCalibrationFactor = function() {\r\n    return this.calibrationTool.getCalibrationFactor();\r\n};\r\n\r\nMeasureExtension.prototype.showAddCalibrationLabel = function() {\r\n    this.calibrationTool.showAddCalibrationLabel();\r\n};\r\n\r\n/**\r\n * Delete all measurements.\r\n * \r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#deleteAllMeasurements\r\n */\r\nMeasureExtension.prototype.deleteMeasurements = function() {\r\n    this.measureTool.deleteMeasurements();\r\n};\r\n\r\n/**\r\n * Deletes the selected measurement.\r\n * \r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#deleteCurrentMeasurement\r\n */\r\nMeasureExtension.prototype.deleteCurrentMeasurement = function() {\r\n    this.measureTool.deleteCurrentMeasurement();\r\n};\r\n\r\nMeasureExtension.prototype.selectMeasurementById = function(id) {\r\n    this.measureTool.selectMeasurementById(id);\r\n};\r\n\r\n/**\r\n * Enable measuring on non snapped locations.\r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#setFreeMeasureMode\r\n * @param {Boolean} allow - true to allow measuring on non snapped locations, otherwise false;\r\n */\r\nMeasureExtension.prototype.setFreeMeasureMode = function(allow) {\r\n    this.snapper.setSnapToPixel(allow);\r\n};\r\n\r\nav.theExtensionManager.registerExtension('Autodesk.Measure', MeasureExtension);\r\n\r\n\r\n"],"names":["___CSS_LOADER_URL_IMPORT_0___","URL","___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","push","module","id","___CSS_LOADER_URL_IMPORT_1___","___CSS_LOADER_URL_IMPORT_2___","___CSS_LOADER_URL_REPLACEMENT_1___","___CSS_LOADER_URL_REPLACEMENT_2___","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","url","options","String","__esModule","default","test","slice","hash","needQuotes","replace","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","m","n","getter","d","a","definition","key","o","Object","defineProperty","enumerable","get","g","globalThis","Function","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","scriptUrl","importScripts","location","currentScript","src","scripts","getElementsByTagName","p","b","baseURI","self","href","nc","MeasureCommon","Autodesk","Viewing","MeasurementsManager","viewer","init","restoredMeasurementData","proto","getCurrentMeasurement","currentMeasurement","getRestoredMeasurementData","selectMeasurementById","measurement","measurementsList","changeCurrentMeasurement","createMeasurement","measurementType","measurementsCounter","Measurement","createMeasurementFromData","measurementData","createIndicatorCb","preparePicksCb","initPicks","picks","MeasurementTypes","MEASUREMENT_AREA","closedArea","isRestored","convertUnits","square","Private","sharedUnits","model","getUnitString","sharedCalibrationFactor","parseFloat","distanceXYZ","distance","distanceX","deltaX","distanceY","deltaY","distanceZ","deltaZ","area","angle","indicator","renderFromPoints","points","keys","intersectPoints","pointData","intersection","getIntersectPoints","changeAllEndpointsEditableStyle","enableSelectionAreas","enableLabelsTouchEvents","activatePicks","pickData","pick","pickPoint","THREE","Vector3","x","y","z","modelId","impl","findModel","modelData","getData","add","globalOffset","clone","viewportId","viewportIndex2d","hasTopology","getPick","pointInfo","getGeometry","geomType","SnapType","SNAP_VERTEX","geomVertex","intersectPoint","dispatchEvent","type","Events","MEASUREMENT_CHANGED_EVENT","removeCurrentMeasurement","reset","destroy","av","Indicator","tool","setGlobalManager","globalManager","snapper","getSnapper","materialExtensionLine","materialExtensionFace","extensionLines","extensionFaces","grayOutPlane","materialPoint","materialLine","materialAngle","materialAngleOutline","materialGreyOutPlane","materialFace","angleArc","angleOutline","showMeasureResult","visibleLabels","overlayName","xAxis","autocam","getWorldRightVector","yAxis","getWorldUpVector","zAxis","getWorldFrontVector","getPolygonVisualCenter","polygon","Cell","h","inside","minDistSq","Infinity","ring","len","j","Math","min","getSegDistSq","sqrt","pointToPolygonDist","max","SQRT2","px","py","dx","dy","t","TinyQueue","compare","_down","_up","pop","top","peek","pos","parent","current","halfLength","left","right","best","centroid","multiplyScalar","getCentroidOfPolygon","minX","minY","maxX","maxY","width","height","cellSize","cellQueue","bestCell","f","getCentroidCell","bboxCell","cell","GlobalManagerMixin","updateDistance","updateAngle","clear","updateLabelsPosition","endpoints","createEndpoint","position","showClick","renderRubberbandFromPoints","render","hasPick","renderPick","renderRubberband","changeEndpointOnEditStyle","endpointNumber","isEditing","handleResize","setNoTopology","setFetchingTopology","setTopologyAvailable","clientToCanvasCoords","event","rect","getCanvasBoundingClientRect","res","canvasX","center","canvasY","pointers","clientX","clientY","initLabelMobileGestures","label","pointNumber","magnifyingGlass","toolController","getTool","hammer","Hammer","Manager","recognizers","GestureRecognizers","drag","singletap","handlePointerEventMouse","inputClass","isIE11","PointerEventInput","TouchInput","onSingleTapBinded","onMouseDown","editEndpoint","bind","onDragStartBinded","editByDrag","handlePressHold","handleGesture","onDragMoveBinded","onDragEndBinded","handleButtonUp","on","clearLabelMobileGestures","off","updateVisibleLabelsArray","isVisible","indexOf","hideEndpoints","name","endpoint","hideLabel","showEndpoints","showLabel","safeToggle","changeEndpointEditableStyle","isEditable","changeAllEndpointsOnEditStyle","hideLabelsOutsideOfView","is2d","forEach","point","show","navigation","isPointVisible","classList","contains","toggle","pickNumber","getActivePointIndex","hideClick","renderEndpointGeometry","geometry","getSnapResultPosition","drawEdgeAsCylinder","geom","material","linewidth","cylinderGeometry","cylinder","edge","vertices","cylinderMesh","setCylinderScale","drawDashedLine","p1","p2","dashSize","gapSize","Geometry","line","subVectors","lineLength","lineDirection","normalize","currLength","addVectors","getNewCylinderGeometry","addMultipleOverlays","drawLineAsCylinder","addOverlay","CylinderGeometry","pointX","pointY","direction","orientation","Matrix4","lookAt","Object3D","up","multiply","set","Mesh","applyMatrix","lmv_line_width","scale","nearestPointInPointToSegment","getPosition","setScale","navapi","camera","getCamera","isPerspective","sub","getEyeVector","fov","getVerticalFov","tan","degToRad","getScreenViewport","alignLabelWithLine","offset","camUpVector","getCameraUpVector","cameraAngle","angleTo","PI","atan2","abs","transform","isTouchDevice","endPoint","removeEventListener","isSafari","onMouseClickBinded","mousewheel","MEASUREMENT_DISTANCE","start","end","renderDistanceMeasurementFromPoints","MEASUREMENT_ANGLE","renderAngleMeasurementFromPoints","renderAreaMeasurementFromPoints","previewsPick","activePick","renderDistanceMeasurement","renderAngleMeasurement","renderAreaMeasurement","initMouseEvent","pointerType","addEventListener","MeasureToolIndicator","measureTool","lines","xyz","axis","createLineMaterial","className","iconText","segments","dashedLine","simple","angleLabel","areaLabel","labels","isLeaflet","topologyStatus","TOPOLOGY_NOT_AVAILABLE","tmpVector","surfaceColor","MeshBasicMaterial","color","parseInt","opacity","transparent","depthTest","depthWrite","side","DoubleSide","create","constructor","isLeftIntersect","other","isRightIntersect","isMiddleIntersect","moveRight","currentLabel","currentRect","otherRect","moveDown","bottom","setValueMeasurementLabelText","strValue","div","textContent","setDeltaMeasurementLabelText","setVisibilityMeasurementLabelSpinner","display","MeasureTool","sharedMeasureConfig","_viewer","_names","_sharedMeasureConfig","avem","Extensions","Measure","_active","_isDragging","_endpointMoved","_activePoint","_consumeSingleClick","_singleClickHandled","_downX","_downY","_isolateMeasure","_measurementsManager","_currentMeasurement","_onIndicatorCreatedCB","_snapper","_isPressing","_picksBackup","_cursorPosition","_preMeasureState","_measurementType","_sessionMeasurements","getActivePick","getMaxNumberOfPicks","countPicks","getPreviousPick","noPicksSet","allPicksSet","enableMeasurementsTouchEvents","isNoPicksSet","getPickData","clonePicks","picksData","parse","snapToFirstPick","currentPick","forceSnap","firstPick","firstPickPoint","firstPickPosition","project","currentPickPoint","currentPickPosition","distanceTo","onMouseMove","copyTo","showResult","hasResult","computeResult","getMeasurementType","types","CALIBRATION","enable","areAllPicksSet","setSessionMeasurements","measurementList","getSessionMeasurements","register","deregister","deactivate","isActive","getNames","getName","getPriority","getCursor","getCurrentMeasurementRaw","getMeasurementsManager","getJson","tmp","console","log","attachIndicator","addPick","inp","json","setPick","geomEdge","snapPoint","assign","fromTopology","isPerpendicular","radius","addMeasurement","MarkupID","onMeasurementChanged","onSwitchMeasurement","loadJson","detail","onRemoveMeasurement","filter","clearCurrentMeasurement","startNewMeasurement","changeMeasurementType","activate","setUnits","setPrecision","isEditingEndpoint","pauseHighlight","clearSelection","getState","objectSet","activateTool","onMeasurementChangedBinded","onSwitchMeasurementBinded","onRemoveMeasurementBinded","CAMERA_CHANGE_EVENT","onCameraChange","SHOW_ALL_EVENT","onShowAllEvent","prefs","Prefs","RESTORE_SESSION_MEASUREMENTS","sessionMeasurements","setMeasurements","getMeasurementList","clearIsolate","deactivateTool","getUnits","units","DISPLAY_UNITS_CHANGED","updateResults","getPrecision","precision","getDistanceXYZ","getDistanceAux","getDistanceX","getDistanceY","getDistanceZ","measurementDistance","calibrationFactor","formatValueWithUnits","getAngle","fromCharCode","getArea","Array","isArray","measureData","unitType","getMeasureType","attachIndicatorCb","initPicksCb","deselectAllMeasurements","getMeasurement","geomTypes","from","to","getMeasurementPoints","clearPick","updateViewportId","setIsolateMeasure","isolateMeasurement","defaultModelId","isolationGroups","snapNode","isolationSet","modelInstance","ids","visibilityManager","aggregateIsolate","restoreState","undoEditEndpoint","setSimple","unfocusLabels","isComplete","measurementId","snapResult","getSnapResult","isValid","isMobileDevice","_handleMouseEvent","focusLabels","deleteMeasurements","measurements","deleteCurrentMeasurement","deleteCurrentPick","setViewportId","viewport","correctPickPosition","active","passive","correctPerpendicularPicks","nextPick","valid","isSnapped","copyResults","container","getBoundingClientRect","inverseProject","lastPick","_doConsumeSingleClick","renderSucceeded","hasEqualPicks","measurementComplete","handleButtonDown","button","ctrlKey","metaKey","shiftKey","altKey","handleMouseMove","restoreMouseListeners","controller","enableMouseButtons","handleSingleClick","updateScale","checkRoomId","innerText","clearOverlays","includes","roomID","prompt","CustomEvent","clearSnapped","handleDoubleClick","handleSingleTap","handleDoubleTap","handleKeyDown","keyCode","fetch","DBURL","then","KeyCode","BACKSPACE","DELETE","currLabel","onSelectionAreaClickedBinded","onSelectionAreaClicked","onSelectionAreaDbClickedBinded","onSelectionAreaDbClicked","createMeasurementLabel","onCameraChangeBinded","handleButtonUpBinded","addWindowEventListener","createSnapResultLabel","xy","visible","floor","clientHeight","clientWidth","p1Projected","p2Projected","invalidate","xyzDirection","itemDirection","cross","dot","needToStackLabels","labelsStacked","backupPositions","labelsOverlapDetection","stackLabels","staticLabel","labelsList","dynamicLabel","moved","staticRect","dynamicRect","causeStacking","topLabel","space","drawXYZLine","tmpVec","normal","drawLineSegment","tips","drawTip","redrawDashedLine","removeMultipleOverlays","p1Scale","isDashedLine","drawSurface","cset","CompGeom","ContourSet","addContour","triangulate","triangulationFailed","bufferGeometry","toPolygonMesh","face","drawSegmentAndPush","pickPositions","firstPoint","position1","position2","isEqualVectors","EPSILON","showAreaLabel","updateArea","clearAngleMeshes","removeOverlay","drawAngle","ep1","ep2","midPoint","smallNum","MeshPhongMaterial","ambient","createCommonOverlay","circleGeometry","CircleGeometry","arc","V","updateMatrixWorld","vA","vB","applyMatrix4","matrixWorld","v1","v2","v3","v4","ra","a13","a14","a23","a24","rotWorldMatrix","makeRotationAxis","matrix","rotation","setFromRotationMatrix","outlineGeometry","copy","round","dir","crossVectors","showAngleLabel","createDistanceLabel","setVisibilityMeasurementLabelText","_document","getDocument","axisIcon","insertBefore","updateLine","x1","y1","z1","x2","y2","z2","showAxis","getAlignedUpVector","isParallel","displayAxis","setTimeout","setWidth","getWidth","is3d","maxWidth","setLineVisible","pointerEvents","setLabelsZIndex","zIndex","tip","clearSelectionAreas","clearOverlay","selectionArea","overlayScenes","removeOverlayScene","removeWindowEventListener","clearXYZLine","segment","spinner","text","delta","label_icon","hitArea","createSelectionArea","updateSelectionArea","v","Vector2","_selectorAreaSize","transformOrigin","getElementById","CalibrationToolIndicator","calibrationTool","calibrationLabel","rubberbandDefaultMaterial","rubberbandSnappedMaterial","rubberbandTipMaterial","clearRubberband","updateLabelValue","childNodes","i18n","translate","changeLabelClickableMode","clickable","showAddCalibrationLabel","onClick","showPanel","renderCalibrationLabel","mid","labelPosition","drawMeasurementLineTip","flip","tipMaterial","lineNormal","lineMaterial","ave","avp","avu","UI","DockingPanel","ViewerPanelMixin","_gDocument","getGlobal","CalibrationPanel","title","addFooter","parentContainer","resize","closer","setVisible","clearSize","heightAdjustment","marginTop","createScrollContainer","calibrationMenu","scrollContainer","table","tbody","row","insertRow","requestedSizeTextbox","autofocus","split","updateLabel","ESCAPE","requestedSize","cursorIndex","selectionStart","isSimple","unitList","selectedIndex","simpleInput","isPositiveNumber","isSimpleDecimal","calculatePrecision","getMaxPrecision","preventDefault","caption","insertCell","matches","unitNames","OptionDropDown","paddingLeft","paddingRight","setCalibration","requestedUnits","calibrate","match","isNaN","uninitialize","findUnits","selectedUnits","getCurrentUnits","setPanelValue","size","setSelectedIndex","parsedNumber","UnitParser","parsePositiveNumber","updatePanelPosition","labelOffset","cornerX","cornerY","rubberbandDirection","pow","canvas","CalibrationRequiredDialog","measureExt","dialogBox","calibrateNow","buttonsWrapper","cancel","calibrateNowButton","enableCalibrationTool","CalibrationTool","_measurement","_options","_maxPrecision","maxPrecision","_isCalibrated","_distance","_calibrationTaken","_selectedSize","_selectedUnits","_selectedP1","_selectedP2","_waitingForInput","_calibrationPanel","_hasUI","GuiViewer3D","addPanel","screenSizeChangedBinded","screenSizeChanged","removePanel","parsedRequestedSize","VIEWER_RESIZE_EVENT","hidePanel","clearAllPicks","setCalibrationFactor","getCalibrationFactor","isCalibrationValid","currentSize","defualtPrecision","requestedPrecision","getExtension","FINISHED_CALIBRATION","scaleFactor","calibrateByScale","requestedScale","CLOSE_CALIBRATION_PANEL_EVENT","_window","getWindow","focus","onKeyUp","OPEN_CALIBRATION_PANEL_EVENT","isCalibrated","CLEAR_CALIBRATION_SIZE_EVENT","clearMeasurement","repickEndpoint","hasPreviousPick","MagnifyingGlass","_magnifyingGlassCanvas","_imageData","_imageBuffer","_clientX","_clientY","_needsClear","updateMagnifyingGlassBinded","updateMagnifyingGlass","pixelRatio","devicePixelRatio","normlizedDiameter","diameter","getContext","createImageData","ceil","Uint8Array","buffer","ctx","gl","readPixels","RGBA","UNSIGNED_BYTE","putImageData","drawImage","setGlassPosition","clearMagnifyingGlass","requestUpdate","hasEventListener","RENDER_PRESENTED_EVENT","once","drawMagnifyingGlass","handleWheelInput","MeasureToolbar","measureExtension","buttonsList","toolbar","getToolbar","navigationBar","getControl","TOOLBAR","NAVTOOLSID","toolbarOptions","measureToolbar","ControlGroup","MEASURETOOLSID","addControl","measureSimpleDistanceBtn","Button","setToolTip","setIcon","State","ACTIVE","measureAngleBtn","measureAreaBtn","calibrationToolBtn","separator","deleteBtn","settingsBtn","settingsControlPanel","setButtonActive","setButtonInactive","root","initialIndex","getDisplayUnit","shift","toUnits","setupPrecision","logger","track","category","precisionList","isolate","OptionCheckbox","checked","updateSettingsPanel","setVisibility","disableUnitOption","measureDoneBtn","doneText","cancelLabel","btnContainer","iconEle","getElementsByClassName","exitMeasurementMode","closeToolbar","removeFromParent","enableMeasureTool","toggleVisible","viewerToolbarContainer","viewerContainerChildrenCount","children","MODELTOOLSID","measurementToolbarButton","setState","INACTIVE","deactivateAllButtons","activateButtonByType","dropdownElement","lastChild","precisions","elem","disabled","visibility","AutodeskNamespace","DEFAULT_MEASUREMENT_TYPE","MeasureExtension","Extension","modes","_onModelLoaded","load","async","loadExtension","hasUI","escapeHotkeyId","measureToolOptions","snapperOptions","forceCalibrate","Snapping","Snapper","renderSnappedTopology","registerTool","calibration","onFinishedCalibration","activateInitiator","MODEL_ROOT_LOADED_EVENT","onModelRemoved","DISABLED","onModelAdded","getVisibleModels","MODEL_ADDED_EVENT","MODEL_REMOVED_EVENT","setPdfUnits","isPdf","Prefs2D","FORCE_PDF_CALIBRATION","setLeafletUnits","FORCE_LEAFLET_CALIBRATION","calibrationUnits","getMetadata","unload","destroyUI","deregisterTool","unloaded","setActive","getUnitOptions","getPrecisionOptions","isFractional","getDefaultUnit","openCalibrationRequiredDialog","initiator","CALIBRATION_REQUIRED_EVENT","FINISHED_CALIBRATION_FOR_DIMENSION_EVENT","getCalibration","mode","activeStatus","success","enterMeasurementMode","warn","setForcePDFCalibrate","setForceLeafletCalibrate","setRestoreSessionMeasurements","selectedTool","forcePDFCalibration","forceLeafletCalibration","checkAndFetchTopology","OPEN_TOOL_AFTER_CALIBRAION","UNITS_CALIBRATION_STARTS_EVENT","_measurementMode","MEASUREMENT_MODE_ENTER","navigationControls","measureControls","measureButtonId","getId","removeControl","centerToolBar","MEASUREMENT_MODE_LEAVE","onToolbarCreated","modelTools","state","hotkeys","keycodes","onRelease","getHotkeyManager","pushHotkeys","_checkedTopology","modelHasTopology","fetchTopology","topoData","catch","err","popHotkeys","setFreeMeasureMode","allow","setSnapToPixel","theExtensionManager","registerExtension"],"sourceRoot":""}