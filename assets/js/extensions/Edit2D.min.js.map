{"version":3,"file":"Edit2D/Edit2D.min.js","mappings":"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","sources":["webpack://Autodesk.Extensions/./PDF/libs/clipper.js","webpack://Autodesk.Extensions/./PDF/libs/earcut.js","webpack://Autodesk.Extensions/./Edit2D/Edit2D.css","webpack://Autodesk.Extensions/./node_modules/css-loader/dist/runtime/api.js","webpack://Autodesk.Extensions/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://Autodesk.Extensions/webpack/bootstrap","webpack://Autodesk.Extensions/webpack/runtime/compat get default export","webpack://Autodesk.Extensions/webpack/runtime/define property getters","webpack://Autodesk.Extensions/webpack/runtime/hasOwnProperty shorthand","webpack://Autodesk.Extensions/webpack/runtime/make namespace object","webpack://Autodesk.Extensions/webpack/runtime/nonce","webpack://Autodesk.Extensions/./PDF/bezier.js","webpack://Autodesk.Extensions/./PDF/path2d.js","webpack://Autodesk.Extensions/./PDF/LmvCanvasContext.js","webpack://Autodesk.Extensions/./Edit2D/EditLayer.js","webpack://Autodesk.Extensions/./PDF/test-pattern.js","webpack://Autodesk.Extensions/./Edit2D/Math2D.js","webpack://Autodesk.Extensions/./Edit2D/EditShapes.js","webpack://Autodesk.Extensions/./Edit2D/UndoStack.js","webpack://Autodesk.Extensions/./Edit2D/Selection.js","webpack://Autodesk.Extensions/./Edit2D/Actions.js","webpack://Autodesk.Extensions/./Edit2D/AngleSnapper.js","webpack://Autodesk.Extensions/./Edit2D/SegmentTree.js","webpack://Autodesk.Extensions/./Edit2D/Edit2DSnapper.js","webpack://Autodesk.Extensions/./Edit2D/Edit2DContextMenu.js","webpack://Autodesk.Extensions/./Edit2D/MeasureTransform.js","webpack://Autodesk.Extensions/./Edit2D/UnitHandler.js","webpack://Autodesk.Extensions/./Edit2D/CanvasGizmo.js","webpack://Autodesk.Extensions/./Edit2D/TangentGizmo.js","webpack://Autodesk.Extensions/./Edit2D/tools/MoveTool.js","webpack://Autodesk.Extensions/./Edit2D/tools/EditToolBase.js","webpack://Autodesk.Extensions/./Edit2D/ModifierMask.js","webpack://Autodesk.Extensions/./Edit2D/tools/RectangleTool.js","webpack://Autodesk.Extensions/./Edit2D/tools/LineTool.js","webpack://Autodesk.Extensions/./Edit2D/tools/PolygonTool.js","webpack://Autodesk.Extensions/./Edit2D/tools/PolygonEditTool.js","webpack://Autodesk.Extensions/./Edit2D/tools/InsertSymbolTool.js","webpack://Autodesk.Extensions/./Edit2D/tools/UndoTool.js","webpack://Autodesk.Extensions/./Edit2D/tools/CopyTool.js","webpack://Autodesk.Extensions/./Edit2D/Edit2D.css?4548","webpack://Autodesk.Extensions/./Edit2D/Edit2D.js"],"sourcesContent":["/*******************************************************************************\n *                                                                              *\n * Author    :  Angus Johnson                                                   *\n * Version   :  6.4.2                                                           *\n * Date      :  27 February 2017                                                *\n * Website   :  http://www.angusj.com                                           *\n * Copyright :  Angus Johnson 2010-2017                                         *\n *                                                                              *\n * License:                                                                     *\n * Use, modification & distribution is subject to Boost Software License Ver 1. *\n * http://www.boost.org/LICENSE_1_0.txt                                         *\n *                                                                              *\n * Attributions:                                                                *\n * The code in this library is an extension of Bala Vatti's clipping algorithm: *\n * \"A generic solution to polygon clipping\"                                     *\n * Communications of the ACM, Vol 35, Issue 7 (July 1992) pp 56-63.             *\n * http://portal.acm.org/citation.cfm?id=129906                                 *\n *                                                                              *\n * Computer graphics and geometric modeling: implementation and algorithms      *\n * By Max K. Agoston                                                            *\n * Springer; 1 edition (January 4, 2005)                                        *\n * http://books.google.com/books?q=vatti+clipping+agoston                       *\n *                                                                              *\n * See also:                                                                    *\n * \"Polygon Offsetting by Computing Winding Numbers\"                            *\n * Paper no. DETC2005-85513 pp. 565-575                                         *\n * ASME 2005 International Design Engineering Technical Conferences             *\n * and Computers and Information in Engineering Conference (IDETC/CIE2005)      *\n * September 24-28, 2005 , Long Beach, California, USA                          *\n * http://www.me.berkeley.edu/~mcmains/pubs/DAC05OffsetPolygon.pdf              *\n *                                                                              *\n *******************************************************************************/\n/*******************************************************************************\n                                                                                   *                                                                              *\n                                                                                   * Author    :  Timo                                                            *\n                                                                                   * Version   :  6.4.2.2 (FPoint)                                                *\n                                                                                   * Date      :  8 September 2017                                                *\n                                                                                   *                                                                              *\n                                                                                   * This is a translation of the C# Clipper library to Javascript.               *\n                                                                                   *                                                                              *\n                                                                                   *******************************************************************************/\n(function () {var c = { version: \"6.4.2.2\", use_lines: !0, use_xyz: !1 };var r = !1;\"undefined\" !== typeof module && module.exports ? (module.exports = c, r = !0) : \"undefined\" !== typeof document ? window.ClipperLib = c : self.ClipperLib = c;r = r ? \"chrome\" : navigator.userAgent.toString().toLowerCase();-1 != r.indexOf(\"chrome\") && r.indexOf(\"chromium\");r.indexOf(\"chromium\");-1 != r.indexOf(\"safari\") && -1 == r.indexOf(\"chrome\") && r.indexOf(\"chromium\");r.indexOf(\"firefox\");r.indexOf(\"firefox/17\");r.indexOf(\"firefox/15\");r.indexOf(\"firefox/3\");r.indexOf(\"opera\");\n  r.indexOf(\"msie 10\");r.indexOf(\"msie 9\");r.indexOf(\"msie 8\");r.indexOf(\"msie 7\");r.indexOf(\"msie \");r = function r(a, b) {var d;if (\"undefined\" === typeof Object.getOwnPropertyNames) for (d in b.prototype) {if (\"undefined\" === typeof a.prototype[d] || a.prototype[d] === Object.prototype[d]) a.prototype[d] = b.prototype[d];} else for (var c = Object.getOwnPropertyNames(b.prototype), f = 0; f < c.length; f++) {\"undefined\" === typeof Object.getOwnPropertyDescriptor(a.prototype, c[f]) && Object.defineProperty(a.prototype, c[f], Object.getOwnPropertyDescriptor(b.prototype,\n      c[f]));}for (d in b) {\"undefined\" === typeof a[d] && (a[d] = b[d]);}a.$baseCtor = b;};c.Path = function () {return [];};c.Path.prototype.push = Array.prototype.push;c.Paths = function () {return [];};c.Paths.prototype.push = Array.prototype.push;c.PolyNode = function () {this.m_Parent = null;this.m_polygon = new c.Path();this.m_endtype = this.m_jointype = this.m_Index = 0;this.m_Childs = [];this.IsOpen = !1;};c.PolyNode.prototype.IsHoleNode = function () {for (var a = !0, b = this.m_Parent; null !== b;) {a = !a, b = b.m_Parent;}return a;};c.PolyNode.prototype.ChildCount =\n  function () {return this.m_Childs.length;};c.PolyNode.prototype.Contour = function () {return this.m_polygon;};c.PolyNode.prototype.AddChild = function (a) {var b = this.m_Childs.length;this.m_Childs.push(a);a.m_Parent = this;a.m_Index = b;};c.PolyNode.prototype.GetNext = function () {return 0 < this.m_Childs.length ? this.m_Childs[0] : this.GetNextSiblingUp();};c.PolyNode.prototype.GetNextSiblingUp = function () {return null === this.m_Parent ? null : this.m_Index === this.m_Parent.m_Childs.length - 1 ? this.m_Parent.GetNextSiblingUp() : this.m_Parent.m_Childs[this.m_Index +\n    1];};c.PolyNode.prototype.Childs = function () {return this.m_Childs;};c.PolyNode.prototype.Parent = function () {return this.m_Parent;};c.PolyNode.prototype.IsHole = function () {return this.IsHoleNode();};c.PolyTree = function () {this.m_AllPolys = [];c.PolyNode.call(this);};c.PolyTree.prototype.Clear = function () {for (var a = 0, b = this.m_AllPolys.length; a < b; a++) {this.m_AllPolys[a] = null;}this.m_AllPolys.length = 0;this.m_Childs.length = 0;};c.PolyTree.prototype.GetFirst = function () {return 0 < this.m_Childs.length ? this.m_Childs[0] : null;};\n  c.PolyTree.prototype.Total = function () {var a = this.m_AllPolys.length;0 < a && this.m_Childs[0] !== this.m_AllPolys[0] && a--;return a;};r(c.PolyTree, c.PolyNode);c.Clear = function (a) {a.length = 0;};c.PI = 3.141592653589793;c.PI2 = 6.283185307179586;c.FPoint = function () {var a = arguments;var b = a.length;this.Y = this.X = 0;c.use_xyz ? (this.Z = 0, 3 === b ? (this.X = a[0], this.Y = a[1], this.Z = a[2]) : 2 === b ? (this.X = a[0], this.Y = a[1], this.Z = 0) : 1 === b ? a[0] instanceof c.FPoint ? (a = a[0], this.X = a.X, this.Y = a.Y, this.Z = 0) : (a = a[0], \"undefined\" === typeof a.Z && (\n    a.Z = 0), this.X = a.X, this.Y = a.Y, this.Z = a.Z) : this.Z = this.Y = this.X = 0) : 2 === b ? (this.X = a[0], this.Y = a[1]) : 1 === b ? (a = a[0], this.X = a.X, this.Y = a.Y) : this.Y = this.X = 0;};c.FPoint.op_Equality = function (a, b) {return a.X === b.X && a.Y === b.Y;};c.FPoint.op_Inequality = function (a, b) {return a.X !== b.X || a.Y !== b.Y;};c.FPoint0 = function () {this.Y = this.X = 0;c.use_xyz && (this.Z = 0);};c.FPoint0.prototype = c.FPoint.prototype;c.FPoint1 = function (a) {this.X = a.X;this.Y = a.Y;c.use_xyz && (this.Z = \"undefined\" === typeof a.Z ? 0 : a.Z);};c.FPoint1.prototype = c.FPoint.prototype;\n  c.FPoint1dp = function (a) {this.X = a.X;this.Y = a.Y;c.use_xyz && (this.Z = 0);};c.FPoint1dp.prototype = c.FPoint.prototype;c.FPoint2 = function (a, b, d) {this.X = a;this.Y = b;c.use_xyz && (this.Z = \"undefined\" === typeof d ? 0 : d);};c.FPoint2.prototype = c.FPoint.prototype;c.FRect = function () {var a = arguments,b = a.length;4 === b ? (this.left = a[0], this.top = a[1], this.right = a[2], this.bottom = a[3]) : 1 === b ? (a = a[0], this.left = a.left, this.top = a.top, this.right = a.right, this.bottom = a.bottom) : this.bottom = this.right = this.top = this.left = 0;};c.FRect0 = function () {this.bottom =\n    this.right = this.top = this.left = 0;};c.FRect0.prototype = c.FRect.prototype;c.FRect1 = function (a) {this.left = a.left;this.top = a.top;this.right = a.right;this.bottom = a.bottom;};c.FRect1.prototype = c.FRect.prototype;c.FRect4 = function (a, b, d, c) {this.left = a;this.top = b;this.right = d;this.bottom = c;};c.FRect4.prototype = c.FRect.prototype;c.ClipType = { ctIntersection: 0, ctUnion: 1, ctDifference: 2, ctXor: 3 };c.PolyType = { ptSubject: 0, ptClip: 1 };c.PolyFillType = { pftEvenOdd: 0, pftNonZero: 1, pftPositive: 2, pftNegative: 3 };c.JoinType = { jtSquare: 0,\n    jtRound: 1, jtMiter: 2 };c.EndType = { etOpenSquare: 0, etOpenRound: 1, etOpenButt: 2, etClosedLine: 3, etClosedPolygon: 4 };c.EdgeSide = { esLeft: 0, esRight: 1 };c.Direction = { dRightToLeft: 0, dLeftToRight: 1 };c.TEdge = function () {this.Bot = new c.FPoint0();this.Curr = new c.FPoint0();this.Top = new c.FPoint0();this.Delta = new c.FPoint0();this.Dx = 0;this.PolyTyp = c.PolyType.ptSubject;this.Side = c.EdgeSide.esLeft;this.OutIdx = this.WindCnt2 = this.WindCnt = this.WindDelta = 0;this.PrevInSEL = this.NextInSEL = this.PrevInAEL = this.NextInAEL = this.NextInLML =\n    this.Prev = this.Next = null;};c.IntersectNode = function () {this.Edge2 = this.Edge1 = null;this.Pt = new c.FPoint0();};c.MyIntersectNodeSort = function () {};c.MyIntersectNodeSort.Compare = function (a, b) {var d = b.Pt.Y - a.Pt.Y;return 0 < d ? 1 : 0 > d ? -1 : 0;};c.LocalMinima = function () {this.Y = 0;this.Next = this.RightBound = this.LeftBound = null;};c.Scanbeam = function () {this.Y = 0;this.Next = null;};c.Maxima = function () {this.X = 0;this.Prev = this.Next = null;};c.OutRec = function () {this.Idx = 0;this.IsOpen = this.IsHole = !1;this.PolyNode = this.BottomPt = this.Pts =\n    this.FirstLeft = null;};c.OutPt = function () {this.Idx = 0;this.Pt = new c.FPoint0();this.Prev = this.Next = null;};c.Join = function () {this.OutPt2 = this.OutPt1 = null;this.OffPt = new c.FPoint0();};c.ClipperBase = function () {this.m_CurrentLM = this.m_MinimaList = null;this.m_edges = [];this.PreserveCollinear = this.m_HasOpenPaths = !1;this.m_ActiveEdges = this.m_PolyOuts = this.m_Scanbeam = null;};c.ClipperBase.horizontal = -3.4E38;c.ClipperBase.Skip = -2;c.ClipperBase.Unassigned = -1;c.ClipperBase.tolerance = 1E-20;c.ClipperBase.maxValue = Math.sqrt(Number.MAX_VALUE);\n  c.ClipperBase.minValue = Math.sqrt(Number.MIN_VALUE);c.ClipperBase.near_zero = function (a) {return a > -c.ClipperBase.tolerance && a < c.ClipperBase.tolerance;};c.ClipperBase.IsHorizontal = function (a) {return 0 === a.Delta.Y;};c.ClipperBase.prototype.PointIsVertex = function (a, b) {var d = b;do {if (c.FPoint.op_Equality(d.Pt, a)) return !0;d = d.Next;} while (d !== b);return !1;};c.ClipperBase.prototype.PointOnLineSegment = function (a, b, d) {return a.X === b.X && a.Y === b.Y || a.X === d.X && a.Y === d.Y || a.X > b.X === a.X < d.X && a.Y > b.Y === a.Y < d.Y && (a.X - b.X) * (\n    d.Y - b.Y) === (d.X - b.X) * (a.Y - b.Y);};c.ClipperBase.prototype.PointOnPolygon = function (a, b) {for (var d = b;;) {if (this.PointOnLineSegment(a, d.Pt, d.Next.Pt)) return !0;d = d.Next;if (d === b) break;}return !1;};c.ClipperBase.prototype.SlopesEqual = c.ClipperBase.SlopesEqual = function () {var a = arguments,b = a.length;if (2 === b) return b = a[0], a = a[1], b.Delta.Y * a.Delta.X === b.Delta.X * a.Delta.Y;if (3 === b) {b = a[0];var d = a[1];var c = a[2];return 0 === (b.Y - d.Y) * (d.X - c.X) - (b.X - d.X) * (d.Y - c.Y);}b = a[0];d = a[1];c = a[2];a = a[3];return 0 === (b.Y - d.Y) * (c.X -\n    a.X) - (b.X - d.X) * (c.Y - a.Y);};c.ClipperBase.SlopesEqual3 = function (a, b) {return a.Delta.Y * b.Delta.X === a.Delta.X * b.Delta.Y;};c.ClipperBase.SlopesEqual4 = function (a, b, d) {return 0 === (a.Y - b.Y) * (b.X - d.X) - (a.X - b.X) * (b.Y - d.Y);};c.ClipperBase.SlopesEqual5 = function (a, b, d, c) {return 0 === (a.Y - b.Y) * (d.X - c.X) - (a.X - b.X) * (d.Y - c.Y);};c.ClipperBase.prototype.Clear = function () {this.DisposeLocalMinimaList();for (var a = 0, b = this.m_edges.length; a < b; ++a) {for (var d = 0, e = this.m_edges[a].length; d < e; ++d) {this.m_edges[a][d] = null;}c.Clear(this.m_edges[a]);}c.Clear(this.m_edges);\n    this.m_HasOpenPaths = !1;};c.ClipperBase.prototype.DisposeLocalMinimaList = function () {for (; null !== this.m_MinimaList;) {var a = this.m_MinimaList.Next;this.m_MinimaList = null;this.m_MinimaList = a;}this.m_CurrentLM = null;};c.ClipperBase.prototype.RangeTest = function (a) {(a.X > c.ClipperBase.maxValue || a.X < -c.ClipperBase.maxValue || a.Y > c.ClipperBase.maxValue || a.Y < -c.ClipperBase.maxValue || 0 < a.X && a.X < c.ClipperBase.minValue || 0 < a.Y && a.Y < c.ClipperBase.minValue || 0 > a.X && a.X > -c.ClipperBase.minValue || 0 > a.Y && a.Y > -c.ClipperBase.minValue) &&\n    c.Error(\"Coordinate outside allowed range in RangeTest().\");};c.ClipperBase.prototype.InitEdge = function (a, b, d, e) {a.Next = b;a.Prev = d;a.Curr.X = e.X;a.Curr.Y = e.Y;c.use_xyz && (a.Curr.Z = e.Z);a.OutIdx = -1;};c.ClipperBase.prototype.InitEdge2 = function (a, b) {a.Curr.Y >= a.Next.Curr.Y ? (a.Bot.X = a.Curr.X, a.Bot.Y = a.Curr.Y, c.use_xyz && (a.Bot.Z = a.Curr.Z), a.Top.X = a.Next.Curr.X, a.Top.Y = a.Next.Curr.Y, c.use_xyz && (a.Top.Z = a.Next.Curr.Z)) : (a.Top.X = a.Curr.X, a.Top.Y = a.Curr.Y, c.use_xyz && (a.Top.Z = a.Curr.Z), a.Bot.X = a.Next.Curr.X, a.Bot.Y =\n    a.Next.Curr.Y, c.use_xyz && (a.Bot.Z = a.Next.Curr.Z));this.SetDx(a);a.PolyTyp = b;};c.ClipperBase.prototype.FindNextLocMin = function (a) {for (var b;;) {for (; c.FPoint.op_Inequality(a.Bot, a.Prev.Bot) || c.FPoint.op_Equality(a.Curr, a.Top);) {a = a.Next;}if (a.Dx !== c.ClipperBase.horizontal && a.Prev.Dx !== c.ClipperBase.horizontal) break;for (; a.Prev.Dx === c.ClipperBase.horizontal;) {a = a.Prev;}for (b = a; a.Dx === c.ClipperBase.horizontal;) {a = a.Next;}if (a.Top.Y !== a.Prev.Bot.Y) {b.Prev.Bot.X < a.Bot.X && (a = b);break;}}return a;};c.ClipperBase.prototype.ProcessBound =\n  function (a, b) {var d = a,e;if (d.OutIdx === c.ClipperBase.Skip) {a = d;if (b) {for (; a.Top.Y === a.Next.Bot.Y;) {a = a.Next;}for (; a !== d && a.Dx === c.ClipperBase.horizontal;) {a = a.Prev;}} else {for (; a.Top.Y === a.Prev.Bot.Y;) {a = a.Prev;}for (; a !== d && a.Dx === c.ClipperBase.horizontal;) {a = a.Next;}}if (a === d) d = b ? a.Next : a.Prev;else {a = b ? d.Next : d.Prev;var f = new c.LocalMinima();f.Next = null;f.Y = a.Bot.Y;f.LeftBound = null;f.RightBound = a;a.WindDelta = 0;d = this.ProcessBound(a, b);this.InsertLocalMinima(f);}return d;}a.Dx === c.ClipperBase.horizontal && (f = b ? a.Prev :\n    a.Next, f.Dx === c.ClipperBase.horizontal ? f.Bot.X !== a.Bot.X && f.Top.X !== a.Bot.X && this.ReverseHorizontal(a) : f.Bot.X !== a.Bot.X && this.ReverseHorizontal(a));f = a;if (b) {for (; d.Top.Y === d.Next.Bot.Y && d.Next.OutIdx !== c.ClipperBase.Skip;) {d = d.Next;}if (d.Dx === c.ClipperBase.horizontal && d.Next.OutIdx !== c.ClipperBase.Skip) {for (e = d; e.Prev.Dx === c.ClipperBase.horizontal;) {e = e.Prev;}e.Prev.Top.X > d.Next.Top.X && (d = e.Prev);}for (; a !== d;) {a.NextInLML = a.Next, a.Dx === c.ClipperBase.horizontal && a !== f && a.Bot.X !== a.Prev.Top.X && this.ReverseHorizontal(a),\n        a = a.Next;}a.Dx === c.ClipperBase.horizontal && a !== f && a.Bot.X !== a.Prev.Top.X && this.ReverseHorizontal(a);d = d.Next;} else {for (; d.Top.Y === d.Prev.Bot.Y && d.Prev.OutIdx !== c.ClipperBase.Skip;) {d = d.Prev;}if (d.Dx === c.ClipperBase.horizontal && d.Prev.OutIdx !== c.ClipperBase.Skip) {for (e = d; e.Next.Dx === c.ClipperBase.horizontal;) {e = e.Next;}if (e.Next.Top.X === d.Prev.Top.X || e.Next.Top.X > d.Prev.Top.X) d = e.Next;}for (; a !== d;) {a.NextInLML = a.Prev, a.Dx === c.ClipperBase.horizontal && a !== f && a.Bot.X !== a.Next.Top.X && this.ReverseHorizontal(a),\n        a = a.Prev;}a.Dx === c.ClipperBase.horizontal && a !== f && a.Bot.X !== a.Next.Top.X && this.ReverseHorizontal(a);d = d.Prev;}return d;};c.ClipperBase.prototype.AddPath = function (a, b, d) {c.use_lines ? d || b !== c.PolyType.ptClip || c.Error(\"AddPath: Open paths must be subject.\") : d || c.Error(\"AddPath: Open paths have been disabled.\");var e = a.length - 1;if (d) for (; 0 < e && c.FPoint.op_Equality(a[e], a[0]);) {--e;}for (; 0 < e && c.FPoint.op_Equality(a[e], a[e - 1]);) {--e;}if (d && 2 > e || !d && 1 > e) return !1;for (var f = [], g = 0; g <= e; g++) {f.push(new c.TEdge());}var h =\n    !0;f[1].Curr.X = a[1].X;f[1].Curr.Y = a[1].Y;c.use_xyz && (f[1].Curr.Z = a[1].Z);this.RangeTest(a[0]);this.RangeTest(a[e]);this.InitEdge(f[0], f[1], f[e], a[0]);this.InitEdge(f[e], f[0], f[e - 1], a[e]);for (g = e - 1; 1 <= g; --g) {this.RangeTest(a[g]), this.InitEdge(f[g], f[g + 1], f[g - 1], a[g]);}for (g = a = e = f[0];;) {if (a.Curr !== a.Next.Curr || !d && a.Next === e) {if (a.Prev === a.Next) break;else if (d && c.ClipperBase.SlopesEqual4(a.Prev.Curr, a.Curr, a.Next.Curr) && (!this.PreserveCollinear || !this.Pt2IsBetweenPt1AndPt3(a.Prev.Curr, a.Curr, a.Next.Curr))) {a ===\n          e && (e = a.Next);a = this.RemoveEdge(a);g = a = a.Prev;continue;}a = a.Next;if (a === g || !d && a.Next === e) break;} else {if (a === a.Next) break;a === e && (e = a.Next);g = a = this.RemoveEdge(a);}}if (!d && a === a.Next || d && a.Prev === a.Next) return !1;d || (this.m_HasOpenPaths = !0, e.Prev.OutIdx = c.ClipperBase.Skip);a = e;do {this.InitEdge2(a, b), a = a.Next, h && a.Curr.Y !== e.Curr.Y && (h = !1);} while (a !== e);if (h) {if (d) return !1;a.Prev.OutIdx = c.ClipperBase.Skip;b = new c.LocalMinima();b.Next = null;b.Y = a.Bot.Y;b.LeftBound = null;b.RightBound = a;b.RightBound.Side = c.EdgeSide.esRight;\n      for (b.RightBound.WindDelta = 0;;) {a.Bot.X !== a.Prev.Top.X && this.ReverseHorizontal(a);if (a.Next.OutIdx === c.ClipperBase.Skip) break;a = a.NextInLML = a.Next;}this.InsertLocalMinima(b);this.m_edges.push(f);return !0;}this.m_edges.push(f);h = null;c.FPoint.op_Equality(a.Prev.Bot, a.Prev.Top) && (a = a.Next);for (;;) {a = this.FindNextLocMin(a);if (a === h) break;else null === h && (h = a);b = new c.LocalMinima();b.Next = null;b.Y = a.Bot.Y;a.Dx < a.Prev.Dx ? (b.LeftBound = a.Prev, b.RightBound = a, f = !1) : (b.LeftBound = a, b.RightBound = a.Prev, f = !0);b.LeftBound.Side =\n      c.EdgeSide.esLeft;b.RightBound.Side = c.EdgeSide.esRight;b.LeftBound.WindDelta = d ? b.LeftBound.Next === b.RightBound ? -1 : 1 : 0;b.RightBound.WindDelta = -b.LeftBound.WindDelta;a = this.ProcessBound(b.LeftBound, f);a.OutIdx === c.ClipperBase.Skip && (a = this.ProcessBound(a, f));e = this.ProcessBound(b.RightBound, !f);e.OutIdx === c.ClipperBase.Skip && (e = this.ProcessBound(e, !f));b.LeftBound.OutIdx === c.ClipperBase.Skip ? b.LeftBound = null : b.RightBound.OutIdx === c.ClipperBase.Skip && (b.RightBound = null);this.InsertLocalMinima(b);f || (\n      a = e);}return !0;};c.ClipperBase.prototype.AddPaths = function (a, b, d) {for (var c = !1, f = 0, g = a.length; f < g; ++f) {this.AddPath(a[f], b, d) && (c = !0);}return c;};c.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3 = function (a, b, d) {return c.FPoint.op_Equality(a, d) || c.FPoint.op_Equality(a, b) || c.FPoint.op_Equality(d, b) ? !1 : a.X !== d.X ? b.X > a.X === b.X < d.X : b.Y > a.Y === b.Y < d.Y;};c.ClipperBase.prototype.RemoveEdge = function (a) {a.Prev.Next = a.Next;a.Next.Prev = a.Prev;var b = a.Next;a.Prev = null;return b;};c.ClipperBase.prototype.SetDx = function (a) {a.Delta.X =\n    a.Top.X - a.Bot.X;a.Delta.Y = a.Top.Y - a.Bot.Y;a.Dx = 0 === a.Delta.Y ? c.ClipperBase.horizontal : a.Delta.X / a.Delta.Y;};c.ClipperBase.prototype.InsertLocalMinima = function (a) {if (null === this.m_MinimaList) this.m_MinimaList = a;else if (a.Y >= this.m_MinimaList.Y) a.Next = this.m_MinimaList, this.m_MinimaList = a;else {for (var b = this.m_MinimaList; null !== b.Next && a.Y < b.Next.Y;) {b = b.Next;}a.Next = b.Next;b.Next = a;}};c.ClipperBase.prototype.PopLocalMinima = function (a, b) {b.v = this.m_CurrentLM;return null !== this.m_CurrentLM && this.m_CurrentLM.Y ===\n    a ? (this.m_CurrentLM = this.m_CurrentLM.Next, !0) : !1;};c.ClipperBase.prototype.ReverseHorizontal = function (a) {var b = a.Top.X;a.Top.X = a.Bot.X;a.Bot.X = b;c.use_xyz && (b = a.Top.Z, a.Top.Z = a.Bot.Z, a.Bot.Z = b);};c.ClipperBase.prototype.Reset = function () {this.m_CurrentLM = this.m_MinimaList;if (null !== this.m_CurrentLM) {this.m_Scanbeam = null;for (var a = this.m_MinimaList; null !== a;) {this.InsertScanbeam(a.Y);var b = a.LeftBound;null !== b && (b.Curr.X = b.Bot.X, b.Curr.Y = b.Bot.Y, c.use_xyz && (b.Curr.Z = b.Bot.Z), b.OutIdx = c.ClipperBase.Unassigned);\n        b = a.RightBound;null !== b && (b.Curr.X = b.Bot.X, b.Curr.Y = b.Bot.Y, c.use_xyz && (b.Curr.Z = b.Bot.Z), b.OutIdx = c.ClipperBase.Unassigned);a = a.Next;}this.m_ActiveEdges = null;}};c.ClipperBase.prototype.InsertScanbeam = function (a) {if (null === this.m_Scanbeam) this.m_Scanbeam = new c.Scanbeam(), this.m_Scanbeam.Next = null, this.m_Scanbeam.Y = a;else if (a > this.m_Scanbeam.Y) {var b = new c.Scanbeam();b.Y = a;b.Next = this.m_Scanbeam;this.m_Scanbeam = b;} else {for (b = this.m_Scanbeam; null !== b.Next && a <= b.Next.Y;) {b = b.Next;}if (a !== b.Y) {var d = new c.Scanbeam();\n        d.Y = a;d.Next = b.Next;b.Next = d;}}};c.ClipperBase.prototype.PopScanbeam = function (a) {if (null === this.m_Scanbeam) return a.v = 0, !1;a.v = this.m_Scanbeam.Y;this.m_Scanbeam = this.m_Scanbeam.Next;return !0;};c.ClipperBase.prototype.LocalMinimaPending = function () {return null !== this.m_CurrentLM;};c.ClipperBase.prototype.CreateOutRec = function () {var a = new c.OutRec();a.Idx = c.ClipperBase.Unassigned;a.IsHole = !1;a.IsOpen = !1;a.FirstLeft = null;a.Pts = null;a.BottomPt = null;a.PolyNode = null;this.m_PolyOuts.push(a);a.Idx = this.m_PolyOuts.length -\n    1;return a;};c.ClipperBase.prototype.DisposeOutRec = function (a) {this.m_PolyOuts[a].Pts = null;this.m_PolyOuts[a] = null;};c.ClipperBase.prototype.UpdateEdgeIntoAEL = function (a) {null === a.NextInLML && c.Error(\"UpdateEdgeIntoAEL: invalid call\");var b = a.PrevInAEL,d = a.NextInAEL;a.NextInLML.OutIdx = a.OutIdx;null !== b ? b.NextInAEL = a.NextInLML : this.m_ActiveEdges = a.NextInLML;null !== d && (d.PrevInAEL = a.NextInLML);a.NextInLML.Side = a.Side;a.NextInLML.WindDelta = a.WindDelta;a.NextInLML.WindCnt = a.WindCnt;a.NextInLML.WindCnt2 =\n    a.WindCnt2;a = a.NextInLML;a.Curr.X = a.Bot.X;a.Curr.Y = a.Bot.Y;a.PrevInAEL = b;a.NextInAEL = d;c.ClipperBase.IsHorizontal(a) || this.InsertScanbeam(a.Top.Y);return a;};c.ClipperBase.prototype.SwapPositionsInAEL = function (a, b) {if (a.NextInAEL !== a.PrevInAEL && b.NextInAEL !== b.PrevInAEL) {if (a.NextInAEL === b) {var d = b.NextInAEL;null !== d && (d.PrevInAEL = a);var c = a.PrevInAEL;null !== c && (c.NextInAEL = b);b.PrevInAEL = c;b.NextInAEL = a;a.PrevInAEL = b;a.NextInAEL = d;} else b.NextInAEL === a ? (d = a.NextInAEL, null !== d && (d.PrevInAEL = b), c = b.PrevInAEL,\n      null !== c && (c.NextInAEL = a), a.PrevInAEL = c, a.NextInAEL = b, b.PrevInAEL = a, b.NextInAEL = d) : (d = a.NextInAEL, c = a.PrevInAEL, a.NextInAEL = b.NextInAEL, null !== a.NextInAEL && (a.NextInAEL.PrevInAEL = a), a.PrevInAEL = b.PrevInAEL, null !== a.PrevInAEL && (a.PrevInAEL.NextInAEL = a), b.NextInAEL = d, null !== b.NextInAEL && (b.NextInAEL.PrevInAEL = b), b.PrevInAEL = c, null !== b.PrevInAEL && (b.PrevInAEL.NextInAEL = b));null === a.PrevInAEL ? this.m_ActiveEdges = a : null === b.PrevInAEL && (this.m_ActiveEdges = b);}};c.ClipperBase.prototype.DeleteFromAEL = function (a) {var b =\n    a.PrevInAEL,d = a.NextInAEL;if (null !== b || null !== d || a === this.m_ActiveEdges) null !== b ? b.NextInAEL = d : this.m_ActiveEdges = d, null !== d && (d.PrevInAEL = b), a.NextInAEL = null, a.PrevInAEL = null;};c.Clipper = function (a) {\"undefined\" === typeof a && (a = 0);this.m_PolyOuts = null;this.m_ClipType = c.ClipType.ctIntersection;this.m_IntersectNodeComparer = this.m_IntersectList = this.m_SortedEdges = this.m_ActiveEdges = this.m_Maxima = this.m_Scanbeam = null;this.m_ExecuteLocked = !1;this.m_SubjFillType = this.m_ClipFillType = c.PolyFillType.pftEvenOdd;\n    this.m_GhostJoins = this.m_Joins = null;this.StrictlySimple = this.ReverseSolution = this.m_UsingPolyTree = !1;c.ClipperBase.call(this);this.m_SortedEdges = this.m_ActiveEdges = this.m_Maxima = this.m_Scanbeam = null;this.m_IntersectList = [];this.m_IntersectNodeComparer = c.MyIntersectNodeSort.Compare;this.m_UsingPolyTree = this.m_ExecuteLocked = !1;this.m_PolyOuts = [];this.m_Joins = [];this.m_GhostJoins = [];this.ReverseSolution = 0 !== (1 & a);this.StrictlySimple = 0 !== (2 & a);this.PreserveCollinear = 0 !== (4 & a);c.use_xyz && (this.ZFillFunction =\n    null);};c.Clipper.ioReverseSolution = 1;c.Clipper.ioStrictlySimple = 2;c.Clipper.ioPreserveCollinear = 4;c.Clipper.prototype.Clear = function () {0 !== this.m_edges.length && (this.DisposeAllPolyPts(), c.ClipperBase.prototype.Clear.call(this));};c.Clipper.prototype.InsertMaxima = function (a) {var b = new c.Maxima();b.X = a;if (null === this.m_Maxima) this.m_Maxima = b, this.m_Maxima.Next = null, this.m_Maxima.Prev = null;else if (a < this.m_Maxima.X) b.Next = this.m_Maxima, b.Prev = null, this.m_Maxima = b;else {for (var d = this.m_Maxima; null !== d.Next &&\n      a >= d.Next.X;) {d = d.Next;}a !== d.X && (b.Next = d.Next, b.Prev = d, null !== d.Next && (d.Next.Prev = b), d.Next = b);}};c.Clipper.prototype.Execute = function () {var a;var b = arguments;var d = b.length;var e = b[1] instanceof c.PolyTree;if (4 !== d || e) {if (4 === d && e) {d = b[0];var f = b[1];e = b[2];b = b[3];if (this.m_ExecuteLocked) return !1;this.m_ExecuteLocked = !0;this.m_SubjFillType = e;this.m_ClipFillType = b;this.m_ClipType = d;this.m_UsingPolyTree = !0;try {(a = this.ExecuteInternal()) && this.BuildResult2(f);} finally {this.DisposeAllPolyPts(), this.m_ExecuteLocked =\n          !1;}return a;}if (2 === d && !e || 2 === d && e) return d = b[0], f = b[1], this.Execute(d, f, c.PolyFillType.pftEvenOdd, c.PolyFillType.pftEvenOdd);} else {d = b[0];f = b[1];e = b[2];b = b[3];if (this.m_ExecuteLocked) return !1;this.m_HasOpenPaths && c.Error(\"Error: PolyTree struct is needed for open path clipping.\");this.m_ExecuteLocked = !0;c.Clear(f);this.m_SubjFillType = e;this.m_ClipFillType = b;this.m_ClipType = d;this.m_UsingPolyTree = !1;try {(a = this.ExecuteInternal()) && this.BuildResult(f);} finally {this.DisposeAllPolyPts(), this.m_ExecuteLocked =\n        !1;}return a;}};c.Clipper.prototype.FixHoleLinkage = function (a) {if (null !== a.FirstLeft && (a.IsHole === a.FirstLeft.IsHole || null === a.FirstLeft.Pts)) {for (var b = a.FirstLeft; null !== b && (b.IsHole === a.IsHole || null === b.Pts);) {b = b.FirstLeft;}a.FirstLeft = b;}};c.Clipper.prototype.ExecuteInternal = function () {try {this.Reset();this.m_Maxima = this.m_SortedEdges = null;var a = {},b = {};if (!this.PopScanbeam(a)) return !1;for (this.InsertLocalMinimaIntoAEL(a.v); this.PopScanbeam(b) || this.LocalMinimaPending();) {this.ProcessHorizontals();\n        this.m_GhostJoins.length = 0;if (!this.ProcessIntersections(b.v)) return !1;this.ProcessEdgesAtTopOfScanbeam(b.v);a.v = b.v;this.InsertLocalMinimaIntoAEL(a.v);}var d;var c = 0;for (d = this.m_PolyOuts.length; c < d; c++) {var f = this.m_PolyOuts[c];null === f.Pts || f.IsOpen || (f.IsHole ^ this.ReverseSolution) == 0 < this.Area$1(f) && this.ReversePolyPtLinks(f.Pts);}this.JoinCommonEdges();c = 0;for (d = this.m_PolyOuts.length; c < d; c++) {f = this.m_PolyOuts[c], null !== f.Pts && (f.IsOpen ? this.FixupOutPolyline(f) : this.FixupOutPolygon(f));}this.StrictlySimple &&\n      this.DoSimplePolygons();return !0;} finally {this.m_Joins.length = 0, this.m_GhostJoins.length = 0;}};c.Clipper.prototype.DisposeAllPolyPts = function () {for (var a = 0, b = this.m_PolyOuts.length; a < b; ++a) {this.DisposeOutRec(a);}c.Clear(this.m_PolyOuts);};c.Clipper.prototype.AddJoin = function (a, b, d) {var e = new c.Join();e.OutPt1 = a;e.OutPt2 = b;e.OffPt.X = d.X;e.OffPt.Y = d.Y;c.use_xyz && (e.OffPt.Z = d.Z);this.m_Joins.push(e);};c.Clipper.prototype.AddGhostJoin = function (a, b) {var d = new c.Join();d.OutPt1 = a;d.OffPt.X = b.X;d.OffPt.Y = b.Y;c.use_xyz && (\n    d.OffPt.Z = b.Z);this.m_GhostJoins.push(d);};c.Clipper.prototype.SetZ = function (a, b, d) {null !== this.ZFillFunction && 0 === a.Z && null !== this.ZFillFunction && (c.FPoint.op_Equality(a, b.Bot) ? a.Z = b.Bot.Z : c.FPoint.op_Equality(a, b.Top) ? a.Z = b.Top.Z : c.FPoint.op_Equality(a, d.Bot) ? a.Z = d.Bot.Z : c.FPoint.op_Equality(a, d.Top) ? a.Z = d.Top.Z : this.ZFillFunction(b.Bot, b.Top, d.Bot, d.Top, a));};c.Clipper.prototype.InsertLocalMinimaIntoAEL = function (a) {for (var b, d = {}, e, f; this.PopLocalMinima(a, d);) {e = d.v.LeftBound;f = d.v.RightBound;var g =\n      null;null === e ? (this.InsertEdgeIntoAEL(f, null), this.SetWindingCount(f), this.IsContributing(f) && (g = this.AddOutPt(f, f.Bot))) : (null === f ? (this.InsertEdgeIntoAEL(e, null), this.SetWindingCount(e), this.IsContributing(e) && (g = this.AddOutPt(e, e.Bot))) : (this.InsertEdgeIntoAEL(e, null), this.InsertEdgeIntoAEL(f, e), this.SetWindingCount(e), f.WindCnt = e.WindCnt, f.WindCnt2 = e.WindCnt2, this.IsContributing(e) && (g = this.AddLocalMinPoly(e, f, e.Bot))), this.InsertScanbeam(e.Top.Y));null !== f && (c.ClipperBase.IsHorizontal(f) ? (null !==\n      f.NextInLML && this.InsertScanbeam(f.NextInLML.Top.Y), this.AddEdgeToSEL(f)) : this.InsertScanbeam(f.Top.Y));if (null !== e && null !== f) {if (null !== g && c.ClipperBase.IsHorizontal(f) && 0 < this.m_GhostJoins.length && 0 !== f.WindDelta) {b = 0;for (var h = this.m_GhostJoins.length; b < h; b++) {var l = this.m_GhostJoins[b];this.HorzSegmentsOverlap(l.OutPt1.Pt.X, l.OffPt.X, f.Bot.X, f.Top.X) && this.AddJoin(l.OutPt1, g, l.OffPt);}}0 <= e.OutIdx && null !== e.PrevInAEL && e.PrevInAEL.Curr.X === e.Bot.X && 0 <= e.PrevInAEL.OutIdx && c.ClipperBase.SlopesEqual5(e.PrevInAEL.Curr,\n        e.PrevInAEL.Top, e.Curr, e.Top) && 0 !== e.WindDelta && 0 !== e.PrevInAEL.WindDelta && (b = this.AddOutPt(e.PrevInAEL, e.Bot), this.AddJoin(g, b, e.Top));if (e.NextInAEL !== f && (0 <= f.OutIdx && 0 <= f.PrevInAEL.OutIdx && c.ClipperBase.SlopesEqual5(f.PrevInAEL.Curr, f.PrevInAEL.Top, f.Curr, f.Top) && 0 !== f.WindDelta && 0 !== f.PrevInAEL.WindDelta && (b = this.AddOutPt(f.PrevInAEL, f.Bot), this.AddJoin(g, b, f.Top)), g = e.NextInAEL, null !== g)) for (; g !== f;) {this.IntersectEdges(f, g, e.Curr), g = g.NextInAEL;}}}};c.Clipper.prototype.InsertEdgeIntoAEL = function (a,\n  b) {if (null === this.m_ActiveEdges) a.PrevInAEL = null, a.NextInAEL = null, this.m_ActiveEdges = a;else if (null === b && this.E2InsertsBeforeE1(this.m_ActiveEdges, a)) a.PrevInAEL = null, a.NextInAEL = this.m_ActiveEdges, this.m_ActiveEdges = this.m_ActiveEdges.PrevInAEL = a;else {null === b && (b = this.m_ActiveEdges);for (; null !== b.NextInAEL && !this.E2InsertsBeforeE1(b.NextInAEL, a);) {b = b.NextInAEL;}a.NextInAEL = b.NextInAEL;null !== b.NextInAEL && (b.NextInAEL.PrevInAEL = a);a.PrevInAEL = b;b.NextInAEL = a;}};c.Clipper.prototype.E2InsertsBeforeE1 =\n  function (a, b) {return b.Curr.X === a.Curr.X ? b.Top.Y > a.Top.Y ? b.Top.X < c.Clipper.TopX(a, b.Top.Y) : a.Top.X > c.Clipper.TopX(b, a.Top.Y) : b.Curr.X < a.Curr.X;};c.Clipper.prototype.IsEvenOddFillType = function (a) {return a.PolyTyp === c.PolyType.ptSubject ? this.m_SubjFillType === c.PolyFillType.pftEvenOdd : this.m_ClipFillType === c.PolyFillType.pftEvenOdd;};c.Clipper.prototype.IsEvenOddAltFillType = function (a) {return a.PolyTyp === c.PolyType.ptSubject ? this.m_ClipFillType === c.PolyFillType.pftEvenOdd : this.m_SubjFillType === c.PolyFillType.pftEvenOdd;};\n  c.Clipper.prototype.IsContributing = function (a) {if (a.PolyTyp === c.PolyType.ptSubject) {var b = this.m_SubjFillType;var d = this.m_ClipFillType;} else b = this.m_ClipFillType, d = this.m_SubjFillType;switch (b) {case c.PolyFillType.pftEvenOdd:if (0 === a.WindDelta && 1 !== a.WindCnt) return !1;break;case c.PolyFillType.pftNonZero:if (1 !== Math.abs(a.WindCnt)) return !1;break;case c.PolyFillType.pftPositive:if (1 !== a.WindCnt) return !1;break;default:if (-1 !== a.WindCnt) return !1;}switch (this.m_ClipType) {case c.ClipType.ctIntersection:switch (d) {case c.PolyFillType.pftEvenOdd:case c.PolyFillType.pftNonZero:return 0 !==\n            a.WindCnt2;case c.PolyFillType.pftPositive:return 0 < a.WindCnt2;default:return 0 > a.WindCnt2;}case c.ClipType.ctUnion:switch (d) {case c.PolyFillType.pftEvenOdd:case c.PolyFillType.pftNonZero:return 0 === a.WindCnt2;case c.PolyFillType.pftPositive:return 0 >= a.WindCnt2;default:return 0 <= a.WindCnt2;}case c.ClipType.ctDifference:if (a.PolyTyp === c.PolyType.ptSubject) switch (d) {case c.PolyFillType.pftEvenOdd:case c.PolyFillType.pftNonZero:return 0 === a.WindCnt2;case c.PolyFillType.pftPositive:return 0 >= a.WindCnt2;\n          default:return 0 <= a.WindCnt2;} else switch (d) {case c.PolyFillType.pftEvenOdd:case c.PolyFillType.pftNonZero:return 0 !== a.WindCnt2;case c.PolyFillType.pftPositive:return 0 < a.WindCnt2;default:return 0 > a.WindCnt2;}case c.ClipType.ctXor:if (0 === a.WindDelta) switch (d) {case c.PolyFillType.pftEvenOdd:case c.PolyFillType.pftNonZero:return 0 === a.WindCnt2;case c.PolyFillType.pftPositive:return 0 >= a.WindCnt2;default:return 0 <= a.WindCnt2;}}return !0;};c.Clipper.prototype.SetWindingCount = function (a) {for (var b = a.PrevInAEL; null !==\n    b && (b.PolyTyp !== a.PolyTyp || 0 === b.WindDelta);) {b = b.PrevInAEL;}if (null === b) b = a.PolyTyp === c.PolyType.ptSubject ? this.m_SubjFillType : this.m_ClipFillType, a.WindCnt = 0 === a.WindDelta ? b === c.PolyFillType.pftNegative ? -1 : 1 : a.WindDelta, a.WindCnt2 = 0, b = this.m_ActiveEdges;else {if (0 === a.WindDelta && this.m_ClipType !== c.ClipType.ctUnion) a.WindCnt = 1;else if (this.IsEvenOddFillType(a)) {if (0 === a.WindDelta) {for (var d = !0, e = b.PrevInAEL; null !== e;) {e.PolyTyp === b.PolyTyp && 0 !== e.WindDelta && (d = !d), e = e.PrevInAEL;}a.WindCnt = d ? 0 : 1;} else a.WindCnt =\n        a.WindDelta;} else a.WindCnt = 0 > b.WindCnt * b.WindDelta ? 1 < Math.abs(b.WindCnt) ? 0 > b.WindDelta * a.WindDelta ? b.WindCnt : b.WindCnt + a.WindDelta : 0 === a.WindDelta ? 1 : a.WindDelta : 0 === a.WindDelta ? 0 > b.WindCnt ? b.WindCnt - 1 : b.WindCnt + 1 : 0 > b.WindDelta * a.WindDelta ? b.WindCnt : b.WindCnt + a.WindDelta;a.WindCnt2 = b.WindCnt2;b = b.NextInAEL;}if (this.IsEvenOddAltFillType(a)) for (; b !== a;) {0 !== b.WindDelta && (a.WindCnt2 = 0 === a.WindCnt2 ? 1 : 0), b = b.NextInAEL;} else for (; b !== a;) {a.WindCnt2 += b.WindDelta, b = b.NextInAEL;}};c.Clipper.prototype.AddEdgeToSEL =\n  function (a) {null === this.m_SortedEdges ? (this.m_SortedEdges = a, a.PrevInSEL = null, a.NextInSEL = null) : (a.NextInSEL = this.m_SortedEdges, a.PrevInSEL = null, this.m_SortedEdges = this.m_SortedEdges.PrevInSEL = a);};c.Clipper.prototype.PopEdgeFromSEL = function (a) {a.v = this.m_SortedEdges;if (null === a.v) return !1;var b = a.v;this.m_SortedEdges = a.v.NextInSEL;null !== this.m_SortedEdges && (this.m_SortedEdges.PrevInSEL = null);b.NextInSEL = null;b.PrevInSEL = null;return !0;};c.Clipper.prototype.CopyAELToSEL = function () {var a = this.m_ActiveEdges;\n    for (this.m_SortedEdges = a; null !== a;) {a.PrevInSEL = a.PrevInAEL, a = a.NextInSEL = a.NextInAEL;}};c.Clipper.prototype.SwapPositionsInSEL = function (a, b) {if (null !== a.NextInSEL || null !== a.PrevInSEL) if (null !== b.NextInSEL || null !== b.PrevInSEL) {if (a.NextInSEL === b) {var d = b.NextInSEL;null !== d && (d.PrevInSEL = a);var c = a.PrevInSEL;null !== c && (c.NextInSEL = b);b.PrevInSEL = c;b.NextInSEL = a;a.PrevInSEL = b;a.NextInSEL = d;} else b.NextInSEL === a ? (d = a.NextInSEL, null !== d && (d.PrevInSEL = b), c = b.PrevInSEL, null !== c && (c.NextInSEL = a), a.PrevInSEL =\n      c, a.NextInSEL = b, b.PrevInSEL = a, b.NextInSEL = d) : (d = a.NextInSEL, c = a.PrevInSEL, a.NextInSEL = b.NextInSEL, null !== a.NextInSEL && (a.NextInSEL.PrevInSEL = a), a.PrevInSEL = b.PrevInSEL, null !== a.PrevInSEL && (a.PrevInSEL.NextInSEL = a), b.NextInSEL = d, null !== b.NextInSEL && (b.NextInSEL.PrevInSEL = b), b.PrevInSEL = c, null !== b.PrevInSEL && (b.PrevInSEL.NextInSEL = b));null === a.PrevInSEL ? this.m_SortedEdges = a : null === b.PrevInSEL && (this.m_SortedEdges = b);}};c.Clipper.prototype.AddLocalMaxPoly = function (a, b, d) {this.AddOutPt(a, d);0 === b.WindDelta &&\n    this.AddOutPt(b, d);a.OutIdx === b.OutIdx ? (a.OutIdx = -1, b.OutIdx = -1) : a.OutIdx < b.OutIdx ? this.AppendPolygon(a, b) : this.AppendPolygon(b, a);};c.Clipper.prototype.AddLocalMinPoly = function (a, b, d) {if (c.ClipperBase.IsHorizontal(b) || a.Dx > b.Dx) {var e = this.AddOutPt(a, d);b.OutIdx = a.OutIdx;a.Side = c.EdgeSide.esLeft;b.Side = c.EdgeSide.esRight;var f = a;a = f.PrevInAEL === b ? b.PrevInAEL : f.PrevInAEL;} else e = this.AddOutPt(b, d), a.OutIdx = b.OutIdx, a.Side = c.EdgeSide.esRight, b.Side = c.EdgeSide.esLeft, f = b, a = f.PrevInAEL === a ? a.PrevInAEL :\n    f.PrevInAEL;if (null !== a && 0 <= a.OutIdx && a.Top.Y < d.Y && f.Top.Y < d.Y) {b = c.Clipper.TopX(a, d.Y);var g = c.Clipper.TopX(f, d.Y);b === g && 0 !== f.WindDelta && 0 !== a.WindDelta && c.ClipperBase.SlopesEqual5(new c.FPoint2(b, d.Y), a.Top, new c.FPoint2(g, d.Y), f.Top) && (d = this.AddOutPt(a, d), this.AddJoin(e, d, f.Top));}return e;};c.Clipper.prototype.AddOutPt = function (a, b) {if (0 > a.OutIdx) {var d = this.CreateOutRec();d.IsOpen = 0 === a.WindDelta;var e = new c.OutPt();d.Pts = e;e.Idx = d.Idx;e.Pt.X = b.X;e.Pt.Y = b.Y;c.use_xyz && (e.Pt.Z = b.Z);e.Next = e;e.Prev =\n      e;d.IsOpen || this.SetHoleState(a, d);a.OutIdx = d.Idx;} else {d = this.m_PolyOuts[a.OutIdx];var f = d.Pts,g = a.Side === c.EdgeSide.esLeft;if (g && c.FPoint.op_Equality(b, f.Pt)) return f;if (!g && c.FPoint.op_Equality(b, f.Prev.Pt)) return f.Prev;e = new c.OutPt();e.Idx = d.Idx;e.Pt.X = b.X;e.Pt.Y = b.Y;c.use_xyz && (e.Pt.Z = b.Z);e.Next = f;e.Prev = f.Prev;e.Prev.Next = e;f.Prev = e;g && (d.Pts = e);}return e;};c.Clipper.prototype.GetLastOutPt = function (a) {var b = this.m_PolyOuts[a.OutIdx];return a.Side === c.EdgeSide.esLeft ? b.Pts : b.Pts.Prev;};c.Clipper.prototype.SwapPoints =\n  function (a, b) {var d = new c.FPoint1(a.Value);a.Value.X = b.Value.X;a.Value.Y = b.Value.Y;c.use_xyz && (a.Value.Z = b.Value.Z);b.Value.X = d.X;b.Value.Y = d.Y;c.use_xyz && (b.Value.Z = d.Z);};c.Clipper.prototype.HorzSegmentsOverlap = function (a, b, d, c) {if (a > b) {var e = a;a = b;b = e;}d > c && (e = d, d = c, c = e);return a < c && d < b;};c.Clipper.prototype.SetHoleState = function (a, b) {for (var d = a.PrevInAEL, c = null; null !== d;) {0 <= d.OutIdx && 0 !== d.WindDelta && (null === c ? c = d : c.OutIdx === d.OutIdx && (c = null)), d = d.PrevInAEL;}null === c ? (b.FirstLeft = null, b.IsHole =\n    !1) : (b.FirstLeft = this.m_PolyOuts[c.OutIdx], b.IsHole = !b.FirstLeft.IsHole);};c.Clipper.prototype.GetDx = function (a, b) {return a.Y === b.Y ? c.ClipperBase.horizontal : (b.X - a.X) / (b.Y - a.Y);};c.Clipper.prototype.FirstIsBottomPt = function (a, b) {for (var d = a.Prev; c.FPoint.op_Equality(d.Pt, a.Pt) && d !== a;) {d = d.Prev;}var e = Math.abs(this.GetDx(a.Pt, d.Pt));for (d = a.Next; c.FPoint.op_Equality(d.Pt, a.Pt) && d !== a;) {d = d.Next;}var f = Math.abs(this.GetDx(a.Pt, d.Pt));for (d = b.Prev; c.FPoint.op_Equality(d.Pt, b.Pt) && d !== b;) {d = d.Prev;}var g = Math.abs(this.GetDx(b.Pt,\n    d.Pt));for (d = b.Next; c.FPoint.op_Equality(d.Pt, b.Pt) && d !== b;) {d = d.Next;}d = Math.abs(this.GetDx(b.Pt, d.Pt));return Math.max(e, f) === Math.max(g, d) && Math.min(e, f) === Math.min(g, d) ? 0 < this.Area(a) : e >= g && e >= d || f >= g && f >= d;};c.Clipper.prototype.GetBottomPt = function (a) {for (var b = null, d = a.Next; d !== a;) {d.Pt.Y > a.Pt.Y ? (a = d, b = null) : d.Pt.Y === a.Pt.Y && d.Pt.X <= a.Pt.X && (d.Pt.X < a.Pt.X ? (b = null, a = d) : d.Next !== a && d.Prev !== a && (b = d)), d = d.Next;}if (null !== b) for (; b !== d;) {for (this.FirstIsBottomPt(d, b) || (a = b), b = b.Next; c.FPoint.op_Inequality(b.Pt,\n      a.Pt);) {b = b.Next;}}return a;};c.Clipper.prototype.GetLowermostRec = function (a, b) {null === a.BottomPt && (a.BottomPt = this.GetBottomPt(a.Pts));null === b.BottomPt && (b.BottomPt = this.GetBottomPt(b.Pts));var d = a.BottomPt,c = b.BottomPt;return d.Pt.Y > c.Pt.Y ? a : d.Pt.Y < c.Pt.Y ? b : d.Pt.X < c.Pt.X ? a : d.Pt.X > c.Pt.X ? b : d.Next === d ? b : c.Next === c ? a : this.FirstIsBottomPt(d, c) ? a : b;};c.Clipper.prototype.OutRec1RightOfOutRec2 = function (a, b) {do {if (a = a.FirstLeft, a === b) return !0;} while (null !== a);return !1;};c.Clipper.prototype.GetOutRec = function (a) {for (a =\n    this.m_PolyOuts[a]; a !== this.m_PolyOuts[a.Idx];) {a = this.m_PolyOuts[a.Idx];}return a;};c.Clipper.prototype.AppendPolygon = function (a, b) {var d = this.m_PolyOuts[a.OutIdx],e = this.m_PolyOuts[b.OutIdx];var f = this.OutRec1RightOfOutRec2(d, e) ? e : this.OutRec1RightOfOutRec2(e, d) ? d : this.GetLowermostRec(d, e);var g = d.Pts,h = g.Prev,l = e.Pts,k = l.Prev;a.Side === c.EdgeSide.esLeft ? b.Side === c.EdgeSide.esLeft ? (this.ReversePolyPtLinks(l), l.Next = g, g.Prev = l, h.Next = k, k.Prev = h, d.Pts = k) : (k.Next = g, g.Prev = k, l.Prev = h, h.Next = l, d.Pts = l) :\n    b.Side === c.EdgeSide.esRight ? (this.ReversePolyPtLinks(l), h.Next = k, k.Prev = h, l.Next = g, g.Prev = l) : (h.Next = l, l.Prev = h, g.Prev = k, k.Next = g);d.BottomPt = null;f === e && (e.FirstLeft !== d && (d.FirstLeft = e.FirstLeft), d.IsHole = e.IsHole);e.Pts = null;e.BottomPt = null;e.FirstLeft = d;f = a.OutIdx;g = b.OutIdx;a.OutIdx = -1;b.OutIdx = -1;for (h = this.m_ActiveEdges; null !== h;) {if (h.OutIdx === g) {h.OutIdx = f;h.Side = a.Side;break;}h = h.NextInAEL;}e.Idx = d.Idx;};c.Clipper.prototype.ReversePolyPtLinks = function (a) {if (null !== a) {var b = a;do {var d = b.Next;\n        b.Next = b.Prev;b = b.Prev = d;} while (b !== a);}};c.Clipper.SwapSides = function (a, b) {var d = a.Side;a.Side = b.Side;b.Side = d;};c.Clipper.SwapPolyIndexes = function (a, b) {var d = a.OutIdx;a.OutIdx = b.OutIdx;b.OutIdx = d;};c.Clipper.prototype.IntersectEdges = function (a, b, d) {var e = 0 <= a.OutIdx,f = 0 <= b.OutIdx;c.use_xyz && this.SetZ(d, a, b);if (!c.use_lines || 0 !== a.WindDelta && 0 !== b.WindDelta) {if (a.PolyTyp === b.PolyTyp) {if (this.IsEvenOddFillType(a)) {var g = a.WindCnt;a.WindCnt = b.WindCnt;b.WindCnt = g;} else a.WindCnt = 0 === a.WindCnt + b.WindDelta ?\n        -a.WindCnt : a.WindCnt + b.WindDelta, b.WindCnt = 0 === b.WindCnt - a.WindDelta ? -b.WindCnt : b.WindCnt - a.WindDelta;} else this.IsEvenOddFillType(b) ? a.WindCnt2 = 0 === a.WindCnt2 ? 1 : 0 : a.WindCnt2 += b.WindDelta, this.IsEvenOddFillType(a) ? b.WindCnt2 = 0 === b.WindCnt2 ? 1 : 0 : b.WindCnt2 -= a.WindDelta;if (a.PolyTyp === c.PolyType.ptSubject) {var h = this.m_SubjFillType;var l = this.m_ClipFillType;} else h = this.m_ClipFillType, l = this.m_SubjFillType;if (b.PolyTyp === c.PolyType.ptSubject) {var k = this.m_SubjFillType;g = this.m_ClipFillType;} else k = this.m_ClipFillType,\n      g = this.m_SubjFillType;switch (h) {case c.PolyFillType.pftPositive:h = a.WindCnt;break;case c.PolyFillType.pftNegative:h = -a.WindCnt;break;default:h = Math.abs(a.WindCnt);}switch (k) {case c.PolyFillType.pftPositive:k = b.WindCnt;break;case c.PolyFillType.pftNegative:k = -b.WindCnt;break;default:k = Math.abs(b.WindCnt);}if (e && f) 0 !== h && 1 !== h || 0 !== k && 1 !== k || a.PolyTyp !== b.PolyTyp && this.m_ClipType !== c.ClipType.ctXor ? this.AddLocalMaxPoly(a, b, d) : (this.AddOutPt(a, d), this.AddOutPt(b, d), c.Clipper.SwapSides(a, b), c.Clipper.SwapPolyIndexes(a,\n      b));else if (e) {if (0 === k || 1 === k) this.AddOutPt(a, d), c.Clipper.SwapSides(a, b), c.Clipper.SwapPolyIndexes(a, b);} else if (f) {if (0 === h || 1 === h) this.AddOutPt(b, d), c.Clipper.SwapSides(a, b), c.Clipper.SwapPolyIndexes(a, b);} else if (!(0 !== h && 1 !== h || 0 !== k && 1 !== k)) {switch (l) {case c.PolyFillType.pftPositive:e = a.WindCnt2;break;case c.PolyFillType.pftNegative:e = -a.WindCnt2;break;default:e = Math.abs(a.WindCnt2);}switch (g) {case c.PolyFillType.pftPositive:f = b.WindCnt2;break;case c.PolyFillType.pftNegative:f = -b.WindCnt2;break;\n          default:f = Math.abs(b.WindCnt2);}if (a.PolyTyp !== b.PolyTyp) this.AddLocalMinPoly(a, b, d);else if (1 === h && 1 === k) switch (this.m_ClipType) {case c.ClipType.ctIntersection:0 < e && 0 < f && this.AddLocalMinPoly(a, b, d);break;case c.ClipType.ctUnion:0 >= e && 0 >= f && this.AddLocalMinPoly(a, b, d);break;case c.ClipType.ctDifference:(a.PolyTyp === c.PolyType.ptClip && 0 < e && 0 < f || a.PolyTyp === c.PolyType.ptSubject && 0 >= e && 0 >= f) && this.AddLocalMinPoly(a, b, d);break;case c.ClipType.ctXor:this.AddLocalMinPoly(a, b, d);} else c.Clipper.SwapSides(a,\n        b);}} else if (0 !== a.WindDelta || 0 !== b.WindDelta) a.PolyTyp === b.PolyTyp && a.WindDelta !== b.WindDelta && this.m_ClipType === c.ClipType.ctUnion ? 0 === a.WindDelta ? f && (this.AddOutPt(a, d), e && (a.OutIdx = -1)) : e && (this.AddOutPt(b, d), f && (b.OutIdx = -1)) : a.PolyTyp !== b.PolyTyp && (0 !== a.WindDelta || 1 !== Math.abs(b.WindCnt) || this.m_ClipType === c.ClipType.ctUnion && 0 !== b.WindCnt2 ? 0 !== b.WindDelta || 1 !== Math.abs(a.WindCnt) || this.m_ClipType === c.ClipType.ctUnion && 0 !== a.WindCnt2 || (this.AddOutPt(b, d), f && (b.OutIdx = -1)) : (this.AddOutPt(a, d),\n    e && (a.OutIdx = -1)));};c.Clipper.prototype.DeleteFromSEL = function (a) {var b = a.PrevInSEL,d = a.NextInSEL;if (null !== b || null !== d || a === this.m_SortedEdges) null !== b ? b.NextInSEL = d : this.m_SortedEdges = d, null !== d && (d.PrevInSEL = b), a.NextInSEL = null, a.PrevInSEL = null;};c.Clipper.prototype.ProcessHorizontals = function () {for (var a = {}; this.PopEdgeFromSEL(a);) {this.ProcessHorizontal(a.v);}};c.Clipper.prototype.GetHorzDirection = function (a, b) {a.Bot.X < a.Top.X ? (b.Left = a.Bot.X, b.Right = a.Top.X, b.Dir = c.Direction.dLeftToRight) : (b.Left =\n    a.Top.X, b.Right = a.Bot.X, b.Dir = c.Direction.dRightToLeft);};c.Clipper.prototype.ProcessHorizontal = function (a) {var b,d = { Dir: null, Left: null, Right: null };this.GetHorzDirection(a, d);var e = d.Dir,f = d.Left;d = d.Right;for (var g = 0 === a.WindDelta, h = a, l = null; null !== h.NextInLML && c.ClipperBase.IsHorizontal(h.NextInLML);) {h = h.NextInLML;}null === h.NextInLML && (l = this.GetMaximaPair(h));var k = this.m_Maxima;if (null !== k) if (e === c.Direction.dLeftToRight) {for (; null !== k && k.X <= a.Bot.X;) {k = k.Next;}null !== k && k.X >= h.Top.X && (k = null);} else {for (; null !==\n      k.Next && k.Next.X < a.Bot.X;) {k = k.Next;}k.X <= h.Top.X && (k = null);}for (var m = null;;) {for (var p = a === h, n = this.GetNextInAEL(a, e); null !== n;) {if (null !== k) if (e === c.Direction.dLeftToRight) for (; null !== k && k.X < n.Curr.X;) {0 <= a.OutIdx && !g && this.AddOutPt(a, new c.FPoint2(k.X, a.Bot.Y)), k = k.Next;} else for (; null !== k && k.X > n.Curr.X;) {0 <= a.OutIdx && !g && this.AddOutPt(a, new c.FPoint2(k.X, a.Bot.Y)), k = k.Prev;}if (e === c.Direction.dLeftToRight && n.Curr.X > d || e === c.Direction.dRightToLeft && n.Curr.X < f) break;if (n.Curr.X === a.Top.X && null !== a.NextInLML &&\n        n.Dx < a.NextInLML.Dx) break;if (0 <= a.OutIdx && !g) {c.use_xyz && (e === c.Direction.dLeftToRight ? this.SetZ(n.Curr, a, n) : this.SetZ(n.Curr, n, a));m = this.AddOutPt(a, n.Curr);for (b = this.m_SortedEdges; null !== b;) {if (0 <= b.OutIdx && this.HorzSegmentsOverlap(a.Bot.X, a.Top.X, b.Bot.X, b.Top.X)) {var q = this.GetLastOutPt(b);this.AddJoin(q, m, b.Top);}b = b.NextInSEL;}this.AddGhostJoin(m, a.Bot);}if (n === l && p) {0 <= a.OutIdx && this.AddLocalMaxPoly(a, l, a.Top);this.DeleteFromAEL(a);this.DeleteFromAEL(l);return;}e === c.Direction.dLeftToRight ? (q =\n        new c.FPoint2(n.Curr.X, a.Curr.Y), this.IntersectEdges(a, n, q)) : (q = new c.FPoint2(n.Curr.X, a.Curr.Y), this.IntersectEdges(n, a, q));q = this.GetNextInAEL(n, e);this.SwapPositionsInAEL(a, n);n = q;}if (null === a.NextInLML || !c.ClipperBase.IsHorizontal(a.NextInLML)) break;a = this.UpdateEdgeIntoAEL(a);0 <= a.OutIdx && this.AddOutPt(a, a.Bot);d = { Dir: e, Left: f, Right: d };this.GetHorzDirection(a, d);e = d.Dir;f = d.Left;d = d.Right;}if (0 <= a.OutIdx && null === m) {m = this.GetLastOutPt(a);for (b = this.m_SortedEdges; null !== b;) {0 <= b.OutIdx && this.HorzSegmentsOverlap(a.Bot.X,\n        a.Top.X, b.Bot.X, b.Top.X) && (q = this.GetLastOutPt(b), this.AddJoin(q, m, b.Top)), b = b.NextInSEL;}this.AddGhostJoin(m, a.Top);}null !== a.NextInLML ? 0 <= a.OutIdx ? (m = this.AddOutPt(a, a.Top), a = this.UpdateEdgeIntoAEL(a), 0 !== a.WindDelta && (e = a.PrevInAEL, q = a.NextInAEL, null !== e && e.Curr.X === a.Bot.X && e.Curr.Y === a.Bot.Y && 0 === e.WindDelta && 0 <= e.OutIdx && e.Curr.Y > e.Top.Y && c.ClipperBase.SlopesEqual3(a, e) ? (q = this.AddOutPt(e, a.Bot), this.AddJoin(m, q, a.Top)) : null !== q && q.Curr.X === a.Bot.X && q.Curr.Y === a.Bot.Y && 0 !== q.WindDelta && 0 <= q.OutIdx &&\n    q.Curr.Y > q.Top.Y && c.ClipperBase.SlopesEqual3(a, q) && (q = this.AddOutPt(q, a.Bot), this.AddJoin(m, q, a.Top)))) : this.UpdateEdgeIntoAEL(a) : (0 <= a.OutIdx && this.AddOutPt(a, a.Top), this.DeleteFromAEL(a));};c.Clipper.prototype.GetNextInAEL = function (a, b) {return b === c.Direction.dLeftToRight ? a.NextInAEL : a.PrevInAEL;};c.Clipper.prototype.IsMinima = function (a) {return null !== a && a.Prev.NextInLML !== a && a.Next.NextInLML !== a;};c.Clipper.prototype.IsMaxima = function (a, b) {return null !== a && a.Top.Y === b && null === a.NextInLML;};c.Clipper.prototype.IsIntermediate =\n  function (a, b) {return a.Top.Y === b && null !== a.NextInLML;};c.Clipper.prototype.GetMaximaPair = function (a) {return c.FPoint.op_Equality(a.Next.Top, a.Top) && null === a.Next.NextInLML ? a.Next : c.FPoint.op_Equality(a.Prev.Top, a.Top) && null === a.Prev.NextInLML ? a.Prev : null;};c.Clipper.prototype.GetMaximaPairEx = function (a) {a = this.GetMaximaPair(a);return null === a || a.OutIdx === c.ClipperBase.Skip || a.NextInAEL === a.PrevInAEL && !c.ClipperBase.IsHorizontal(a) ? null : a;};c.Clipper.prototype.ProcessIntersections = function (a) {if (null ===\n    this.m_ActiveEdges) return !0;try {this.BuildIntersectList(a);if (0 === this.m_IntersectList.length) return !0;if (1 === this.m_IntersectList.length || this.FixupIntersectionOrder()) this.ProcessIntersectList();else return !1;} catch (b) {this.m_SortedEdges = null, this.m_IntersectList.length = 0, c.Error(\"ProcessIntersections error\");}this.m_SortedEdges = null;return !0;};c.Clipper.prototype.BuildIntersectList = function (a) {if (null !== this.m_ActiveEdges) {var b = this.m_ActiveEdges;for (this.m_SortedEdges = b; null !== b;) {b.PrevInSEL = b.PrevInAEL,\n        b.NextInSEL = b.NextInAEL, b.Curr.X = c.Clipper.TopX(b, a), b = b.NextInAEL;}for (var d = !0; d && null !== this.m_SortedEdges;) {d = !1;for (b = this.m_SortedEdges; null !== b.NextInSEL;) {var e = b.NextInSEL,f = new c.FPoint0();b.Curr.X > e.Curr.X ? (this.IntersectPoint(b, e, f), f.Y < a && (f = new c.FPoint2(c.Clipper.TopX(b, a), a)), d = new c.IntersectNode(), d.Edge1 = b, d.Edge2 = e, d.Pt.X = f.X, d.Pt.Y = f.Y, c.use_xyz && (d.Pt.Z = f.Z), this.m_IntersectList.push(d), this.SwapPositionsInSEL(b, e), d = !0) : b = e;}if (null !== b.PrevInSEL) b.PrevInSEL.NextInSEL = null;else break;}this.m_SortedEdges =\n      null;}};c.Clipper.prototype.EdgesAdjacent = function (a) {return a.Edge1.NextInSEL === a.Edge2 || a.Edge1.PrevInSEL === a.Edge2;};c.Clipper.IntersectNodeSort = function (a, b) {return b.Pt.Y - a.Pt.Y;};c.Clipper.prototype.FixupIntersectionOrder = function () {this.m_IntersectList.sort(this.m_IntersectNodeComparer);this.CopyAELToSEL();for (var a = this.m_IntersectList.length, b = 0; b < a; b++) {if (!this.EdgesAdjacent(this.m_IntersectList[b])) {for (var d = b + 1; d < a && !this.EdgesAdjacent(this.m_IntersectList[d]);) {d++;}if (d === a) return !1;var c =\n        this.m_IntersectList[b];this.m_IntersectList[b] = this.m_IntersectList[d];this.m_IntersectList[d] = c;}this.SwapPositionsInSEL(this.m_IntersectList[b].Edge1, this.m_IntersectList[b].Edge2);}return !0;};c.Clipper.prototype.ProcessIntersectList = function () {for (var a = 0, b = this.m_IntersectList.length; a < b; a++) {var d = this.m_IntersectList[a];this.IntersectEdges(d.Edge1, d.Edge2, d.Pt);this.SwapPositionsInAEL(d.Edge1, d.Edge2);}this.m_IntersectList.length = 0;};c.Clipper.TopX = function (a, b) {return b === a.Top.Y ? a.Top.X : a.Bot.X +\n    a.Dx * (b - a.Bot.Y);};c.Clipper.prototype.IntersectPoint = function (a, b, d) {d.X = 0;d.Y = 0;if (a.Dx === b.Dx) d.Y = a.Curr.Y, d.X = c.Clipper.TopX(a, d.Y);else {if (0 === a.Delta.X) {if (d.X = a.Bot.X, c.ClipperBase.IsHorizontal(b)) d.Y = b.Bot.Y;else {var e = b.Bot.Y - b.Bot.X / b.Dx;d.Y = d.X / b.Dx + e;}} else if (0 === b.Delta.X) {if (d.X = b.Bot.X, c.ClipperBase.IsHorizontal(a)) d.Y = a.Bot.Y;else {var f = a.Bot.Y - a.Bot.X / a.Dx;d.Y = d.X / a.Dx + f;}} else {f = a.Bot.X - a.Bot.Y * a.Dx;e = b.Bot.X - b.Bot.Y * b.Dx;var g = (e - f) / (a.Dx - b.Dx);d.Y = g;d.X = Math.abs(a.Dx) < Math.abs(b.Dx) ?\n        a.Dx * g + f : b.Dx * g + e;}if (d.Y < a.Top.Y || d.Y < b.Top.Y) {if (a.Top.Y > b.Top.Y) return d.Y = a.Top.Y, d.X = c.Clipper.TopX(b, a.Top.Y), d.X < a.Top.X;d.Y = b.Top.Y;d.X = Math.abs(a.Dx) < Math.abs(b.Dx) ? c.Clipper.TopX(a, d.Y) : c.Clipper.TopX(b, d.Y);}d.Y > a.Curr.Y && (d.Y = a.Curr.Y, d.X = Math.abs(a.Dx) > Math.abs(b.Dx) ? c.Clipper.TopX(b, d.Y) : c.Clipper.TopX(a, d.Y));}};c.Clipper.prototype.ProcessEdgesAtTopOfScanbeam = function (a) {for (var b, d, e = this.m_ActiveEdges; null !== e;) {if (d = this.IsMaxima(e, a)) d = this.GetMaximaPairEx(e), d = null === d || !c.ClipperBase.IsHorizontal(d);\n      if (d) this.StrictlySimple && this.InsertMaxima(e.Top.X), b = e.PrevInAEL, this.DoMaxima(e), e = null === b ? this.m_ActiveEdges : b.NextInAEL;else {this.IsIntermediate(e, a) && c.ClipperBase.IsHorizontal(e.NextInLML) ? (e = this.UpdateEdgeIntoAEL(e), 0 <= e.OutIdx && this.AddOutPt(e, e.Bot), this.AddEdgeToSEL(e)) : (e.Curr.X = c.Clipper.TopX(e, a), e.Curr.Y = a);c.use_xyz && (e.Curr.Z = e.Top.Y === a ? e.Top.Z : e.Bot.Y === a ? e.Bot.Z : 0);if (this.StrictlySimple && (b = e.PrevInAEL, 0 <= e.OutIdx && 0 !== e.WindDelta && null !== b && 0 <= b.OutIdx && b.Curr.X === e.Curr.X &&\n        0 !== b.WindDelta)) {var f = new c.FPoint1(e.Curr);c.use_xyz && this.SetZ(f, b, e);d = this.AddOutPt(b, f);b = this.AddOutPt(e, f);this.AddJoin(d, b, f);}e = e.NextInAEL;}}this.ProcessHorizontals();this.m_Maxima = null;for (e = this.m_ActiveEdges; null !== e;) {this.IsIntermediate(e, a) && (d = null, 0 <= e.OutIdx && (d = this.AddOutPt(e, e.Top)), e = this.UpdateEdgeIntoAEL(e), b = e.PrevInAEL, f = e.NextInAEL, null !== b && b.Curr.X === e.Bot.X && b.Curr.Y === e.Bot.Y && null !== d && 0 <= b.OutIdx && b.Curr.Y === b.Top.Y && c.ClipperBase.SlopesEqual5(e.Curr, e.Top, b.Curr,\n      b.Top) && 0 !== e.WindDelta && 0 !== b.WindDelta ? (b = this.AddOutPt(ePrev2, e.Bot), this.AddJoin(d, b, e.Top)) : null !== f && f.Curr.X === e.Bot.X && f.Curr.Y === e.Bot.Y && null !== d && 0 <= f.OutIdx && f.Curr.Y === f.Top.Y && c.ClipperBase.SlopesEqual5(e.Curr, e.Top, f.Curr, f.Top) && 0 !== e.WindDelta && 0 !== f.WindDelta && (b = this.AddOutPt(f, e.Bot), this.AddJoin(d, b, e.Top))), e = e.NextInAEL;}};c.Clipper.prototype.DoMaxima = function (a) {var b = this.GetMaximaPairEx(a);if (null === b) 0 <= a.OutIdx && this.AddOutPt(a, a.Top), this.DeleteFromAEL(a);else {for (var d =\n      a.NextInAEL; null !== d && d !== b;) {this.IntersectEdges(a, d, a.Top), this.SwapPositionsInAEL(a, d), d = a.NextInAEL;}-1 === a.OutIdx && -1 === b.OutIdx ? (this.DeleteFromAEL(a), this.DeleteFromAEL(b)) : 0 <= a.OutIdx && 0 <= b.OutIdx ? (0 <= a.OutIdx && this.AddLocalMaxPoly(a, b, a.Top), this.DeleteFromAEL(a), this.DeleteFromAEL(b)) : c.use_lines && 0 === a.WindDelta ? (0 <= a.OutIdx && (this.AddOutPt(a, a.Top), a.OutIdx = c.ClipperBase.Unassigned), this.DeleteFromAEL(a), 0 <= b.OutIdx && (this.AddOutPt(b, a.Top), b.OutIdx = c.ClipperBase.Unassigned), this.DeleteFromAEL(b)) :\n      c.Error(\"DoMaxima error\");}};c.Clipper.ReversePaths = function (a) {for (var b = 0, d = a.length; b < d; b++) {a[b].reverse();}};c.Clipper.Orientation = function (a) {return 0 <= c.Clipper.Area(a);};c.Clipper.prototype.PointCount = function (a) {if (null === a) return 0;var b = 0,d = a;do {b++, d = d.Next;} while (d !== a);return b;};c.Clipper.prototype.BuildResult = function (a) {c.Clear(a);for (var b = 0, d = this.m_PolyOuts.length; b < d; b++) {var e = this.m_PolyOuts[b];if (null !== e.Pts) {e = e.Pts.Prev;var f = this.PointCount(e);if (!(2 > f)) {for (var g = Array(f), h =\n          0; h < f; h++) {g[h] = e.Pt, e = e.Prev;}a.push(g);}}}};c.Clipper.prototype.BuildResult2 = function (a) {a.Clear();for (var b = 0, d = this.m_PolyOuts.length; b < d; b++) {var e = this.m_PolyOuts[b];var f = this.PointCount(e.Pts);if (!(e.IsOpen && 2 > f || !e.IsOpen && 3 > f)) {this.FixHoleLinkage(e);var g = new c.PolyNode();a.m_AllPolys.push(g);e.PolyNode = g;g.m_polygon.length = f;e = e.Pts.Prev;for (var h = 0; h < f; h++) {g.m_polygon[h] = e.Pt, e = e.Prev;}}}b = 0;for (d = this.m_PolyOuts.length; b < d; b++) {e = this.m_PolyOuts[b], null !== e.PolyNode && (e.IsOpen ? (e.PolyNode.IsOpen =\n      !0, a.AddChild(e.PolyNode)) : null !== e.FirstLeft && null !== e.FirstLeft.PolyNode ? e.FirstLeft.PolyNode.AddChild(e.PolyNode) : a.AddChild(e.PolyNode));}};c.Clipper.prototype.FixupOutPolyline = function (a) {for (var b = a.Pts, d = b.Prev; b !== d;) {if (b = b.Next, c.FPoint.op_Equality(b.Pt, b.Prev.Pt)) {b === d && (d = b.Prev);var e = b.Prev;e.Next = b.Next;b = b.Next.Prev = e;}}b === b.Prev && (a.Pts = null);};c.Clipper.prototype.FixupOutPolygon = function (a) {var b = null;a.BottomPt = null;for (var d = a.Pts, e = this.PreserveCollinear || this.StrictlySimple;;) {if (d.Prev ===\n      d || d.Prev === d.Next) {a.Pts = null;return;}if (c.FPoint.op_Equality(d.Pt, d.Next.Pt) || c.FPoint.op_Equality(d.Pt, d.Prev.Pt) || c.ClipperBase.SlopesEqual4(d.Prev.Pt, d.Pt, d.Next.Pt) && (!e || !this.Pt2IsBetweenPt1AndPt3(d.Prev.Pt, d.Pt, d.Next.Pt))) b = null, d.Prev.Next = d.Next, d = d.Next.Prev = d.Prev;else if (d === b) break;else null === b && (b = d), d = d.Next;}a.Pts = d;};c.Clipper.prototype.DupOutPt = function (a, b) {var d = new c.OutPt();d.Pt.X = a.Pt.X;d.Pt.Y = a.Pt.Y;c.use_xyz && (d.Pt.Z = a.Pt.Z);d.Idx = a.Idx;b ? (d.Next = a.Next, d.Prev = a, a.Next.Prev =\n    d, a.Next = d) : (d.Prev = a.Prev, d.Next = a, a.Prev.Next = d, a.Prev = d);return d;};c.Clipper.prototype.GetOverlap = function (a, b, d, c, f) {a < b ? d < c ? (f.Left = Math.max(a, d), f.Right = Math.min(b, c)) : (f.Left = Math.max(a, c), f.Right = Math.min(b, d)) : d < c ? (f.Left = Math.max(b, d), f.Right = Math.min(a, c)) : (f.Left = Math.max(b, c), f.Right = Math.min(a, d));return f.Left < f.Right;};c.Clipper.prototype.JoinHorz = function (a, b, d, e, f, g) {var h = a.Pt.X > b.Pt.X ? c.Direction.dRightToLeft : c.Direction.dLeftToRight;e = d.Pt.X > e.Pt.X ? c.Direction.dRightToLeft : c.Direction.dLeftToRight;\n    if (h === e) return !1;if (h === c.Direction.dLeftToRight) {for (; a.Next.Pt.X <= f.X && a.Next.Pt.X >= a.Pt.X && a.Next.Pt.Y === f.Y;) {a = a.Next;}g && a.Pt.X !== f.X && (a = a.Next);b = this.DupOutPt(a, !g);c.FPoint.op_Inequality(b.Pt, f) && (a = b, a.Pt.X = f.X, a.Pt.Y = f.Y, c.use_xyz && (a.Pt.Z = f.Z), b = this.DupOutPt(a, !g));} else {for (; a.Next.Pt.X >= f.X && a.Next.Pt.X <= a.Pt.X && a.Next.Pt.Y === f.Y;) {a = a.Next;}g || a.Pt.X === f.X || (a = a.Next);b = this.DupOutPt(a, g);c.FPoint.op_Inequality(b.Pt, f) && (a = b, a.Pt.X = f.X, a.Pt.Y = f.Y, c.use_xyz && (a.Pt.Z = f.Z), b = this.DupOutPt(a,\n      g));}if (e === c.Direction.dLeftToRight) {for (; d.Next.Pt.X <= f.X && d.Next.Pt.X >= d.Pt.X && d.Next.Pt.Y === f.Y;) {d = d.Next;}g && d.Pt.X !== f.X && (d = d.Next);e = this.DupOutPt(d, !g);c.FPoint.op_Inequality(e.Pt, f) && (d = e, d.Pt.X = f.X, d.Pt.Y = f.Y, c.use_xyz && (d.Pt.Z = f.Z), e = this.DupOutPt(d, !g));} else {for (; d.Next.Pt.X >= f.X && d.Next.Pt.X <= d.Pt.X && d.Next.Pt.Y === f.Y;) {d = d.Next;}g || d.Pt.X === f.X || (d = d.Next);e = this.DupOutPt(d, g);c.FPoint.op_Inequality(e.Pt, f) && (d = e, d.Pt.X = f.X, d.Pt.Y = f.Y, c.use_xyz && (d.Pt.Z = f.Z), e = this.DupOutPt(d, g));}h === c.Direction.dLeftToRight ===\n    g ? (a.Prev = d, d.Next = a, b.Next = e, e.Prev = b) : (a.Next = d, d.Prev = a, b.Prev = e, e.Next = b);return !0;};c.Clipper.prototype.JoinPoints = function (a, b, d) {var e = a.OutPt1,f;new c.OutPt();var g = a.OutPt2,h;new c.OutPt();if ((h = a.OutPt1.Pt.Y === a.OffPt.Y) && c.FPoint.op_Equality(a.OffPt, a.OutPt1.Pt) && c.FPoint.op_Equality(a.OffPt, a.OutPt2.Pt)) {if (b !== d) return !1;for (f = a.OutPt1.Next; f !== e && c.FPoint.op_Equality(f.Pt, a.OffPt);) {f = f.Next;}f = f.Pt.Y > a.OffPt.Y;for (h = a.OutPt2.Next; h !== g && c.FPoint.op_Equality(h.Pt, a.OffPt);) {h = h.Next;}if (f ===\n      h.Pt.Y > a.OffPt.Y) return !1;f ? (f = this.DupOutPt(e, !1), h = this.DupOutPt(g, !0), e.Prev = g, g.Next = e, f.Next = h, h.Prev = f) : (f = this.DupOutPt(e, !0), h = this.DupOutPt(g, !1), e.Next = g, g.Prev = e, f.Prev = h, h.Next = f);a.OutPt1 = e;a.OutPt2 = f;return !0;}if (h) {for (f = e; e.Prev.Pt.Y === e.Pt.Y && e.Prev !== f && e.Prev !== g;) {e = e.Prev;}for (; f.Next.Pt.Y === f.Pt.Y && f.Next !== e && f.Next !== g;) {f = f.Next;}if (f.Next === e || f.Next === g) return !1;for (h = g; g.Prev.Pt.Y === g.Pt.Y && g.Prev !== h && g.Prev !== f;) {g = g.Prev;}for (; h.Next.Pt.Y === h.Pt.Y && h.Next !== g && h.Next !== e;) {h =\n        h.Next;}if (h.Next === g || h.Next === e) return !1;d = { Left: null, Right: null };if (!this.GetOverlap(e.Pt.X, f.Pt.X, g.Pt.X, h.Pt.X, d)) return !1;b = d.Left;var l = d.Right;d = new c.FPoint0();e.Pt.X >= b && e.Pt.X <= l ? (d.X = e.Pt.X, d.Y = e.Pt.Y, c.use_xyz && (d.Z = e.Pt.Z), b = e.Pt.X > f.Pt.X) : g.Pt.X >= b && g.Pt.X <= l ? (d.X = g.Pt.X, d.Y = g.Pt.Y, c.use_xyz && (d.Z = g.Pt.Z), b = g.Pt.X > h.Pt.X) : f.Pt.X >= b && f.Pt.X <= l ? (d.X = f.Pt.X, d.Y = f.Pt.Y, c.use_xyz && (d.Z = f.Pt.Z), b = f.Pt.X > e.Pt.X) : (d.X = h.Pt.X, d.Y = h.Pt.Y, c.use_xyz && (d.Z = h.Pt.Z), b = h.Pt.X > g.Pt.X);a.OutPt1 = e;a.OutPt2 =\n      g;return this.JoinHorz(e, f, g, h, d, b);}for (f = e.Next; c.FPoint.op_Equality(f.Pt, e.Pt) && f !== e;) {f = f.Next;}if (l = f.Pt.Y > e.Pt.Y || !c.ClipperBase.SlopesEqual4(e.Pt, f.Pt, a.OffPt)) {for (f = e.Prev; c.FPoint.op_Equality(f.Pt, e.Pt) && f !== e;) {f = f.Prev;}if (f.Pt.Y > e.Pt.Y || !c.ClipperBase.SlopesEqual4(e.Pt, f.Pt, a.OffPt)) return !1;}for (h = g.Next; c.FPoint.op_Equality(h.Pt, g.Pt) && h !== g;) {h = h.Next;}var k = h.Pt.Y > g.Pt.Y || !c.ClipperBase.SlopesEqual4(g.Pt, h.Pt, a.OffPt);if (k) {for (h = g.Prev; c.FPoint.op_Equality(h.Pt, g.Pt) && h !== g;) {h = h.Prev;}if (h.Pt.Y >\n      g.Pt.Y || !c.ClipperBase.SlopesEqual4(g.Pt, h.Pt, a.OffPt)) return !1;}if (f === e || h === g || f === h || b === d && l === k) return !1;l ? (f = this.DupOutPt(e, !1), h = this.DupOutPt(g, !0), e.Prev = g, g.Next = e, f.Next = h, h.Prev = f) : (f = this.DupOutPt(e, !0), h = this.DupOutPt(g, !1), e.Next = g, g.Prev = e, f.Prev = h, h.Next = f);a.OutPt1 = e;a.OutPt2 = f;return !0;};c.Clipper.GetBounds = function (a) {for (var b = 0, d = a.length; b < d && 0 === a[b].length;) {b++;}if (b === d) return new c.FRect(0, 0, 0, 0);var e = new c.FRect();e.left = a[b][0].X;e.right = e.left;e.top = a[b][0].Y;for (e.bottom =\n    e.top; b < d; b++) {for (var f = 0, g = a[b].length; f < g; f++) {a[b][f].X < e.left ? e.left = a[b][f].X : a[b][f].X > e.right && (e.right = a[b][f].X), a[b][f].Y < e.top ? e.top = a[b][f].Y : a[b][f].Y > e.bottom && (e.bottom = a[b][f].Y);}}return e;};c.Clipper.prototype.GetBounds2 = function (a) {var b = a,d = new c.FRect();d.left = a.Pt.X;d.right = a.Pt.X;d.top = a.Pt.Y;d.bottom = a.Pt.Y;for (a = a.Next; a !== b;) {a.Pt.X < d.left && (d.left = a.Pt.X), a.Pt.X > d.right && (d.right = a.Pt.X), a.Pt.Y < d.top && (d.top = a.Pt.Y), a.Pt.Y > d.bottom && (d.bottom = a.Pt.Y), a = a.Next;}return d;};c.Clipper.PointInPolygon =\n  function (a, b) {var c = 0,e = b.length;if (3 > e) return 0;for (var f = b[0], g = 1; g <= e; ++g) {var h = g === e ? b[0] : b[g];if (h.Y === a.Y && (h.X === a.X || f.Y === a.Y && h.X > a.X === f.X < a.X)) return -1;if (f.Y < a.Y !== h.Y < a.Y) if (f.X >= a.X) {if (h.X > a.X) c = 1 - c;else {var l = (f.X - a.X) * (h.Y - a.Y) - (h.X - a.X) * (f.Y - a.Y);if (0 === l) return -1;0 < l === h.Y > f.Y && (c = 1 - c);}} else if (h.X > a.X) {l = (f.X - a.X) * (h.Y - a.Y) - (h.X - a.X) * (f.Y - a.Y);if (0 === l) return -1;0 < l === h.Y > f.Y && (c = 1 - c);}f = h;}return c;};c.Clipper.prototype.PointInPolygon = function (a, b) {var c = 0,e = b,f = a.X,g = a.Y;var h = b.Pt.X;\n    var l = b.Pt.Y;do {b = b.Next;var k = b.Pt.X,m = b.Pt.Y;if (m === g && (k === f || l === g && k > f === h < f)) return -1;if (l < g !== m < g) if (h >= f) {if (k > f) c = 1 - c;else {h = (h - f) * (m - g) - (k - f) * (l - g);if (0 === h) return -1;0 < h === m > l && (c = 1 - c);}} else if (k > f) {h = (h - f) * (m - g) - (k - f) * (l - g);if (0 === h) return -1;0 < h === m > l && (c = 1 - c);}h = k;l = m;} while (e !== b);return c;};c.Clipper.prototype.Poly2ContainsPoly1 = function (a, b) {var c = a;do {var e = this.PointInPolygon(c.Pt, b);if (0 <= e) return 0 < e;c = c.Next;} while (c !== a);return !0;};c.Clipper.prototype.FixupFirstLefts1 = function (a, b) {for (var d,\n    e, f = 0, g = this.m_PolyOuts.length; f < g; f++) {d = this.m_PolyOuts[f], e = c.Clipper.ParseFirstLeft(d.FirstLeft), null !== d.Pts && e === a && this.Poly2ContainsPoly1(d.Pts, b.Pts) && (d.FirstLeft = b);}};c.Clipper.prototype.FixupFirstLefts2 = function (a, b) {for (var d = b.FirstLeft, e, f, g = 0, h = this.m_PolyOuts.length; g < h; g++) {if (e = this.m_PolyOuts[g], null !== e.Pts && e !== b && e !== a && (f = c.Clipper.ParseFirstLeft(e.FirstLeft), f === d || f === a || f === b)) if (this.Poly2ContainsPoly1(e.Pts, a.Pts)) e.FirstLeft = a;else if (this.Poly2ContainsPoly1(e.Pts, b.Pts)) e.FirstLeft =\n      b;else if (e.FirstLeft === a || e.FirstLeft === b) e.FirstLeft = d;}};c.Clipper.prototype.FixupFirstLefts3 = function (a, b) {for (var d, e, f = 0, g = this.m_PolyOuts.length; f < g; f++) {d = this.m_PolyOuts[f], e = c.Clipper.ParseFirstLeft(d.FirstLeft), null !== d.Pts && e === a && (d.FirstLeft = b);}};c.Clipper.ParseFirstLeft = function (a) {for (; null !== a && null === a.Pts;) {a = a.FirstLeft;}return a;};c.Clipper.prototype.JoinCommonEdges = function () {for (var a = 0, b = this.m_Joins.length; a < b; a++) {var c = this.m_Joins[a],e = this.GetOutRec(c.OutPt1.Idx),f = this.GetOutRec(c.OutPt2.Idx);\n      if (null !== e.Pts && null !== f.Pts && !e.IsOpen && !f.IsOpen) {var g = e === f ? e : this.OutRec1RightOfOutRec2(e, f) ? f : this.OutRec1RightOfOutRec2(f, e) ? e : this.GetLowermostRec(e, f);this.JoinPoints(c, e, f) && (e === f ? (e.Pts = c.OutPt1, e.BottomPt = null, f = this.CreateOutRec(), f.Pts = c.OutPt2, this.UpdateOutPtIdxs(f), this.Poly2ContainsPoly1(f.Pts, e.Pts) ? (f.IsHole = !e.IsHole, f.FirstLeft = e, this.m_UsingPolyTree && this.FixupFirstLefts2(f, e), (f.IsHole ^ this.ReverseSolution) == 0 < this.Area$1(f) && this.ReversePolyPtLinks(f.Pts)) : this.Poly2ContainsPoly1(e.Pts,\n        f.Pts) ? (f.IsHole = e.IsHole, e.IsHole = !f.IsHole, f.FirstLeft = e.FirstLeft, e.FirstLeft = f, this.m_UsingPolyTree && this.FixupFirstLefts2(e, f), (e.IsHole ^ this.ReverseSolution) == 0 < this.Area$1(e) && this.ReversePolyPtLinks(e.Pts)) : (f.IsHole = e.IsHole, f.FirstLeft = e.FirstLeft, this.m_UsingPolyTree && this.FixupFirstLefts1(e, f))) : (f.Pts = null, f.BottomPt = null, f.Idx = e.Idx, e.IsHole = g.IsHole, g === f && (e.FirstLeft = f.FirstLeft), f.FirstLeft = e, this.m_UsingPolyTree && this.FixupFirstLefts3(f, e)));}}};c.Clipper.prototype.UpdateOutPtIdxs =\n  function (a) {var b = a.Pts;do {b.Idx = a.Idx, b = b.Prev;} while (b !== a.Pts);};c.Clipper.prototype.DoSimplePolygons = function () {for (var a = 0; a < this.m_PolyOuts.length;) {var b = this.m_PolyOuts[a++],d = b.Pts;if (null !== d && !b.IsOpen) {do {for (var e = d.Next; e !== b.Pts;) {if (c.FPoint.op_Equality(d.Pt, e.Pt) && e.Next !== d && e.Prev !== d) {var f = d.Prev,g = e.Prev;d.Prev = g;g.Next = d;e.Prev = f;f.Next = e;b.Pts = d;f = this.CreateOutRec();f.Pts = e;this.UpdateOutPtIdxs(f);this.Poly2ContainsPoly1(f.Pts, b.Pts) ? (f.IsHole = !b.IsHole, f.FirstLeft = b, this.m_UsingPolyTree &&\n              this.FixupFirstLefts2(f, b)) : this.Poly2ContainsPoly1(b.Pts, f.Pts) ? (f.IsHole = b.IsHole, b.IsHole = !f.IsHole, f.FirstLeft = b.FirstLeft, b.FirstLeft = f, this.m_UsingPolyTree && this.FixupFirstLefts2(b, f)) : (f.IsHole = b.IsHole, f.FirstLeft = b.FirstLeft, this.m_UsingPolyTree && this.FixupFirstLefts1(b, f));e = d;}e = e.Next;}d = d.Next;} while (d !== b.Pts);}}};c.Clipper.Area = function (a) {if (!Array.isArray(a)) return 0;var b = a.length;if (3 > b) return 0;for (var c = 0, e = 0, f = b - 1; e < b; ++e) {c += (a[f].X + a[e].X) * (a[f].Y - a[e].Y), f = e;}return .5 * -c;};c.Clipper.prototype.Area =\n  function (a) {var b = a;if (null === a) return 0;var c = 0;do {c += (a.Prev.Pt.X + a.Pt.X) * (a.Prev.Pt.Y - a.Pt.Y), a = a.Next;} while (a !== b);return .5 * c;};c.Clipper.prototype.Area$1 = function (a) {return this.Area(a.Pts);};c.Clipper.SimplifyPolygon = function (a, b) {var d = [],e = new c.Clipper(0);e.StrictlySimple = !0;e.AddPath(a, c.PolyType.ptSubject, !0);e.Execute(c.ClipType.ctUnion, d, b, b);return d;};c.Clipper.SimplifyPolygons = function (a, b) {\"undefined\" === typeof b && (b = c.PolyFillType.pftEvenOdd);var d = [],e = new c.Clipper(0);e.StrictlySimple =\n    !0;e.AddPaths(a, c.PolyType.ptSubject, !0);e.Execute(c.ClipType.ctUnion, d, b, b);return d;};c.Clipper.DistanceSqrd = function (a, b) {var c = a.X - b.X,e = a.Y - b.Y;return c * c + e * e;};c.Clipper.DistanceFromLineSqrd = function (a, b, c) {var d = b.Y - c.Y;c = c.X - b.X;b = d * b.X + c * b.Y;b = d * a.X + c * a.Y - b;return b * b / (d * d + c * c);};c.Clipper.SlopesNearCollinear = function (a, b, d, e) {return Math.abs(a.X - b.X) > Math.abs(a.Y - b.Y) ? a.X > b.X === a.X < d.X ? c.Clipper.DistanceFromLineSqrd(a, b, d) < e : b.X > a.X === b.X < d.X ? c.Clipper.DistanceFromLineSqrd(b, a, d) < e : c.Clipper.DistanceFromLineSqrd(d,\n    a, b) < e : a.Y > b.Y === a.Y < d.Y ? c.Clipper.DistanceFromLineSqrd(a, b, d) < e : b.Y > a.Y === b.Y < d.Y ? c.Clipper.DistanceFromLineSqrd(b, a, d) < e : c.Clipper.DistanceFromLineSqrd(d, a, b) < e;};c.Clipper.PointsAreClose = function (a, b, c) {var d = a.X - b.X;a = a.Y - b.Y;return d * d + a * a <= c;};c.Clipper.ExcludeOp = function (a) {var b = a.Prev;b.Next = a.Next;a.Next.Prev = b;b.Idx = 0;return b;};c.Clipper.CleanPolygon = function (a, b) {\"undefined\" === typeof b && (b = 1.415);var d = a.length;if (0 === d) return [];for (var e = Array(d), f = 0; f < d; ++f) {e[f] = new c.OutPt();}for (f = 0; f <\n    d; ++f) {e[f].Pt = a[f], e[f].Next = e[(f + 1) % d], e[f].Next.Prev = e[f], e[f].Idx = 0;}f = b * b;for (e = e[0]; 0 === e.Idx && e.Next !== e.Prev;) {c.Clipper.PointsAreClose(e.Pt, e.Prev.Pt, f) ? (e = c.Clipper.ExcludeOp(e), d--) : c.Clipper.PointsAreClose(e.Prev.Pt, e.Next.Pt, f) ? (c.Clipper.ExcludeOp(e.Next), e = c.Clipper.ExcludeOp(e), d -= 2) : c.Clipper.SlopesNearCollinear(e.Prev.Pt, e.Pt, e.Next.Pt, f) ? (e = c.Clipper.ExcludeOp(e), d--) : (e.Idx = 1, e = e.Next);}3 > d && (d = 0);var g = Array(d);for (f = 0; f < d; ++f) {g[f] = new c.FPoint1(e.Pt), e = e.Next;}return g;};c.Clipper.CleanPolygons =\n  function (a, b) {for (var d = Array(a.length), e = 0, f = a.length; e < f; e++) {d[e] = c.Clipper.CleanPolygon(a[e], b);}return d;};c.Clipper.Minkowski = function (a, b, d, e) {e = e ? 1 : 0;var f = a.length,g = b.length,h = [];if (d) for (d = 0; d < g; d++) {var l = Array(f);for (var k = 0, m = a.length, p = a[k]; k < m; k++, p = a[k]) {l[k] = new c.FPoint2(b[d].X + p.X, b[d].Y + p.Y);}h.push(l);} else for (d = 0; d < g; d++) {l = Array(f);k = 0;m = a.length;for (p = a[k]; k < m; k++, p = a[k]) {l[k] = new c.FPoint2(b[d].X - p.X, b[d].Y - p.Y);}h.push(l);}a = [];for (d = 0; d < g - 1 + e; d++) {for (k = 0; k < f; k++) {b = [], b.push(h[d %\n        g][k % f]), b.push(h[(d + 1) % g][k % f]), b.push(h[(d + 1) % g][(k + 1) % f]), b.push(h[d % g][(k + 1) % f]), c.Clipper.Orientation(b) || b.reverse(), a.push(b);}}return a;};c.Clipper.MinkowskiSum = function (a, b, d) {if (b[0] instanceof Array) {var e = b;var f = new c.Paths();b = new c.Clipper();for (var g = 0; g < e.length; ++g) {var h = c.Clipper.Minkowski(a, e[g], !0, d);b.AddPaths(h, c.PolyType.ptSubject, !0);d && (h = c.Clipper.TranslatePath(e[g], a[0]), b.AddPath(h, c.PolyType.ptClip, !0));}b.Execute(c.ClipType.ctUnion, f, c.PolyFillType.pftNonZero, c.PolyFillType.pftNonZero);\n      return f;}e = c.Clipper.Minkowski(a, b, !0, d);b = new c.Clipper();b.AddPaths(e, c.PolyType.ptSubject, !0);b.Execute(c.ClipType.ctUnion, e, c.PolyFillType.pftNonZero, c.PolyFillType.pftNonZero);return e;};c.Clipper.TranslatePath = function (a, b) {for (var d = new c.Path(), e = 0; e < a.length; e++) {d.push(new c.FPoint2(a[e].X + b.X, a[e].Y + b.Y));}return d;};c.Clipper.MinkowskiDiff = function (a, b) {var d = c.Clipper.Minkowski(a, b, !1, !0),e = new c.Clipper();e.AddPaths(d, c.PolyType.ptSubject, !0);e.Execute(c.ClipType.ctUnion, d, c.PolyFillType.pftNonZero,\n    c.PolyFillType.pftNonZero);return d;};c.Clipper.PolyTreeToPaths = function (a) {var b = [];c.Clipper.AddPolyNodeToPaths(a, c.Clipper.NodeType.ntAny, b);return b;};c.Clipper.AddPolyNodeToPaths = function (a, b, d) {var e = !0;switch (b) {case c.Clipper.NodeType.ntOpen:return;case c.Clipper.NodeType.ntClosed:e = !a.IsOpen;}0 < a.m_polygon.length && e && d.push(a.m_polygon);e = 0;a = a.Childs();for (var f = a.length, g = a[e]; e < f; e++, g = a[e]) {c.Clipper.AddPolyNodeToPaths(g, b, d);}};c.Clipper.OpenPathsFromPolyTree = function (a) {for (var b = new c.Paths(),\n    d = 0, e = a.ChildCount(); d < e; d++) {a.Childs()[d].IsOpen && b.push(a.Childs()[d].m_polygon);}return b;};c.Clipper.ClosedPathsFromPolyTree = function (a) {var b = new c.Paths();c.Clipper.AddPolyNodeToPaths(a, c.Clipper.NodeType.ntClosed, b);return b;};r(c.Clipper, c.ClipperBase);c.Clipper.NodeType = { ntAny: 0, ntOpen: 1, ntClosed: 2 };c.ClipperOffset = function (a, b) {\"undefined\" === typeof a && (a = 2);\"undefined\" === typeof b && (b = c.ClipperOffset.def_arc_tolerance);this.m_destPolys = new c.Paths();this.m_srcPoly = new c.Path();this.m_destPoly = new c.Path();\n    this.m_normals = [];this.m_StepsPerRad = this.m_miterLim = this.m_cos = this.m_sin = this.m_sinA = this.m_delta = 0;this.m_lowest = new c.FPoint0();this.m_polyNodes = new c.PolyNode();this.MiterLimit = a;this.ArcTolerance = b;this.m_lowest.X = -1;};c.ClipperOffset.two_pi = 6.28318530717959;c.ClipperOffset.def_arc_tolerance = .25;c.ClipperOffset.prototype.Clear = function () {c.Clear(this.m_polyNodes.Childs());this.m_lowest.X = -1;};c.ClipperOffset.prototype.AddPath = function (a, b, d) {var e = a.length - 1;if (!(0 > e)) {var f = new c.PolyNode();f.m_jointype =\n      b;f.m_endtype = d;if (d === c.EndType.etClosedLine || d === c.EndType.etClosedPolygon) for (; 0 < e && c.FPoint.op_Equality(a[0], a[e]);) {e--;}f.m_polygon.push(a[0]);var g = 0;b = 0;for (var h = 1; h <= e; h++) {c.FPoint.op_Inequality(f.m_polygon[g], a[h]) && (g++, f.m_polygon.push(a[h]), a[h].Y > f.m_polygon[b].Y || a[h].Y === f.m_polygon[b].Y && a[h].X < f.m_polygon[b].X) && (b = g);}if (!(d === c.EndType.etClosedPolygon && 2 > g) && (this.m_polyNodes.AddChild(f), d === c.EndType.etClosedPolygon)) if (0 > this.m_lowest.X) this.m_lowest = new c.FPoint2(this.m_polyNodes.ChildCount() -\n      1, b);else if (a = this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y], f.m_polygon[b].Y > a.Y || f.m_polygon[b].Y === a.Y && f.m_polygon[b].X < a.X) this.m_lowest = new c.FPoint2(this.m_polyNodes.ChildCount() - 1, b);}};c.ClipperOffset.prototype.AddPaths = function (a, b, c) {for (var d = 0, f = a.length; d < f; d++) {this.AddPath(a[d], b, c);}};c.ClipperOffset.prototype.FixOrientations = function () {if (0 <= this.m_lowest.X && !c.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon)) for (var a = 0; a < this.m_polyNodes.ChildCount(); a++) {var b =\n      this.m_polyNodes.Childs()[a];(b.m_endtype === c.EndType.etClosedPolygon || b.m_endtype === c.EndType.etClosedLine && c.Clipper.Orientation(b.m_polygon)) && b.m_polygon.reverse();} else for (a = 0; a < this.m_polyNodes.ChildCount(); a++) {b = this.m_polyNodes.Childs()[a], b.m_endtype !== c.EndType.etClosedLine || c.Clipper.Orientation(b.m_polygon) || b.m_polygon.reverse();}};c.ClipperOffset.GetUnitNormal = function (a, b) {var d = b.X - a.X,e = b.Y - a.Y;if (0 === d && 0 === e) return new c.FPoint2(0, 0);var f = 1 / Math.sqrt(d * d + e * e);return new c.FPoint2(e *\n    f, -(d * f));};c.ClipperOffset.prototype.DoOffset = function (a) {var b;this.m_destPolys = [];this.m_delta = a;if (c.ClipperBase.near_zero(a)) for (var d = 0; d < this.m_polyNodes.ChildCount(); d++) {var e = this.m_polyNodes.Childs()[d];e.m_endtype === c.EndType.etClosedPolygon && this.m_destPolys.push(e.m_polygon);} else {this.m_miterLim = 2 < this.MiterLimit ? 2 / (this.MiterLimit * this.MiterLimit) : .5;var f = 3.14159265358979 / Math.acos(1 - (0 >= this.ArcTolerance ? c.ClipperOffset.def_arc_tolerance : this.ArcTolerance > Math.abs(a) * c.ClipperOffset.def_arc_tolerance ?\n      Math.abs(a) * c.ClipperOffset.def_arc_tolerance : this.ArcTolerance) / Math.abs(a));this.m_sin = Math.sin(c.ClipperOffset.two_pi / f);this.m_cos = Math.cos(c.ClipperOffset.two_pi / f);this.m_StepsPerRad = f / c.ClipperOffset.two_pi;0 > a && (this.m_sin = -this.m_sin);for (d = 0; d < this.m_polyNodes.ChildCount(); d++) {e = this.m_polyNodes.Childs()[d];this.m_srcPoly = e.m_polygon;var g = this.m_srcPoly.length;if (!(0 === g || 0 >= a && (3 > g || e.m_endtype !== c.EndType.etClosedPolygon))) {this.m_destPoly = [];if (1 === g) {if (e.m_jointype === c.JoinType.jtRound) for (g =\n            1, e = 0, b = 1; b <= f; b++) {this.m_destPoly.push(new c.FPoint2(this.m_srcPoly[0].X + g * a, this.m_srcPoly[0].Y + e * a));var h = g;g = g * this.m_cos - this.m_sin * e;e = h * this.m_sin + e * this.m_cos;} else for (e = g = -1, b = 0; 4 > b; ++b) {this.m_destPoly.push(new c.FPoint2(this.m_srcPoly[0].X + g * a, this.m_srcPoly[0].Y + e * a)), 0 > g ? g = 1 : 0 > e ? e = 1 : g = -1;}} else {for (b = this.m_normals.length = 0; b < g - 1; b++) {this.m_normals.push(c.ClipperOffset.GetUnitNormal(this.m_srcPoly[b], this.m_srcPoly[b + 1]));}e.m_endtype === c.EndType.etClosedLine || e.m_endtype === c.EndType.etClosedPolygon ?\n            this.m_normals.push(c.ClipperOffset.GetUnitNormal(this.m_srcPoly[g - 1], this.m_srcPoly[0])) : this.m_normals.push(new c.FPoint1(this.m_normals[g - 2]));if (e.m_endtype === c.EndType.etClosedPolygon) for (h = g - 1, b = 0; b < g; b++) {h = this.OffsetPoint(b, h, e.m_jointype);} else if (e.m_endtype === c.EndType.etClosedLine) {h = g - 1;for (b = 0; b < g; b++) {h = this.OffsetPoint(b, h, e.m_jointype);}this.m_destPolys.push(this.m_destPoly);this.m_destPoly = [];h = this.m_normals[g - 1];for (b = g - 1; 0 < b; b--) {this.m_normals[b] = new c.FPoint2(-this.m_normals[b -\n                1].X, -this.m_normals[b - 1].Y);}this.m_normals[0] = new c.FPoint2(-h.X, -h.Y);h = 0;for (b = g - 1; 0 <= b; b--) {h = this.OffsetPoint(b, h, e.m_jointype);}} else {h = 0;for (b = 1; b < g - 1; ++b) {h = this.OffsetPoint(b, h, e.m_jointype);}e.m_endtype === c.EndType.etOpenButt ? (b = g - 1, h = new c.FPoint2(this.m_srcPoly[b].X + this.m_normals[b].X * a, this.m_srcPoly[b].Y + this.m_normals[b].Y * a), this.m_destPoly.push(h), h = new c.FPoint2(this.m_srcPoly[b].X - this.m_normals[b].X * a, this.m_srcPoly[b].Y - this.m_normals[b].Y * a), this.m_destPoly.push(h)) : (b = g - 1, h = g - 2,\n              this.m_sinA = 0, this.m_normals[b] = new c.FPoint2(-this.m_normals[b].X, -this.m_normals[b].Y), e.m_endtype === c.EndType.etOpenSquare ? this.DoSquare(b, h) : this.DoRound(b, h));for (b = g - 1; 0 < b; b--) {this.m_normals[b] = new c.FPoint2(-this.m_normals[b - 1].X, -this.m_normals[b - 1].Y);}this.m_normals[0] = new c.FPoint2(-this.m_normals[1].X, -this.m_normals[1].Y);h = g - 1;for (b = h - 1; 0 < b; --b) {h = this.OffsetPoint(b, h, e.m_jointype);}e.m_endtype === c.EndType.etOpenButt ? (h = new c.FPoint2(this.m_srcPoly[0].X - this.m_normals[0].X * a, this.m_srcPoly[0].Y -\n              this.m_normals[0].Y * a), this.m_destPoly.push(h), h = new c.FPoint2(this.m_srcPoly[0].X + this.m_normals[0].X * a, this.m_srcPoly[0].Y + this.m_normals[0].Y * a), this.m_destPoly.push(h)) : (this.m_sinA = 0, e.m_endtype === c.EndType.etOpenSquare ? this.DoSquare(0, 1) : this.DoRound(0, 1));}}this.m_destPolys.push(this.m_destPoly);}}}};c.ClipperOffset.prototype.Execute = function () {var a = arguments;if (a[0] instanceof c.PolyTree) {var b = a[0];var d = a[1];b.Clear();this.FixOrientations();this.DoOffset(d);a = new c.Clipper(0);a.AddPaths(this.m_destPolys,\n      c.PolyType.ptSubject, !0);if (0 < d) a.Execute(c.ClipType.ctUnion, b, c.PolyFillType.pftPositive, c.PolyFillType.pftPositive);else {var e = c.Clipper.GetBounds(this.m_destPolys);d = new c.Path();d.push(new c.FPoint2(e.left - 10, e.bottom + 10));d.push(new c.FPoint2(e.right + 10, e.bottom + 10));d.push(new c.FPoint2(e.right + 10, e.top - 10));d.push(new c.FPoint2(e.left - 10, e.top - 10));a.AddPath(d, c.PolyType.ptSubject, !0);a.ReverseSolution = !0;a.Execute(c.ClipType.ctUnion, b, c.PolyFillType.pftNegative, c.PolyFillType.pftNegative);if (1 ===\n        b.ChildCount() && 0 < b.Childs()[0].ChildCount()) for (a = b.Childs()[0], b.Childs()[0] = a.Childs()[0], b.Childs()[0].m_Parent = b, d = 1; d < a.ChildCount(); d++) {b.AddChild(a.Childs()[d]);} else b.Clear();}} else b = a[0], d = a[1], c.Clear(b), this.FixOrientations(), this.DoOffset(d), a = new c.Clipper(0), a.AddPaths(this.m_destPolys, c.PolyType.ptSubject, !0), 0 < d ? a.Execute(c.ClipType.ctUnion, b, c.PolyFillType.pftPositive, c.PolyFillType.pftPositive) : (e = c.Clipper.GetBounds(this.m_destPolys), d = new c.Path(), d.push(new c.FPoint2(e.left - 10,\n    e.bottom + 10)), d.push(new c.FPoint2(e.right + 10, e.bottom + 10)), d.push(new c.FPoint2(e.right + 10, e.top - 10)), d.push(new c.FPoint2(e.left - 10, e.top - 10)), a.AddPath(d, c.PolyType.ptSubject, !0), a.ReverseSolution = !0, a.Execute(c.ClipType.ctUnion, b, c.PolyFillType.pftNegative, c.PolyFillType.pftNegative), 0 < b.length && b.splice(0, 1));};c.ClipperOffset.prototype.OffsetPoint = function (a, b, d) {this.m_sinA = this.m_normals[b].X * this.m_normals[a].Y - this.m_normals[a].X * this.m_normals[b].Y;if (0 === this.m_sinA) return b;1 < this.m_sinA ?\n    this.m_sinA = 1 : -1 > this.m_sinA && (this.m_sinA = -1);if (0 > this.m_sinA * this.m_delta) this.m_destPoly.push(new c.FPoint2(this.m_srcPoly[a].X + this.m_normals[b].X * this.m_delta, this.m_srcPoly[a].Y + this.m_normals[b].Y * this.m_delta)), this.m_destPoly.push(new c.FPoint1(this.m_srcPoly[a])), this.m_destPoly.push(new c.FPoint2(this.m_srcPoly[a].X + this.m_normals[a].X * this.m_delta, this.m_srcPoly[a].Y + this.m_normals[a].Y * this.m_delta));else switch (d) {case c.JoinType.jtMiter:d = 1 + (this.m_normals[a].X * this.m_normals[b].X +\n        this.m_normals[a].Y * this.m_normals[b].Y);d >= this.m_miterLim ? this.DoMiter(a, b, d) : this.DoSquare(a, b);break;case c.JoinType.jtSquare:this.DoSquare(a, b);break;case c.JoinType.jtRound:this.DoRound(a, b);}return a;};c.ClipperOffset.prototype.DoSquare = function (a, b) {var d = Math.tan(Math.atan2(this.m_sinA, this.m_normals[b].X * this.m_normals[a].X + this.m_normals[b].Y * this.m_normals[a].Y) / 4);this.m_destPoly.push(new c.FPoint2(this.m_srcPoly[a].X + this.m_delta * (this.m_normals[b].X - this.m_normals[b].Y * d), this.m_srcPoly[a].Y +\n    this.m_delta * (this.m_normals[b].Y + this.m_normals[b].X * d)));this.m_destPoly.push(new c.FPoint2(this.m_srcPoly[a].X + this.m_delta * (this.m_normals[a].X + this.m_normals[a].Y * d), this.m_srcPoly[a].Y + this.m_delta * (this.m_normals[a].Y - this.m_normals[a].X * d)));};c.ClipperOffset.prototype.DoMiter = function (a, b, d) {d = this.m_delta / d;this.m_destPoly.push(new c.FPoint2(this.m_srcPoly[a].X + (this.m_normals[b].X + this.m_normals[a].X) * d, this.m_srcPoly[a].Y + (this.m_normals[b].Y + this.m_normals[a].Y) * d));};c.ClipperOffset.prototype.DoRound =\n  function (a, b) {for (var d = Math.max(Math.round(this.m_StepsPerRad * Math.abs(Math.atan2(this.m_sinA, this.m_normals[b].X * this.m_normals[a].X + this.m_normals[b].Y * this.m_normals[a].Y))), 1), e = this.m_normals[b].X, f = this.m_normals[b].Y, g, h = 0; h < d; ++h) {this.m_destPoly.push(new c.FPoint2(this.m_srcPoly[a].X + e * this.m_delta, this.m_srcPoly[a].Y + f * this.m_delta)), g = e, e = e * this.m_cos - this.m_sin * f, f = g * this.m_sin + f * this.m_cos;}this.m_destPoly.push(new c.FPoint2(this.m_srcPoly[a].X + this.m_normals[a].X * this.m_delta, this.m_srcPoly[a].Y +\n    this.m_normals[a].Y * this.m_delta));};c.Error = function (a) {try {throw Error(a);} catch (b) {alert(b.message);}};c.JS = {};c.JS.AreaOfPolygon = function (a) {return c.Clipper.Area(a);};c.JS.AreaOfPolygons = function (a) {for (var b = 0, d = 0; d < a.length; d++) {b += c.Clipper.Area(a[d]);}return b;};c.JS.BoundsOfPath = function (a) {return c.JS.BoundsOfPaths([a]);};c.JS.BoundsOfPaths = function (a) {return c.Clipper.GetBounds(a);};c.JS.Clean = function (a, b) {if (!(a instanceof Array)) return [];var d = a[0] instanceof Array;a = c.JS.Clone(a);if (\"number\" !==\n    typeof b || null === b) return c.Error(\"Delta is not a number in Clean().\"), a;if (0 === a.length || 1 === a.length && 0 === a[0].length || 0 > b) return a;d || (a = [a]);for (var e = a.length, f, g, h, l, k, m, p, n = [], q = 0; q < e; q++) {if (g = a[q], f = g.length, 0 !== f) if (3 > f) h = g, n.push(h);else {h = g;l = b * b;k = g[0];for (p = m = 1; p < f; p++) {(g[p].X - k.X) * (g[p].X - k.X) + (g[p].Y - k.Y) * (g[p].Y - k.Y) <= l || (h[m] = g[p], k = g[p], m++);}k = g[m - 1];(g[0].X - k.X) * (g[0].X - k.X) + (g[0].Y - k.Y) * (g[0].Y - k.Y) <= l && m--;m < f && h.splice(m, f - m);h.length && n.push(h);}}!d && n.length ? n = n[0] : d || 0 !== n.length ?\n    d && 0 === n.length && (n = [[]]) : n = [];return n;};c.JS.Clone = function (a) {if (!(a instanceof Array) || 0 === a.length) return [];if (1 === a.length && 0 === a[0].length) return [[]];var b = a[0] instanceof Array;b || (a = [a]);var c = a.length,e,f,g = Array(c);for (e = 0; e < c; e++) {var h = a[e].length;var l = Array(h);for (f = 0; f < h; f++) {l[f] = { X: a[e][f].X, Y: a[e][f].Y };}g[e] = l;}b || (g = g[0]);return g;};c.JS.Lighten = function (a, b) {if (!(a instanceof Array)) return [];if (\"number\" !== typeof b || null === b) return c.Error(\"Tolerance is not a number in Lighten().\"),\n    c.JS.Clone(a);if (0 === a.length || 1 === a.length && 0 === a[0].length || 0 > b) return c.JS.Clone(a);var d = a[0] instanceof Array;d || (a = [a]);var e,f,g,h = a.length,l = b * b,k = [];for (e = 0; e < h; e++) {var m = a[e];var p = m.length;if (0 !== p) {for (g = 0; 1E6 > g; g++) {var n = [];p = m.length;if (m[p - 1].X !== m[0].X || m[p - 1].Y !== m[0].Y) {var q = 1;m.push({ X: m[0].X, Y: m[0].Y });p = m.length;} else q = 0;var r = [];for (f = 0; f < p - 2; f++) {var t = m[f];var y = m[f + 1];var v = m[f + 2];var w = t.X;var x = t.Y;t = v.X - w;var u = v.Y - x;if (0 !== t || 0 !== u) {var z = ((y.X - w) * t + (y.Y - x) * u) / (t * t +\n              u * u);1 < z ? (w = v.X, x = v.Y) : 0 < z && (w += t * z, x += u * z);}t = y.X - w;u = y.Y - x;v = t * t + u * u;v <= l && (r[f + 1] = 1, f++);}n.push({ X: m[0].X, Y: m[0].Y });for (f = 1; f < p - 1; f++) {r[f] || n.push({ X: m[f].X, Y: m[f].Y });}n.push({ X: m[p - 1].X, Y: m[p - 1].Y });q && m.pop();if (r.length) m = n;else break;}p = n.length;n[p - 1].X === n[0].X && n[p - 1].Y === n[0].Y && n.pop();2 < n.length && k.push(n);}}d || (k = k[0]);\"undefined\" === typeof k && (k = []);return k;};c.JS.PerimeterOfPath = function (a, b) {if (\"undefined\" === typeof a) return 0;var c = Math.sqrt,e = 0,f = a.length;if (2 > f) return 0;b && (a[f] = a[0],\n    f++);for (; --f;) {var g = a[f];var h = g.X;g = g.Y;var l = a[f - 1];var k = l.X;l = l.Y;e += c((h - k) * (h - k) + (g - l) * (g - l));}b && a.pop();return e;};c.JS.PerimeterOfPaths = function (a, b) {for (var d = 0, e = 0; e < a.length; e++) {d += c.JS.PerimeterOfPath(a[e], b);}return d;};c.ExPolygons = function () {return [];};c.ExPolygon = function () {this.holes = this.outer = null;};c.JS.AddOuterPolyNodeToExPolygons = function (a, b) {var d = new c.ExPolygon();d.outer = a.Contour();var e = a.Childs(),f = e.length;d.holes = Array(f);var g, h;for (g = 0; g < f; g++) {var l = e[g];d.holes[g] = l.Contour();\n      var k = 0;var m = l.Childs();for (h = m.length; k < h; k++) {l = m[k], c.JS.AddOuterPolyNodeToExPolygons(l, b);}}b.push(d);};c.JS.ExPolygonsToPaths = function (a) {var b,d,e = new c.Paths();var f = 0;for (b = a.length; f < b; f++) {e.push(a[f].outer);var g = 0;for (d = a[f].holes.length; g < d; g++) {e.push(a[f].holes[g]);}}return e;};c.JS.PolyTreeToExPolygons = function (a) {var b = new c.ExPolygons(),d;var e = 0;var f = a.Childs();for (d = f.length; e < d; e++) {a = f[e], c.JS.AddOuterPolyNodeToExPolygons(a, b);}return b;};})();","function _typeof(obj) {if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}!function (e) {if (\"object\" == (typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) && \"undefined\" != typeof module) module.exports = e();else if (\"function\" == typeof define && define.amd) define([], e);else {(\"undefined\" != typeof window ? window : \"undefined\" != typeof global ? global : \"undefined\" != typeof self ? self : this).earcut = e();}}(function () {return function i(u, f, o) {function v(n, e) {if (!f[n]) {if (!u[n]) {var t = \"function\" == typeof require && require;if (!e && t) return t(n, !0);if (y) return y(n, !0);var r = new Error(\"Cannot find module '\" + n + \"'\");throw r.code = \"MODULE_NOT_FOUND\", r;}var x = f[n] = { exports: {} };u[n][0].call(x.exports, function (e) {return v(u[n][1][e] || e);}, x, x.exports, i, u, f, o);}return f[n].exports;}for (var y = \"function\" == typeof require && require, e = 0; e < o.length; e++) {v(o[e]);}return v;}({ 1: [function (e, n, t) {\"use strict\";function r(e, n, t) {t = t || 2;var r,x,i,u,f,o,v,y = n && n.length,p = y ? n[0] * t : e.length,a = s(e, 0, p, t, !0),l = [];if (!a || a.next === a.prev) return l;if (y && (a = function (e, n, t, r) {var x,i,u,f,o,v = [];for (x = 0, i = n.length; x < i; x++) {u = n[x] * r, f = x < i - 1 ? n[x + 1] * r : e.length, (o = s(e, u, f, r, !1)) === o.next && (o.steiner = !0), v.push(M(o));}for (v.sort(Z), x = 0; x < v.length; x++) {g(v[x], t), t = c(t, t.next);}return t;}(e, n, a, t)), e.length > 80 * t) {r = i = e[0], x = u = e[1];for (var h = t; h < p; h += t) {(f = e[h]) < r && (r = f), (o = e[h + 1]) < x && (x = o), i < f && (i = f), u < o && (u = o);}v = 0 !== (v = Math.max(i - r, u - x)) ? 1 / v : 0;}return d(a, l, t, r, x, v), l;}function s(e, n, t, r, x) {var i, u;if (x === 0 < D(e, n, t, r)) for (i = n; i < t; i += r) {u = f(i, e[i], e[i + 1], u);} else for (i = t - r; n <= i; i -= r) {u = f(i, e[i], e[i + 1], u);}return u && h(u, u.next) && (k(u), u = u.next), u;}function c(e, n) {if (!e) return e;n = n || e;var t,r = e;do {if (t = !1, r.steiner || !h(r, r.next) && 0 !== m(r.prev, r, r.next)) r = r.next;else {if (k(r), (r = n = r.prev) === r.next) break;t = !0;}} while (t || r !== n);return n;}function d(e, n, t, r, x, i, u) {if (e) {!u && i && function (e, n, t, r) {var x = e;for (; null === x.z && (x.z = w(x.x, x.y, n, t, r)), x.prevZ = x.prev, x.nextZ = x.next, x = x.next, x !== e;) {;}x.prevZ.nextZ = null, x.prevZ = null, function (e) {var n,t,r,x,i,u,f,o,v = 1;do {for (t = e, i = e = null, u = 0; t;) {for (u++, r = t, n = f = 0; n < v && (f++, r = r.nextZ); n++) {;}for (o = v; 0 < f || 0 < o && r;) {0 !== f && (0 === o || !r || t.z <= r.z) ? (t = (x = t).nextZ, f--) : (r = (x = r).nextZ, o--), i ? i.nextZ = x : e = x, x.prevZ = i, i = x;}t = r;}i.nextZ = null, v *= 2;} while (1 < u);}(x);}(e, r, x, i);for (var f, o, v = e; e.prev !== e.next;) {if (f = e.prev, o = e.next, i ? p(e, r, x, i) : y(e)) n.push(f.i / t), n.push(e.i / t), n.push(o.i / t), k(e), e = o.next, v = o.next;else if ((e = o) === v) {u ? 1 === u ? d(e = a(c(e), n, t), n, t, r, x, i, 2) : 2 === u && l(e, n, t, r, x, i) : d(c(e), n, t, r, x, i, 1);break;}}}}function y(e) {var n = e.prev,t = e,r = e.next;if (0 <= m(n, t, r)) return !1;for (var x = e.next.next; x !== e.prev;) {if (b(n.x, n.y, t.x, t.y, r.x, r.y, x.x, x.y) && 0 <= m(x.prev, x, x.next)) return !1;x = x.next;}return !0;}function p(e, n, t, r) {var x = e.prev,i = e,u = e.next;if (0 <= m(x, i, u)) return !1;for (var f = x.x < i.x ? x.x < u.x ? x.x : u.x : i.x < u.x ? i.x : u.x, o = x.y < i.y ? x.y < u.y ? x.y : u.y : i.y < u.y ? i.y : u.y, v = x.x > i.x ? x.x > u.x ? x.x : u.x : i.x > u.x ? i.x : u.x, y = x.y > i.y ? x.y > u.y ? x.y : u.y : i.y > u.y ? i.y : u.y, p = w(f, o, n, t, r), a = w(v, y, n, t, r), l = e.prevZ, h = e.nextZ; l && l.z >= p && h && h.z <= a;) {if (l !== e.prev && l !== e.next && b(x.x, x.y, i.x, i.y, u.x, u.y, l.x, l.y) && 0 <= m(l.prev, l, l.next)) return !1;if (l = l.prevZ, h !== e.prev && h !== e.next && b(x.x, x.y, i.x, i.y, u.x, u.y, h.x, h.y) && 0 <= m(h.prev, h, h.next)) return !1;h = h.nextZ;}for (; l && l.z >= p;) {if (l !== e.prev && l !== e.next && b(x.x, x.y, i.x, i.y, u.x, u.y, l.x, l.y) && 0 <= m(l.prev, l, l.next)) return !1;l = l.prevZ;}for (; h && h.z <= a;) {if (h !== e.prev && h !== e.next && b(x.x, x.y, i.x, i.y, u.x, u.y, h.x, h.y) && 0 <= m(h.prev, h, h.next)) return !1;h = h.nextZ;}return !0;}function a(e, n, t) {var r = e;do {var x = r.prev,i = r.next.next;!h(x, i) && z(x, r, r.next, i) && q(x, i) && q(i, x) && (n.push(x.i / t), n.push(r.i / t), n.push(i.i / t), k(r), k(r.next), r = e = i), r = r.next;} while (r !== e);return c(r);}function l(e, n, t, r, x, i) {var u,f,o = e;do {for (var v = o.next.next; v !== o.prev;) {if (o.i !== v.i && (f = v, (u = o).next.i !== f.i && u.prev.i !== f.i && !function (e, n) {var t = e;do {if (t.i !== e.i && t.next.i !== e.i && t.i !== n.i && t.next.i !== n.i && z(t, t.next, e, n)) return !0;t = t.next;} while (t !== e);return !1;}(u, f) && (q(u, f) && q(f, u) && function (e, n) {var t = e,r = !1,x = (e.x + n.x) / 2,i = (e.y + n.y) / 2;for (; t.y > i != t.next.y > i && t.next.y !== t.y && x < (t.next.x - t.x) * (i - t.y) / (t.next.y - t.y) + t.x && (r = !r), t = t.next, t !== e;) {;}return r;}(u, f) && (m(u.prev, u, f.prev) || m(u, f.prev, f)) || h(u, f) && 0 < m(u.prev, u, u.next) && 0 < m(f.prev, f, f.next)))) {var y = O(o, v);return o = c(o, o.next), y = c(y, y.next), d(o, n, t, r, x, i), void d(y, n, t, r, x, i);}v = v.next;}o = o.next;} while (o !== e);}function Z(e, n) {return e.x - n.x;}function g(e, n) {if (n = function (e, n) {var t,r = n,x = e.x,i = e.y,u = -1 / 0;do {if (i <= r.y && i >= r.next.y && r.next.y !== r.y) {var f = r.x + (i - r.y) * (r.next.x - r.x) / (r.next.y - r.y);if (f <= x && u < f) {if ((u = f) === x) {if (i === r.y) return r;if (i === r.next.y) return r.next;}t = r.x < r.next.x ? r : r.next;}}r = r.next;} while (r !== n);if (!t) return null;if (x === u) return t;var o,v = t,y = t.x,p = t.y,a = 1 / 0;r = t;for (; x >= r.x && r.x >= y && x !== r.x && b(i < p ? x : u, i, y, p, i < p ? u : x, i, r.x, r.y) && (o = Math.abs(i - r.y) / (x - r.x), q(r, e) && (o < a || o === a && (r.x > t.x || r.x === t.x && (h = r, m((l = t).prev, l, h.prev) < 0 && m(h.next, l, l.next) < 0))) && (t = r, a = o)), r = r.next, r !== v;) {;}var l, h;return t;}(e, n)) {var t = O(n, e);c(t, t.next);}}function w(e, n, t, r, x) {return (e = 1431655765 & ((e = 858993459 & ((e = 252645135 & ((e = 16711935 & ((e = 32767 * (e - t) * x) | e << 8)) | e << 4)) | e << 2)) | e << 1)) | (n = 1431655765 & ((n = 858993459 & ((n = 252645135 & ((n = 16711935 & ((n = 32767 * (n - r) * x) | n << 8)) | n << 4)) | n << 2)) | n << 1)) << 1;}function M(e) {for (var n = e, t = e; (n.x < t.x || n.x === t.x && n.y < t.y) && (t = n), (n = n.next) !== e;) {;}return t;}function b(e, n, t, r, x, i, u, f) {return 0 <= (x - u) * (n - f) - (e - u) * (i - f) && 0 <= (e - u) * (r - f) - (t - u) * (n - f) && 0 <= (t - u) * (i - f) - (x - u) * (r - f);}function m(e, n, t) {return (n.y - e.y) * (t.x - n.x) - (n.x - e.x) * (t.y - n.y);}function h(e, n) {return e.x === n.x && e.y === n.y;}function z(e, n, t, r) {var x = v(m(e, n, t)),i = v(m(e, n, r)),u = v(m(t, r, e)),f = v(m(t, r, n));return x !== i && u !== f || !(0 !== x || !o(e, t, n)) || !(0 !== i || !o(e, r, n)) || !(0 !== u || !o(t, e, r)) || !(0 !== f || !o(t, n, r));}function o(e, n, t) {return n.x <= Math.max(e.x, t.x) && n.x >= Math.min(e.x, t.x) && n.y <= Math.max(e.y, t.y) && n.y >= Math.min(e.y, t.y);}function v(e) {return 0 < e ? 1 : e < 0 ? -1 : 0;}function q(e, n) {return m(e.prev, e, e.next) < 0 ? 0 <= m(e, n, e.next) && 0 <= m(e, e.prev, n) : m(e, n, e.prev) < 0 || m(e, e.next, n) < 0;}function O(e, n) {var t = new u(e.i, e.x, e.y),r = new u(n.i, n.x, n.y),x = e.next,i = n.prev;return (e.next = n).prev = e, (t.next = x).prev = t, (r.next = t).prev = r, (i.next = r).prev = i, r;}function f(e, n, t, r) {var x = new u(e, n, t);return r ? (x.next = r.next, (x.prev = r).next.prev = x, r.next = x) : (x.prev = x).next = x, x;}function k(e) {e.next.prev = e.prev, e.prev.next = e.next, e.prevZ && (e.prevZ.nextZ = e.nextZ), e.nextZ && (e.nextZ.prevZ = e.prevZ);}function u(e, n, t) {this.i = e, this.x = n, this.y = t, this.prev = null, this.next = null, this.z = null, this.prevZ = null, this.nextZ = null, this.steiner = !1;}function D(e, n, t, r) {for (var x = 0, i = n, u = t - r; i < t; i += r) {x += (e[u] - e[i]) * (e[i + 1] + e[u + 1]), u = i;}return x;}n.exports = r, (n.exports[\"default\"] = r).deviation = function (e, n, t, r) {var x = n && n.length,i = x ? n[0] * t : e.length,u = Math.abs(D(e, 0, i, t));if (x) for (var f = 0, o = n.length; f < o; f++) {var v = n[f] * t,y = f < o - 1 ? n[f + 1] * t : e.length;u -= Math.abs(D(e, v, y, t));}var p = 0;for (f = 0; f < r.length; f += 3) {var a = r[f] * t,l = r[f + 1] * t,h = r[f + 2] * t;p += Math.abs((e[a] - e[h]) * (e[1 + l] - e[1 + a]) - (e[a] - e[l]) * (e[1 + h] - e[1 + a]));}return 0 === u && 0 === p ? 0 : Math.abs((p - u) / u);}, r.flatten = function (e) {for (var n = e[0][0].length, t = { vertices: [], holes: [], dimensions: n }, r = 0, x = 0; x < e.length; x++) {for (var i = 0; i < e[x].length; i++) {for (var u = 0; u < n; u++) {t.vertices.push(e[x][i][u]);}}0 < x && (r += e[x - 1].length, t.holes.push(r));}return t;};}, {}] }, {}, [1])(1);});","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".adsk-viewing-viewer .edge-gizmo:hover \\r\\n{  \\r\\n    background-color: lime; \\r\\n}\\r\\n.adsk-viewing-viewer .edge-gizmo \\r\\n{  \\r\\n    position: absolute;\\r\\n    background-color: #009bff;\\r\\n    box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.25);\\r\\n    border-radius: 8px;\\r\\n    cursor: move;\\r\\n    z-index: 1;\\r\\n    /* Place above the viewer but below the measure labels, which are at 2 */\\r\\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0); }\\r\\n\\r\\n.adsk-viewing-viewer .edge-gizmo.selected {\\r\\n    background-color: lime; }\\r\\n    \\r\\n.adsk-viewing-viewer .vertex-gizmo:hover.vertex-gizmo.enable-hover {\\r\\n    border-color: lime; }\\r\\n    \\r\\n.adsk-viewing-viewer .vertex-gizmo {\\r\\n    display: inline-block;\\r\\n    position: absolute;\\r\\n    width: 7px;\\r\\n    height: 7px;\\r\\n    left: -2px;\\r\\n    top: -2px;\\r\\n    background-color: #009bff;\\r\\n    border-style: solid;\\r\\n    border-width: 2px;\\r\\n    border-color: #FFFFFF;\\r\\n    border-radius: 100px;\\r\\n    box-shadow: 0 2px 5px 0 #182A3D;\\r\\n    z-index: 1;\\r\\n     /* Place above the viewer but below the measure labels, which are at 2 */\\r\\n     cursor: move; \\r\\n    }\\r\\n     \\r\\n.adsk-viewing-viewer .vertex-gizmo.selected {\\r\\n    border-color: lime; \\r\\n}\\r\\n    \\r\\n.adsk-viewing-viewer .edge-move-gizmo \\r\\n{\\r\\n    width: 20px;\\r\\n      /* width along the edge */\\r\\n    height: 6px;\\r\\n     /* height vertical to the edge */ \\r\\n    }\", \"\",{\"version\":3,\"sources\":[\"webpack://./Edit2D/Edit2D.css\"],\"names\":[],\"mappings\":\"AAAA;;IAEI,sBAAsB;AAC1B;AACA;;IAEI,kBAAkB;IAClB,yBAAyB;IACzB,+CAA+C;IAC/C,kBAAkB;IAClB,YAAY;IACZ,UAAU;IACV,wEAAwE;IACxE,6CAA6C,EAAE;;AAEnD;IACI,sBAAsB,EAAE;;AAE5B;IACI,kBAAkB,EAAE;;AAExB;IACI,qBAAqB;IACrB,kBAAkB;IAClB,UAAU;IACV,WAAW;IACX,UAAU;IACV,SAAS;IACT,yBAAyB;IACzB,mBAAmB;IACnB,iBAAiB;IACjB,qBAAqB;IACrB,oBAAoB;IACpB,+BAA+B;IAC/B,UAAU;KACT,wEAAwE;KACxE,YAAY;IACb;;AAEJ;IACI,kBAAkB;AACtB;;AAEA;;IAEI,WAAW;MACT,yBAAyB;IAC3B,WAAW;KACV,gCAAgC;IACjC\",\"sourcesContent\":[\".adsk-viewing-viewer .edge-gizmo:hover \\r\\n{  \\r\\n    background-color: lime; \\r\\n}\\r\\n.adsk-viewing-viewer .edge-gizmo \\r\\n{  \\r\\n    position: absolute;\\r\\n    background-color: #009bff;\\r\\n    box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.25);\\r\\n    border-radius: 8px;\\r\\n    cursor: move;\\r\\n    z-index: 1;\\r\\n    /* Place above the viewer but below the measure labels, which are at 2 */\\r\\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0); }\\r\\n\\r\\n.adsk-viewing-viewer .edge-gizmo.selected {\\r\\n    background-color: lime; }\\r\\n    \\r\\n.adsk-viewing-viewer .vertex-gizmo:hover.vertex-gizmo.enable-hover {\\r\\n    border-color: lime; }\\r\\n    \\r\\n.adsk-viewing-viewer .vertex-gizmo {\\r\\n    display: inline-block;\\r\\n    position: absolute;\\r\\n    width: 7px;\\r\\n    height: 7px;\\r\\n    left: -2px;\\r\\n    top: -2px;\\r\\n    background-color: #009bff;\\r\\n    border-style: solid;\\r\\n    border-width: 2px;\\r\\n    border-color: #FFFFFF;\\r\\n    border-radius: 100px;\\r\\n    box-shadow: 0 2px 5px 0 #182A3D;\\r\\n    z-index: 1;\\r\\n     /* Place above the viewer but below the measure labels, which are at 2 */\\r\\n     cursor: move; \\r\\n    }\\r\\n     \\r\\n.adsk-viewing-viewer .vertex-gizmo.selected {\\r\\n    border-color: lime; \\r\\n}\\r\\n    \\r\\n.adsk-viewing-viewer .edge-move-gizmo \\r\\n{\\r\\n    width: 20px;\\r\\n      /* width along the edge */\\r\\n    height: 6px;\\r\\n     /* height vertical to the edge */ \\r\\n    }\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n\n      content += cssWithMappingToString(item);\n\n      if (needLayer) {\n        content += \"}\";\n      }\n\n      if (item[2]) {\n        content += \"}\";\n      }\n\n      if (item[4]) {\n        content += \"}\";\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n\n\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nc = undefined;","\n\nvar TessParams = {\n  //How many forward iterations to use when approximating Bezier curves\n  //More iterations are needed in case the min_seg_len setting below is smaller\n  //relative to mesh size. However, the two numbers need to be tuned together\n  //so that NUM_ITERATIONS is enough to result in segment lengths desired.\n\n  //Note that those values are tuned for PDF rendering, where text characters\n  //are drawn one by one. If a long piece of text is drawn all at once, then\n  //its bounding box will be quite large, so the relative min_seg_len will also\n  //be too large and the characters will look coarse. In such cases, we will need\n  //to better estimate this by using e.g. the font height only.\n  numIterations: 100,\n\n  //What fraction of the bounding sbox should be the minimum length of\n  //a segment\n  minSegLenFraction: 0.05 };\n\n\nexport function SetTesselationParams(num_iterations, min_seg_len_fraction) {\n  if (num_iterations)\n  TessParams.numIterations = num_iterations;\n\n  if (min_seg_len_fraction)\n  TessParams.minSegLenFraction = min_seg_len_fraction;\n}\n\n\nexport function TesselateCubic(ctx, px1, py1, px2, py2, px3, py3, px4, py4, maxdim, tessParams)\n{\n  tessParams = tessParams || TessParams;\n\n  //we will base the max number of segments to use for approximation\n  //on the bounds of the full line buffer contents\n  //TODO: as an improvement we could take the bounds of this particular curve\n  //with respect to the full bounds of the line buffer data.\n  maxdim = maxdim || 1 / tessParams.minSegLenFraction;\n\n  //minimum length of tesselation segment\n  //set to 1/100 of the bounds\n  var minSegLen = maxdim * tessParams.minSegLenFraction;\n\n  //but for now we will iterate 100 times\n  var dt = 1.0 / tessParams.numIterations;\n\n  //double dt2 = dt*dt;\n  var dt3 = dt * dt * dt;\n\n  var pre1 = 3.0 * dt;\n  var pre2 = pre1 * dt;\n  var pre3 = pre2 + pre2;\n  var pre4 = 6.0 * dt3;\n\n  var temp1x = px1 - 2.0 * px2 + px3;\n  var temp1y = py1 - 2.0 * py2 + py3;\n  var temp2x = 3.0 * (px2 - px3) - px1 + px4;\n  var temp2y = 3.0 * (py2 - py3) - py1 + py4;\n\n  var fx = px1;\n  var fy = py1;\n  var dfx = (px2 - px1) * pre1 + temp1x * pre2 + temp2x * dt3;\n  var dfy = (py2 - py1) * pre1 + temp1y * pre2 + temp2y * dt3;\n  var ddfx = temp1x * pre3 + temp2x * pre4;\n  var ddfy = temp1y * pre3 + temp2y * pre4;\n  var dddfx = temp2x * pre4;\n  var dddfy = temp2y * pre4;\n\n  var error = 0.0;\n\n  // forward differencing loop\n  var tMax = 0 | 1.0 / dt - 0.5;\n  for (var t = 0; t < tMax; t++)\n  {\n    fx += dfx;\n    fy += dfy;\n    dfx += ddfx;\n    dfy += ddfy;\n    ddfy += dddfy;\n    ddfx += dddfx;\n\n    error += Math.sqrt(dfx * dfx + dfy * dfy);\n\n    if (error >= minSegLen) //add segment only if we have reached treshold length\n      {\n        // line to current\n        ctx.lineTo(fx, fy);\n        error = 0.0;\n      }\n  }\n\n  ctx.lineTo(px4, py4);\n}\n\nexport function TesselateQuad(ctx, px1, py1, px2, py2, px3, py3, maxdim, tessParams)\n{\n  tessParams = tessParams || TessParams;\n\n  //we will base the max number of segments to use for approximation\n  //on the bounds of the full line buffer contents\n  //TODO: as an improvement we could take the bounds of this particular curve\n  //with respect to the full bounds of the line buffer data.\n  maxdim = maxdim || 1 / tessParams.minSegLenFraction;\n\n  //minimum length of tesselation segment\n  //set to a fraction of the bbox of the entire path (value chosen to work well for text at reasonable font size)\n  var minSegLen = maxdim * tessParams.minSegLenFraction;\n\n  //but for now we will iterate 100 times\n  var dt = 1.0 / tessParams.numIterations;\n\n  var dt2 = dt * dt;\n\n  var ax = px1 - 2.0 * px2 + px3; //replace 2* by addition?\n  var ay = py1 - 2.0 * py2 + py3; //replace 2* by addition?\n\n  var bx = 2.0 * (px2 - px1);\n  var by = 2.0 * (py2 - py1);\n\n  var fx = px1;\n  var fy = py1;\n  var dfx = bx * dt + ax * dt2;\n  var dfy = by * dt + ay * dt2;\n  var ddfx = 2.0 * ax * dt2;\n  var ddfy = 2.0 * ay * dt2;\n\n  var error = 0.0;\n\n  //forward differencing loop\n  var tMax = 0 | 1.0 / dt - 0.5;\n  for (var t = 0; t < tMax; t++)\n  {\n    fx += dfx;\n    fy += dfy;\n    dfx += ddfx;\n    dfy += ddfy;\n\n    error += Math.sqrt(dfx * dfx + dfy * dfy);\n\n    if (error >= minSegLen) // how many pixels should each line be?)\n      {\n        ctx.lineTo(fx, fy);\n        error = 0.0;\n      }\n  }\n\n  ctx.lineTo(px3, py3);\n}","\nimport { TesselateCubic, TesselateQuad } from \"./bezier\";\nimport ClipperLib from \"./libs/clipper\";\nimport Earcut from \"./libs/earcut\";\n\n\n//Helper for converting complex HTML Canvas paths to simple polylines / polygons\n\n\nvar MOVETO = 0,\nLINETO = 1,\nARC = 2,\nARCTO = 3,\nQUADTO = 4,\nCUBICTO = 5,\nCLOSE = 7;\n\n\nvar _v2 = new THREE.Vector2();\nvar _tmpBox = new THREE.Box2();\n\nexport function Path2D(precisionTolerance) {\n  this.segTypes = [];\n  this.segData = [];\n  this.hasCurves = false;\n  this.bbox = new THREE.Box2();\n  this.precisionTolerance = precisionTolerance;\n}\n\n// Optional: Use custom tesselation params for bezier arcs. Undefined sets to default.\nPath2D.prototype.setTessParams = function (tessParams) {\n  this.tessParams = tessParams;\n};\n\nPath2D.prototype.closePath = function () {\n  if (this.segTypes.length && this.segTypes[this.segTypes.length - 1] === CLOSE)\n  return;\n  this.segTypes.push(CLOSE);\n};\n\n\nPath2D.prototype.moveTo = function (x, y) {\n  this.segTypes.push(MOVETO);\n  this.segData.push(x, y);\n\n  this.bbox.expandByPoint(_v2.set(x, y));\n};\n\nPath2D.prototype.lineTo = function (x, y) {\n  this.segTypes.push(LINETO);\n  this.segData.push(x, y);\n\n  this.bbox.expandByPoint(_v2.set(x, y));\n};\n\nPath2D.prototype.arc = function (x, y, radius, startAngle, endAngle, anticlockwise) {\n  this.hasCurves = true;\n  this.segTypes.push(ARC);\n  this.segData.push(x, y, radius, startAngle, endAngle, anticlockwise);\n\n  this.bbox.expandByPoint(_v2.set(x, y)); //TODO: all corners\n};\n\nPath2D.prototype.arcTo = function (x1, y1, x2, y2, radius) {\n  this.hasCurves = true;\n  this.segTypes.push(ARCTO);\n  this.segData.push(x1, y1, x2, y2, radius);\n\n  this.bbox.expandByPoint(_v2.set(x1, y1));\n  this.bbox.expandByPoint(_v2.set(x2, y2));\n};\n\nPath2D.prototype.quadraticCurveTo = function (cp1x, cp1y, x, y) {\n  this.hasCurves = true;\n  this.segTypes.push(QUADTO);\n  this.segData.push(cp1x, cp1y, x, y);\n\n  this.bbox.expandByPoint(_v2.set(cp1x, cp1y));\n  this.bbox.expandByPoint(_v2.set(x, y));\n};\n\nPath2D.prototype.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n  this.hasCurves = true;\n  this.segTypes.push(CUBICTO);\n  this.segData.push(cp1x, cp1y, cp2x, cp2y, x, y);\n  this.bbox.expandByPoint(_v2.set(cp1x, cp1y));\n  this.bbox.expandByPoint(_v2.set(cp2x, cp2y));\n  this.bbox.expandByPoint(_v2.set(x, y));\n};\n\nPath2D.prototype.flatten = function (forceCloseContours) {\n\n  var ret = new Path2D(this.precisionTolerance);\n\n  var dataOffset = 0;\n  var lastX = 0;\n  var lastY = 0;\n  var contourStartX = lastX;\n  var contourStartY = lastY;\n\n  var segTypes = this.segTypes;\n  var segData = this.segData;\n\n  var sz = this.bbox.size().length();\n\n  for (var i = 0; i < segTypes.length; i++) {\n\n    var st = segTypes[i];\n\n    switch (st) {\n\n      case MOVETO:{\n          if (forceCloseContours) {\n            if (lastX !== contourStartX || lastY !== contourStartY) {\n              ret.closePath();\n            }\n          }\n\n          lastX = segData[dataOffset++];\n          lastY = segData[dataOffset++];\n          contourStartX = lastX;\n          contourStartY = lastY;\n          ret.moveTo(lastX, lastY);\n        }\n        break;\n      case CLOSE:\n        ret.closePath();\n        break;\n      case LINETO:{\n          var x = segData[dataOffset++];\n          var y = segData[dataOffset++];\n\n          if (x !== lastX || y !== lastY) {\n            ret.lineTo(x, y);\n\n            lastX = x;\n            lastY = y;\n          }\n        }\n        break;\n      case QUADTO:{\n          var cp1x = segData[dataOffset++],cp1y = segData[dataOffset++],\n          x = segData[dataOffset++],y = segData[dataOffset++];\n          TesselateQuad(ret, lastX, lastY, cp1x, cp1y, x, y, sz, this.tessParams);\n          //ret.lineTo(cp1x, cp1y);ret.lineTo(x.y);\n\n          lastX = x;\n          lastY = y;\n        }\n        break;\n      case CUBICTO:{\n          var cp1x = segData[dataOffset++],cp1y = segData[dataOffset++],\n          cp2x = segData[dataOffset++],cp2y = segData[dataOffset++],\n          x = segData[dataOffset++],y = segData[dataOffset++];\n          TesselateCubic(ret, lastX, lastY, cp1x, cp1y, cp2x, cp2y, x, y, sz, this.tessParams);\n          //ret.lineTo(cp1x, cp1y);ret.lineTo(cp2x,cp2y);ret.lineTo(x.y);\n\n          lastX = x;\n          lastY = y;\n        }\n        break;\n      case ARC:\n        console.warn(\"not implemented: arc\");\n        dataOffset += 6;\n        break;\n      case ARCTO:\n        console.warn(\"not implemented: arcto\");\n        dataOffset += 4;\n        break;}\n\n  }\n\n  if (forceCloseContours) {\n    if (lastX !== contourStartX || lastY !== contourStartY) {\n      ret.closePath();\n    }\n  }\n\n  return ret;\n};\n\nPath2D.prototype.applyTransform = function (loader, xform) {\n\n  for (var i = 0; i < this.segData.length; i += 2) {\n\n    var x = this.segData[i];\n    var y = this.segData[i + 1];\n\n    this.segData[i] = loader.tx(x, y, xform);\n    this.segData[i + 1] = loader.ty(x, y, xform);\n  }\n};\n\nPath2D.prototype.stroke = function (loader, lineWidth, color, dbId, layerId, clipPathIn, applyTransform, lineStyle) {var _this = this;\n  var needClipping = clipPathIn != null;\n  var subjFlatted = this;\n  if (applyTransform || this.hasCurves) {\n    subjFlatted = this.flatten(false);\n  }\n\n  var self = this;\n  // check weather we can do simple path\n  if (needClipping) {\n    var subPaths = [];\n    var subPath;\n    var segIndex = 0;\n    for (var i = 0; i < subjFlatted.segTypes.length; i++) {\n      if (subjFlatted.segTypes[i] == MOVETO) {\n        subPath = new Path2D(this.precisionTolerance);\n        subPaths.push(subPath);\n        subPath.moveTo(subjFlatted.segData[segIndex++], subjFlatted.segData[segIndex++]);\n      } else if (subjFlatted.segTypes[i] == LINETO) {\n        subPath.lineTo(subjFlatted.segData[segIndex++], subjFlatted.segData[segIndex++]);\n      } else if (subjFlatted.segTypes[i] == CLOSE) {\n        subPath.closePath();\n      }\n    }\n\n    var clipFlatted = clipPathIn.flattened || clipPathIn.flatten(true);\n    var clips = clipFlatted.toClipperPath(loader, false);\n    subPaths.map(function (subPath) {\n      // still need to do a check for each subPath\n      var subPreResult = self.preCheckForClipping(loader, clipFlatted, subPath, applyTransform, true);\n      if (subPreResult.needCancel) {\n        return;\n      } else if (subPreResult.needClipping) {\n        var myPath = subPath.toClipperPath(loader, applyTransform)[0];\n        if (!myPath) {\n          return;\n        }\n\n        var solution = new ClipperLib.PolyTree();\n        var cpr = new ClipperLib.Clipper();\n        // if the path is closed, but we set the open flag, it will cause infinity loop\n        var closed = myPath[0].X == myPath[myPath.length - 1].X && myPath[0].Y == myPath[myPath.length - 1].Y;\n        cpr.AddPath(myPath, ClipperLib.PolyType.ptSubject, closed);\n        cpr.AddPaths(clips, ClipperLib.PolyType.ptClip, true);\n\n        cpr.Execute(ClipperLib.ClipType.ctIntersection, solution, ClipperLib.PolyFillType.pftEvenOdd, ClipperLib.PolyFillType.pftEvenOdd);\n        strokeClipperSolution(solution);\n      } else {\n        _this.strokeFlattedPath(loader, subPath, lineWidth, color, dbId, layerId, applyTransform, lineStyle);\n      }\n    });\n  } else {\n    // just draw all the segments\n    this.strokeFlattedPath(loader, subjFlatted, lineWidth, color, dbId, layerId, applyTransform, lineStyle);\n  }\n\n  function strokeClipperSolution(solution) {\n    var node = solution.GetFirst();\n    while (node) {\n      self.strokeClipperContour(loader, node.Contour(), node.IsOpen, color, lineWidth, dbId, layerId, loader.currentVpId, lineStyle, false);\n      node = node.GetNext();\n    }\n  }\n};\n\nPath2D.prototype.strokeFlattedPath = function (loader, flatted, lineWidth, color, dbId, layerId, applyTransform, lineStyle) {\n  var segData = flatted.segData;\n  var segTypes = flatted.segTypes;\n\n  var xform;\n  if (applyTransform) {\n    xform = loader.getCurrentTransform();\n  }\n\n  var dataOffset = 0;\n  var lastX = 0;\n  var lastY = 0;\n  var contourStartX = 0;\n  var contourStartY = 0;\n\n  for (var i = 0; i < segTypes.length; i++) {\n\n    var st = segTypes[i];\n\n    switch (st) {\n\n      case MOVETO:{\n          var tmpx = segData[dataOffset++];\n          var tmpy = segData[dataOffset++];\n\n          if (applyTransform) {\n            contourStartX = loader.tx(tmpx, tmpy, xform);\n            contourStartY = loader.ty(tmpx, tmpy, xform);\n          } else {\n            contourStartX = tmpx;\n            contourStartY = tmpy;\n          }\n\n          lastX = contourStartX;\n          lastY = contourStartY;\n        }\n        break;\n      case CLOSE:\n      case LINETO:{\n          var x = void 0,y = void 0;\n          if (st === CLOSE) {\n            x = contourStartX;\n            y = contourStartY;\n          } else {\n            var _tmpx = segData[dataOffset++];\n            var _tmpy = segData[dataOffset++];\n\n            if (applyTransform) {\n              x = loader.tx(_tmpx, _tmpy, xform);\n              y = loader.ty(_tmpx, _tmpy, xform);\n            } else {\n              x = _tmpx;\n              y = _tmpy;\n            }\n          }\n\n          if (x !== lastX || y !== lastY) {\n\n            //Use centerpoint for the initial inside check for better numeric stability,\n            //in case the start point is exactly on the clip polygon's edge, in which case the inside\n            //check would return a random result\n\n            //Segment is either completely inside or completely outside (does not intersect the clip path at all)\n            loader.flushBuffer(4);\n\n            loader.currentVbb.addSegment(lastX, lastY, x, y,\n            /*totalDistance*/0, lineWidth, color, dbId, layerId, loader.currentVpId || 0, lineStyle);\n\n\n            lastX = x;\n            lastY = y;\n          }\n        }\n        break;\n      default:{\n          console.error(\"Path must be flattened before rendering\");\n        }}\n\n  }\n};\n\nPath2D.prototype.strokeClipperContour = function (loader, contour, isOpen, color, lineWidth, dbId, layerId, vpId, lineStyle, applyTransform) {\n  var l = contour.length;\n  var lastIndex = isOpen ? 0 : l - 1;\n  var startIndex = isOpen ? 1 : 0;\n  var xform;\n  if (applyTransform) {\n    xform = loader.getCurrentTransform();\n  }\n  var lastx = applyTransform ? loader.tx(contour[lastIndex].X, contour[lastIndex].Y, xform) : contour[lastIndex].X;\n  var lasty = applyTransform ? loader.ty(contour[lastIndex].X, contour[lastIndex].Y, xform) : contour[lastIndex].Y;\n  for (var i = startIndex; i < l; i++) {\n    var x = applyTransform ? loader.tx(contour[i].X, contour[i].Y, xform) : contour[i].X;\n    var y = applyTransform ? loader.ty(contour[i].X, contour[i].Y, xform) : contour[i].Y;\n\n    loader.flushBuffer(4);\n    loader.currentVbb.addSegment(lastx, lasty, x, y, 0, lineWidth, color, dbId, layerId, vpId, lineStyle);\n    lastx = x, lasty = y;\n  }\n};\n\n//Checks if the path is a simple AABB.\n//Used to speed up polygon clipping operations.\nPath2D.prototype.isAABB = function () {\n\n  var EPS = 1e-10;\n  var ANGLE_EPS = 1e-3;\n\n  var st = this.segTypes;\n\n  if (st.length !== 6 && st.length !== 5)\n  return false;\n\n  if (st[0] !== MOVETO)\n  return false;\n\n  if (st.length === 6 && st[5] !== CLOSE)\n  return false;else\n  if (st.length === 5 && st[4] !== CLOSE && st[4] !== LINETO)\n  return false;\n\n  for (var i = 1; i < st.length - 1; i++) {\n    if (st[i] !== LINETO)\n    return false;}\n\n\n  var seg = this.segData;\n\n  //check segments 1 and 3 for parallel and same length\n  var dxA = seg[2] - seg[0];\n  var dyA = seg[3] - seg[1];\n  var dxC = seg[6] - seg[4];\n  var dyC = seg[7] - seg[5];\n  var lenA = Math.sqrt(dxA * dxA + dyA * dyA);\n  var lenC = Math.sqrt(dxC * dxC + dyC * dyC);\n\n  if (Math.abs(lenA - lenC) > EPS)\n  return false;\n\n  dxA /= lenA;dyA /= lenA;\n  dxC /= lenC;dyC /= lenC;\n  var dot = dxA * dxC + dyA * dyC;\n\n  if (Math.abs(1 + dot) > ANGLE_EPS)\n  return false;\n\n  //check segments 2 and 4 for parallel and same length\n  var dxB = seg[4] - seg[2];\n  var dyB = seg[5] - seg[3];\n  var dxD = seg[8] - seg[6];\n  var dyD = seg[9] - seg[7];\n  var lenB = Math.sqrt(dxB * dxB + dyB * dyB);\n  var lenD = Math.sqrt(dxD * dxD + dyD * dyD);\n\n  if (Math.abs(lenB - lenD) > EPS)\n  return false;\n\n  dxB /= lenB;dyB /= lenB;\n  dxD /= lenD;dyD /= lenD;\n  dot = dxB * dxD + dyB * dyD;\n\n  if (Math.abs(1 + dot) > ANGLE_EPS)\n  return false;\n\n  //make sure there is a right angle\n  dot = dxA * dxB + dyA * dyB;\n\n  if (Math.abs(dot) > ANGLE_EPS)\n  return false;\n\n  //make sure segments are vertical/horizontal\n  if (Math.abs(dxA) > EPS && Math.abs(dyA))\n  return false;\n\n  return true;\n};\n\nvar INSIDE = 1;\nvar OUTSIDE = 2;\nvar UNKNOWN = 4;\n\nfunction bboxOverlap(clipBox, pathBox, precisionTolerance) {\n\n  if (clipBox.containsBox(pathBox))\n  return INSIDE;\n\n  //The above AABB containment check is exact\n  //and sometimes misses cases where the bboxes are\n  //almost exactly equal, with very slight numeric noise in the values\n  //(which happens quite often with Revit PDFs)\n\n  //So now do another check if our bbox contains the input bbox within a tolerance\n  var EPS = precisionTolerance;\n\n  if (EPS === undefined) {\n    EPS = 1e-3 / clipBox.size().length();\n  }\n\n  if (pathBox.min.x - clipBox.max.x > EPS)\n  return OUTSIDE;\n  if (pathBox.min.y - clipBox.min.y > EPS)\n  return OUTSIDE;\n\n  if (pathBox.max.x - clipBox.max.x < -EPS)\n  return OUTSIDE;\n  if (pathBox.max.y - clipBox.max.y < -EPS)\n  return OUTSIDE;\n\n  if (pathBox.min.x - clipBox.min.x < -EPS)\n  return UNKNOWN;\n  if (pathBox.min.y - clipBox.min.y < -EPS)\n  return UNKNOWN;\n\n  if (pathBox.max.x - clipBox.max.x > EPS)\n  return UNKNOWN;\n  if (pathBox.max.y - clipBox.max.y > EPS)\n  return UNKNOWN;\n\n  return INSIDE;\n}\n\nPath2D.prototype.isAABBContain = function (bbox) {\n\n  if (!this.isAABB())\n  return UNKNOWN;\n\n  return bboxOverlap(this.bbox, bbox, this.precisionTolerance);\n};\n\n\nPath2D.prototype.clip = function (clipPathIn, mode) {\n  var clipFlatted = clipPathIn.flattened || clipPathIn.flatten(true);\n  var subjFlatted = this.flattened || this.flatten(true);\n\n  var preResult = this.preCheckForClipping(null, clipFlatted, subjFlatted, false, false);\n  if (preResult.needCancel) {\n    console.warn(\"No overlap between nested clip regions.\");\n    return null;\n  } else if (preResult.needClipping == false) {\n    if (preResult.needSwapSubject) {\n      return clipPathIn;\n    } else {\n      return this;\n    }\n  } else {\n    // do the clipping here\n    var clips = clipFlatted.toClipperPath(null, false);\n    var myPath = subjFlatted.toClipperPath(null, false);\n\n    var solution = new ClipperLib.PolyTree();\n    var cpr = new ClipperLib.Clipper();\n    cpr.AddPaths(myPath, ClipperLib.PolyType.ptSubject, true);\n    cpr.AddPaths(clips, ClipperLib.PolyType.ptClip, true);\n\n    cpr.Execute(ClipperLib.ClipType.ctIntersection, solution, ClipperLib.PolyFillType.pftEvenOdd, ClipperLib.PolyFillType.pftEvenOdd);\n\n    // need to rebuild a path from the solution, no need to do the tesselation\n    var res = new Path2D(this.precisionTolerance);\n    var node = solution.GetFirst();\n    while (node) {\n      var contour = node.Contour();\n      for (var i = 0; i < contour.length; i++) {\n        if (i == 0) {\n          res.moveTo(contour[i].X, contour[i].Y);\n        } else {\n          res.lineTo(contour[i].X, contour[i].Y);\n        }\n      }\n\n      if (contour[contour.length - 1].X != contour[0].X || contour[contour.length - 1].Y != contour[0].Y) {\n        res.lineTo(contour[0].X, contour[0].Y);\n      }\n      node = node.GetNext();\n    }\n    return res;\n  }\n};\n\n/**\n    * If segments type is 0, 1, 0, 1 pattern, we should avoid to do fill to it\n    * Most of the time, it wants to be line segments, but from 2D, you can always pass a fill/stroke command to it.\n    * Eatch MoveTo should start with a segment.\n    */\nPath2D.prototype.isFillable = function () {\n  //Skip some easily detectable degenerate polygons that result in no fill\n  var p = this.flattened || this.flatten(true);\n  if (p.segTypes.length < 3) {\n    return false;\n  } else if (p.segTypes.length === 3) {\n    if (p.segTypes[2] === CLOSE &&\n    p.segTypes[1] === LINETO &&\n    p.segTypes[0] === MOVETO) {\n      return false;\n    }\n  } else {\n    var isFillable = false;\n\n    for (var i = 0; i < p.segTypes.length; i += 2) {\n      if (!(p.segTypes[i] == MOVETO && p.segTypes[i + 1] == LINETO)) {\n        isFillable = true;\n        break;\n      }\n    }\n    return isFillable;\n  }\n};\n\nPath2D.prototype.fill = function (loader, color, dbId, layerId, clipPathIn, applyTransform, isFillStrokeCombo) {\n  if (!this.isFillable()) {\n    return;\n  }\n\n  var subjFlatted = this.flattened || this.flatten(true);\n  var self = this;\n\n  function clipProcess() {\n    var needClipping = clipPathIn != null;\n    var needSwapSubject = false;\n    // check weather we can do simple path\n    if (needClipping) {\n      var clipFlatted = clipPathIn.flattened || clipPathIn.flatten(true);\n\n      var preResult = self.preCheckForClipping(loader, clipFlatted, subjFlatted, applyTransform, false);\n      if (preResult.needCancel) {\n        return;\n      }\n\n      needClipping = preResult.needClipping;\n      needSwapSubject = preResult.needSwapSubject;\n    }\n\n    if (needClipping) {\n      var clipFlatted = clipPathIn.flattened || clipPathIn.flatten(true);\n      var clips = clipFlatted.toClipperPath(loader, false);\n      var myPath = subjFlatted.toClipperPath(loader, applyTransform);\n\n      var solution = new ClipperLib.PolyTree();\n      var cpr = new ClipperLib.Clipper();\n      cpr.AddPaths(myPath, ClipperLib.PolyType.ptSubject, true);\n      cpr.AddPaths(clips, ClipperLib.PolyType.ptClip, true);\n\n      cpr.Execute(ClipperLib.ClipType.ctIntersection, solution, ClipperLib.PolyFillType.pftEvenOdd, ClipperLib.PolyFillType.pftEvenOdd);\n\n      var polygons = self.getPolygonFromClipperSolution(solution);\n      return {\n        polygons: polygons,\n        appliedTransform: applyTransform,\n        needClipping: needClipping };\n\n    } else {\n      // if we use clip path directly as subject, we can not cache it, and should not apply transform to it\n      subjFlatted = !needSwapSubject ? subjFlatted : clipFlatted;\n      if (self.cached) {\n        return {\n          polygons: self.cached,\n          appliedTransform: false,\n          needClipping: needClipping,\n          subjFlatted: subjFlatted };\n\n      } else {\n        var myPath = subjFlatted.toClipperPath(loader, false);\n\n        var solution = new ClipperLib.PolyTree();\n        var cpr = new ClipperLib.Clipper();\n        cpr.AddPaths(myPath, ClipperLib.PolyType.ptSubject, true);\n        cpr.Execute(ClipperLib.ClipType.ctUnion, solution, ClipperLib.PolyFillType.pftEvenOdd, ClipperLib.PolyFillType.pftEvenOdd);\n        var polygons = self.getPolygonFromClipperSolution(solution);\n        if (!needSwapSubject) {\n          self.cached = polygons;\n        }\n        return {\n          polygons: polygons,\n          appliedTransform: needSwapSubject, // clipPath has already applied transform\n          needClipping: needClipping,\n          subjFlatted: subjFlatted };\n\n      }\n    }\n  }\n\n  function fillPolygon(polygon, needApplytransform, needClipping) {\n    var vertices = polygon.vertices;\n\n    if (needApplytransform) {\n      var xform = loader.getCurrentTransform();\n      var vertices1 = [];\n      for (var i = 0; i < vertices.length; i += 2) {\n        var x = loader.tx(vertices[i], vertices[i + 1], xform);\n        var y = loader.ty(vertices[i], vertices[i + 1], xform);\n        vertices1.push(x, y);\n      }\n      vertices = vertices1;\n    }\n    loader.addPolyTriangle(vertices, polygon.indices, color, dbId, layerId, false);\n\n    // do the antialias stroke here\n    if (!isFillStrokeCombo) {\n      if (needClipping || !self.isFontChar) {\n        for (var c in polygon.contours) {\n          self.strokeClipperContour(loader, polygon.contours[c], true, color, -0.5, dbId, layerId, loader.currentVpId, 0, needApplytransform);\n        }\n      } else {\n        // stroke the line with the original flatted path\n        self.strokeFlattedPath(loader, result.subjFlatted, -0.5, color, dbId, layerId, needApplytransform, 0);\n      }\n    }\n  }\n\n  var result = clipProcess();\n  if (result) {\n    result.polygons.map(function (polygon) {\n      var needApplytransform = applyTransform && !result.appliedTransform;\n      fillPolygon(polygon, needApplytransform, result.needClipping);\n    });\n  }\n};\n\n\nPath2D.prototype.toClipperPath = function (loader, applyTransform) {\n  var paths = [];\n  var path = [];\n  var segTypes = this.segTypes;\n  var segData = this.segData;\n  var segIndex = 0;\n  var xform;\n  if (applyTransform) {\n    xform = loader.getCurrentTransform();\n  }\n\n  function addPoint(path, point) {\n    if (applyTransform) {\n      var x = loader.tx(point.X, point.Y, xform);\n      var y = loader.ty(point.X, point.Y, xform);\n      point.X = x;\n      point.Y = y;\n    }\n\n    if (path.length > 0 && (path[path.length - 1].X != point.X || path[path.length - 1].Y != point.Y) || path.length == 0) {\n      path.push(point);\n    }\n  }\n\n  for (var i = 0; i < segTypes.length; i++) {\n    if (segTypes[i] == MOVETO) {\n      if (path && path.length > 1) {\n        paths.push(path);\n      }\n      path = [];\n      addPoint(path, { X: segData[segIndex++], Y: segData[segIndex++] });\n    } else if (segTypes[i] == LINETO) {\n      addPoint(path, { X: segData[segIndex++], Y: segData[segIndex++] });\n    } else if (segTypes[i] == CLOSE) {\n      path.push({ X: path[0].X, Y: path[0].Y });\n      paths.push(path);\n      path = [];\n    }\n  }\n\n  if (path && path.length > 1) {\n    paths.push(path);\n  }\n\n  return paths;\n};\n\nPath2D.prototype.hasIntersection = function (box1, box2, tolerance) {\n  return !(box1.max.x - box2.min.x <= -tolerance || // left\n  box1.max.y - box2.min.y <= -tolerance || // bottom\n  box1.min.x - box2.max.x >= tolerance || // right\n  box1.min.y - box2.max.y >= tolerance); // top\n};\n\nPath2D.prototype.preCheckForClipping = function (loader, clipFlatted, subjFlatted, applyTransform, strokeOnly) {\n  var clipBound = clipFlatted.bbox;\n  var subjBound = subjFlatted.bbox;\n\n  if (applyTransform) {\n    var xform = loader.getCurrentTransform();\n    // we need to apply transform to the subject bounds\n    subjBound = loader.transformBox(subjBound, xform, _tmpBox);\n  }\n\n  // do a simple check if two bounds has no overlap, set need cancel to true\n  if (!this.hasIntersection(clipBound, subjBound, this.precisionTolerance)) {\n    return {\n      needCancel: true };\n\n  } else if (clipFlatted.isAABB() && clipBound.containsBox(subjBound)) {\n    return {\n      needClipping: false };\n\n  } else\n  if (subjFlatted.isAABB() && subjBound.containsBox(clipBound)) {\n    // there is nothing to stroke\n    if (strokeOnly) {\n      return {\n        needCancel: true };\n\n    } else {\n      return {\n        needClipping: false,\n        needSwapSubject: true };\n\n    }\n  } else\n  {\n    return {\n      needClipping: true };\n\n  }\n};\n\nPath2D.prototype.getPolygonFromClipperSolution = function (solution) {\n  function addContour(contours, vertices, contour) {\n    for (var i = 0; i < contour.length; i++) {\n      vertices.push(contour[i].X, contour[i].Y);\n    }\n    contours.push(contour);\n  }\n\n  var exPolygons = ClipperLib.JS.PolyTreeToExPolygons(solution);\n  var polygons = exPolygons.map(function (item) {\n    var vertices = [];\n    var holeIndices = [];\n    var contours = [];\n\n    // clipper library has some defect when we use 4 thickline to construct a rectangle with border\n    // It flipped the hole and outer\n    // Add this logic to flip it back to the correct value\n    if (item.holes.length == 1 && Math.abs(ClipperLib.JS.AreaOfPolygons(item.holes)) > Math.abs(ClipperLib.JS.AreaOfPolygon(item.outer))) {\n      var temp = item.holes[0];\n      item.holes[0] = item.outer;\n      item.outer = temp;\n    }\n    addContour(contours, vertices, item.outer);\n\n    item.holes.map(function (hole) {\n      holeIndices.push(vertices.length / 2);\n      addContour(contours, vertices, hole);\n    });\n\n    var indices = Earcut(vertices, holeIndices);\n    return {\n      vertices: vertices,\n      indices: indices,\n      holeIndices: holeIndices,\n      contours: contours };\n\n  });\n\n  return polygons;\n};\n\n\nPath2D.prototype.msdfClipping = function (clipFlatted) {\n  var subjFlatted = this.flattened || this.flatten(true);\n  var myPath = subjFlatted.toClipperPath(null, false);\n  var clips = clipFlatted.toClipperPath(null, false);\n\n  var solution = new ClipperLib.PolyTree();\n  var cpr = new ClipperLib.Clipper();\n  cpr.AddPaths(myPath, ClipperLib.PolyType.ptSubject, true);\n  cpr.AddPaths(clips, ClipperLib.PolyType.ptClip, true);\n\n  cpr.Execute(ClipperLib.ClipType.ctIntersection, solution, ClipperLib.PolyFillType.pftEvenOdd, ClipperLib.PolyFillType.pftEvenOdd);\n\n  return this.getPolygonFromClipperSolution(solution);\n};","function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}\nvar av = Autodesk.Viewing,\navp = av.Private;\n\nvar VertexBufferBuilder = avp.VertexBufferBuilder;\n\nimport { Path2D } from \"./path2d\";\nimport { SetTesselationParams } from \"./bezier\";\n\nvar _document = av.getGlobal().document;\n//Custom implementation of HTML Canvas API used for rendering PDF geometry using the WebGL accelerated F2D renderer\n\n\n//A custom context object that overloads standard HMTL Canvas 2D context to intercept draw\n//calls and pipe them into LMV vertex buffers\nexport function hijackContextAPI(inContext, lmvContext) {\n\n  var fnList = [\n  \"fillRect\",\n  \"strokeRect\",\n  \"clearRect\",\n  \"beginPath\",\n  \"closePath\",\n  \"moveTo\",\n  \"lineTo\",\n  \"arc\",\n  \"arcTo\",\n  \"quadraticCurveTo\",\n  \"bezierCurveTo\",\n  \"rect\",\n  \"fill\",\n  \"stroke\",\n  \"clip\",\n  \"strokeText\",\n  \"fillText\",\n  \"drawImage\",\n  \"save\",\n  \"restore\",\n  \"setLineDash\",\n  \"createPattern\",\n\n  // OCG related\n  \"beginMarkedContent\",\n  \"beginMarkedContentProps\",\n  \"endMarkedContent\",\n  \"setCurrentOperatorIndex\",\n\n  //Inject this function into canvas context so we can batch process inlineImageGroup related calls\n  \"needDelegateInlineImageGroup\",\n  \"isLMVCanvasContext\"];\n\n\n  fnList.forEach(function (fn) {\n    inContext[\"_original\" + fn] = inContext[fn];\n    inContext[fn] = lmvContext[fn].bind(lmvContext);\n  });\n\n}\n\nvar QUAD_TEXTURE = 1;\nvar IMAGE_TEXTURE = 2;\n\nvar _tmpXform = new Array(6);\nvar _tmpVec = new THREE.Vector2();\nvar _tmpBox = new THREE.Box2();\n\n\n//Used for matrix decomposition in drawImage\nvar _offset = new THREE.Vector3();\nvar _quat = new THREE.Quaternion();\nvar _scale = new THREE.Vector3();\nvar _axis = new THREE.Vector3();\nvar _mtx4 = new THREE.Matrix4();\n\nexport var LmvCanvasContext = /*#__PURE__*/function () {_createClass(LmvCanvasContext, null, [{ key: \"isRef\",\n\n    /**\n                                                                                                               * Check is a PDF Ref object\n                                                                                                               * @param {PDF.Ref} obj \n                                                                                                               */value: function isRef(\n    obj) {\n      return obj != null && typeof obj.num === \"number\" && typeof obj.gen === \"number\";\n    }\n\n    /**\n       * generate a simple string works as a key for the ref.\n       * @param {PDF.Ref} ref \n       */ }, { key: \"refKey\", value: function refKey(\n    ref) {\n      return \"\".concat(ref.num, \"-\").concat(ref.gen);\n    } }]);\n\n  function LmvCanvasContext(viewport, toPageUnits, meshCallback, fontEngine, usingTextLayer, fontAtlas, pdfRefMap) {_classCallCheck(this, LmvCanvasContext);\n\n    //\n    // Prepare canvas using PDF page dimensions\n    //\n    //TODO: Do we need that or can we just overload the entire CanvasContext API and skip the HTML element creation completely?\n    var canvas = _document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    canvas.height = viewport.height;\n    canvas.width = viewport.width;\n\n    this.canvasContext = context; //REQUIRED for PDF.js interface\n    this.viewport = viewport; //REQUIRED for PDF.js interface\n    this.toPageUnits = toPageUnits;\n\n    this.meshCallback = meshCallback;\n    // only set bounds for PDF, because edit2d and \n    if (viewport.clipToViewport == true) {\n      var offsetX = viewport.offsetX || 0;\n      var offsetY = viewport.offsetY || 0;\n      this.bounds = new THREE.Vector4(offsetX * toPageUnits, offsetY * toPageUnits,\n      (viewport.width + offsetX) * toPageUnits, (viewport.height + offsetY) * toPageUnits);\n    }\n\n    this.currentMeshIndex = 0;\n    this.imageNumber = 0;\n    this.currentVbb = new VertexBufferBuilder(false);\n    this._curPath = null;\n    this._curClip = null;\n    this.first = true;\n    this.states = [];\n    this.glyphCache = {};\n    this.usingTextLayer = usingTextLayer;\n\n    //Fixed precision tolerance assuming the input is in typographic \"point\" units.\n    this.precisionTolerance = 0.1;\n\n    this.dbId = -1;\n\n    // If true, dbId is automatically increased on each beginPath call.\n    this.consecutiveIds = false;\n\n    if (av.isMobileDevice()) {\n      SetTesselationParams(undefined, 0.1);\n    }\n\n    this.fontEngine = fontEngine;\n\n    // Use solid lines by default. See LineStyleDef.js for other line types (dashed etc.)\n    this.lineStyle = 0;\n\n    // If true, lines widths are applied in screen-space\n    this.isScreenSpace = false;\n\n    hijackContextAPI(context, this);\n\n    this.layers = {};\n    this.defaultLayerId = 0;\n    this.currentLayerId = this.defaultLayerId;\n    this.sequencedDbId = -1;\n    this.taggedId = null;\n    this.defaultVPId = 0;\n    this.currentVpId = this.defaultVPId;\n    this.viewports = [this.createViewPortData(new THREE.Matrix4().elements)];\n    this.viewportMap = {};\n\n    this.ocgStack = [];\n    // Revit dbID is larger then 4096, id remap is needed\n    this.idRemap = [];\n    this.idIndexMap = {};\n\n    this.msdfRender = true;\n    this.fontAtlas = fontAtlas;\n    this.pdfRefMap = pdfRefMap || {};\n  }_createClass(LmvCanvasContext, [{ key: \"updateDBId\", value: function updateDBId()\n\n    {\n      if (this.taggedId != null) {\n        if (this.idIndexMap[this.taggedId] != undefined) {\n          this.dbId = this.idIndexMap[this.taggedId];\n        } else {\n          this.sequencedDbId++;\n          this.dbId = this.sequencedDbId;\n          this.idRemap[this.dbId] = this.taggedId;\n          this.idIndexMap[this.taggedId] = this.dbId;\n        }\n      } else {\n        if (this.consecutiveIds) {\n          this.sequencedDbId++;\n          this.dbId = this.sequencedDbId;\n        }\n        this.idRemap[this.dbId] = this.dbId;\n      }\n    } }, { key: \"save\", value: function save()\n\n    {\n      //console.log(\"save\");\n      this.states.push({\n        clip: this._curClip,\n        consecutiveIds: this.consecutiveIds,\n        dbId: this.dbId,\n        lineDashedDef: this.lineDashedDef,\n        lineStyle: this.lineStyle });\n\n\n      this.canvasContext._originalsave();\n    } }, { key: \"restore\", value: function restore()\n\n    {\n\n      var state = this.states.pop();\n\n      if (state) {\n        this._curClip = state.clip;\n        this.consecutiveIds = state.consecutiveIds;\n        this.dbId = state.dbId;\n        this.lineDashedDef = state.lineDashedDef;\n        this.lineStyle = state.lineStyle;\n      }\n\n      //console.log(\"restore\");\n      this.canvasContext._originalrestore();\n    } }, { key: \"flushBuffer\", value: function flushBuffer(\n\n    addCount, finalFlush, textureOption)\n    {\n      if (!this.currentVbb.vcount && !finalFlush)\n      {\n        return;\n      }\n\n      var flush = finalFlush;\n      flush = flush || this.currentVbb.isFull(addCount);\n\n      if (flush) {\n        if (this.currentVbb.vcount) {\n          var mesh = this.currentVbb.toMesh();\n          mesh.material = {\n            skipEllipticals: !this.currentVbb.numEllipticals,\n            skipCircles: !this.currentVbb.numCirculars,\n            skipTriangleGeoms: !this.currentVbb.numTriangleGeoms,\n            useInstancing: this.currentVbb.useInstancing,\n            isScreenSpace: !this.currentImage,\n            hasLineStyles: this.currentVbb.hasLineStyles,\n            msdfFontTexture: !!this.hasMSDFContent,\n            viewportBounds: this.bounds,\n            imageUVTexture: textureOption === IMAGE_TEXTURE };\n\n\n          if (this.currentImage) {\n            mesh.material.image = this.currentImage;\n            mesh.material.image.name = this.currentImage.cacheKey || this.imageNumber++;\n            mesh.material.compositeOperation = this.canvasContext.globalCompositeOperation;\n            // Assume the background of PDF page is white, when use it to do multiply, white is better then black color\n            // And it should be correct for most cases\n            mesh.material.compositeCanvasColor = \"#ffffff\";\n            mesh.material.opacity = this.canvasContext.globalAlpha;\n            this.currentImage = null;\n          }\n\n          this.meshCallback(mesh, this.currentMeshIndex++);\n          this.currentVbb.reset(0);\n          this.hasMSDFContent = false;\n        }\n      }\n    }\n\n    //Polytriangle requires some post-processing depending on wheter instancing is used or not\n    //TODO: This is copy-pasted from the same function in F2D.js. It's purely used to\n    //add half width outline to polytriangles so that they look antialiased.\n  }, { key: \"addPolyTriangle\", value: function addPolyTriangle(points, inds, color, dbId, layer, antialiasEdges) {\n      var me = this;\n      var edgeMap = null;\n\n      var currentVpId = this.currentVpId;\n\n      var aaLineWeight = -0.5; //negative = in pixel units\n\n      function processEdge(iFrom, iTo) {\n        if (iFrom > iTo) {\n          var tmp = iFrom;\n          iFrom = iTo;\n          iTo = tmp;\n        }\n\n        if (!edgeMap[iFrom])\n        edgeMap[iFrom] = [iTo];else\n        {\n          var adjacentVerts = edgeMap[iFrom];\n          var idx = adjacentVerts.lastIndexOf(iTo);\n          if (idx == -1)\n          adjacentVerts.push(iTo); //first time we see this edge, so remember it as exterior edge\n          else\n            adjacentVerts[idx] = -1; //the second time we see an edge mark it as interior edge\n        }\n      }\n\n\n      function addAllAntialiasEdges() {\n\n        for (var i = 0, iEnd = edgeMap.length; i < iEnd; i++) {\n\n          var adjacentVerts = edgeMap[i];\n          if (!adjacentVerts)\n          continue;\n\n          for (var j = 0; j < adjacentVerts.length; j++) {\n            var iTo = adjacentVerts[j];\n            if (iTo == -1)\n            continue; //an interior edge was here -- skip\n            else {\n                //exterior edge -- add an antialiasing line for it\n                me.flushBuffer(4);\n                me.currentVbb.addSegment(points[2 * i], points[2 * i + 1],\n                points[2 * iTo], points[2 * iTo + 1],\n                me.currentLayerId,\n                aaLineWeight,\n                color,\n                dbId, layer, currentVpId, me.lineStyle);\n              }\n          }\n        }\n      }\n\n      function antialiasOneEdge(iFrom, iTo) {\n        if (iFrom > iTo) {\n          var tmp = iFrom;\n          iFrom = iTo;\n          iTo = tmp;\n        }\n\n        var adjacentVerts = edgeMap[iFrom];\n        if (!adjacentVerts)\n        return;\n\n        var idx = adjacentVerts.indexOf(iTo);\n        if (idx != -1) {\n          //exterior edge -- add an antialiasing line for it\n          me.flushBuffer(4);\n          me.currentVbb.addSegment(points[2 * iFrom], points[2 * iFrom + 1],\n          points[2 * iTo], points[2 * iTo + 1],\n          me.currentLayerId,\n          aaLineWeight,\n          color,\n          dbId, layer, currentVpId, me.lineStyle);\n        }\n      }\n\n      if (antialiasEdges) {\n        edgeMap = new Array(points.length / 2);\n\n        for (var i = 0, iEnd = inds.length; i < iEnd; i += 3) {\n          var i0 = inds[i];\n          var i1 = inds[i + 1];\n          var i2 = inds[i + 2];\n\n          processEdge(i0, i1);\n          processEdge(i1, i2);\n          processEdge(i2, i0);\n        }\n      }\n\n      if (isNaN(color) && color.isPattern === true) {\n        this.flushBuffer(0, true);\n        var image = color.image;\n        var count = points.length / 2; // number of vertices\n\n        this.flushBuffer(count);\n        var vbb = this.currentVbb;\n        var vbase = vbb.vcount;\n\n        // need to apply the transformation to the UV\n        var xform = this.getCurrentTransform();\n        var x1 = this.tx(0, 0, xform);\n        var y1 = this.ty(0, 0, xform);\n        var w1 = Math.abs(this.tx(image.width, image.height, xform) - x1);\n        var h1 = Math.abs(this.ty(image.width, image.height, xform) - y1);\n\n        for (var i = 0; i < count; ++i) {\n          var x = points[2 * i];\n          var y = points[2 * i + 1];\n\n          var u = (x - x1) / w1;\n          var v = (y - y1) / h1;\n          vbb.addVertexImagePolytriangle(x, y, u, v, 0xFFFFFFFF, dbId, layer, currentVpId);\n        }\n\n        this.currentImage = image;\n        vbb.addIndices(inds, vbase);\n        this.flushBuffer(0, true, IMAGE_TEXTURE);\n      } else {\n        if (this.currentVbb.useInstancing) {\n          var count = inds.length;\n          for (var i = 0; i < count; i += 3) {\n            var i0 = inds[i];\n            var i1 = inds[i + 1];\n            var i2 = inds[i + 2];\n\n            this.flushBuffer(4);\n\n            this.currentVbb.addTriangleGeom(points[2 * i0], points[2 * i0 + 1],\n            points[2 * i1], points[2 * i1 + 1],\n            points[2 * i2], points[2 * i2 + 1],\n            color, dbId, layer, currentVpId);\n\n            if (antialiasEdges) {\n              antialiasOneEdge(i0, i1);\n              antialiasOneEdge(i1, i2);\n              antialiasOneEdge(i2, i0);\n            }\n          }\n        } else\n        {\n          var count = points.length / 2; // number of vertices\n\n          this.flushBuffer(count);\n          var vbb = this.currentVbb;\n          var vbase = vbb.vcount;\n\n          for (var i = 0; i < count; ++i) {\n            var x = points[2 * i];\n            var y = points[2 * i + 1];\n            vbb.addVertexPolytriangle(x, y, color, dbId, layer, currentVpId);\n          }\n\n          vbb.addIndices(inds, vbase);\n\n          if (antialiasEdges) {\n            addAllAntialiasEdges();\n          }\n\n        }\n      }\n    }\n\n    //Extract colors from HTML Canvas state\n  }, { key: \"getFillColor\", value: function getFillColor() {\n      if (this.canvasContext.fillStyle && this.canvasContext.fillStyle.isPattern === true) {\n        return this.canvasContext.fillStyle;\n      } else if (typeof this.canvasContext.fillStyle !== \"string\") {\n        console.warn(\"Unsupported fill style.\");\n        return 0x00000000;\n      }\n\n      var rgb = parseInt(this.canvasContext.fillStyle.slice(1), 16);\n      var a = 255 * this.canvasContext.globalAlpha << 24;\n      var c = a | (rgb & 0xff) << 16 | rgb & 0xff00 | rgb >> 16 & 0xff;\n      return c;\n    } }, { key: \"getStrokeColor\", value: function getStrokeColor()\n\n    {\n\n      var ctx = this.canvasContext;\n\n      if (this.lastStrokeStyle === ctx.strokeStyle && ctx.globalAlpha === this.lastAlpha) {\n        return this.lastRgb;\n      } else {\n        var rgb = parseInt(ctx.strokeStyle.slice(1), 16);\n        var a = 255 * ctx.globalAlpha << 24;\n        var c = a | (rgb & 0xff) << 16 | rgb & 0xff00 | rgb >> 16 & 0xff;\n\n        this.lastRgb = c;\n        this.lastStrokeStyle = ctx.strokeStyle;\n        this.lastAlpha = ctx.globalAlpha;\n\n        return c;\n      }\n\n    } }, { key: \"getCurrentTransform\", value: function getCurrentTransform()\n\n    {\n      var xform = this.canvasContext.mozCurrentTransform;\n\n      //Pay attention here: In case we are processing the path of a character and we want to\n      //cache it for later use, we have to neutralize the part of the canvas transform that positions\n      //the character in the page, but we need to keep the rest of the transform (that positions parts\n      //of the character in its own em-box). This is what the inverse transform multiplication here does.\n      //TODO: we can optimize this to only compute the multiplication in case mozCurrentTransform changes.\n      if (this.isFontChar) {\n        var m = this.invXform;\n        var a = xform[0],b = xform[1],c = xform[2],d = xform[3],e = xform[4],f = xform[5];\n        _tmpXform[0] = m[0] * a + m[2] * b;\n        _tmpXform[1] = m[1] * a + m[3] * b;\n        _tmpXform[2] = m[0] * c + m[2] * d;\n        _tmpXform[3] = m[1] * c + m[3] * d;\n        _tmpXform[4] = m[0] * e + m[2] * f + m[4];\n        _tmpXform[5] = m[1] * e + m[3] * f + m[5];\n        return _tmpXform;\n      }\n\n      return xform;\n    } }, { key: \"tx\", value: function tx(\n\n    x, y, xform) {\n      xform = xform || this.getCurrentTransform();\n      return (x * xform[0] + y * xform[2] + xform[4]) * (this.isFontChar ? 1 : this.toPageUnits);\n    } }, { key: \"ty\", value: function ty(\n\n    x, y, xform) {\n      xform = xform || this.getCurrentTransform();\n      return (x * xform[1] + y * xform[3] + xform[5]) * (this.isFontChar ? 1 : this.toPageUnits);\n    } }, { key: \"scaleValue\", value: function scaleValue(\n\n    v, xform) {\n      xform = xform || this.getCurrentTransform();\n      return this.toPageUnits * Math.sqrt(Math.abs(xform[0] * xform[3] - xform[1] * xform[2])) * v; //assumes uniform;\n    } }, { key: \"transformBox\", value: function transformBox(\n\n    bbox, xform, dst) {\n      xform = xform || this.getCurrentTransform();\n\n      _tmpBox.makeEmpty();\n\n      _tmpVec.set(this.tx(bbox.min.x, bbox.min.y, xform), this.ty(bbox.min.x, bbox.min.y, xform));\n      _tmpBox.expandByPoint(_tmpVec);\n\n      _tmpVec.set(this.tx(bbox.max.x, bbox.min.y, xform), this.ty(bbox.max.x, bbox.min.y, xform));\n      _tmpBox.expandByPoint(_tmpVec);\n\n      _tmpVec.set(this.tx(bbox.max.x, bbox.max.y, xform), this.ty(bbox.max.x, bbox.max.y, xform));\n      _tmpBox.expandByPoint(_tmpVec);\n\n      _tmpVec.set(this.tx(bbox.min.x, bbox.max.y, xform), this.ty(bbox.min.x, bbox.max.y, xform));\n      _tmpBox.expandByPoint(_tmpVec);\n\n      if (dst) {\n        dst.copy(_tmpBox);\n        return dst;\n      } else {\n        return _tmpBox.clone();\n      }\n    } }, { key: \"fillRect\", value: function fillRect(\n\n\n    x, y, w, h) {\n\n      this.updateDBId();\n\n      var xform = this.getCurrentTransform();\n\n      var points = [\n      this.tx(x, y, xform), this.ty(x, y, xform),\n      this.tx(x + w, y, xform), this.ty(x + w, y, xform),\n      this.tx(x + w, y + h, xform), this.ty(x + w, y + h, xform),\n      this.tx(x, y + h, xform), this.ty(x, y + h, xform)];\n\n\n      var c = this.getFillColor();\n\n      var indices = [0, 1, 2, 0, 2, 3];\n\n      // Hack: Assumption here is that the first fillRect call is for the white background quad.\n      //       For this, we don't want a dbI and use -1 instead. Unfortunately, this fillRect call happens\n      //       inside PDF.js (see beginDrawing in display/canvas.js), so we cannot easily set this id from outside.\n      var dbId = this.first ? -1 : this.dbId;\n\n      this.addPolyTriangle(points, indices, c, dbId, this.currentLayerId, false);\n\n      this.first = false;\n    } }, { key: \"strokeRect\", value: function strokeRect(\n\n    x, y, w, h) {\n      //TODO:\n      console.log(\"strokeRect\");\n    } }, { key: \"clearRect\", value: function clearRect(\n\n    x, y, w, h) {\n      console.log(\"clearRect\");\n      //TODO:\n    } }, { key: \"_beginTextChar\", value: function _beginTextChar(\n\n    character, x, y, font, fontSize) {\n      this.isFontChar = true;\n      this.invXform = this.canvasContext.mozCurrentTransformInverse;\n      this.hashKey = character.charCodeAt(0) + \"/\" + font.loadedName + \"/\" + fontSize;\n      this.cachedGlyph = this.glyphCache[this.hashKey];\n\n      if (this.cachedGlyph) {\n        this.skipPath = true;\n      } else {\n        this.skipPath = false;\n      }\n      //console.log(character, x, y, font, fontSize);\n    } }, { key: \"drawMSDFText\", value: function drawMSDFText(\n\n    character, scaleX, scaleY, font, fontSize) {\n      scaleX = 0;\n      var fontName = font.name;\n\n      function distance(x0, y0, x1, y1, x2, y2) {\n        return Math.abs((y2 - y1) * x0 - (x2 - x1) * y0 + x2 * y1 - y2 * x1) / Math.sqrt((y2 - y1) * (y2 - y1) + (x2 - x1) * (x2 - x1));\n      }\n\n      if (this.fontAtlas && this.fontAtlas.charsMap && this.fontAtlas.charsMap[fontName]) {\n        var charIndex = this.fontAtlas.charsMap[fontName][character.charCodeAt(0)];\n        if (charIndex == undefined) {\n          return false;\n        } else {\n          if (this.currentVbb.isFull(4)) {\n            this.flushBuffer(0, true);\n          }\n\n          this.hasMSDFContent = true;\n          var _char = this.fontAtlas.chars[charIndex];\n          if (_char.page > 0) {\n            // Now only support 1 page of font texture, need to add extra logic for multiple font texture in the shader pipeline\n            return false;\n          }\n          var common = this.fontAtlas.common[_char.common];\n          var info = this.fontAtlas.info[_char.info];\n\n          // need to consider the font size\n          var scale = fontSize / info.size;\n          var w = _char.width * (scale + scaleX);\n          var flag = _char.inverseYAxis ? -1 : 1;\n          var h = _char.height * (scale + scaleY) * flag;\n          var x = _char.txoffset * (scale + scaleX),\n          y = _char.tyoffset * (scale + scaleY) * -flag;\n\n          var points = [\n          x, y,\n          x, y + h,\n          x + w, y + h,\n          x + w, y];\n\n\n          var ps = [];\n          for (var _i = 0; _i < points.length; _i += 2) {\n            ps.push(this.tx(points[_i], points[_i + 1]));\n            ps.push(this.ty(points[_i], points[_i + 1]));\n          }\n\n          if (_char.inverseYAxis) {\n            var uv = [\n            _char.x / common.scaleW, 1 - _char.y / common.scaleH,\n            _char.x / common.scaleW, 1 - (_char.y + _char.height) / common.scaleH,\n            // char.x/common.scaleW, 1- char.y/common.scaleH,\n            // (char.x + char.width)/common.scaleW, 1- char.y/common.scaleH,\n            (_char.x + _char.width) / common.scaleW, 1 - (_char.y + _char.height) / common.scaleH,\n            (_char.x + _char.width) / common.scaleW, 1 - _char.y / common.scaleH];\n\n          } else {\n            var uv = [\n            _char.x / common.scaleW, 1 - (_char.y + _char.height) / common.scaleH,\n            _char.x / common.scaleW, 1 - _char.y / common.scaleH,\n            (_char.x + _char.width) / common.scaleW, 1 - _char.y / common.scaleH,\n            (_char.x + _char.width) / common.scaleW, 1 - (_char.y + _char.height) / common.scaleH];\n\n          }\n\n          // do a fast clipping for MSDF text, if the text is clipped out any part, will not show the text to make it simple\n          // otherwise it requires to do a whole UV mapping for each part left, which is overhead at this moment.\n          if (this._curClip) {\n            var path = new Path2D(this.precisionTolerance);\n            var index = 0;\n            path.moveTo(ps[index++], ps[index++]);\n            path.lineTo(ps[index++], ps[index++]);\n            path.lineTo(ps[index++], ps[index++]);\n            path.lineTo(ps[index++], ps[index++]);\n            path.closePath();\n\n            var subjFlatted = path.flattened || path.flatten(true);\n            var clipFlatted = this._curClip.flattened || this._curClip.flatten(true);\n            var precheckResult = path.preCheckForClipping(this, clipFlatted, subjFlatted, false, false);\n            if (precheckResult.needClipping) {\n              var polygons = path.msdfClipping(clipFlatted);\n              var x1 = ps[0],y1 = ps[1];\n              var x2 = ps[6],y2 = ps[7];\n              var x3 = ps[2],y3 = ps[3];\n\n              var w1 = Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n              var h1 = Math.sqrt((x3 - x1) * (x3 - x1) + (y3 - y1) * (y3 - y1));\n              // need to get the corresponding UV value\n              for (var j = 0; j < polygons.length; j++) {\n                var polygon = polygons[j];\n                if (this.currentVbb.isFull(polygon.vertices.length)) {\n                  this.flushBuffer(0, true);\n                }\n                var _vbase = this.currentVbb.vcount;\n                for (var i = 0; i < polygon.vertices.length; i += 2) {\n                  var x0 = polygon.vertices[i];\n                  var y0 = polygon.vertices[i + 1];\n                  var dy = distance(x0, y0, x1, y1, x2, y2);\n                  var dx = distance(x0, y0, x1, y1, x3, y3);\n\n                  var u = uv[0] + (uv[4] - uv[0]) * (dx / w1);\n                  var v = uv[1] + (uv[5] - uv[1]) * (dy / h1);\n                  this.currentVbb.addVertexMSDFPolytriangle(x0, y0, u, v, this.getFillColor(), this.dbId, this.currentLayerId, 0);\n                }\n                this.currentVbb.addIndices(polygon.indices, _vbase);\n              }\n\n              this.currentImage = this.fontAtlas.pages[_char.page];\n              return true;\n            } else if (precheckResult.needCancel) {\n              return true;\n            }\n          }\n\n          if (this.currentVbb.isFull(4)) {\n            this.flushBuffer(0, true);\n          }\n          var vbase = this.currentVbb.vcount;\n          var count = points.length / 2;\n          for (var _i2 = 0; _i2 < count; _i2++) {\n            this.currentVbb.addVertexMSDFPolytriangle(ps[_i2 * 2], ps[_i2 * 2 + 1], uv[_i2 * 2], uv[_i2 * 2 + 1], this.getFillColor(), this.dbId, this.currentLayerId, 0);\n          }\n\n          this.currentVbb.addIndices([0, 2, 1, 0, 2, 3], vbase);\n          this.currentImage = this.fontAtlas.pages[_char.page];\n\n          return true;\n        }\n\n      } else {\n        return false;\n      }\n    } }, { key: \"beginPath\", value: function beginPath(\n\n    character, x, y, font, fontSize) {\n      this.updateDBId();\n\n      if (typeof character === \"string\" && font && fontSize) {\n        if (this.fontAtlas && this.drawMSDFText(character, x, y, font, fontSize)) {\n          this.skipPath = true;\n        } else {\n          if (this.usingTextLayer === true) {\n            this.skipPath = true;\n          } else {\n            this._beginTextChar(character, x, y, font, fontSize);\n          }\n        }\n      } else {\n        this.skipPath = false;\n        this.isFontChar = false;\n        this.cachedGlyph = null;\n      }\n\n      if (this.skipPath)\n      this._curPath = null;else\n      {\n        this._curPath = new Path2D(this.isFontChar ? 0.0001 : this.precisionTolerance);\n\n        // Apply custom tess params (if specified)\n        this._curPath.setTessParams(this.tessParams);\n      }\n    } }, { key: \"closePath\", value: function closePath()\n\n    {\n\n      if (this.skipPath)\n      return;\n\n      this._curPath.closePath();\n      this.cachedGlyph = null;\n    } }, { key: \"moveTo\", value: function moveTo(\n\n    x, y) {\n\n      if (this.skipPath)\n      return;\n\n      if (!this._curPath)\n      this.beginPath();\n\n      var xform = this.getCurrentTransform();\n\n      this._curPath.moveTo(this.tx(x, y, xform), this.ty(x, y, xform));\n    } }, { key: \"lineTo\", value: function lineTo(\n\n    x, y) {\n\n      if (this.skipPath)\n      return;\n\n      var xform = this.getCurrentTransform();\n\n      this._curPath.lineTo(this.tx(x, y, xform), this.ty(x, y, xform));\n    } }, { key: \"arc\", value: function arc(\n\n    x, y, radius, startAngle, endAngle, anticlockwise) {\n\n      if (this.skipPath)\n      return;\n\n      //TODO: transform\n\n      this._curPath.arc(x, y, radius, startAngle, endAngle, anticlockwise);\n    } }, { key: \"arcTo\", value: function arcTo(\n\n    x1, y1, x2, y2, radius) {\n\n      if (this.skipPath)\n      return;\n\n      var xform = this.getCurrentTransform();\n\n      this._curPath.arcTo(this.tx(x1, y1, xform), this.ty(x1, y1, xform),\n      this.tx(x2, y2, xform), this.ty(x2, y2, xform),\n      this.scaleValue(radius, xform));\n    } }, { key: \"quadraticCurveTo\", value: function quadraticCurveTo(\n\n    cp1x, cp1y, x, y) {\n\n      if (this.skipPath)\n      return;\n\n      var xform = this.getCurrentTransform();\n\n      this._curPath.quadraticCurveTo(this.tx(cp1x, cp1y, xform), this.ty(cp1x, cp1y, xform),\n      this.tx(x, y, xform), this.ty(x, y, xform));\n    } }, { key: \"bezierCurveTo\", value: function bezierCurveTo(\n\n    cp1x, cp1y, cp2x, cp2y, x, y) {\n\n      if (this.skipPath)\n      return;\n\n      var xform = this.getCurrentTransform();\n\n      this._curPath.bezierCurveTo(this.tx(cp1x, cp1y, xform), this.ty(cp1x, cp1y, xform),\n      this.tx(cp2x, cp2y, xform), this.ty(cp2x, cp2y, xform),\n      this.tx(x, y, xform), this.ty(x, y, xform));\n    } }, { key: \"rect\", value: function rect(\n\n    x, y, w, h) {\n\n      if (this.skipPath)\n      return;\n\n      var xform = this.getCurrentTransform();\n\n      if (!this._curPath)\n      this.beginPath();\n\n      this._curPath.moveTo(this.tx(x, y, xform), this.ty(x, y, xform));\n      this._curPath.lineTo(this.tx(x + w, y, xform), this.ty(x + w, y, xform));\n      this._curPath.lineTo(this.tx(x + w, y + h, xform), this.ty(x + w, y + h, xform));\n      this._curPath.lineTo(this.tx(x, y + h, xform), this.ty(x, y + h, xform));\n      this._curPath.closePath();\n    } }, { key: \"fill\", value: function fill()\n\n    {\n\n      //Special flag passed to us by customization in the pdf.js library,\n      //telling us to skip the antialiasing for polygons that are both filled and stroked\n      var isFillStrokeCombo = false;\n      if (arguments.length) {var _ref;\n        var lastArg = (_ref = arguments.length - 1, _ref < 0 || arguments.length <= _ref ? undefined : arguments[_ref]);\n        if (typeof lastArg === \"boolean\") {\n          isFillStrokeCombo = lastArg;\n        }\n      }\n\n      if (this.isFontChar && !this.cachedGlyph) {\n        this.glyphCache[this.hashKey] = this._curPath;\n        this.cachedGlyph = this._curPath;\n        this.cachedGlyph.isFontChar = true;\n      }\n\n      this.isFontChar = false;\n\n      if (this.cachedGlyph) {\n        this.cachedGlyph.fill(this, this.getFillColor(), this.dbId, this.currentLayerId, this._curClip, true);\n      } else {\n        this._curPath && this._curPath.fill(this, this.getFillColor(), this.dbId, this.currentLayerId, this._curClip, false, isFillStrokeCombo);\n      }\n\n      this.skipPath = false;\n\n      //this._curClip = null;\n      //lmvContext._curPath = null;\n    } }, { key: \"stroke\", value: function stroke()\n\n    {\n      if (this.isFontChar && !this.cachedGlyph) {\n        this.glyphCache[this.hashKey] = this._curPath;\n        this.cachedGlyph = this._curPath;\n        this.cachedGlyph.isFontChar = true;\n      }\n\n      this.updateLineDashStyle();\n      this.isFontChar = false;\n\n      // LineShader uses negative lineWidths to indicate screen-space line widths. Note that this.canvasContext.lineWidth does not allow negative values.\n      // Therefore, we apply the sign separately.\n      var sign = this.isScreenSpace ? -1.0 : 1.0;\n\n      if (this.cachedGlyph) {\n        this.cachedGlyph.stroke(this, sign * this.scaleValue(this.canvasContext.lineWidth), this.getStrokeColor(), this.dbId, this.currentLayerId, this._curClip, true, this.lineStyle);\n      } else {\n        this._curPath && this._curPath.stroke(this, sign * this.scaleValue(this.canvasContext.lineWidth), this.getStrokeColor(), this.dbId, this.currentLayerId, this._curClip, false, this.lineStyle);\n      }\n\n      this.skipPath = false;\n\n      //lmvContext._curPath = null;\n    } }, { key: \"clip\", value: function clip(\n\n    param1, param2) {\n\n      if (param2 !== undefined && param1 !== undefined) {\n        this._curClip = param1;\n        console.log(\"Probably unsupported use case\");\n      } else {\n\n        //The clip region is also affected by any existing clip region,\n        //i.e. we have to clip the clip.\n        if (this._curClip) {\n          this._curClip = this._curClip.clip(this._curPath, param1);\n        } else {\n          this._curClip = this._curPath;\n        }\n\n        this._curPath = null;\n      }\n\n      //console.log(\"CLIP\", param1, param2);\n    } }, { key: \"strokeText\", value: function strokeText(\n\n    text, x, y, maxWidth, font, fontSize) {\n\n      var ctx = this.canvasContext;\n      ctx.save();\n      ctx.translate(x, y);\n\n      this.fontEngine.drawText(this, text, 0, 0, font, fontSize);\n      this.stroke();\n\n      ctx.restore();\n    } }, { key: \"fillText\", value: function fillText(\n\n    text, x, y, maxWidth, font, fontSize) {\n\n      var ctx = this.canvasContext;\n      ctx.save();\n      ctx.translate(x, y);\n\n      this.fontEngine.drawText(this, text, 0, 0, font, fontSize);\n      this.fill();\n      //this.stroke();\n\n      ctx.restore();\n    } }, { key: \"drawImage\", value: function drawImage(\n\n    image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight) {\n      if (this.inlineImageGroups && this.inlineImageGroups.map[this.currentOpIndex] != undefined) {\n        // means this is an inline image call, we have already have solution for it\n        var index = this.inlineImageGroups.map[this.currentOpIndex];\n        var group = this.inlineImageGroups.groups[index];\n        // if the group has already been rendered, ignore that\n        if (group.rendered == true) {\n          return;\n        } else {\n          // mark it as rendered\n          group.rendered = true;\n        }\n\n        image = group.canvas;\n        // need to revert the scale\n        var scale = 1 / group.minScale;\n\n        dx = group.bounds.min.x;\n        dy = group.bounds.min.y;\n        dWidth = image.width / scale;\n        dHeight = image.height / scale;\n\n      }\n\n      if (image.width === 0 || image.height === 0) {\n        console.warn(\"Zero size image, skipping\");\n        return;\n      }\n\n      if (dx === undefined) {\n        dx = sx;\n        dy = sy;\n        dWidth = sWidth;\n        dHeight = sHeight;\n      }\n\n      if (dWidth === undefined) {\n        dWidth = image.width;\n        dHeight = image.height;\n      }\n\n      if (!dWidth) {\n        console.warn(\"Zero size image, skipping\");\n        return;\n      }\n\n      //console.log(\"Draw image\", dWidth, dHeight);\n\n      var xform = this.getCurrentTransform();\n\n      //Get the transformed page space image center\n      var cx = this.tx(dx + dWidth / 2, dy + dHeight / 2);\n      var cy = this.ty(dx + dWidth / 2, dy + dHeight / 2);\n\n      _mtx4.elements[0] = xform[0];\n      _mtx4.elements[1] = xform[1];\n      _mtx4.elements[4] = xform[2];\n      _mtx4.elements[5] = xform[3];\n      _mtx4.elements[12] = xform[4];\n      _mtx4.elements[13] = xform[5];\n      _mtx4.decompose(_offset, _quat, _scale);\n\n      //Get scaled width/height. Note these scalings can result in negative numbers\n      var w = dWidth * _scale.x * this.toPageUnits;\n      var h = -dHeight * _scale.y * this.toPageUnits; //Image input is y-down, so we build in a y-inversion\n\n      //Derive the rotation angle by converting the quaternion to axis-angle.\n      var s = Math.sqrt(1.0 - _quat.w * _quat.w);\n      _axis.set(_quat.x / s, _quat.y / s, _quat.z / s);\n      var angle = 2.0 * Math.acos(Math.max(Math.min(1, _quat.w), -1));\n      //Take care to negate the angle if the rotation axis is into the page.\n      if (_quat.z < 0) {\n        angle = -angle;\n      }\n\n      //Angle needs to be in the range 0-2pi for use by addTextureQuad below,\n      //while input has domain [-pi, pi].\n      if (angle < 0) {\n        angle += 2 * Math.PI;\n      }\n\n      this.flushBuffer(0, true);\n      this.currentVbb.addTexturedQuad(cx, cy, w, h, angle, 0xffff00ff, 0, this.currentLayerId, 0);\n      this.currentImage = image;\n      this.flushBuffer(0, true, QUAD_TEXTURE);\n\n      //        console.log(\"draw Image\", sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);\n    }\n\n    /**\n       * Mapping back the reference object to its value, and loop 1 level in\n       * @param {Object} properties \n       */ }, { key: \"_processProperties\", value: function _processProperties(\n    properties) {\n      if (LmvCanvasContext.isRef(properties)) {\n        properties = this.pdfRefMap[LmvCanvasContext.refKey(properties)];\n      }\n\n      for (var key in properties) {\n        if (LmvCanvasContext.isRef(properties[key])) {\n          properties[key] = this.pdfRefMap[LmvCanvasContext.refKey(properties[key])];\n        }\n      }\n      return properties;\n    } }, { key: \"beginMarkedContent\", value: function beginMarkedContent(\n\n    properties) {\n      if (properties) {\n        properties = this._processProperties(properties);\n      }\n\n      // Revit will provided tag as number\n      var tag = properties.name || properties.DBID;\n      if (!isNaN(tag)) {\n        this.taggedId = parseInt(tag);\n      } else {\n        this.taggedId = null;\n      }\n\n      if (this.taggedId != null && this.dbId != this.taggedId) {\n        this.updateDBId();\n      }\n\n      if (properties.VP) {\n        this.currentVpId = this.viewports.length;\n        this.viewports.push(this.createViewPortData(JSON.parse(properties.VP), properties.UNITS));\n      }\n\n      this.ocgStack.push({\n        taggedId: this.taggedId,\n        viewPortId: this.currentVpId });\n\n    } }, { key: \"beginMarkedContentProps\", value: function beginMarkedContentProps(\n\n    tag, properties) {\n      if (properties) {\n        properties = this._processProperties(properties);\n      }\n\n      if (tag === \"OC\") {\n        var ocgId = properties.ocgId;\n        var layerId = this.layers[ocgId];\n        if (layerId == undefined) {\n          layerId = this.defaultLayerId;\n        }\n        this.currentLayerId = layerId;\n\n        this.ocgStack.push({\n          layerId: this.currentLayerId });\n\n      } else {\n        if (!isNaN(tag)) {\n          this.taggedId = parseInt(tag);\n          if (this.dbId != this.taggedId) {\n            this.updateDBId();\n          }\n        }\n        if (properties) {\n          if (properties.VP) {\n            this.currentVpId = this.viewports.length;\n            this.viewports.push(this.createViewPortData(JSON.parse(properties.VP), properties.UNITS));\n          }\n\n          this.ocgStack.push({\n            viewPortId: this.currentVpId,\n            taggedId: this.taggedId });\n\n        } else {\n          this.ocgStack.push({});\n\n        }\n      }\n    } }, { key: \"endMarkedContent\", value: function endMarkedContent()\n\n    {\n      var previousState = this.ocgStack.pop();\n      var previousTagId = this.taggedId;\n      if (previousState) {\n        // reset the state\n        if (previousState.taggedId != null) {\n          this.taggedId = null;\n        }\n        if (previousState.layerId) {\n          this.currentLayerId = this.defaultLayerId;\n        }\n        if (previousState.viewPortId) {\n          this.currentVpId = this.defaultVPId;\n        }\n      }\n\n      if (this.ocgStack.length > 0) {\n        var state = this.ocgStack[this.ocgStack.length - 1];\n        if (state.taggedId != null) {\n          this.taggedId = state.taggedId;\n        }\n        if (state.currentLayerId != null) {\n          this.currentLayerId = state.currentLayerId;\n        }\n        if (state.viewPortId != null) {\n          this.currentVpId = state.viewPortId;\n        }\n      } else {\n        this.currentLayerId = this.defaultLayerId;\n        this.taggedId = null;\n        this.currentVpId = this.defaultVPId;\n      }\n\n      if (previousTagId != this.taggedId) {\n        this.updateDBId();\n      }\n    } }, { key: \"setLineStyleParam\", value: function setLineStyleParam(\n\n    param) {\n      if (!this.lineStyleInitialized) {\n        // Add those default definition in, to keep the app constent.\n        var exH = avp.LineStyleDefs.length;\n        var exW = 1;\n        for (var i = 0; i < avp.LineStyleDefs.length; i++) {\n          exW = Math.max(avp.LineStyleDefs[i].def.length, exW);\n        }var _avp$createLinePatter =\n\n        avp.createLinePatternTextureData(Math.max(param.width, exW), param.height + exH + 1),tex = _avp$createLinePatter.tex,pw = _avp$createLinePatter.pw,lineStyleTex = _avp$createLinePatter.lineStyleTex;\n        this.lineStyleIndex = 0;\n        this.lineStylePw = pw;\n        this.lineStyleTexData = tex;\n        this.lineStyleTexture = lineStyleTex;\n        this.lineStyleIndexMap = {};\n\n        for (var i = 0; i < avp.LineStyleDefs.length; i++) {\n          this.addNewDashedLineStyle(avp.LineStyleDefs[i], 96);\n        }\n\n        // set the default value\n        this.lineStyle = 0;\n        this.lineStyleInitialized = true;\n      }\n    } }, { key: \"addNewDashedLineStyle\", value: function addNewDashedLineStyle(\n\n    ls, dpi) {\n      var key = ls.def.join(\"/\");\n      if (this.lineStyleIndexMap[key] != undefined) {\n        return this.lineStyleIndexMap[key];\n      } else {\n        avp.createLinePatternForDef(ls, this.lineStyleTexData, this.lineStyleIndex, this.lineStylePw, dpi);\n        var index = this.lineStyleIndex;\n        this.lineStyleIndexMap[key] = index;\n        this.lineStyleIndex++;\n\n        return index;\n      }\n    } }, { key: \"setLineDash\", value: function setLineDash(\n\n    def) {\n      if (!this.lineStyleInitialized) {\n        this.setLineStyleParam({ width: 5, height: 4 });\n      }\n\n      this.lineDashedDef = def;\n    } }, { key: \"createPattern\", value: function createPattern(\n\n    image, repetition) {\n      var pattern = this.canvasContext._originalcreatePattern(image, repetition);\n      pattern.image = image;\n      pattern.repetition = repetition;\n      pattern.isPattern = true;\n      return pattern;\n    } }, { key: \"updateLineDashStyle\", value: function updateLineDashStyle()\n\n    {\n      // need apply the transformation matrix to the dashed value\n      var def = this.lineDashedDef;\n\n      if (def) {\n        if (def.length > 0) {\n          var xform = this.getCurrentTransform();\n          var def1 = [];\n          for (var i = 0; i < def.length; i++) {\n            var x = (def[i] * xform[0] + def[i] * xform[2]) * this.toPageUnits;\n            x = parseFloat(x.toFixed(6));\n            def1.push(x);\n          }\n          // 96 DPI was defined for lineStyleDef.js, and shader were expecting that value\n          // when we parse the pdf, the effective dpi need to be ==> 96 / 72 / this.toPageUnits\n          this.lineStyle = this.addNewDashedLineStyle({ def: def1 }, 96 / 72 / this.toPageUnits);\n        } else {\n          this.lineStyle = 0;\n        }\n      }\n      // In case of user directly controlled the line style\n      // Do not set lineStyle to 0 here.\n    } }, { key: \"setCircleInfo\", value: function setCircleInfo(\n\n    circleInfo) {\n      this.circleInfo = circleInfo;\n    } }, { key: \"setCurrentOperatorIndex\", value: function setCurrentOperatorIndex(\n\n    index) {\n      this.currentOpIndex = index;\n      if (this.circleInfo && this.circleInfo[index]) {\n        var xform = this.getCurrentTransform();\n        var x = this.tx(this.circleInfo[index][0], this.circleInfo[index][1], xform);\n        var y = this.ty(this.circleInfo[index][0], this.circleInfo[index][1], xform);\n\n        // Inject the center of the circle\n        var hiddenColor = 0x01ffffff; // Note that lineShader discards fully transparent fragments. Therefore, we use a white here with very small, but nonzero alpha.\n        var c = this.currentVbb.addVertexLine(x, y, 0, 0.0001, 0, 0, hiddenColor, this.dbId, this.currentLayerId, this.currentVpId);\n        this.currentVbb.finalizeQuad(c);\n      }\n    }\n\n    /**\n       * We have fuge performance issue when the PDF contains inline image group\n       * And each line will call a drawImage, with the whole texture enabled\n       * It causes OOM and slow down the whole rendering\n       * In order to boost the performance, we need to do a preprocess to combine those scane line images\n       * Once, we have that information, we ignore the draw call for those images,\n       * this function is the entry point to pass those preprocessed image in to the drawing context\n       * LMV-5175\n       * \n       * @param {Object} imageGroups \n       */ }, { key: \"setInlineImageGroups\", value: function setInlineImageGroups(\n    imageGroups) {\n      if (imageGroups && imageGroups.groups.length > 0) {\n        this.inlineImageGroups = imageGroups;\n      }\n    } }, { key: \"needDelegateInlineImageGroup\", value: function needDelegateInlineImageGroup()\n\n    {\n      var hasGroup = this.inlineImageGroups && this.inlineImageGroups.map[this.currentOpIndex] != undefined;\n      return hasGroup;\n    }\n\n    // Set custom tesselation params for bezier arcs (see Bezier.h)\n    // If undefined, we use the default settings.\n  }, { key: \"setTessParams\", value: function setTessParams(tessParams) {\n      this.tessParams = tessParams;\n    } }, { key: \"finish\", value: function finish()\n\n    {\n      this.flushBuffer(0, true);\n      this.fontAtlas = null;\n    } }, { key: \"createViewPortData\", value: function createViewPortData(\n\n    matrix, units) {\n      return {\n        \"units\": units || \"feet and inches\",\n        \"transform\": matrix,\n        \"geom_metrics\": this.initGeomMetrics() };\n\n    } }, { key: \"isLMVCanvasContext\", value: function isLMVCanvasContext()\n\n    {\n      return true;\n    }\n\n    //Initializes a structure of counters used for statistical purposes and sheet content hash\n  }, { key: \"initGeomMetrics\", value: function initGeomMetrics() {\n      return {\n        \"arcs\": 0,\n        \"circles\": 0,\n        \"circ_arcs\": 0,\n        \"viewports\": 0,\n        \"clips\": 0,\n        \"colors\": 0,\n        \"db_ids\": 0,\n        \"dots\": 0,\n        \"fills\": 0,\n        \"layers\": 0,\n        \"line_caps\": 0,\n        \"line_joins\": 0,\n        \"line_patterns\": 0,\n        \"line_pat_refs\": 0,\n        \"plines\": 0,\n        \"pline_points\": 0,\n        \"line_weights\": 0,\n        \"links\": 0,\n        \"miters\": 0,\n        \"ptris\": 0,\n        \"ptri_indices\": 0,\n        \"ptri_points\": 0,\n        \"rasters\": 0,\n        \"texts\": 0,\n        \"strings\": [] };\n\n    } }]);return LmvCanvasContext;}();","function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}\nimport { LmvCanvasContext } from '../PDF/LmvCanvasContext.js';\nimport { addContextCurrentTransform } from '../PDF/test-pattern.js';\n\nvar nextLayerId = 1;\n\n// Radius in pixels used for hit-tests of thin lines. Hits within this distance are always considered, even if actual lineWidth is smaller.\nvar DefaultLineHitRadius = 10;\n\nvar av = Autodesk.Viewing;\n\n// A layer manages a set of 2D shapes like polygons, polylines etc. for editing and display.\nvar EditLayer = /*#__PURE__*/function () {\n\n  // @param {Viewer3D} viewer - Viewer instance needed to create materials\n  function EditLayer(viewer) {var _this = this;_classCallCheck(this, EditLayer);\n\n    av.EventDispatcher.prototype.apply(this);\n\n    // Contains the triangulated geometry ready for rendering.\n    this.scene = new THREE.Scene();\n\n    // @param {Shape[]}\n    this.shapes = [];\n\n    // @param {CanvasGizmoBase[]}\n    this.canvasGizmos = [];\n\n    this.id = nextLayerId++;\n\n    // We don't use font rendering so far\n    var fontEngine = null;\n\n    // Always use client coords for drawing\n    var toPageUnits = 1.0;\n\n    // LMVCanvasContext doesn't really need a viewport - unless it's used with Pdf.js\n    var dummyViewport = { width: 0, height: 0 };\n    this.context = new LmvCanvasContext(dummyViewport, toPageUnits, this._processMesh.bind(this), fontEngine);\n\n    this.viewer = viewer;\n    this.setGlobalManager(viewer.globalManager);\n\n    // By default, we always update on modification operations. But it can (and should) be temporarily disabled \n    // for batch operations. \n    this.autoUpdate = true;\n\n    this.toPageUnits = toPageUnits;\n\n    this.styleModifiers = [];\n\n    addContextCurrentTransform(this.context.canvasContext);\n\n    // Update gizmo positions on camera changes\n    this.onCameraChange = function () {return _this.updateCanvasGizmos();};\n    this.viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChange);\n\n    // Use custom tesselation accuracy for Bezier arcs. We use a bit finer values than PDF does right now.\n    this.context.setTessParams({\n      numIterations: 100,\n      minSegLenFraction: 0.01 });\n\n\n    // Optional transform between layer geometry and LMV world coords (default: identity)\n    this.layerToWorld = new THREE.Matrix4();\n    this.worldToLayer = new THREE.Matrix4();\n\n    // Reused tmp values\n    this.tmp_pWorld = new THREE.Vector3();\n    this.tmp_p0 = new THREE.Vector2();\n    this.tmp_p1 = new THREE.Vector2();\n    this.tmp_ray = new THREE.Ray();\n\n    // For editing on planes in 3D\n    this.is3d = false;\n    this.plane = new THREE.Plane();\n    this._updatePlane();\n  }_createClass(EditLayer, [{ key: \"dtor\", value: function dtor()\n\n    {\n      this._clearScene();\n      this.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChange);\n    }\n\n    // @param {Shape} shape\n    // @returns {number} - The id of the shape. Used to access this shape later.\n  }, { key: \"addShape\", value: function addShape(shape) {\n      this.shapes.push(shape);\n\n      this.dispatchEvent({ type: EditLayer.SHAPE_ADDED, shape: shape });\n\n      this._onModified();\n    }\n\n    // Removes the given shape. \n    //  @returns {bool} true if shape was found and removed, otherwise false.\n  }, { key: \"removeShape\", value: function removeShape(shape) {\n      var index = this.shapes.indexOf(shape);\n      if (index === -1) {\n        return false;\n      }\n      this.shapes.splice(index, 1);\n\n      this.dispatchEvent({ type: EditLayer.SHAPE_REMOVED, shape: shape });\n\n      this._onModified();\n      return true;\n    } }, { key: \"clear\", value: function clear()\n\n    {\n      this.shapes.length = 0;\n\n      this.dispatchEvent({ type: EditLayer.LAYER_CLEARED });\n\n      this._onModified();\n    }\n\n    // Must be called after modifications to update the scene.\n  }, { key: \"update\", value: function update() {\n\n      // clear scene\n      this._clearScene();\n\n      for (var i = 0; i < this.shapes.length; i++) {\n        var shape = this.shapes[i];\n\n        // apply override style if specified\n        var overrideStyle = this._getOverrideStyle(shape);\n\n        shape.draw(this.context, overrideStyle);\n      }\n\n      // Make sure that all shapes are processed\n      this.context.flushBuffer(0, true);\n\n      // Currently, we only draw to overlay scenes. We may generalize that if we use it for planes in 3D later.\n      this.viewer.impl.invalidate(false, false, true);\n\n      // Update CanvasGizmos, e.g., to update polygon gizmo position if a polygon changed\n      this.updateCanvasGizmos();\n    } }, { key: \"updateCanvasGizmos\", value: function updateCanvasGizmos()\n\n    {\n      for (var i = 0; i < this.canvasGizmos.length; i++) {\n        this.canvasGizmos[i].update();\n      }\n    }\n\n    // @param {CanvasGizmoBase} gizmo - Must implement gizmo.update() to respond to changes.\n  }, { key: \"addCanvasGizmo\", value: function addCanvasGizmo(gizmo) {\n      this.canvasGizmos.push(gizmo);\n    }\n\n    // @param {CanvasGizmoBase} gizmo\n  }, { key: \"removeCanvasGizmo\", value: function removeCanvasGizmo(gizmo) {\n      var index = this.canvasGizmos.indexOf(gizmo);\n      if (index === -1) {\n        return false;\n      }\n      this.canvasGizmos.splice(index, 1);\n      return true;\n    } }, { key: \"getViewport\", value: function getViewport()\n\n    {\n      return this.viewport;\n    }\n\n    // Returns the topmost shape containing the point (x,y)\n    //  @param {number} hitRadius - Used for hit-test of thin line-features. Points within this radius around a line are considered as hits - even if the actual lineWidth is smaller.\n  }, { key: \"hitTest\", value: function hitTest(x, y) {var hitRadius = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DefaultLineHitRadius;\n\n      // process shapes backwards to find topmost first\n      for (var i = this.shapes.length - 1; i >= 0; i--) {\n        var shape = this.shapes[i];\n        var radiusLC = this.getLineHitRadius(shape, hitRadius);\n\n        if (shape.hitTest(x, y, radiusLC)) {\n          return shape;\n        }\n      }\n    }\n\n    // Used for line-feature hit tests: \n    // We consider a point p to be \"on edge e\" if p is within a certain radius around e.\n    // This radius depends on style and a certain min-distance in pixels used for thin lines. Result is in layer-coords.\n  }, { key: \"getLineHitRadius\", value: function getLineHitRadius(shape) {var hitRadius = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DefaultLineHitRadius;\n\n      var unitsPerPixel = this.getUnitsPerPixel();\n\n      // Get line-width in layer coords\n      var lineWidth = (shape.style.isScreenSpace ? unitsPerPixel : 1) * shape.style.lineWidth;\n\n      // For thin lines, consider hits as long as they are within minPixels radius\n      return Math.max(lineWidth, hitRadius * unitsPerPixel);\n    }\n\n    // Optional: Sets a callback to override the style for either all or a subset of shapes.\n    //  @param {function(Shape, Style)} modifier - A callback that takes a shape as input and returns undefined (=no change) or a valid override style object.\n  }, { key: \"addStyleModifier\", value: function addStyleModifier(modifier) {\n      this.styleModifiers.push(modifier);\n      this._onModified();\n    } }, { key: \"removeStyleModifier\", value: function removeStyleModifier(\n\n    modifier) {\n      var index = this.styleModifiers.indexOf(modifier);\n      if (index == -1) {\n        return false;\n      }\n      this.styleModifiers.splice(index, 1);\n      this._onModified();\n      return true;\n    }\n\n    // Convert layer coordinates to canvas coords.\n    //  @param {Vector2|Vector3} [target]\n  }, { key: \"layerToCanvas\", value: function layerToCanvas(x, y) {var target = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new THREE.Vector2();\n\n      // get point in LMV world coords\n      var pWorld = this.tmp_pWorld.set(x, y, 0).applyMatrix4(this.layerToWorld);\n\n      // For now, worldCoords.xy is identical with layer coords. This will change once we extend it to planes that can be embedded into 3D.\n      var res = this.viewer.impl.worldToClient(pWorld);\n      return target.set(res.x, res.y, 0.0); // Set z to 0 if target is Vector3. Otherwise, the param has no effect\n    }\n\n    // Note: This function currently assumes a uniform unitPerPixel ratio. This may change if we add support for projected\n    //       planes in 3D, where pixelRatio may vary across the layer and may require different values in x/y direction.\n  }, { key: \"getPixelsPerUnit\", value: function getPixelsPerUnit() {\n      var _window = this.getWindow();\n\n      // get screen projections of two points in layer-coords that have unit-distance\n      var p0 = this.layerToCanvas(0, 0, this.tmp_p0);\n      var p1 = this.layerToCanvas(1, 0, this.tmp_p1);\n      return p0.distanceTo(p1) / _window.devicePixelRatio;\n    } }, { key: \"getUnitsPerPixel\", value: function getUnitsPerPixel()\n\n    {\n      return 1.0 / this.getPixelsPerUnit();\n    }\n\n    // Convert canvas coordinates (from input events) to layer viewport coordinates\n    //  @param {Vector2|Vector3} [target]\n  }, { key: \"canvasToLayer\", value: function canvasToLayer(canvasX, canvasY)\n    {var target = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new THREE.Vector2();\n      // Compute \"ray through pixel\" in world-coords.\n      var vpVec = this.viewer.impl.clientToViewport(canvasX, canvasY);\n      var ray = this.viewer.impl.viewportToRay(vpVec, this.tmp_ray);\n\n      // Intersect ray with plane that we edit on\n      var intersect = ray.intersectPlane(this.plane, this.tmp_pWorld);\n\n      if (!intersect) {\n        // TODO: For 3D scenarios, we must properly support the case that canvasToLayer fails.\n        return target.set(0, 0);\n      }\n\n      // Convert from world to layer coords\n      intersect.applyMatrix4(this.worldToLayer);\n\n      // Set 3rd-component to 0 for Vector3 targets. For 2D, the z param is ignored\n      return target.set(intersect.x, intersect.y, 0);\n    }\n\n    // Runs the callback for all shapes in the layer that overlap the given bbox\n    //  @param {Box2} bbox\n    //  @param {function(Shape)} cb\n  }, { key: \"enumShapes\", value: function enumShapes(bbox, cb) {\n      for (var i = 0; i < this.shapes.length; i++) {\n        var shape = this.shapes[i];\n\n        // Make sure that bbox is up-to-date\n        shape.updateBBox();\n\n        if (bbox.isIntersectionBox(shape.bbox)) {\n          cb(shape);\n        }\n      }\n    }\n\n    // Runs the callback for all triangulated 2D meshes created in the last update() call.\n  }, { key: \"enumMeshes\", value: function enumMeshes(bbox, cb) {\n      for (var i = 0; i < this.scene.children.length; i++) {\n        var mesh = this.scene.children[i];\n        var meshBox = mesh.geometry.boundingBox;\n\n        // Note: The worldMatrix is not used for triangulated Edit2D meshes, so it will always be identity. Otherwise,\n        //       we would need to compute a world-box using applyMatrixWorld() here.\n\n        // Note that meshes have a 3D box, but we are only interested in 2D check. Therefore,\n        // it's important to call intersectsBox on the input box and not on the mesh.\n        if (bbox.isIntersectionBox(meshBox)) {\n          cb(mesh);\n        }\n      }\n    } }, { key: \"findShapeById\", value: function findShapeById(\n\n    id) {\n      return this.shapes.find(function (s) {return s.id == id;});\n    } }, { key: \"setMatrix\", value: function setMatrix(\n\n    layerToWorld) {\n      this.layerToWorld.copy(layerToWorld);\n      this.worldToLayer.getInverse(layerToWorld);\n\n      // Update projection plane\n      this._updatePlane();\n    }\n\n    // \n    // --- Internal functions ---\n    //\n\n    // process meshData produced by LmvCanvasContext\n  }, { key: \"_processMesh\", value: function _processMesh(meshData) {\n\n      // create GeometryBuffer\n      var mdata = { mesh: meshData, is2d: true, packId: \"0\", meshIndex: 0 };\n      Autodesk.Viewing.Private.BufferGeometryUtils.meshToGeometry(mdata);\n      var geom = mdata.geometry;\n\n      // create 2D material\n      // Note that it is essential not to associate the material witha model. Otherwise,\n      // the EditShapes will disappear if model layer 0 is switched off.\n      var matman = this.viewer.impl.getMaterials();\n      var matName = matman.create2DMaterial(null, meshData.material);\n      var material = matman.findMaterial(null, matName);\n\n      var mesh = new THREE.Mesh(geom, material);\n\n      // Set mesh matrix\n      mesh.matrix = this.layerToWorld;\n      mesh.matrixAutoUpdate = false; // make sure matrix is not overwritten within updateMatrixWorld() later\n\n      this.scene.children.push(mesh);\n    } }, { key: \"_onModified\", value: function _onModified()\n\n    {\n      if (this.autoUpdate) {\n        this.update();\n      }\n    }\n\n    // Apply one or more style modifiers\n  }, { key: \"_getOverrideStyle\", value: function _getOverrideStyle(shape) {\n      var style = shape.style;\n      for (var i = 0; i < this.styleModifiers.length; i++) {\n        var mod = this.styleModifiers[i];\n        style = mod(shape, style) || style;\n      }\n      return style;\n    }\n\n    // Dispose all shapes generated by this layer.\n  }, { key: \"_clearScene\", value: function _clearScene() {\n\n      // Dispose any GPU resources for previous output geometry\n      // Note that we construct the scene as a flat list of meshes (see _processMesh). So, we don't need a generic traversal here.\n      var meshes = this.scene.children;\n      for (var i = 0; i < meshes.length; i++) {\n        var mesh = meshes[i];\n        mesh.geometry.dispose();\n\n        // TODO: We have to take care to dispose materials here as well. However, just disposing materials here as well would produce a couple of issues:\n        //\n        //  1. MaterialManager caches materials based on properties. So, we cannot safely assume that the materials are solely used by ourselves.\n        //     => MaterialManager currently only allows models to own 2D materials. We have to generalize it to support \"ownerIDs\" so\n        //        that we can ensure that the materials are owned by this layer.\n        //  2. Recompiling shaders on each update would be a waste. So we will need some caching.\n      }\n      this.scene.children.length = 0;\n    }\n\n    // Only needed for 3D scenes\n  }, { key: \"_updatePlane\", value: function _updatePlane() {\n      // The layer geometry itself is in the {z=0} plane\n      this.plane.normal.set(0, 0, 1);\n      this.plane.constant = 0.0;\n\n      // Transform plane to world-coords\n      this.plane.applyMatrix4(this.layerToWorld);\n    } }]);return EditLayer;}();export { EditLayer as default };\n\n\nav.GlobalManagerMixin.call(EditLayer.prototype);\n\nEditLayer.SHAPE_ADDED = 'shapeAdded';\nEditLayer.SHAPE_REMOVED = 'shapeRemoved';\nEditLayer.LAYER_CLEARED = 'layerCleared';","\nimport { SetTesselationParams } from \"./bezier\";\n\n//Copied from pdf.js, because our 2D renderer relies on mozCurrentTransform being available\nexport function addContextCurrentTransform(ctx) {\n  if (!ctx.mozCurrentTransform) {\n    ctx._originalSave = ctx.save;\n    ctx._originalRestore = ctx.restore;\n    ctx._originalRotate = ctx.rotate;\n    ctx._originalScale = ctx.scale;\n    ctx._originalTranslate = ctx.translate;\n    ctx._originalTransform = ctx.transform;\n    ctx._originalSetTransform = ctx.setTransform;\n    ctx._transformMatrix = ctx._transformMatrix || [1, 0, 0, 1, 0, 0];\n    ctx._transformStack = [];\n    Object.defineProperty(ctx, 'mozCurrentTransform', {\n      get: function getCurrentTransform() {\n        return this._transformMatrix;\n      } });\n\n    Object.defineProperty(ctx, 'mozCurrentTransformInverse', {\n      get: function getCurrentTransformInverse() {\n        var m = this._transformMatrix;\n        var a = m[0],\n        b = m[1],\n        c = m[2],\n        d = m[3],\n        e = m[4],\n        f = m[5];\n        var ad_bc = a * d - b * c;\n        var bc_ad = b * c - a * d;\n        return [d / ad_bc, b / bc_ad, c / bc_ad, a / ad_bc, (d * e - c * f) / bc_ad, (b * e - a * f) / ad_bc];\n      } });\n\n    ctx.save = function ctxSave() {\n      var old = this._transformMatrix;\n      this._transformStack.push(old);\n      this._transformMatrix = old.slice(0, 6);\n      this._originalSave();\n    };\n    ctx.restore = function ctxRestore() {\n      var prev = this._transformStack.pop();\n      if (prev) {\n        this._transformMatrix = prev;\n        this._originalRestore();\n      }\n    };\n    ctx.translate = function ctxTranslate(x, y) {\n      var m = this._transformMatrix;\n      m[4] = m[0] * x + m[2] * y + m[4];\n      m[5] = m[1] * x + m[3] * y + m[5];\n      this._originalTranslate(x, y);\n    };\n    ctx.scale = function ctxScale(x, y) {\n      var m = this._transformMatrix;\n      m[0] = m[0] * x;\n      m[1] = m[1] * x;\n      m[2] = m[2] * y;\n      m[3] = m[3] * y;\n      this._originalScale(x, y);\n    };\n    ctx.transform = function ctxTransform(a, b, c, d, e, f) {\n      var m = this._transformMatrix;\n      this._transformMatrix = [m[0] * a + m[2] * b, m[1] * a + m[3] * b, m[0] * c + m[2] * d, m[1] * c + m[3] * d, m[0] * e + m[2] * f + m[4], m[1] * e + m[3] * f + m[5]];\n      ctx._originalTransform(a, b, c, d, e, f);\n    };\n    ctx.setTransform = function ctxSetTransform(a, b, c, d, e, f) {\n      this._transformMatrix = [a, b, c, d, e, f];\n      ctx._originalSetTransform(a, b, c, d, e, f);\n    };\n    ctx.rotate = function ctxRotate(angle) {\n      var cosValue = Math.cos(angle);\n      var sinValue = Math.sin(angle);\n      var m = this._transformMatrix;\n      this._transformMatrix = [m[0] * cosValue + m[2] * sinValue, m[1] * cosValue + m[3] * sinValue, m[0] * -sinValue + m[2] * cosValue, m[1] * -sinValue + m[3] * cosValue, m[4], m[5]];\n      this._originalRotate(angle);\n    };\n  }\n}\n\n\nfunction polygonVerts(N, radius, phase) {\n\n  var res = [];\n  radius = radius || 1;\n  phase = phase || 0;\n\n  for (var angle = phase; angle < 360 + phase; angle += 360 / N) {\n\n    var a = angle * Math.PI / 180;\n    var x = radius * Math.cos(a);\n    var y = radius * Math.sin(a);\n\n    res.push(x);\n    res.push(y);\n\n  }\n\n  return res;\n}\n\n\nfunction drawPolygon(ctx, x, y, N, R, phase) {\n  var pts = polygonVerts(N, R, phase);\n\n  ctx.beginPath();\n  ctx.moveTo(pts[0] + x, pts[1] + y);\n\n  for (var i = 2; i < pts.length; i += 2) {\n    ctx.lineTo(pts[i] + x, pts[i + 1] + y);\n  }\n\n  ctx.closePath();\n}\n\nfunction drawStarPolygon(ctx, x, y, N, R, phase) {\n\n  var pts = polygonVerts(N, R, phase);\n\n  ctx.beginPath();\n  ctx.moveTo(pts[0] + x, pts[1] + y);\n\n  var count = 0;\n  var next = 2;\n  var total = pts.length / 2;\n  while (count < total) {\n\n    ctx.lineTo(pts[2 * next] + x, pts[2 * next + 1] + y);\n\n    next += 2;\n    next = next % total;\n    count++;\n  }\n\n  ctx.closePath();\n\n}\n\n\nexport function generateTestPattern(ctx) {\n\n  //Long text strings used in this test need dense tesselation setting compared to their bounding box\n  SetTesselationParams(300, 0.005);\n\n  var c = ctx.canvasContext;\n\n  addContextCurrentTransform(c);\n\n  //1. Draw the page\n  c.fillStyle = \"rgba(255, 255, 255, 1)\";\n  var vp = ctx.viewport;\n  ctx.beginPath();\n  ctx.moveTo(0, 0);\n  ctx.lineTo(vp.width, 0);\n  ctx.lineTo(vp.width, vp.height);\n  ctx.lineTo(0, vp.height);\n  ctx.closePath();\n  ctx.fill();\n\n  c.strokeStyle = \"rgba(0, 0, 0, 1)\";\n\n  //Simple polygon\n  c.fillStyle = \"rgba(3, 137, 255, 1)\";\n  drawPolygon(ctx, 120, 50, 5, 30, 90);\n  ctx.fill();\n  ctx.stroke();\n\n  //Self-intersecting polygon\n  c.fillStyle = \"rgba(255, 95, 3, 1)\";\n  drawStarPolygon(ctx, 190, 50, 5, 30, 90);\n  ctx.fill();\n  ctx.stroke();\n\n  //Simple polygon\n  c.fillStyle = \"rgba(255, 255, 0, 1)\";\n  drawPolygon(ctx, 240, 350, 7, 30, 0);\n  ctx.fill();\n  ctx.stroke();\n\n  //Self-intersecting polygon\n  c.fillStyle = \"rgba(90, 255, 123, 1)\";\n  drawStarPolygon(ctx, 310, 350, 7, 30, 0);\n  ctx.fill();\n\n  ctx.stroke();\n\n  //Text\n  c.fillStyle = \"rgba(66, 66, 66, 1)\";\n  c.save();\n  c.translate(50, 150);\n  c.scale(1, -1);\n  ctx.fillText(\"The quick brown\", 0, 0, 800, { name: \"Arial\" }, 24);\n  c.restore();\n\n  c.save();\n  c.translate(50, 186);\n  c.scale(1, -1);\n  ctx.fillText(\"fox jumps\", 0, 0, 800, { name: \"Courier\" }, 72);\n  c.restore();\n\n  c.save();\n  c.translate(50, 350);\n  c.scale(1, -1);\n  c.rotate(13);\n  ctx.fillText(\"over the lazy dog.\", 0, 0, 800, { name: \"Times\" }, 36);\n  c.restore();\n\n  //Polygon clipping\n  c.fillStyle = \"rgba(91, 167, 255, 1)\";\n  c.save();\n\n  //Draw a pentagon and use it as clip region also\n  drawPolygon(ctx, 150, 450, 5, 30, 90);\n  ctx.fill();\n  ctx.stroke();\n  ctx.clip();\n\n  //Fill a hexagon, taking into account the clip region\n  c.fillStyle = \"rgba(255, 167, 91, 1)\";\n  drawPolygon(ctx, 170, 450, 6, 30, 90);\n  ctx.fill();\n\n  //Stroke the hexagon -- currently this will not work (i.e. it will draw the outline unclipped)\n  c.strokeStyle = \"rgba(255, 0, 0, 1)\";\n  ctx.stroke();\n\n  c.restore();\n\n\n}","\n// Collection of simple helper functions for 2D math functions.\n\n// Return normalized edge direction vector (b-a).normalized\nvar getEdgeDirection = function getEdgeDirection(a, b, target) {\n  target = target || new THREE.Vector2();\n\n  return target.copy(b).sub(a).normalize();\n};\n\nvar getEdgeCenter = function getEdgeCenter(a, b, target) {\n  target = target || new THREE.Vector2();\n\n  return target.set(0.5 * (a.x + b.x), 0.5 * (a.y + b.y));\n};\n\n// Get edge length. (a, b) can just be {x, y} pairs, i.e., not required to be THREE.Vector2\nvar getEdgeLength = function getEdgeLength(a, b) {\n  var dx = b.x - a.x;\n  var dy = b.y - a.y;\n  return Math.sqrt(dx * dx + dy * dy);\n};\n\n// Rotates direction vector p 90 degrees to the left. (in-place)\nvar turnLeft = function turnLeft(p) {\n  var tmp = p.x;\n  p.x = -p.y;\n  p.y = tmp;\n  return p;\n};\n\n// Projects a point p to a line. Works in-place\n//  @param {Vector2} p\n//  @param {Vector2} linePoint - point on the line\n//  @param {Vector2} lineDir   - line direction. Must be normalized\nvar projectToLine = function projectToLine(p, linePoint, lineDir) {\n\n  // dp = dot(p-linePoint, lineDir)\n  var dp = (p.x - linePoint.x) * lineDir.x + (p.y - linePoint.y) * lineDir.y;\n\n  // return linePoint + lineDir * dp\n  p.set(\n  linePoint.x + dp * lineDir.x,\n  linePoint.y + dp * lineDir.y);\n\n};\n\n// Get distance between the point p and a line given by point and direction.\n//  @param {Vector2} p\n//  @param {Vector2} linePoint - point on the line\n//  @param {Vector2} lineDir   - line direction. Must be normalized\nvar pointLineDistance = function () {\n  var pProj = new THREE.Vector2();\n  return function (p, linePoint, lineDir) {\n    projectToLine(pProj.copy(p), linePoint, lineDir);\n    return p.distanceTo(pProj);\n  };\n}();\n\n// Calculates the intersection point of both given lines\n// assumes that the lines are not parallel\n// see: http://www.paulbourke.net/geometry/pointlineplane/\nvar intersectLines = function intersectLines(linePoint1, lineDir1, linePoint2, lineDir2, outPoint) {\n\n  var denom = lineDir2.y * lineDir1.x - lineDir2.x * lineDir1.y;\n  if (Math.abs(denom) < 1.0e-8) {return false;}\n\n  // diff = linePoint1 - linePoint2\n  var diffX = linePoint1.x - linePoint2.x;\n  var diffY = linePoint1.y - linePoint2.y;\n\n  var u = lineDir2.x * diffY - lineDir2.y * diffX;\n\n  if (outPoint) {\n    outPoint.x = linePoint1.x + u / denom * lineDir1.x;\n    outPoint.y = linePoint1.y + u / denom * lineDir1.y;\n  }\n  return true;\n};\n\n// Rotate a vector p around origin or a given center. Works in-place.\n//  @param {Vector2} p\n//  @param {number}  angle in radians\n//  @param [Vector2] center \nvar rotateAround = function rotateAround(p, angle, center) {\n\n  var c = Math.cos(angle);\n  var s = Math.sin(angle);\n\n  if (center) {\n    p.sub(center);\n  }\n\n  var x = p.x;\n  var y = p.y;\n\n  p.x = x * c - y * s;\n  p.y = x * s + y * c;\n\n  if (center) {\n    p.add(center);\n  }\n  return p;\n};\n\n// Returns angle in radians formed by two direction vectors. No normalization required.\n//  @param {Vector2} dir1, dir2\n//  @returns {number} result in [0, 2*Pi]\nvar angleBetweenDirections = function angleBetweenDirections(dir1, dir2) {\n\n  // get angle formed with positive x-axis. \n  // angle1/2 are in [-Pi, Pi]\n  var angle1 = Math.atan2(dir1.y, dir1.x);\n  var angle2 = Math.atan2(dir2.y, dir2.x);\n\n  // Difference is in [-2*Pi, 2*Pi]\n  var angle = angle1 - angle2;\n\n  // Map result to [0, 2*Pi] range\n  if (angle < 0) angle += 2 * Math.PI;\n\n  return angle;\n};\n\n// see isPointOnEdge\nvar isPointOnLine = function isPointOnLine(p, a, b, precision) {\n  return isPointOnEdge(p, a, b, precision, false);\n};\n\n// Returns true if p lies close to the edge (p1, p2). \nvar isPointOnEdge = function isPointOnEdge(p, a, b, precision) {var checkInsideSegment = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n\n  // Compute edge length\n  var dx = b.x - a.x;\n  var dy = b.y - a.y;\n  var length = Math.sqrt(dx * dx + dy * dy);\n\n  var e = {\n    v1: a,\n    dx: dx,\n    dy: dy,\n    length: length,\n    length2: length * length };\n\n  return Autodesk.Extensions.CompGeom.pointOnLine(p.x, p.y, e, checkInsideSegment, precision);\n};\n\nvar pointDelta = function pointDelta(a, b) {var digits = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var delta = { x: b.x - a.x, y: b.y - a.y };\n  if (digits)\n  {\n    var exp = Math.pow(10, digits);\n    delta.x = Math.round(delta.x * exp) / exp;\n    delta.y = Math.round(delta.y * exp) / exp;\n  }\n  if (!delta.x && !delta.y) {\n    return;\n  }\n  return delta;\n};\n\nvar edgeIsDegenerated = function edgeIsDegenerated(a, b) {var eps2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1.0e-10;\n  return a.distanceToSquared(b) < eps2;\n};\n\n// Compute target point resulting from mirroring point p\n// on the given center point c.\nvar mirrorPointOnPoint = function mirrorPointOnPoint(p, c) {var target = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n  target = target || new THREE.Vector2();\n  target.x = c.x - (p.x - c.x);\n  target.y = c.y - (p.y - c.y);\n  return target;\n};\n\nvar fuzzyEqual = function fuzzyEqual(a, b, precision) {\n  return Math.abs(a - b) < precision;\n};\n\n// Checks if two lines are collinear.\n//  @param {Vector2} p1, dir1 - First line, given as point and normalized direction.\n//  @param {Vector2} p2, dir2 - Second line\n//  @param {number}  precision\n//  @returns {bool}\nvar collinear = function collinear(p1, dir1, p2, dir2, precision) {\n\n  // Directions must be either equal or opposite\n  var dirEqual = fuzzyEqual(dir1.x, dir2.x, precision) && fuzzyEqual(dir1.y, dir2.y, precision);\n  var dirOpposite = fuzzyEqual(dir1.x, -dir2.x, precision) && fuzzyEqual(dir1.y, -dir2.y, precision);\n  if (!dirEqual && !dirOpposite) {\n    return false;\n  }\n\n  // Directions are equal or opposite => Lines are collinear if and only if p2 is on line (p1, dir1).\n  var dx = p2.x - p1.x;\n  var dy = p2.y - p1.y;\n  var dot = dx * dir1.x + dy * dir1.y;\n  return Math.abs(dot) < precision;\n};\n\nexport var Math2D = {\n  getEdgeDirection: getEdgeDirection,\n  projectToLine: projectToLine,\n  pointLineDistance: pointLineDistance,\n  intersectLines: intersectLines,\n  rotateAround: rotateAround,\n  angleBetweenDirections: angleBetweenDirections,\n  getEdgeCenter: getEdgeCenter,\n  getEdgeLength: getEdgeLength,\n  turnLeft: turnLeft,\n  isPointOnEdge: isPointOnEdge,\n  isPointOnLine: isPointOnLine,\n  pointDelta: pointDelta,\n  edgeIsDegenerated: edgeIsDegenerated,\n  mirrorPointOnPoint: mirrorPointOnPoint,\n  fuzzyEqual: fuzzyEqual,\n  collinear: collinear };","function _typeof(obj) {if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return self;}function _get(target, property, receiver) {if (typeof Reflect !== \"undefined\" && Reflect.get) {_get = Reflect.get;} else {_get = function _get(target, property, receiver) {var base = _superPropBase(target, property);if (!base) return;var desc = Object.getOwnPropertyDescriptor(base, property);if (desc.get) {return desc.get.call(receiver);}return desc.value;};}return _get(target, property, receiver || target);}function _superPropBase(object, property) {while (!Object.prototype.hasOwnProperty.call(object, property)) {object = _getPrototypeOf(object);if (object === null) break;}return object;}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _inherits(subClass, superClass) {if (typeof superClass !== \"function\" && superClass !== null) {throw new TypeError(\"Super expression must either be null or a function\");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}\nimport { Math2D } from './Math2D.js';\n\nvar nextShapeId = 1;\n\nvar av = Autodesk.Viewing;\nvar domParser = new DOMParser();\n\nvar toColor = function toColor(r, g, b) {\n  return \"rgb(\" + r + \",\" + g + \",\" + b + \")\";\n};\n\nvar cloneVectorArray = function cloneVectorArray(src) {\n  return src.map(function (p) {return { x: p.x, y: p.y };});\n};\n\nvar exp4 = Math.pow(10, 4);\nvar limitDigits = function limitDigits(value) {var digits = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  if (!value || digits === null) {\n    return value;\n  }\n  // like value.toFixed(), but removing trailing zeros\n  var exp = digits === 4 ? exp4 : Math.pow(10, digits);\n  return Math.round(value * exp) / exp;\n};\n\nexport var Style = /*#__PURE__*/function () {\n\n  /**\n                                              * Creates a new Style for the Edit 2D tools.\n                                              * @param {object} [params]           - various style values to overwrite the default style.\n                                              * @param {string} [params.color]     - sets the color for the line and fill area\n                                              * @param {number} [params.alpha]     - sets the alpha value for the line and fill area\n                                              * @param {string} [params.lineColor] - sets the color for the line\n                                              * @param {number} [params.lineAlpha] - sets the alpha value for the line\n                                              * @param {number} [params.lineWidth] - sets the line width for the line.\n                                              * @param {number} [params.lineStyle] - sets the style of the line\n                                              * @param {string} [params.fillColor] - sets the color for the fill area\n                                              * @param {number} [params.fillAlpha] - sets the alpha value for the fill area\n                                              */\n  function Style() {var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};_classCallCheck(this, Style);\n    this.lineColor = params.lineColor || params.color || \"rgb(0,0,128)\";\n    this.lineAlpha = params.lineAlpha !== undefined ? params.lineAlpha : params.alpha !== undefined ? params.alpha : 1.0;\n    this.lineWidth = params.lineWidth !== undefined ? params.lineWidth : 3.0;\n\n    this.fillColor = params.fillColor || params.color || \"rgb(0,0,128)\";\n    this.fillAlpha = params.fillAlpha !== undefined ? params.fillAlpha : params.alpha !== undefined ? params.alpha : 0.2;\n\n    // lineStyle is an index into a list of dash/dot patterns defined in See LineStyleDef.js.\n    // Examples:\n    //   0:  Solid line:    ______________\n    //   10: Dashes long:   __ __ __ __ __\n    //   11: Dashes short:  _ _ _ _ _ _ _\n    //   12: Dashes longer: ___ ___ ___ ___\n    //   16: Dots:          . . . . . . .\n    //   17: Dots dense:    ..............\n    //   18: Dots sparse:   .  .  .  .  .\n    this.lineStyle = params.lineStyle || 0;\n\n    // By default, we interpret line widths in screen-space\n    this.isScreenSpace = params.isScreenSpace !== undefined ? params.isScreenSpace : true;\n  }\n\n  // Components r,b,g are in [0,255]\n  _createClass(Style, [{ key: \"setFillColor\", value: function setFillColor(r, g, b) {\n      this.fillColor = toColor(r, g, b);\n    } }, { key: \"setLineColor\", value: function setLineColor(\n\n    r, g, b) {\n      this.lineColor = toColor(r, g, b);\n    } }, { key: \"clone\", value: function clone()\n\n    {\n      return new Style().copy(this);\n    } }, { key: \"copy\", value: function copy(\n\n    from) {\n      this.lineColor = from.lineColor;\n      this.lineAlpha = from.lineAlpha;\n      this.lineWidth = from.lineWidth;\n      this.fillColor = from.fillColor;\n      this.fillAlpha = from.fillAlpha;\n      this.lineStyle = from.lineStyle;\n      this.isScreenSpace = from.isScreenSpace;\n      return this;\n    } }]);return Style;}();\n\n\nStyle.toColor = toColor;\n\nvar DefaultStyle = new Style();\n\n// Set dstBox to bbox of all points\nvar pointArrayBBox = function pointArrayBBox(points, dstBox) {\n  dstBox.makeEmpty();\n  for (var i = 0; i < points.length; i++) {\n    dstBox.expandByPoint(points[i]);\n  }\n};\n\nexport var Shape = /*#__PURE__*/function () {\n  function Shape() {var style = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DefaultStyle.clone();_classCallCheck(this, Shape);\n    this.style = style;\n\n    // assign unique id\n    this.id = nextShapeId++;\n\n    this.bbox = new THREE.Box2();\n    this.bboxDirty = true;\n\n    // Should be set by creator by something more descriptive.\n    this.name = this.id.toString();\n  }\n\n  // Must be provided by derivaties\n  _createClass(Shape, [{ key: \"draw\", value: function draw() /*ctx, overrideStyle*/{} }, { key: \"hitTest\", value: function hitTest()\n    /*x, y, hitRadius*/{} // hitRadius is a distance in layer-coords used for line feature hit-tests.\n\n    // Todo: Clarify whether Shapes should have an own matrix or always modified in-place\n  }, { key: \"move\", value: function move() /*dx, dy*/{return this;} }, { key: \"clone\", value: function clone()\n\n    {\n      return new Shape().copy(this);\n    } }, { key: \"copy\", value: function copy(\n\n    from) {\n      this.style = from.style.clone();\n      return this;\n    } }, { key: \"toSVG\", value: function toSVG()\n\n    {var precision = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;var digits = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var path = this.toSVGPath(precision, digits);\n      if (!path) {\n        return;\n      }\n      return \"<path d=\\\"\".concat(path.join(' '), \"\\\"/>\");\n    } }, { key: \"toSVGPath\", value: function toSVGPath()\n\n    {var precision = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;var digits = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      console.error(\"Must be implemented by derived class.\");\n    } }, { key: \"computeBBox\", value: function computeBBox()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    {\n      console.error(\"Must be implemented by derived class.\");\n    } }, { key: \"modified\", value: function modified()\n\n    {\n      this.bboxDirty = true;\n    } }, { key: \"updateBBox\", value: function updateBBox()\n\n    {\n      if (this.bboxDirty) {\n        this.computeBBox();\n        this.bboxDirty = false;\n      }\n    } }], [{ key: \"fromSVG\", value: function fromSVG(svg) {if (!svg) {return;}var dom = domParser.parseFromString(svg, 'application/xml');if (dom.childNodes.length !== 1) {throw 'Function does only support svg with a single element: path, circle';}var node = dom.firstChild;if (node.nodeName === 'circle') {return Circle._fromDOMNode(node);} else if (node.nodeName === 'path') {return Path._fromDOMNode(node);}throw \"Unsupported svg node type: \".concat(node.nodeName);} }]);return Shape;}();\n\n\nav.GlobalManagerMixin.call(Shape.prototype);\n\n// Common base class for Polygons and Polylines\nexport var PolyBase = /*#__PURE__*/function (_Shape) {_inherits(PolyBase, _Shape);\n\n  function PolyBase() {var _this;var points = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];var style = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DefaultStyle.clone();_classCallCheck(this, PolyBase);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PolyBase).call(this, style));\n\n    // Array of points, each represented as an object {x, y}\n    _this.points = points;return _this;\n  }_createClass(PolyBase, [{ key: \"isPolygon\", value: function isPolygon()\n\n    {\n      return this instanceof Polygon;\n    } }, { key: \"isPolyline\", value: function isPolyline()\n\n    {\n      return this instanceof Polyline;\n    } }, { key: \"isPath\", value: function isPath()\n\n    {\n      return this instanceof Path;\n    } }, \n    \n    \n    { key: \"addPoint\", value: function addPoint(x, y) {\n      var point = { x: x, y: y };\n      this.points.push(point);\n      this.modified();\n      return point;\n    } }, \n    \n    { key: \"getPoint\", value: function getPoint(index, target) {\n      target = target || new THREE.Vector2();\n      return target.copy(this.points[index]);\n    } }, \n    \n    { key: \"removePoint\", value: function removePoint(index) {\n      this.points.splice(index, 1);\n    } }, \n    \n    { key: \"updatePoint\", value: function updatePoint(index, x, y) {\n      var p = this.points[index];\n      p.x = x;\n      p.y = y;\n      this.modified();\n    } }, \n    \n    { key: \"insertPoint\", value: function insertPoint(index, p) {\n      this.points.splice(index, 0, p);\n    }\n\n    // Add an extra vertex right after the given index that obtains the same coordinates.\n  }, \n  \n  { key: \"duplicateVertex\", value: function duplicateVertex(index) {\n      var p = this.points[index];\n      this.insertPoint(index + 1, { x: p.x, y: p.y });\n    } }, \n    \n    { key: \"clear\", value: function clear()\n    {\n      this.points.length = 0;\n      this.modified();\n    }\n\n    // Enumerate all edges (a,b).\n    //  @param {function(a, b, ai, bi)} cb - For each edge, we trigger cb(a, b, ai, bi), where (a,b) are the points and (ai, bi) the indices of the edge.\n    //                                       If cb() returns true, the traversal stops.\n  }, \n  \n  { key: \"enumEdges\", value: function enumEdges(cb) {\n\n      // get edge count\n      var edgeCount = this.getEdgeCount();\n\n      // check for each edge whether p is close to it.\n      for (var i = 0; i < edgeCount; i++) {\n        // get indices\n        var ai = i;\n        var bi = this.nextIndex(i);\n\n        // get points\n        var a = this.getPoint(ai);\n        var b = this.getPoint(bi);\n\n        // pass all to cb\n        var stop = cb(a, b, ai, bi);\n\n        // allow early out\n        if (stop) {\n          return;\n        }\n      }\n    }\n\n    // Given a polyline or polygon, it checks if the position is close to any edge of the shape.\n    // If so, it returns the index of that edge, otherwise -1.\n    // All values are in layer coords.\n  }, \n  \n  { key: \"findEdgeIndex\", value: function findEdgeIndex(p, precision) {\n\n      var edgeIndex = -1;\n\n      // Callback to find edge containing p\n      var findEdgeCb = function findEdgeCb(a, b, ai) {\n\n        // If edge contains p, store its edge index\n        var containsP = Math2D.isPointOnEdge(p, a, b, precision);\n        if (containsP) {\n          edgeIndex = ai;\n        }\n\n        // Stop on success\n        return containsP;\n      };\n      this.enumEdges(findEdgeCb);\n      return edgeIndex;\n    } }, \n    \n    { key: \"move\", value: function move(dx, dy) {\n      for (var i = 0; i < this.points.length; i++) {\n        this.points[i].x += dx;\n        this.points[i].y += dy;\n      }\n      this.modified();\n      return this;\n    } }, \n    \n    { key: \"copy\", value: function copy(from) {\n      _get(_getPrototypeOf(PolyBase.prototype), \"copy\", this).call(this, from);\n      this.points = cloneVectorArray(from.points);\n      this.modified();\n      return this;\n    } }, \n    \n    { key: \"toSVGPath\", value: function toSVGPath()\n    {var precision = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;var digits = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      if (!this.vertexCount) {\n        return;\n      }\n\n      var previousIndex = 0;\n      var reduceToPath = function reduceToPath(result, current, index, list) {\n        if (!index) {\n          result.push(\"M \".concat(limitDigits(current.x, digits), \",\").concat(limitDigits(current.y, digits)));\n          return result;\n        }\n\n        var prefix, value;\n        var previous = list[previousIndex];\n        var delta = Math2D.pointDelta(previous, current, digits);\n        // skip empty/duplicate points\n        if (!delta) {\n          return result;\n        }\n        if (Math.abs(delta.x) <= precision) {\n          prefix = 'V';\n          value = limitDigits(current.y, digits);\n        } else if (Math.abs(delta.y) <= precision) {\n          prefix = 'H';\n          value = limitDigits(current.x, digits);\n        } else {\n          prefix = 'L';\n          value = \"\".concat(limitDigits(current.x, digits), \",\").concat(limitDigits(current.y, digits));\n        }\n        result.push(\"\".concat(prefix, \" \").concat(value));\n        previousIndex = index;\n        return result;\n      };\n\n      var path = this.points.reduce(reduceToPath, []);\n      if (this.isPolygon()) {\n        path.push('Z');\n      }\n      return path;\n    } }, { key: \"computeBBox\", value: function computeBBox()\n\n    {\n      pointArrayBBox(this.points, this.bbox);\n    } }, { key: \"nextIndex\", value: function nextIndex(\n\n    index) {return (index + 1) % this.vertexCount;} }, { key: \"prevIndex\", value: function prevIndex(\n    index) {return (index + this.vertexCount - 1) % this.vertexCount;} }, { key: \"edgeIndexValid\", value: function edgeIndexValid(\n\n    edgeIndex) {\n      var edgeCount = this.getEdgeCount();\n      return edgeIndex >= 0 && edgeIndex < edgeCount;\n    }\n\n    // Copy start/end of an edge into outA, outB out params (Vector2).\n    // edgeIndex must be valid.\n  }, { key: \"getEdge\", value: function getEdge(edgeIndex, outA, outB) {\n      var ia = edgeIndex;\n      var ib = this.nextIndex(edgeIndex);\n      this.getPoint(ia, outA);\n      this.getPoint(ib, outB);\n    } }, { key: \"getEdgeDirection\", value: function getEdgeDirection(\n\n    edgeIndex, target) {\n      var ia = edgeIndex;\n      var ib = this.nextIndex(edgeIndex);\n      target = target || new THREE.Vector2();\n      return Math2D.getEdgeDirection(this.points[ia], this.points[ib], target);\n    } }, { key: \"getEdgeCount\", value: function getEdgeCount()\n\n    {\n      return this.isPolygon() ? this.vertexCount : this.vertexCount - 1;\n    }\n\n    // Return the summed edge length for Polygons and Polylines.\n    //\n    //  @param {MeasureTransform} [measureTransform] - Optional: To allow doing calculation in another coordinate space\n  }, { key: \"getLength\", value: function getLength(measureTransform) {\n      var a = new THREE.Vector2();\n      var b = new THREE.Vector2();\n      var sum = 0.0;\n      for (var i = 0; i < this.getEdgeCount(); i++) {\n        this.getEdge(i, a, b);\n\n        // apply optional measure transform\n        if (measureTransform) {\n          measureTransform.apply(a);\n          measureTransform.apply(b);\n        }\n\n        sum += a.distanceTo(b);\n      }\n      return sum;\n    } }, { key: \"length\", get: function get() {console.warn('poly.length is deprecated and will be removed. Please use poly.vertexCount property instead.');return this.points.length;} }, { key: \"vertexCount\", get: function get() {return this.points.length;} }]);return PolyBase;}(Shape);\n\n\nexport var Polygon = /*#__PURE__*/function (_PolyBase) {_inherits(Polygon, _PolyBase);\n\n  function Polygon() {var points = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];var style = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DefaultStyle.clone();_classCallCheck(this, Polygon);return _possibleConstructorReturn(this, _getPrototypeOf(Polygon).call(this,\n    points, style));\n  }\n\n  // Draw Polygon into LmvCanvasContext\n  _createClass(Polygon, [{ key: \"draw\", value: function draw(ctx, overrideStyle) {\n\n      if (!this.vertexCount) {\n        return;\n      }\n\n      var style = overrideStyle || this.style;\n\n      ctx.dbId = this.id;\n      ctx.lineStyle = style.lineStyle;\n      ctx.isScreenSpace = style.isScreenSpace;\n\n      ctx.beginPath();\n\n      ctx.moveTo(this.points[0].x, this.points[0].y);\n\n      for (var i = 1; i < this.points.length; i += 1) {\n        ctx.lineTo(this.points[i].x, this.points[i].y);\n      }\n\n      ctx.closePath();\n\n      var c = ctx.canvasContext;\n\n      c.fillStyle = style.fillColor;\n      c.globalAlpha = style.fillAlpha;\n\n      ctx.fill();\n\n      c.strokeStyle = style.lineColor;\n      c.globalAlpha = style.lineAlpha;\n      c.lineWidth = style.lineWidth;\n\n      // Adjust lineWidth so that specified 1px widths will be drawn as 3px on screens with devicePixelRatio == 3.\n      // For human eyes the line width is then the same width.\n      var _window = this.getWindow();\n      if (style.isScreenSpace) c.lineWidth *= _window.devicePixelRatio;\n\n      ctx.stroke();\n\n      // restore default values\n      ctx.dbId = -1;\n      ctx.lineStyle = 0;\n      ctx.isScreenSpace = false;\n    } }, { key: \"hitTest\", value: function hitTest(\n\n    x, y) {\n      var cp = new Autodesk.Extensions.CompGeom.ComplexPolygon(this.points);\n\n      // create dummy contour\n      // TODO: Consider generalizing pointInCountour() to make it usable for non-indexed polygons\n      var contour = [];\n      for (var i = 0; i < this.vertexCount; i++) {\n        contour.push(i);\n      }\n\n      return cp.pointInContour(x, y, contour);\n    } }, { key: \"clone\", value: function clone()\n\n    {\n      return new Polygon().copy(this);\n    }\n\n    //  @param {MeasureTransform} [measureTransform] - Optional: To allow doing calculation in another coordinate space\n  }, { key: \"getArea\", value: function getArea(measureTransform) {\n\n      if (this.points.length < 3) {\n        return 0.0;\n      }\n\n      var area = 0.0;\n      this.enumEdges(function (a, b) {\n        // apply optional transform\n        measureTransform && measureTransform.apply(a);\n        measureTransform && measureTransform.apply(b);\n\n        // sum up signed areas\n        area += a.x * b.y - b.x * a.y;\n      });\n\n      return Math.abs(0.5 * area);\n    } }]);return Polygon;}(PolyBase);\n\n\nexport var Polyline = /*#__PURE__*/function (_PolyBase2) {_inherits(Polyline, _PolyBase2);\n\n  function Polyline() {var points = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];var style = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DefaultStyle.clone();_classCallCheck(this, Polyline);return _possibleConstructorReturn(this, _getPrototypeOf(Polyline).call(this,\n    points, style));\n  }_createClass(Polyline, [{ key: \"makeLine\", value: function makeLine()\n\n    {var x0 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;var y0 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;var x1 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;var y1 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      if (this.vertexCount !== 2) {\n        this.clear();\n        this.addPoint(x0, y0);\n        this.addPoint(x1, y1);\n      } else {\n        this.updatePoint(0, x0, y0);\n        this.updatePoint(1, x1, y1);\n      }\n      return this;\n    }\n\n    // Draw Polyline into LmvCanvasContext\n  }, { key: \"draw\", value: function draw(ctx, overrideStyle) {\n\n      if (!this.vertexCount) {\n        return;\n      }\n\n      var style = overrideStyle || this.style;\n\n      ctx.dbId = this.id;\n      ctx.lineStyle = style.lineStyle;\n      ctx.isScreenSpace = style.isScreenSpace;\n\n      ctx.beginPath();\n\n      ctx.moveTo(this.points[0].x, this.points[0].y);\n\n      for (var i = 1; i < this.points.length; i++) {\n        ctx.lineTo(this.points[i].x, this.points[i].y);\n      }\n\n      var c = ctx.canvasContext;\n\n      c.strokeStyle = style.lineColor;\n      c.globalAlpha = style.lineAlpha;\n      c.lineWidth = style.lineWidth;\n\n      // Adjust lineWidth so that specified 1px widths will be drawn as 3px on screens with devicePixelRatio == 3.\n      // For human eyes the line width is then the same width.\n      var _window = this.getWindow();\n      if (style.isScreenSpace) c.lineWidth *= _window.devicePixelRatio;\n\n      ctx.stroke();\n\n      // restore default values\n      ctx.dbId = -1;\n      ctx.lineStyle = 0;\n      ctx.isScreenSpace = false;\n    } }, { key: \"clone\", value: function clone()\n\n    {\n      return new Polyline().copy(this);\n    } }, { key: \"computeBBox\", value: function computeBBox()\n\n    {\n      pointArrayBBox(this.points, this.bbox);\n    }\n\n    // hitRadius is in layer-coords\n  }, { key: \"hitTest\", value: function hitTest(x, y, hitRadius) {\n      var edgeIndex = this.findEdgeIndex({ x: x, y: y }, hitRadius);\n      return edgeIndex !== -1;\n    } }]);return Polyline;}(PolyBase);\n\n\nvar ArcType = {\n  Bezier: 1 };\n\n\nexport var Path = /*#__PURE__*/function (_PolyBase3) {_inherits(Path, _PolyBase3);\n\n  function Path(points) {var style = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DefaultStyle.clone();_classCallCheck(this, Path);return _possibleConstructorReturn(this, _getPrototypeOf(Path).call(this,\n    points, style));\n  }_createClass(Path, [{ key: \"updatePoint\", value: function updatePoint(\n\n    index, x, y) {\n\n      var p = this.points[index];\n\n      // If p is adjacent to a BezierArc segment, the tangent should keep the same after changing the position\n      // Therefore, we change the corresponding control points as well\n      var dx = x - p.x;\n      var dy = y - p.y;\n\n      // Control point for the start tangent of the arc segment starting at p\n      if (this.isBezierArc(index)) {\n        p.cp1x += dx;\n        p.cp1y += dy;\n      }\n\n      // Control point for the end tangent of the arc segment ending at p\n      if (this.vertexCount > 1) {\n        var prevIndex = this.prevIndex(index);\n        if (this.isBezierArc(prevIndex)) {\n          var pPrev = this.points[prevIndex];\n          pPrev.cp2x += dx;\n          pPrev.cp2y += dy;\n        }\n      }\n\n      p.x = x;\n      p.y = y;\n      this.modified();\n    }\n\n    // Change segment into BezierArc\n  }, { key: \"setBezierArc\", value: function setBezierArc(segmentIndex, cp1x, cp1y, cp2x, cp2y) {\n\n      var p = this.points[segmentIndex];\n\n      p.arcType = ArcType.Bezier;\n      p.cp1x = cp1x;\n      p.cp1y = cp1y;\n      p.cp2x = cp2x;\n      p.cp2y = cp2y;\n    } }, { key: \"isBezierArc\", value: function isBezierArc(\n\n    segmentIndex) {\n      return this.points[segmentIndex].arcType === ArcType.Bezier;\n    }\n\n    // Return ctrl point of Bezier Arc. Only allowed if isBezierArc(segmentIndex) is true\n    // @param {number} segmentIndex\n    // @param {number} ctrlPointIndex - Must be 1 or 2. Note that ctrlPoints 0 and 3 are defined by\n    //                                  current vertex position\n  }, { key: \"getControlPoint\", value: function getControlPoint(segmentIndex, ctrlPointIndex, optionalTarget) {\n      var result = optionalTarget || new THREE.Vector2();\n      var p = this.points[segmentIndex];\n\n      if (ctrlPointIndex === 1) {\n        result.x = p.cp1x;\n        result.y = p.cp1y;\n      } else {\n        result.x = p.cp2x;\n        result.y = p.cp2y;\n      }\n      return result;\n    }\n\n    // Return ctrl point of Bezier Arc. Only allowed if isBezierArc(segmentIndex) is true\n    // @param {number} segmentIndex\n    // @param {number} ctrlPointIndex - Must be 1 or 2. Note that ctrlPoints 0 and 3 are defined by\n    //                                  current vertex position\n  }, { key: \"updateControlPoint\", value: function updateControlPoint(segmentIndex, ctrlPoint, x, y) {\n      var p = this.points[segmentIndex];\n      if (ctrlPoint === 1) {\n        p.cp1x = x;\n        p.cp1y = y;\n      } else {\n        p.cp2x = x;\n        p.cp2y = y;\n      }\n      this.modified();\n    }\n\n    // Draw Polygon into LmvCanvasContext\n  }, { key: \"draw\", value: function draw(ctx, overrideStyle) {\n\n      if (!this.vertexCount) {\n        return;\n      }\n\n      var style = overrideStyle || this.style;\n\n      ctx.dbId = this.id;\n      ctx.lineStyle = style.lineStyle;\n      ctx.isScreenSpace = style.isScreenSpace;\n\n      ctx.beginPath();\n\n      ctx.moveTo(this.points[0].x, this.points[0].y);\n\n      for (var i = 1; i < this.points.length; i += 1) {\n        // The segment start point defines the type (line or arc)\n        var prev = this.points[i - 1];\n        var p = this.points[i];\n\n        if (prev.arcType === ArcType.Bezier) {\n          ctx.bezierCurveTo(prev.cp1x, prev.cp1y, prev.cp2x, prev.cp2y, p.x, p.y);\n        } else {\n          ctx.lineTo(p.x, p.y);\n        }\n      }\n\n      // close path\n      var pLast = this.points[this.points.length - 1];\n      var pFirst = this.points[0];\n      if (pLast.arcType === ArcType.Bezier) {\n        ctx.bezierCurveTo(pLast.cp1x, pLast.cp1y, pLast.cp2x, pLast.cp2y, pFirst.x, pFirst.y);\n      } else {\n        ctx.lineTo(pFirst.x, pFirst.y);\n      }\n\n      ctx.closePath();\n\n      var c = ctx.canvasContext;\n\n      c.fillStyle = style.fillColor;\n      c.globalAlpha = style.fillAlpha;\n\n      ctx.fill();\n\n      c.strokeStyle = style.lineColor;\n      c.globalAlpha = style.lineAlpha;\n      c.lineWidth = style.lineWidth;\n\n      // Adjust lineWidth so that specified 1px widths will be drawn as 3px on screens with devicePixelRatio == 3.\n      // For human eyes the line width is then the same width.\n      if (style.isScreenSpace) c.lineWidth *= window.devicePixelRatio;\n\n      ctx.stroke();\n\n      // restore default values\n      ctx.dbId = -1;\n      ctx.lineStyle = 0;\n      ctx.isScreenSpace = false;\n    }\n\n    // TODO: Consider arcs properly\n  }, { key: \"hitTest\", value: function hitTest(x, y) {\n      var cp = new Autodesk.Extensions.CompGeom.ComplexPolygon(this.points);\n\n      // create dummy contour\n      // TODO: Consider generalizing pointInContour() to make it usable for non-indexed polygons\n      var contour = [];\n      for (var i = 0; i < this.vertexCount; i++) {\n        contour.push(i);\n      }\n\n      return cp.pointInContour(x, y, contour);\n    } }, { key: \"clone\", value: function clone()\n\n    {\n      return new Path().copy(this);\n    } }, { key: \"copy\", value: function copy(\n\n    from) {\n      _get(_getPrototypeOf(Path.prototype), \"copy\", this).call(this, from);\n\n      // Copy extra information for arcs\n      for (var i = 0; i < from.points.length; i++) {\n        if (from.isBezierArc(i)) {\n          var src = from.points[i];\n          var dst = this.points[i];\n\n          dst.arcType = src.arcType;\n          dst.cp1x = src.cp1x;\n          dst.cp1y = src.cp1y;\n          dst.cp2x = src.cp2x;\n          dst.cp2y = src.cp2y;\n        }\n      }\n      return this;\n    } }, { key: \"toSVGPath\", value: function toSVGPath()\n\n    {var precision = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;var digits = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      if (!this.vertexCount) {\n        return [];\n      }\n\n      var path = [];\n      path.push(\"M \".concat(limitDigits(this.points[0].x, digits), \",\").concat(limitDigits(this.points[0].y, digits)));\n      for (var i = 1; i < this.points.length; i += 1) {\n        // The segment start point defines the type (line or arc)\n        var prev = this.points[i - 1];\n        var p = this.points[i];\n        var value = void 0;\n        if (prev.arcType === ArcType.Bezier) {\n          value = \"C \".concat(limitDigits(prev.cp1x, digits), \",\").concat(limitDigits(prev.cp1y, digits), \",\").concat(limitDigits(prev.cp2x, digits), \",\").concat(limitDigits(prev.cp2y, digits), \",\").concat(limitDigits(p.x, digits), \",\").concat(limitDigits(p.y, digits));\n        } else {\n          var delta = Math2D.pointDelta(prev, p, digits);\n          // skip empty/duplicate points\n          if (!delta) {\n            continue;\n          }\n          if (Math.abs(delta.x) <= precision) {\n            value = \"V \".concat(limitDigits(p.y, digits));\n          } else if (Math.abs(delta.y) <= precision) {\n            value = \"H \".concat(limitDigits(p.x, digits));\n          } else {\n            value = \"L \".concat(limitDigits(p.x, digits), \",\").concat(limitDigits(p.y, digits));\n          }\n        }\n        path.push(value);\n      }\n\n      // close path\n      var pLast = this.points[this.points.length - 1];\n      if (pLast.arcType === ArcType.Bezier) {\n        var pFirst = this.points[0];\n        var _value = \"C \".concat(limitDigits(pLast.cp1x, digits), \",\").concat(limitDigits(pLast.cp1y, digits), \",\").concat(limitDigits(pLast.cp2x, digits), \",\").concat(limitDigits(pLast.cp2y, digits), \",\").concat(limitDigits(pFirst.x, digits), \",\").concat(limitDigits(pFirst.y, digits));\n        path.push(_value);\n      }\n      path.push('Z');\n\n      return path;\n    } }, { key: \"move\", value: function move(\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    dx, dy) {\n      _get(_getPrototypeOf(Path.prototype), \"move\", this).call(this, dx, dy);\n\n      // Move affected control points as well\n      for (var i = 0; i < this.points.length; i++) {\n\n        if (!this.isBezierArc(i)) {\n          continue;\n        }\n\n        var p = this.points[i];\n        p.cp1x += dx;\n        p.cp1y += dy;\n        p.cp2x += dx;\n        p.cp2y += dy;\n      }\n\n      this.modified();\n      return this;\n    } }], [{ key: \"_fromDOMNode\", value: function _fromDOMNode(pathNode) {var d = pathNode.getAttribute('d');if (!d) {return;}var _Path$_parsePath = Path._parsePath(d),points = _Path$_parsePath.points,isPolygon = _Path$_parsePath.isPolygon;if (points.find(function (p) {return p.arcType !== undefined;})) {return new Path(points);} else if (isPolygon) {return new Polygon(points);}return new Polyline(points);} }, { key: \"_parsePath\", value: function _parsePath(svgPath) {// split at all chars but keep the char using positive look ahead\n      // sample payload for path d = M 13.882,4.8592 L 14.6757,4.738 L 13.9668,4.4896 L 14.005,4.4896 C 15.3211,5.4567,14.79,3.1599,14.6624,4.155 L 13.9189,3.8945 L 13.9189,3.8 L 14.6234,3.7516 Z\n      // results into list with glyph with position array:\n      // ['M 13.882,4.8592', 'L 14.6757,4.738', 'L 13.9668,4.4896', 'L 14.005,4.4896', 'C 15.3211,5.4567,14.79,3.1599,14.6624,4.155', 'L 13.9189,3.8945', 'L 13.9189,3.8', 'L 14.6234,3.7516', 'Z']\n      var pointStrings = svgPath.split(/ (?=[a-zA-Z])/gi);var validChars = \"MLHVCZ\";var previousPoint = { x: 0, y: 0 };var newPoint;var points = [];var isPolygon = false;for (var i = 0; i < pointStrings.length; i++) {var pointString = pointStrings[i];if (!validChars.contains(pointString[0])) {throw \"\\\"\".concat(pointString[0], \"\\\" is not a supported or invalid glyph: \").concat(pointString);}var value = pointString.substring(1);switch (pointString[0]) {case 'M':case 'L':var coords = value.split(',');newPoint = { x: parseFloat(coords[0]), y: parseFloat(coords[1]) };if (pointString[0] === 'M') {// remove the initial 0,0 point\n              points.shift();}break;case 'H':newPoint = { x: parseFloat(value), y: previousPoint.y };break;case 'V':newPoint = { x: previousPoint.x, y: parseFloat(value) };break;case 'C':var bezierCoords = value.split(',');newPoint = { x: parseFloat(bezierCoords[4]), y: parseFloat(bezierCoords[5]) };previousPoint.arcType = ArcType.Bezier;previousPoint.cp1x = parseFloat(bezierCoords[0]);previousPoint.cp1y = parseFloat(bezierCoords[1]);previousPoint.cp2x = parseFloat(bezierCoords[2]);previousPoint.cp2y = parseFloat(bezierCoords[3]);break;case 'Z': // we are done\n            isPolygon = true;continue;}previousPoint = newPoint;points.push(newPoint);} // Bezier applied to the last point will create an additional point which is equal to the endpoint to close the path\n      // see Path.toSVGPath(). Path is always closed, therefore we can remove the duplicate end point.\n      var delta = Math2D.pointDelta(points[0], points[points.length - 1], 0);if (!delta) {points.pop(); // remove the duplicate last point which the same as the first point.\n      }return { points: points, isPolygon: isPolygon };} }]);return Path;}(PolyBase);export var Circle = /*#__PURE__*/function (_Shape2) {_inherits(Circle, _Shape2); // Note: The tessSegments parameter will be removed later when the implementation uses arcs from LineShader directly.\n  \n  \n      function Circle()\n       {var _this2;var centerX = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0.0;var centerY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.0;var radius = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1.0;var style = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : DefaultStyle.clone();var tessSegments = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 20;_classCallCheck(this, Circle);_this2 = _possibleConstructorReturn(this, _getPrototypeOf(Circle).call(this, style));_this2.polygon = new Polygon([], style);\n    // Force polygon.id to be the same, so that its geometry is associated with this Circle.\n    // This is a bit hacky, but can be removed as soon as we use native arcs for circle rendering.\n    _this2.polygon.id = _this2.id;\n\n    _this2.centerX = centerX;\n    _this2.centerY = centerY;\n    _this2.radius = radius;\n    _this2.tessSegments = tessSegments;\n\n    _this2.needsUpdate = true;return _this2;\n  }_createClass(Circle, [{ key: \"draw\", value: function draw(\n\n    ctx, overrideStyle) {\n\n      this.polygon.points.length = 0;\n\n      // angle delta in degrees\n      var stepSize = 360 / this.tessSegments;\n      for (var angle = 0; angle < 360; angle += stepSize) {\n\n        var a = angle * Math.PI / 180;\n        var x = this.radius * Math.cos(a);\n        var y = this.radius * Math.sin(a);\n\n        this.polygon.addPoint(this.centerX + x, this.centerY + y);\n      }\n\n      this.needsUpdate = false;\n\n      this.polygon.draw(ctx, overrideStyle);\n    } }, { key: \"setCenter\", value: function setCenter(\n\n    x, y) {\n      this.centerX = x;\n      this.centerY = y;\n      this.modified();\n    } }, { key: \"move\", value: function move(\n\n    dx, dy) {\n      this.centerX += dx;\n      this.centerY += dy;\n      this.modified();\n    } }, { key: \"hitTest\", value: function hitTest(\n\n    x, y) {\n      var dx = x - this.centerX;\n      var dy = y - this.centerY;\n      return dx * dx + dy * dy < this.radius * this.radius;\n    } }, { key: \"clone\", value: function clone()\n\n    {\n      return new Circle().copy(this);\n    } }, { key: \"copy\", value: function copy(\n\n    from) {\n      _get(_getPrototypeOf(Circle.prototype), \"copy\", this).call(this, from);\n      this.polygon = from.polygon.clone();\n      this.centerX = from.centerX;\n      this.centerY = from.centerY;\n      this.radius = from.radius;\n      this.tessSegments = from.tessSegments;\n      this.modified();\n      return this;\n    } }, { key: \"toSVG\", value: function toSVG()\n\n    {var precision = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;var digits = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      return \"<circle cx=\\\"\".concat(limitDigits(this.centerX, digits), \"\\\" cy=\\\"\").concat(limitDigits(this.centerY, digits), \"\\\" r=\\\"\").concat(limitDigits(this.radius, digits), \"\\\"/>\");\n    } }, { key: \"computeBBox\", value: function computeBBox()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    {\n      this.bbox.min.set(this.centerX - this.radius, this.centerY - this.radius);\n      this.bbox.max.set(this.centerX + this.radius, this.centerY + this.radius);\n    } }], [{ key: \"_fromDOMNode\", value: function _fromDOMNode(circleNode) {if (!circleNode.hasAttributes || !circleNode.hasAttributes()) {throw 'No attributes available on the <circle/> node';}var circle = new Circle();for (var i = circleNode.attributes.length - 1; i >= 0; i--) {var attr = circleNode.attributes[i];switch (attr.name) {case 'cx':circle.centerX = parseFloat(attr.value);break;case 'cy':circle.centerY = parseFloat(attr.value);break;case 'r':circle.radius = parseFloat(attr.value);break;}}return circle;} }]);return Circle;}(Shape);\n\n\nexport var ShapeWrapper = /*#__PURE__*/function (_Shape3) {_inherits(ShapeWrapper, _Shape3);\n\n  // @param {Shape} shape - must not be null\n  function ShapeWrapper(shape) {var _this3;_classCallCheck(this, ShapeWrapper);\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(ShapeWrapper).call(this));\n    _this3.shape = shape;\n\n    Object.defineProperty(_assertThisInitialized(_this3), 'bbox', {\n      get: function get() {return _this3.shape.bbox;},\n      set: function set(bbox) {_this3.shape.bbox = bbox;} });\n\n\n    Object.defineProperty(_assertThisInitialized(_this3), 'id', {\n      get: function get() {return _this3.shape.id;},\n      set: function set(id) {_this3.shape.id = id;} });\n\n\n    Object.defineProperty(_assertThisInitialized(_this3), 'bboxDirty', {\n      get: function get() {return _this3.shape.bboxDirty;},\n      set: function set(dirty) {_this3.shape.bboxDirty = dirty;} });\n\n\n    Object.defineProperty(_assertThisInitialized(_this3), 'name', {\n      get: function get() {return _this3.shape.name;},\n      set: function set(name) {_this3.shape.name = name;} });return _this3;\n\n  }_createClass(ShapeWrapper, [{ key: \"draw\", value: function draw()\n\n    {var _this$shape;return (_this$shape = this.shape).draw.apply(_this$shape, arguments);} }, { key: \"hitTest\", value: function hitTest()\n    {var _this$shape2;return (_this$shape2 = this.shape).hitTest.apply(_this$shape2, arguments);} }, { key: \"move\", value: function move()\n    {var _this$shape3;return (_this$shape3 = this.shape).move.apply(_this$shape3, arguments);} }, { key: \"modified\", value: function modified()\n    {var _this$shape4;return (_this$shape4 = this.shape).modified.apply(_this$shape4, arguments);} }, { key: \"computeBBox\", value: function computeBBox()\n    {var _this$shape5;return (_this$shape5 = this.shape).computeBBox.apply(_this$shape5, arguments);} }, { key: \"updateBBox\", value: function updateBBox()\n    {var _this$shape6;return (_this$shape6 = this.shape).updateBBox.apply(_this$shape6, arguments);} }, { key: \"clone\", value: function clone()\n\n    {\n      return new ShapeWrapper(this.shape.clone());\n    } }, { key: \"copy\", value: function copy(\n\n    from) {\n      this.shape.copy(from.shape);\n    } }]);return ShapeWrapper;}(Shape);","function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}\nvar av = Autodesk.Viewing;var\n\nUndoStack = /*#__PURE__*/function () {\n\n  function UndoStack() {_classCallCheck(this, UndoStack);\n\n    av.EventDispatcher.prototype.apply(this);\n\n    // Array of action objects\n    this.stack = [];\n\n    // By default, this simply points to the end of this.stack. Only if undo has been called, \n    // it points to the next operation to be run on a redo() call\n    this.current = 0;\n  }\n\n  // Executes an action and pushes it to the undo stack\n  _createClass(UndoStack, [{ key: \"run\", value: function run(action) {\n      // If we did a couple of undos before, a new operation will clear all redo steps\n      this.stack.length = this.current;\n\n      this.dispatchEvent({ type: UndoStack.BEFORE_ACTION, action: action });\n\n      action.redo();\n\n      this.dispatchEvent({ type: UndoStack.AFTER_ACTION, action: action });\n\n      this.stack.push(action);\n      this.current = this.stack.length;\n    } }, { key: \"undo\", value: function undo()\n\n    {\n      if (!this.current) {\n        // We reached the beginning of the stack\n        return false;\n      }\n      this.current--;\n\n      var action = this.stack[this.current];\n\n      this.dispatchEvent({ type: UndoStack.BEFORE_ACTION, action: action, isUndo: true });\n\n      action.undo();\n\n      this.dispatchEvent({ type: UndoStack.AFTER_ACTION, action: action, isUndo: true });\n\n      action.layer.update();\n\n      return true;\n    } }, { key: \"redo\", value: function redo()\n\n    {\n      var action = this.stack[this.current];\n      if (!action) {\n        // Nothing to redo\n        return false;\n      }\n\n      this.dispatchEvent({ type: UndoStack.BEFORE_ACTION, action: action, isUndo: false });\n\n      action.redo();\n\n      this.dispatchEvent({ type: UndoStack.AFTER_ACTION, action: action, isUndo: false });\n\n      this.current++;\n\n      action.layer.update();\n\n      return true;\n    } }, { key: \"clear\", value: function clear()\n\n    {\n      this.stack.length = 0;\n      this.current = 0;\n    } }]);return UndoStack;}();\n\n\n// Events sent before/after any action is executed by UndoStack\nexport { UndoStack as default };UndoStack.BEFORE_ACTION = 'beforeAction';\nUndoStack.AFTER_ACTION = 'afterAction';","function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}import { Style } from './EditShapes.js';\nimport UndoStack from './UndoStack.js';\nimport EditLayer from './EditLayer.js';\n\nvar av = Autodesk.Viewing;var\n\nSelection = /*#__PURE__*/function () {\n\n  function Selection(layer, undoStack) {var _this = this;_classCallCheck(this, Selection);\n\n    av.EventDispatcher.prototype.apply(this);\n\n    // Keys: shapeIds, Values: shapes\n    this.isSelected = {};\n\n    // For mouse-over highlighting. 0 = nothing highlighted (ShapeIds start at 1)\n    this.hoveredId = 0;\n\n    // Reused as temporary override style for shapes\n    this.tmpStyle = new Style();\n\n    // Callback function that controls how to modify the style on selected shapes\n    this.modifier = function (shape, style) {\n\n      // only modify style for selected or hovered shapes\n      var isSelected = _this.isSelected[shape.id];\n      var isHovered = shape.id === _this.hoveredId;\n      if (!isSelected && !isHovered) {\n        return undefined;\n      }\n\n      // Create a tmp copy of the initial shape style that is modified to indicate highlighting.\n      // Note that we can reuse tmpStyle for multiple shapes, because style modifiers are applied right before drawing.\n      _this.tmpStyle.copy(style);\n\n      if (isSelected) {\n        _this.tmpStyle.fillAlpha = Math.min(_this.tmpStyle.fillAlpha + 0.3, 1);\n        _this.tmpStyle.lineWidth *= 1.5;\n      } else {\n        // hovered\n        _this.tmpStyle.fillAlpha = Math.min(_this.tmpStyle.fillAlpha + 0.2, 1);\n        _this.tmpStyle.lineWidth *= 1.5;\n      }\n\n      return _this.tmpStyle;\n    };\n\n    this.layer = layer;\n    this.onShapeRemoved = this.onShapeRemoved.bind(this);\n    this.onLayerCleared = this.onLayerCleared.bind(this);\n    this.layer.addEventListener(EditLayer.SHAPE_REMOVED, this.onShapeRemoved);\n    this.layer.addEventListener(EditLayer.LAYER_CLEARED, this.onLayerCleared);\n\n    this.layer.addStyleModifier(this.modifier);\n\n    // Make sure that selection doesn't keep deleted objects, e.g., if creation has undone\n    // or a RemoveShape action happened.\n    this.undoStack = undoStack;\n    this.onActionCb = function (a) {return _this.onAction(a);};\n    this.undoStack.addEventListener(UndoStack.AFTER_ACTION, this.onActionCb);\n  }_createClass(Selection, [{ key: \"dtor\", value: function dtor()\n\n    {\n      this.layer.removeStyleModifier(this.modifier);\n      this.undoStack.removeEventListener(UndoStack.AFTER_ACTION, this.onActionCb);\n      this.undoStack.removeEventListener(EditLayer.SHAPE_REMOVED, this.onShapeRemoved);\n      this.undoStack.removeEventListener(EditLayer.LAYER_CLEARED, this.onLayerCleared);\n    }\n\n    // @param {Shape[]) shapes\n  }, { key: \"setSelection\", value: function setSelection(shapes) {\n\n      // This works for null as well (unlike ES6 default params)\n      shapes = shapes || [];\n\n      var selected = this.getSelectedShapes();\n\n      // Check if the set of ids changed\n      var changed = false;\n      if (selected.length != shapes.length) {\n        changed = true;\n      } else {\n        // Check if any new shape was not selected before\n        for (var i = 0; i < shapes.length; i++) {\n          var shape = shapes[i];\n          if (!this.isSelected[shape.id]) {\n            changed = true;\n          }\n        }\n      }\n\n      if (!changed) {\n        return;\n      }\n\n      // Add all shapes to this.isSelected\n      this.isSelected = {};\n      for (var _i = 0; _i < shapes.length; _i++) {\n        var _shape = shapes[_i];\n        this.isSelected[_shape.id] = _shape;\n      }\n      this.modified();\n    } }, { key: \"empty\", value: function empty()\n\n    {\n      return !Object.keys(this.isSelected).length;\n    }\n\n    // Set selection to a single shape. Calling with null clears the selection.\n  }, { key: \"selectOnly\", value: function selectOnly(shape) {\n      this.setSelection(shape && [shape]);\n    } }, { key: \"clear\", value: function clear()\n\n    {\n      this.setSelection([]);\n    }\n\n    // Passes all selected shapes to the callback\n  }, { key: \"getSelectedShapes\", value: function getSelectedShapes() {\n      return Object.values(this.isSelected);\n    } }, { key: \"getSelectedIds\", value: function getSelectedIds()\n\n    {\n      return Object.keys(this.isSelected);\n    } }, { key: \"modified\", value: function modified()\n\n    {\n      this.layer.update();\n      this.dispatchEvent({ type: Selection.Events.SELECTION_CHANGED });\n    } }, { key: \"onAction\", value: function onAction()\n\n    {\n\n      if (this.empty()) {\n        return;\n      }\n\n      // Single-selection: Clear selection if selected shape has gone\n      var selected = this.getSelectedShapes();\n      if (selected.length == 1) {\n        var exists = this.layer.findShapeById(selected[0].id);\n        if (!exists) {\n          this.clear();\n        }\n        return;\n      }\n\n      // Multi-selection: Same principle, but avoiding n^2 runtime for large selections\n\n      // Create dictionary of all shapes in the layer\n      var shapeIdExists = {};\n      this.layer.shapes.forEach(function (s) {return shapeIdExists[s.id] = true;});\n\n      // Clear all shapes from selection that don't exist anymore\n      selected = selected.filter(function (s) {return shapeIdExists[s.id];});\n      this.setSelection(selected);\n    } }, { key: \"onShapeRemoved\", value: function onShapeRemoved(_ref)\n\n    {var shape = _ref.shape;\n      if (this.empty()) {\n        return;\n      }\n\n      // Remove the shape from the selection if found.\n      if (this.isSelected[shape.id]) {\n        delete this.isSelected[shape.id];\n        this.modified();\n      }\n    } }, { key: \"onLayerCleared\", value: function onLayerCleared()\n\n    {\n      if (this.empty()) {\n        return;\n      }\n\n      this.clear();\n    } }, { key: \"setHoveredId\", value: function setHoveredId(\n\n    id) {\n\n      if (id === this.hoveredId) {\n        return;\n      }\n\n      this.hoveredId = id;\n      this.layer.update();\n    } }]);return Selection;}();export { Selection as default };\n\n\nSelection.Events = {\n  SELECTION_CHANGED: 'selectionChanged' };","function _typeof(obj) {if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return self;}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _inherits(subClass, superClass) {if (typeof superClass !== \"function\" && superClass !== null) {throw new TypeError(\"Super expression must either be null or a function\");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;} // Collection of basic edit actions that support undo/redo.\n//\n// Each action provides undo() and redo() functions. UndoStack takes care that actions are always called in consistent order. \n// I.e., an individual action can assume that undo/redo is only called if the state allows it. (e.g. target shape exists and has expected number of vertices etc.)\nvar\nAction = /*#__PURE__*/function () {\n  function Action(layer) {_classCallCheck(this, Action);\n    this.layer = layer;\n  }_createClass(Action, [{ key: \"undo\", value: function undo()\n\n    {\n      throw new Error('Abstract method invoked');\n    } }, { key: \"redo\", value: function redo()\n\n    {\n      throw new Error('Abstract method invoked');\n    } }]);return Action;}();var\n\n\nAddShape = /*#__PURE__*/function (_Action) {_inherits(AddShape, _Action);\n  function AddShape(layer, shape) {var _this;_classCallCheck(this, AddShape);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddShape).call(this, layer));\n    _this.shape = shape;return _this;\n  }_createClass(AddShape, [{ key: \"undo\", value: function undo()\n\n    {\n      this.layer.removeShape(this.shape);\n    } }, { key: \"redo\", value: function redo()\n\n    {\n      this.layer.addShape(this.shape);\n    } }]);return AddShape;}(Action);var\n\n\nAddShapes = /*#__PURE__*/function (_Action2) {_inherits(AddShapes, _Action2);\n\n  // @param {Shape[]} shapes\n  function AddShapes(layer, shapes) {var _this2;_classCallCheck(this, AddShapes);\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(AddShapes).call(this, layer));\n    _this2.shapes = shapes;return _this2;\n  }_createClass(AddShapes, [{ key: \"undo\", value: function undo()\n\n    {var _this3 = this;\n      this.shapes.forEach(function (s) {return _this3.layer.removeShape(s);});\n    } }, { key: \"redo\", value: function redo()\n\n    {var _this4 = this;\n      this.shapes.forEach(function (s) {return _this4.layer.addShape(s);});\n    } }]);return AddShapes;}(Action);var\n\n\nMoveShape = /*#__PURE__*/function (_Action3) {_inherits(MoveShape, _Action3);\n  function MoveShape(layer, shape, dx, dy) {var _this5;_classCallCheck(this, MoveShape);\n    _this5 = _possibleConstructorReturn(this, _getPrototypeOf(MoveShape).call(this, layer));\n    _this5.shape = shape;\n    _this5.delta = { x: dx, y: dy };\n\n    // Note that transforming back and forth is not always exactly 1:1. \n    _this5.beforeState = _this5.shape.clone();\n    _this5.afterState = _this5.shape.clone();\n\n    _this5.afterState.move(dx, dy);return _this5;\n  }_createClass(MoveShape, [{ key: \"undo\", value: function undo()\n\n    {\n      this.shape.copy(this.beforeState);\n    } }, { key: \"redo\", value: function redo()\n\n    {\n      this.shape.copy(this.afterState);\n    } }]);return MoveShape;}(Action);var\n\n\nRemoveShape = /*#__PURE__*/function (_Action4) {_inherits(RemoveShape, _Action4);\n  function RemoveShape(layer, shape) {var _this6;_classCallCheck(this, RemoveShape);\n    _this6 = _possibleConstructorReturn(this, _getPrototypeOf(RemoveShape).call(this, layer));\n    _this6.shape = shape;return _this6;\n  }_createClass(RemoveShape, [{ key: \"undo\", value: function undo()\n\n    {\n      this.layer.addShape(this.shape);\n    } }, { key: \"redo\", value: function redo()\n\n    {\n      this.layer.removeShape(this.shape);\n    } }]);return RemoveShape;}(Action);var\n\n\n\nRemoveShapes = /*#__PURE__*/function (_Action5) {_inherits(RemoveShapes, _Action5);\n  function RemoveShapes(layer, shapes) {var _this7;_classCallCheck(this, RemoveShapes);\n    _this7 = _possibleConstructorReturn(this, _getPrototypeOf(RemoveShapes).call(this, layer));\n    _this7.shapes = shapes;return _this7;\n  }_createClass(RemoveShapes, [{ key: \"undo\", value: function undo()\n\n    {var _this8 = this;\n      this.shapes.forEach(function (s) {return _this8.layer.addShape(s);});\n    } }, { key: \"redo\", value: function redo()\n\n    {var _this9 = this;\n      this.shapes.forEach(function (s) {return _this9.layer.removeShape(s);});\n    } }]);return RemoveShapes;}(Action);var\n\n\nAddVertex = /*#__PURE__*/function (_Action6) {_inherits(AddVertex, _Action6);\n  function AddVertex(layer, poly, vIndex, p) {var _this10;_classCallCheck(this, AddVertex);\n    _this10 = _possibleConstructorReturn(this, _getPrototypeOf(AddVertex).call(this, layer));\n    _this10.poly = poly;\n    _this10.vIndex = vIndex;\n    _this10.point = p.clone();return _this10;\n  }_createClass(AddVertex, [{ key: \"undo\", value: function undo()\n\n    {\n      this.poly.removePoint(this.vIndex);\n    } }, { key: \"redo\", value: function redo()\n\n    {\n      this.poly.insertPoint(this.vIndex, this.point);\n    } }]);return AddVertex;}(Action);\n\n\n// Only for polygons and polylines\nvar MoveVertex = /*#__PURE__*/function (_Action7) {_inherits(MoveVertex, _Action7);\n  function MoveVertex(layer, poly, vIndex, newPos) {var _this11;_classCallCheck(this, MoveVertex);\n    _this11 = _possibleConstructorReturn(this, _getPrototypeOf(MoveVertex).call(this, layer));\n    _this11.poly = poly;\n    _this11.vIndex = vIndex;\n    _this11.posBefore = poly.getPoint(vIndex);\n    _this11.posAfter = newPos.clone();return _this11;\n  }_createClass(MoveVertex, [{ key: \"undo\", value: function undo()\n\n    {\n      this.poly.updatePoint(this.vIndex, this.posBefore.x, this.posBefore.y);\n    } }, { key: \"redo\", value: function redo()\n    {\n      this.poly.updatePoint(this.vIndex, this.posAfter.x, this.posAfter.y);\n    } }]);return MoveVertex;}(Action);var\n\n\nRemoveVertex = /*#__PURE__*/function (_Action8) {_inherits(RemoveVertex, _Action8);\n  function RemoveVertex(layer, poly, vIndex) {var _this12;_classCallCheck(this, RemoveVertex);\n    _this12 = _possibleConstructorReturn(this, _getPrototypeOf(RemoveVertex).call(this, layer));\n    _this12.poly = poly;\n    _this12.vIndex = vIndex;\n    _this12.point = poly.getPoint(vIndex);return _this12;\n  }_createClass(RemoveVertex, [{ key: \"undo\", value: function undo()\n\n    {\n      this.poly.insertPoint(this.vIndex, this.point);\n    } }, { key: \"redo\", value: function redo()\n\n    {\n      this.poly.removePoint(this.vIndex);\n    } }]);return RemoveVertex;}(Action);\n\n\n\n// Moves an edge to a new position specified by new positions for start and end vertex.\n// Optionally, start and end vertex may be duplicated before moving the edge. In this case, the neighbar edges keep unchanged and\n// we introduce new intermediate edges to connect the old start/end position with the new one.\nvar MoveEdge = /*#__PURE__*/function (_Action9) {_inherits(MoveEdge, _Action9);\n\n  // @param {EditLayer} layer\n  // @param {Polybase}  poly      - must be at start before the change\n  // @param {number}    edgeIndex - edge to be modified\n  // @param {Vector3}   newPosA, newPosB\n  // @param {bool}      duplicateStartVertex, duplicateEndVertex - Optional, start and end vertex of the edge may be duplicated.\n  function MoveEdge(layer, poly, edgeIndex, newPosA, newPosB, duplicateStartVertex, duplicateEndVertex) {var _this13;_classCallCheck(this, MoveEdge);\n    _this13 = _possibleConstructorReturn(this, _getPrototypeOf(MoveEdge).call(this, layer));\n    _this13.poly = poly;\n\n    // store edge index\n    _this13.edgeIndex = edgeIndex;\n\n    // store duplicate flags\n    _this13.duplicateStartVertex = duplicateStartVertex;\n    _this13.duplicateEndVertex = duplicateEndVertex;\n\n    var ia = edgeIndex;\n    var ib = poly.nextIndex(ia);\n\n    // get edge \n    var a = poly.getPoint(ia);\n    var b = poly.getPoint(ib);\n\n    _this13.edgeBefore = {\n      a: a,\n      b: b };\n\n    _this13.edgeAfter = {\n      a: newPosA.clone(),\n      b: newPosB.clone() };return _this13;\n\n  }_createClass(MoveEdge, [{ key: \"undo\", value: function undo()\n\n    {\n      // get current edgeIndex (after duplicating vertices)\n      var newEdgeIndex = MoveEdge.getNewEdgeIndex(this.poly, this.edgeIndex, this.duplicateStartVertex, this.duplicateEndVertex);\n\n      // get indices of the two edge vertices\n      var ia = newEdgeIndex;\n      var ib = this.poly.nextIndex(ia);\n\n      // Restore original edge positions\n      this.poly.updatePoint(ia, this.edgeBefore.a.x, this.edgeBefore.a.y);\n      this.poly.updatePoint(ib, this.edgeBefore.b.x, this.edgeBefore.b.y);\n\n      // Remove extra vertices\n      MoveEdge.revertDuplicateVertices(this.poly, this.edgeIndex, this.duplicateStartVertex, this.duplicateEndVertex);\n    } }, { key: \"redo\", value: function redo()\n\n    {\n      // Duplicate start/end vertex if wanted\n      MoveEdge.duplicateVertices(this.poly, this.edgeIndex, this.duplicateStartVertex, this.duplicateEndVertex);\n\n      // get edgeIndex after duplicating vertices\n      var newEdgeIndex = MoveEdge.getNewEdgeIndex(this.poly, this.edgeIndex, this.duplicateStartVertex, this.duplicateEndVertex);\n\n      // get indices of the two edge vertices\n      var ia = newEdgeIndex;\n      var ib = this.poly.nextIndex(ia);\n\n      // apply new positions\n      this.poly.updatePoint(ia, this.edgeAfter.a.x, this.edgeAfter.a.y);\n      this.poly.updatePoint(ib, this.edgeAfter.b.x, this.edgeAfter.b.y);\n    }\n\n    // Duplicates start and/or end vertex of a given edge in a polyline/polygon.\n  }], [{ key: \"duplicateVertices\", value: function duplicateVertices(poly, edgeIndex, duplicateStartVertex, duplicateEndVertex) {\n\n      var startVertex = edgeIndex;\n\n      if (duplicateStartVertex) {\n        poly.duplicateVertex(startVertex);\n\n        // After duplicating, the actual edge start vertex has shifted by 1.\n        startVertex++;\n      }\n\n      if (duplicateEndVertex) {\n        var vNext = poly.nextIndex(startVertex);\n        poly.duplicateVertex(vNext);\n      }\n    } }, { key: \"revertDuplicateVertices\",\n\n    // Reverts the extra vertices inserted by duplicateVertices. Note that edgeIndex refers\n    // to the polygon before duplicating the vertices, i.e., should be identical with \n    // the one used in the duplicateVertices(..) to be reverted.\n    value: function revertDuplicateVertices(poly, edgeIndex, duplicateStartVertex, duplicateEndVertex) {\n\n      // get edge index after considering vertex duplication\n      var curEdgeIndex = MoveEdge.getNewEdgeIndex(poly, edgeIndex, duplicateStartVertex, duplicateEndVertex);\n\n      // if the end vertex was duplicated, revert that now\n      if (duplicateStartVertex) {\n        var iPrev = curEdgeIndex - 1;\n        poly.removePoint(iPrev);\n\n        // This shifts the edgeIndex back by 1\n        curEdgeIndex--;\n      }\n\n      if (duplicateEndVertex) {\n        var iNext = poly.nextIndex(poly.nextIndex(curEdgeIndex));\n        poly.removePoint(iNext);\n      }\n    } }, { key: \"getNewEdgeIndex\",\n\n    // If we duplicate start/end vertex of an edge, the index of that edge may change.\n    // This function returns the new index of the edge after duplicating start/end vertex.\n    //\n    // Note: poly is assumed to contain the duplicated vertices.\n    value: function getNewEdgeIndex(poly, edgeIndex, duplicateStartVertex, duplicateEndVertex) {\n\n      var newIndex = edgeIndex;\n\n      // Duplicating the start vertex always shift the edgeIndex by 1\n      if (duplicateStartVertex) {\n        newIndex++;\n      }\n\n      // get vertexCount of the polygon before insertion of duplicated vertices.\n      var vertexCountBefore = poly.vertexCount - (duplicateStartVertex ? 1 : 0) - (duplicateEndVertex ? 1 : 0);\n\n      // Check if edge was the 'closing edge' of the original polygon, i.e., the edge that \n      // connects the last vertex with vertex 0\n      var isClosingEdge = edgeIndex === vertexCountBefore - 1;\n\n      // Duplicating the end vertex may also shift the edgeIndex. This happens if the edge start\n      // vertex is the last one in a polygon.\n      if (duplicateEndVertex && isClosingEdge) {\n        newIndex++;\n      }\n      return newIndex;\n    } }]);return MoveEdge;}(Action);\n\n\nexport var Actions = {\n  Action: Action,\n  AddShape: AddShape,\n  AddShapes: AddShapes,\n  MoveShape: MoveShape,\n  RemoveShape: RemoveShape,\n  RemoveShapes: RemoveShapes,\n  AddVertex: AddVertex,\n  MoveVertex: MoveVertex,\n  RemoveVertex: RemoveVertex,\n  MoveEdge: MoveEdge };","function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}\nimport { Polyline, Style } from './EditShapes.js';\nimport { Math2D } from './Math2D.js';\n\n// AngleSnapper is responsible for snapping based on angles and alignment on hover while choosing the position of a vertex. \n//\n// If pMov is the vertex being moved, the snapping behavior includes:\n//\n//  1. Angle to previous edge: Snap if edge ending at pMov forms a snapAngle (0, 45, 90,...) with its predecessor edge.\n//\n//  2. Angle to next edge: Snap if the edge starting at pMov forms a snapAngle with its successor edge.\n//\n//  3. Collinear Align: Snap if for pMov is collinear with any (non-adjacent) edge.\n//\n//  4. Vertical Align: Snap if pMov is collinear with the edge normal at start/center/end of any non-adjacent edge.\n//\n\n// A SnapLine is a line that we consider for snapping. \nvar SnapLine = /*#__PURE__*/function () {\n\n  function SnapLine(a, b) {_classCallCheck(this, SnapLine);\n\n    // start and end point\n    this.a = a.clone();\n    this.b = b.clone();\n\n    // normalized edge direction\n    this.dir = Math2D.getEdgeDirection(a, b);\n  }\n\n  // Check for intersection with another SnapLine. If found, intersection point is written to outPoint.\n  // @returns {bool} true on success\n  _createClass(SnapLine, [{ key: \"intersect\", value: function intersect(line, outPoint) {\n      return Math2D.intersectLines(this.a, this.dir, line.a, line.dir, outPoint);\n    }\n\n    // project point to SnapLine\n  }, { key: \"snapToLine\", value: function snapToLine(p) {\n      Math2D.projectToLine(p, this.a, this.dir);\n    }\n\n    // Checks if SnapLine is close enough to p to allow snapping. snapRadius is in layer-coords.\n  }, { key: \"isUsable\", value: function isUsable(p, snapRadius) {\n      return Math2D.pointLineDistance(p, this.a, this.dir) < snapRadius;\n    }\n\n    // Checks if a SnapLine is (approx.) identical with another one\n  }, { key: \"isEqual\", value: function isEqual(snapLine, precision) {\n      return Math2D.collinear(this.a, this.dir, snapLine.a, snapLine.dir, precision);\n    } }]);return SnapLine;}();\n;\n\n// Snap position based on 1 or 2 SnapLines.\n//  @param {Vector2}  pos         - Initial position in layer coords. Modified in-place\n//  @param {SnapLine} snapLine1   - First line to snap to\n//  @param {SnapLine} [snapLine2] - If there are 2 SnapLines, we snap to the intersection of both lines.\n// Preconditions:\n//  - SnapLine1: Is close to pos (wrt. to snap tolerance)\n//  - SnapLine2: If existing, its intersection with SnapLine1 is close to the position  \nvar snapToLines = function snapToLines(pos, snapLine1, snapLine2) {\n\n  // No snaplines => keep original pos\n  if (!snapLine1 && !snapLine2) {\n    return;\n  }\n\n  // If only SnapLine1 exists\n  if (!snapLine2) {\n    // project pos to snapLine1\n    snapLine1.snapToLine(pos);\n    return;\n  }\n\n  // If only snapLine2 exists\n  if (!snapLine1) {\n    // project pos to snapLine2\n    snapLine2.snapToLine(pos);\n    return;\n  }\n\n  // Snap pos to line intersection.\n  snapLine1.intersect(snapLine2, pos);\n};\n\n// Get point i within a polygon, whereby indices outside [0, ..., this.poly.length-1] are auto-corrected using modulo.\n// Accepts negative indices up to -this.poly.length.\nvar getPointMod = function getPointMod(poly, index) {\n  index = (index + poly.vertexCount) % poly.vertexCount;\n  return poly.getPoint(index);\n};\n\n// Returns an array of SnapLines used to align with each edge of the given polygon.\n//  @param {Polygon} poly\n//  @param {vIndex}  vIndex - index of the vertex being moved. We exclude edges directly adjacent to this vertex, because they are not fixed.\nvar findSnapLines = function findSnapLines(poly, vIndex) {\n\n  // tmp vectors\n  var normal = new THREE.Vector2();\n  var center = new THREE.Vector2();\n  var pEnd = new THREE.Vector2();\n\n  var snapLines = [];\n\n  // Given an edge of a polygon/polyline, this function collects snapping lines for alignment with this this edge.\n  // and adds it to snapLines.\n  // Generated snapLines are:\n  //  - Line spanned by the edge\n  //  - Orthogonal lines at start, center, and end point.\n  var addEdgeSnapLines = function addEdgeSnapLines(a, b) {\n\n    // add line spanned by the edge\n    snapLines.push(new SnapLine(a, b));\n\n    // get edge normal and center point\n    normal = Math2D.turnLeft(Math2D.getEdgeDirection(a, b, normal));\n    center = Math2D.getEdgeCenter(a, b, center);\n\n    // add orthogonal line add edge start\n    pEnd.copy(a).add(normal); // pEnd = p1 + normal\n    snapLines.push(new SnapLine(a, pEnd));\n\n    // add orthogonal line at edge center\n    pEnd.copy(center).add(normal); // pEnd = center + normal\n    snapLines.push(new SnapLine(center, pEnd));\n\n    // add orthogonal line at edge end\n    pEnd.copy(b).add(normal); // pEnd = p2 + normal\n    snapLines.push(new SnapLine(b, pEnd));\n  };\n\n  poly.enumEdges(function (a, b, ia, ib) {\n\n    // Exclude edges containing the moved vertex: These edges are not fixed yet and should not\n    // be used for alignment.\n    if (ia == vIndex || ib == vIndex) {\n      return;\n    }\n\n    // skip edge if degenerate\n    if (Math2D.edgeIsDegenerated(a, b)) {\n      return;\n    }\n\n    addEdgeSnapLines(a, b);\n  });\n  return snapLines;\n};\n\n// Checks if the given SnapLine candidate is suitable to be used - assuming that another snapLine1 was already chosen.\n// A candidate is only suitable if...\n//  1. The intersection with snapLine1 is within snapping tolerance\n//  2. The angle formed with snapLine1 is as closer to 90° than all other candidates. This makes sure that we rather \n//     snap to orthogonal SnapLines than trying to snap to two nearly parallel ones.\n// \n//  @param {SnapLine} candidate       - SnapLine candidates to be compared    \n//  @param {SnapLine} [bestCandidate] - Best candidate found so far (may be null)\n//  @param {SnapLine} snapLine1       - First SnapLine that has already been chosen to snap to.\n//  @param {Vector2}  pos             - position to be snapped\n//  @param {number}   snapRadius      - in layer coords\n//  @returns {SnapLine} Returns the best candidate - either bestCandidate or snapLineCandidate\nvar checkSecondSnapCandidate = function checkSecondSnapCandidate(candidate, bestCandidate, snapLine1, pos, snapRadius) {\n\n  // If candidate does not intersect snapLine1, we cannot use it.\n  var pIntersect = new THREE.Vector2();\n  if (!snapLine1.intersect(candidate, pIntersect)) {\n    return bestCandidate;\n  }\n\n  // If intersection point is outside snapRadius, discard candidate\n  if (pIntersect.distanceTo(pos) > snapRadius) {\n    return bestCandidate;\n  }\n\n  // If there is no competitor, the candidate made it.\n  if (!bestCandidate) {\n    return candidate;\n  }\n\n  // Check which of the candidates is \"less parallel\" to snapLine1\n  var dp1 = Math.abs(snapLine1.dir.dot(candidate.dir));\n  var dp2 = Math.abs(snapLine1.dir.dot(bestCandidate.dir));\n  return dp1 > dp2 ? candidate : bestCandidate;\n};\n\nvar xAxis = new THREE.Vector2(1, 0);\n\nvar av = Autodesk.Viewing;\n// AngleSnapper helps to draw right angles, parallel lines etc.\nvar AngleSnapper = /*#__PURE__*/function () {\n\n  function AngleSnapper(gizmoLayer) {_classCallCheck(this, AngleSnapper);\n    // Polygon/Polyline being edited. We assume that it includes the vertex being moved.\n    this.poly = null;\n\n    // Index of the vertex in this.poly that is beging moved.\n    this.vIndex = -1;\n\n    // If an edge forms one of these angles with the previous one, we display the helper line and snap to the angle\n    this.snapAngles = [0, 45, 90, 135, 180, 225, 270, 315, 360];\n\n    // We consider an angle \"close to\" another one if they differ by this value or less.\n    this.snapAngleTolerance = 2; // in degrees\n\n    // Allow snapping to lines within x pixels.\n    this.snapRadius = 10;\n\n    this.gizmoLayer = gizmoLayer;\n    this.setGlobalManager(gizmoLayer.globalManager);\n\n    // reused tmp points\n    this.movedPoint = new THREE.Vector2(); // the vertex being moved\n    this.prevPoint = new THREE.Vector2(); // the vertex before movedPoint\n    this.prevPoint2 = new THREE.Vector2(); // the vertex before prevPoint\n\n    this.edgeDir = new THREE.Vector2(); // direction of new edge ending at movedPoint\n    this.alignAxis = new THREE.Vector2(); // direction that we align to: Either the direction of the previous edge or the x-axis\n\n    // Array of snapLines to align a vertex position with other edges\n    this.edgeSnapLines = [];\n\n    // SnapLines that contributed to last snapping call. Used to update the SnapLine gizmos.\n    this.snapLine1 = null;\n    this.snapLine2 = null;\n\n    // Optional: External line constraint. This is used if we already snapped to a line geometry and\n    //           want to combine the snap with angle snapping.\n    this.snapLineExt = null;\n\n    // Gizmos to display the lines considered for snapping\n    this.snapLineStyle = new Style({\n      lineColor: 'rgb(255, 0, 0)',\n      lineWidth: 1.0,\n      lineStyle: 10 });\n\n    this.snapLineGizmos = [];\n    this.snapLineGizmosUsed = 0;\n  }_createClass(AngleSnapper, [{ key: \"onSetGlobalManager\", value: function onSetGlobalManager(\n\n    globalManager) {\n      this.globalManager = globalManager;\n      this.snapLineGizmos.forEach(function (g) {return g.setGloblaManager(globalManager);});\n    } }, { key: \"acquireSnapLineGizmo\", value: function acquireSnapLineGizmo()\n\n    {\n      var gizmo = this.snapLineGizmos[this.snapLineGizmosUsed];\n      if (!gizmo) {\n        // Create new line gizmo\n        gizmo = new Polyline([], this.snapLineStyle);\n        gizmo.setGlobalManager(this.globalManager);\n        this.snapLineGizmos[this.snapLineGizmosUsed] = gizmo;\n      }\n      this.snapLineGizmosUsed++;\n      return gizmo;\n    } }, { key: \"clearSnappingGizmos\", value: function clearSnappingGizmos()\n\n    {var _this = this;\n      var removeGizmo = function removeGizmo(g) {return _this.gizmoLayer.removeShape(g);};\n      this.snapLineGizmos.forEach(removeGizmo);\n      this.snapLineGizmosUsed = 0;\n    }\n\n    // Configures snapping to align to edges of the given polygon/polyline\n    //  @param {Polygon|Polyline} poly   - shape being edited. Expected to include the vertex being moved.\n    //  @param {number}           vIndex - index into poly that marks the vertex that is moved and to which snapping should be applied.\n  }, { key: \"startSnapping\", value: function startSnapping(poly, vIndex) {\n      this.poly = poly;\n      this.vIndex = vIndex;\n\n      // precompute snapLines for alignment. These don't change while moving a vertex.\n      this.edgeSnapLines = findSnapLines(poly, vIndex);\n    } }, { key: \"stopSnapping\", value: function stopSnapping()\n\n    {\n\n      this.poly = null;\n      this.vIndex = -1;\n\n      // Discard any outdated results and hide gizmos\n      this.snapLine1 = null;\n      this.snapLine2 = null;\n      this.clearSnappingGizmos();\n    }\n\n    // Discard latest snapping results, but polygon, vIndex, and edge snapLines. This is used when temporarily hiding the SnapLines when\n    // snapping while snapping is bypassed.\n  }, { key: \"clearSnappingResult\", value: function clearSnappingResult() {\n      this.snapLine1 = null;\n      this.snapLine2 = null;\n    } }, { key: \"getPrevSnapLine\",\n\n\n\n\n\n    // Snap angles relative to previous edge: Return a snapLine if the edge being modified forms a snapAngle (e.g. 90 degrees) with the previous edge.\n    //  @param {Vector2} pMov - point to be snapped\n    //  @returns {null|SnapLine} Returns null if no SnapLine is within this.angleTolerance.\n    value: function getPrevSnapLine(pMov) {\n\n      // Get vertices one and two indices before the moved one.\n      var pPrev = getPointMod(this.poly, this.vIndex - 1);\n      var pPrev2 = getPointMod(this.poly, this.vIndex - 2);\n\n      // Check angle between (pPrev, pMov) and its predecessor edge (pPrev2, pPrev)\n      var alignAxis = Math2D.getEdgeDirection(pPrev2, pPrev);\n      return this.computeAngleSnapLine(pMov, pPrev, alignAxis);\n    }\n\n    // Snap angles relative to previous edge: Return a snapLine if the edge being modified forms a snapAngle (e.g. 90 degrees) with the next edge.\n    //  @param {Vector2} pMov - point to be snapped\n    //  @returns {null|SnapLine} Returns null if no SnapLine is within this.angleTolerance.\n  }, { key: \"getNextSnapLine\", value: function getNextSnapLine(pMov) {\n\n      // When moving one of the last two vertices of a polyline, there is actually no \"next edge\", because start and end\n      // vertex are not connected. Therefore, we skip snapping to \"next edge\" for this case.\n      var ignoreNextEdge = this.poly.isPolyline() && this.vIndex >= this.poly.vertexCount - 2;\n      if (ignoreNextEdge) {\n        return null;\n      }\n\n      var pNext = getPointMod(this.poly, this.vIndex + 1);\n      var pNext2 = getPointMod(this.poly, this.vIndex + 2);\n\n      // Snap to angle wrt. to next edge: (only for polygons)\n      //   Check angle between (pNext, pMov) and its successor edge (pNext, pNext2);\n      var alignAxis = Math2D.getEdgeDirection(pNext, pNext2, alignAxis);\n      return this.computeAngleSnapLine(pMov, pNext, alignAxis);\n    }\n\n    // Given a new position in layer-coords to be assigned to the moved vertex, this function checks if the adjacent edges of the moved\n    // vertex are close to a snap angle. If so, the movedPoint is corrected to match the snap angle exactly.\n    //  @param {Vector2} pMov - Position to be snapped\n    //  @param {Object}  [lineConstraint] - Optional: External line-constraint {a,b}. If specified, we only allow snapping to\n    //                                                intersections with angle snapLines and the line (lineConstraint.a, lineConstraint.b).\n  }, { key: \"snapToAngle\", value: function snapToAngle(pMov, lineConstraint) {var _this2 = this;\n\n      // Reset the two lines that we consider for snapping.\n      this.snapLine1 = null;\n      this.snapLine2 = null;\n\n      // Create snapLine from external line constraint (if specified)\n      this.snapLineExt = lineConstraint && new SnapLine(lineConstraint.a, lineConstraint.b);\n\n      if (!this.active || this.poly.vertexCount <= 1) {\n        return;\n      }\n\n      // Get point before the moved one.\n      var pPrev = getPointMod(this.poly, this.vIndex - 1);\n\n      // If we just have a single edge, we can only snap to angles relative to x-axis\n      var isFirstEdge = this.poly.vertexCount == 2;\n      if (isFirstEdge) {\n        // Get closest angle-snap line relative to mainAxis (or null if no snapAngle is close enough)\n        var snapAxis = this.computeAngleSnapLine(pMov, pPrev, xAxis);\n\n        if (snapAxis && this.snapLineExt) {\n          // If an external line constraint is set, snapAxis can only be considered as a secondary snap.\n          // This means, we can only consider if it intersects with the costraint line and the intersection is close to pMov\n          this.snapLine1 = checkSecondSnapCandidate(snapAxis, null, this.snapLineExt, pMov, snapRadiusLC);\n        } else {\n          // No other constraints. Just use the snapAxis (or no axis at all if snapAxis is null)\n          this.snapLine1 = snapAxis;\n        }\n\n        snapToLines(pMov, this.snapLine1, this.snapLineExt);\n        return;\n      }\n\n      var prevSnapLine = this.getPrevSnapLine(pMov);\n      var nextSnapLine = this.getNextSnapLine(pMov);\n\n      // get snapRadius in layer-coords. This is the maximum distance that we allow\n      // between mouse pos and the final snap position that we obtain by projecting\n      // to a SnapLine or by intersecting two SnapLines.\n      var snapRadiusLC = this.snapRadius * this.gizmoLayer.getUnitsPerPixel();\n\n      // Filter to lines that are close enough to pMov\n      var snapLineUsable = function snapLineUsable(snapLine) {\n\n        if (!snapLine) {\n          return false;\n        }\n\n        if (_this2.snapLineExt) {\n          // Consider line-constraint: Only accept snapLine if...\n          //  1. ...it intersects constraint line\n          //  2. ...intersection point is within snapRadius.\n          return Boolean(checkSecondSnapCandidate(snapLine, null, _this2.snapLineExt, pMov, snapRadiusLC));\n        }\n\n        // No constraint: Accept any snapLines within snapRadius\n        return snapLine.isUsable(pMov, snapRadiusLC);\n      };\n\n      var candidates = this.edgeSnapLines.filter(snapLineUsable);\n\n      // Reject prevSnapLine/nextSnapLine if they are not usable\n      prevSnapLine = snapLineUsable(prevSnapLine) && prevSnapLine;\n      nextSnapLine = snapLineUsable(nextSnapLine) && nextSnapLine;\n\n      // choose first snapLine\n      this.snapLine1 = prevSnapLine || nextSnapLine || candidates[0];\n\n      // Stop here if there is no snapping candidate at all\n      if (!this.snapLine1) {\n        return;\n      }\n\n      // If we have an external line constraint, we can only choose a single snapLine, because we already\n      // have to intersect it with the external constraint line.\n      if (this.snapLineExt) {\n        return snapToLines(pMov, this.snapLine1, this.snapLineExt);\n      }\n\n      // If prev and next edge allow angle snapping, check if we can snap to both\n      if (prevSnapLine && nextSnapLine) {\n        this.snapLine2 = checkSecondSnapCandidate(nextSnapLine, null, this.snapLine1, pMov, snapRadiusLC);\n      }\n\n      // If prevEdge and nextEdge already gave us 2 SnapLines, give these two preference. Otherwise,\n      // check if we can snap to another edge to be aligned with other edges.\n      if (!this.snapLine2) {\n        for (var i = 0; i < candidates.length; i++) {\n          var c = candidates[i];\n          this.snapLine2 = checkSecondSnapCandidate(c, this.snapLine2, this.snapLine1, pMov, snapRadiusLC);\n        }\n      }\n\n      // We selected one or two SnapLines. Now, use them to decide snapped position\n      return snapToLines(pMov, this.snapLine1, this.snapLine2);\n    } }, { key: \"isSnapped\", value: function isSnapped()\n\n    {\n      return Boolean(this.snapLine1 || this.snapLine2);\n    } }, { key: \"updateSnapLineGizmos\", value: function updateSnapLineGizmos(\n\n    snappedPos) {var _this3 = this;\n\n      // First, clear any outdated gizmos\n      this.clearSnappingGizmos();\n\n      if (!this.poly) {\n        return;\n      }\n\n      // Collect all snapLines that we want to display\n      //\n      // Note that we don't just want to indicate SnapLines that actively affected the position,\n      // but also the \"accidentally\" matched ones. E.g., if we snapped to a geometry intersection,\n      // the actual snapping was not affected by angle snapping, but the resulting position may still\n      // match with angle snapLines as well.\n      var snapLinesToShow = [];\n\n      // We consider the snapped position p to be \"on a snapLine L\" if the distance d(p,L) is within the tolerance below.\n      var tolerance = 0.0001;\n      var shouldBeShown = function shouldBeShown(sl) {return sl && sl.isUsable(snappedPos, tolerance);}; // Decides whether a SnapLine should be displayed\n\n      // If we only have a single edge, angle snapping is only possible wrt. to main axes\n      var isFirstEdge = this.poly.vertexCount == 2;\n\n      // Collect SnapLines to display\n      if (isFirstEdge) {\n        // Just a single edge: Only snap if this first edge forms a snapping angle with x- or y-axis.\n        var pPrev = getPointMod(this.poly, this.vIndex - 1);\n        var snapAxis = this.computeAngleSnapLine(snappedPos, pPrev, xAxis);\n\n        // Display snapAxis if the p is on this line\n        if (snapAxis && shouldBeShown(snapAxis)) {\n          snapLinesToShow.push(snapAxis);\n        }\n      } else {\n        // Consider all edge snaplines that contain pSnappedPos\n        snapLinesToShow = this.edgeSnapLines.filter(shouldBeShown);\n\n        // Consider angles to previous and next edge\n        var prevSnapLine = this.getPrevSnapLine(snappedPos);\n        var nextSnapLine = this.getNextSnapLine(snappedPos);\n        shouldBeShown(prevSnapLine) && snapLinesToShow.push(prevSnapLine);\n        shouldBeShown(nextSnapLine) && snapLinesToShow.push(nextSnapLine);\n      }\n\n      // Eliminate duplicates: If a SnapLine is collinear with another one, displaying it would just cause artifacts.\n      // Note: This is a brute-force n^2 loop. The number of SnapLines to display is usually small, so that this shouldn't be a problem.\n      var isRelevant = function isRelevant(sl, index) {\n        // Check if sl is a duplicate of any previous SnapLine\n        var isDuplicate = false;\n        for (var i = 0; i < index; i++) {\n          var sl2 = snapLinesToShow[i];\n          if (sl.isEqual(sl2, tolerance)) {\n            isDuplicate = true;\n            break;\n          }\n        }\n        return !isDuplicate;\n      };\n      snapLinesToShow = snapLinesToShow.filter(isRelevant);\n\n      // Choose SnapLineLength large enough to fill whole canvas\n      var canvas = this.gizmoLayer.viewer.canvas;\n      var diag = Math.sqrt(canvas.width * canvas.width + canvas.height * canvas.height);\n      var snapLineLength = this.gizmoLayer.getUnitsPerPixel() * diag;\n\n      // A SnapLine indicator is constructed as follows:\n      //  - It starts at the snapLine start point, which \"explains where the SnapLine comes from\". \n      //    This may be start/center/end of another edge.\n      //  - It should always point towards the moved vertex (note that an original edge normal may point away from the moved vertex)\n      //  - It is enlarged to overshoot pMov \n      var showSnapLine = function showSnapLine(line, gizmo) {\n        if (!line) {\n          return;\n        }\n\n        var a = line.a;\n\n        // Let line start at a, point towards dir, and be long enough to leave screen\n        gizmo.makeLine(\n        a.x - snapLineLength * line.dir.x,\n        a.y - snapLineLength * line.dir.y,\n        a.x + snapLineLength * line.dir.x,\n        a.y + snapLineLength * line.dir.y);\n\n        _this3.gizmoLayer.addShape(gizmo);\n      };\n\n      // Add lineGizmo for each SnapLine to be displayed\n      for (var i = 0; i < snapLinesToShow.length; i++) {\n        var snapLine = snapLinesToShow[i];\n        var gizmo = this.acquireSnapLineGizmo();\n        showSnapLine(snapLine, gizmo);\n      }\n    } }, { key: \"dtor\", value: function dtor()\n\n    {\n      this.clearSnapping();\n    }\n\n    // Checks if the angle between edge (pPrev, p) and alignment direction is close to a snapping angle.\n    // If so, it returns a SnapLine from pPrev towards the snapped direction, otherwise null.\n    //  @param {Vector2} p              - vertex being moved\n    //  @param {Vector2} pPrev          - vertex connected to p\n    //  @param {Vector2} alignAxis      - direction that we align to. Must be normalized.\n  }, { key: \"computeAngleSnapLine\", value: function computeAngleSnapLine(p, pPrev, alignAxis) {\n\n      // Don't try angle snapping with degenerated edges\n      if (Math2D.edgeIsDegenerated(pPrev, p)) {\n        return null;\n      }\n\n      // get direction of new edge (ending at pMov)\n      var edgeDir = p.clone().sub(pPrev);\n\n      // Compute angle between new edge and alignment direction\n      var angle = THREE.Math.radToDeg(Math2D.angleBetweenDirections(edgeDir, alignAxis));\n\n      // Check if angle matches with any index in snapAngles array\n      var snapIndex = -1;\n      for (var i = 0; i < this.snapAngles.length; i++) {\n        var _snapAngle = this.snapAngles[i];\n\n        var dif = Math.abs(_snapAngle - angle);\n        if (dif < this.snapAngleTolerance) {\n          snapIndex = i;\n          break;\n        }\n      }\n\n      // Stop here if no snapAngle is found\n      if (snapIndex == -1) {\n        return null;\n      }\n\n      // Rotate alignment axis by selected snapAngle\n      var snapAngle = THREE.Math.degToRad(this.snapAngles[snapIndex]);\n      var snapDir = Math2D.rotateAround(alignAxis.clone(), snapAngle);\n\n      // scale snapLine direction to the same length as (pPrev, p)\n      var dist = pPrev.distanceTo(p);\n      var snapLineEnd = snapDir.multiplyScalar(dist).add(pPrev);\n\n      // Return snapline from pPrev pointing towards snapped direction\n      return new SnapLine(pPrev, snapLineEnd);\n    } }, { key: \"active\", get: function get() {return this.poly;} }]);return AngleSnapper;}();export { AngleSnapper as default };\n\n\nav.GlobalManagerMixin.call(AngleSnapper.prototype);","function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;} // \n// SegmentTree is a spatial datastructure that helps to quickly find all segments (lines, arcs) within a given 2d bbox.\n//\n\nvar SegmentType = {\n  Line: 1,\n  CircularArc: 2,\n  EllipticalArc: 3 };\n\n\n// A segment is an object that describes a single line or arc segment.\n// Properties depend on segment type (see functions below)\nvar createLineSegment = function createLineSegment(x1, y1, x2, y2, vpId) {return { type: SegmentType.Line, x1: x1, y1: y1, x2: x2, y2: y2, vpId: vpId };};\nvar createCircularArcSegment = function createCircularArcSegment(cx, cy, start, end, radius, vpId) {return { type: SegmentType.CirularArc, cx: cx, cy: cy, start: start, end: end, radius: radius, vpId: vpId };};\nvar createEllipticalArcSegment = function createEllipticalArcSegment(cx, cy, start, end, major, minor, tilt, vpId) {return { type: SegmentType.EllipticalArc, cx: cx, cy: cy, start: start, end: end, major: major, minor: minor, tilt: tilt, vpId: vpId };};\n\n// Triggers the corresponding callbacks (onLineSegment, onCircularArc...) from a given segment object.\n//  @param {Object} s             - Segment object whose data are sent to geomCb\n//  @param {Object} geomCallbacks - Provides handlers for different segments. Same as used by VertexBufferReader.\nvar processSegment = function processSegment(s, geomCallbacks) {\n  switch (s.type) {\n    case SegmentType.Line:geomCallbacks.onLineSegment(s.x1, s.y1, s.x2, s.y2, s.vpId);break;\n    case SegmentType.CirularArc:geomCallbacks.onCircularArc(s.cx, s.cy, s.start, s.end, s.radius, s.vpId);break;\n    case SegmentType.EllipticalArc:geomCallbacks.onEllipticalArc(s.cx, s.cy, s.tart, s.end, s.major, s.minor, s.tilt, s.vpId);break;}\n\n};\n\n// Implements required functions to allow organizing segments in a quadtree\nvar SegmentHandler = /*#__PURE__*/function () {\n\n  function SegmentHandler() {_classCallCheck(this, SegmentHandler);\n\n    // Used BoundsCallback to get segment bboxes\n    this.boundsCb = new Autodesk.Viewing.Private.BoundsCallback(new THREE.Box2());\n\n    // Reused tmp values\n    this.queryBox = new THREE.Box2();\n    this.tmpPoint = new THREE.Vector2();\n  }_createClass(SegmentHandler, [{ key: \"getSegmentBox\", value: function getSegmentBox(\n\n    segment) {\n      this.boundsCb.bounds.makeEmpty();\n      processSegment(segment, this.boundsCb);\n      return this.boundsCb.bounds;\n    } }, { key: \"getQueryBox\", value: function getQueryBox(\n\n    minx, miny, maxx, maxy) {\n      // get query box\n      this.queryBox.min.set(minx, miny);\n      this.queryBox.max.set(maxx, maxy);\n      return this.queryBox;\n    } }, { key: \"intersectsBox\", value: function intersectsBox(\n\n    segment, minx, miny, maxx, maxy) {\n      var queryBox = this.getQueryBox(minx, miny, maxx, maxy);\n      var segmentBox = this.getSegmentBox(segment);\n      return queryBox.isIntersectionBox(segmentBox);\n    }\n\n    // Note that outPoint is just an {x,y} pair, not a Vector2\n  }, { key: \"getPoint\", value: function getPoint(segment, outPoint) {\n      // Just use bbox center for all segment types\n      var center = this.getSegmentBox(segment).center(this.tmpPoint);\n      outPoint.x = center.x;\n      outPoint.y = center.y;\n    } }]);return SegmentHandler;}();var\n\n\nSegmentTree = /*#__PURE__*/function () {function SegmentTree() {_classCallCheck(this, SegmentTree);}_createClass(SegmentTree, [{ key: \"buildFromModel\",\n\n    // Build SegmentTree from 2D vector-data model (PDF or F2D).\n    // Note: Make sure that the model is fully loaded - otherwise, the tree will be incomplete.\n    value: function buildFromModel(model) {\n\n      // The quadtree must know the extents in advance.\n      var box = model.getBoundingBox();\n\n      // Init quadtree that manages segments\n      this.tree = new Autodesk.Extensions.CompGeom.QuadTree(box.min.x, box.min.y, box.max.x, box.max.y, 0.0, new SegmentHandler());\n\n      // Add geomtry for all fragments\n      var frags = model.getFragmentList();\n      var count = frags.getCount();\n      for (var i = 0; i < count; i++) {\n        var geom = frags.getGeometry(i);\n        this.addGeometry(geom);\n      }\n    }\n\n    // Adds all segments from a given 2D LineShader geometry.\n    //  @param {BufferGeometry} geom\n    //\n    // Precondition: Can only be called if tree has been initialized and geom is within the bbox used to initialize the tree\n  }, { key: \"addGeometry\", value: function addGeometry(geom) {var _this = this;\n\n      // GeometryCallback that just collects all segments as objects and adds them to the tree\n      var collectSegment = {\n        onLineSegment: function onLineSegment() {return _this.tree.addItem(createLineSegment.apply(void 0, arguments));},\n        onCircularArc: function onCircularArc() {return _this.tree.addItem(createCircularArcSegment.apply(void 0, arguments));},\n        onEllipticalArc: function onEllipticalArc() {return _this.tree.addItem(createEllipticalArcSegment.apply(void 0, arguments));} };\n\n\n      var vbr = new Autodesk.Viewing.Private.VertexBufferReader(geom);\n      vbr.enumGeoms(null, collectSegment);\n    }\n\n    //  @param {Object} geomCallbacks - Visitor that provides callbacks to handle different segments. Same as used by VertexBufferReader.\n  }, { key: \"enumSegments\", value: function enumSegments(minx, miny, maxx, maxy, geomCallbacks) {\n\n      // Find all segments in the tree and invoke corresponding call on GeometryCallback\n      this.tree.enumInBox(minx, miny, maxx, maxy, function (s) {return processSegment(s, geomCallbacks);});\n    } }]);return SegmentTree;}();export { SegmentTree as default };","function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}\nimport AngleSnapper from './AngleSnapper.js';\nimport SegmentTree from './SegmentTree.js';\n\nvar SnapType = Autodesk.Viewing.MeasureCommon.SnapType;\n\n// Edit2DSnapper combines 3 different types of snapping:\n//  1. Snapping to sheet geometry\n//  2. Snapping to other geometry in the same layer\n//  3. Snapping to angles and alignments\n\nvar av = Autodesk.Viewing;var\n\nEdit2DSnapper = /*#__PURE__*/function () {\n\n  // @param {Viewer3D} viewer\n  // @param {Layer} layer\n  // @param {EditLayer} gizmoLayer - used to add temporary snapping indicators (e.g., dashed lines for angle snapping)\n  function Edit2DSnapper(viewer, layer, gizmoLayer) {_classCallCheck(this, Edit2DSnapper);\n\n    this.viewer = viewer;\n    this.setGlobalManager(viewer.globalManager);\n    this.layer = layer;\n    this.gizmoLayer = gizmoLayer;\n\n    // Snapper for sheet geometry and layer geometry.\n    // Note: SnapResults are always stored in LMV world-coords (!=layer coords). Otherwise, SnapperIndicator would not display correctly.\n    this.sheetSnapper = new Autodesk.Viewing.Extensions.Snapping.Snapper(viewer);\n    this.layerSnapper = new Autodesk.Viewing.Extensions.Snapping.Snapper(viewer);\n\n    // Used for snapping to angles and alignments\n    this.angleSnapper = new AngleSnapper(gizmoLayer);\n\n    // tmp box reused for snapping\n    this.snapBox = new THREE.Box2();\n\n    // make sure SnapperIndicator exists. Note that angleSnapper does not need this - only the standard LMV snapper.\n    this.sheetSnapper.activate();\n    this.layerSnapper.activate();\n\n    // update Snapper indicator on camera changes (otherwise, it grows/shrinks on camera zoom)\n    this.onCameraChangeCb = this.onCameraChange.bind(this);\n    this.viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangeCb);\n\n    // If there is a model already, compute SegmentTree right now\n    this.initSegmentTrees();\n\n    // Reused tmp vector\n    this.tmpVec = new THREE.Vector3();\n\n    // If we snapped to a line segment, this member contains\n    // this line segment in layer coords. See _getGeomSnapLine().\n    this.geomSnapLine = {\n      a: new THREE.Vector3(),\n      b: new THREE.Vector3() };\n\n  }_createClass(Edit2DSnapper, [{ key: \"dtor\", value: function dtor()\n\n    {\n      this.sheetSnapper.deactivate();\n      this.layerSnapper.deactivate();\n      this.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangeCb);\n    } }, { key: \"onCameraChange\", value: function onCameraChange()\n\n    {\n      this.updateSnapperIndicators();\n    }\n\n    // Make sure that all visible models have a SegmentTree\n  }, { key: \"initSegmentTrees\", value: function initSegmentTrees() {\n      var models = this.viewer.getVisibleModels();\n      models.forEach(function (model) {\n        // Note: We have to wait until the model finished loading. Otherwise, we may end up with a segmentTree that only\n        //       contains a subset of the segments.\n        //       In addition, make sure to skip the segment building in case it's a leaflet (e.g. a raster PDF).\n        var isLeaflet = !!(model.myData && model.myData.isLeaflet);\n        if (model.is2d() && !isLeaflet && !model.segmentTree && model.isLoadDone()) {\n          model.segmentTree = new SegmentTree();\n          model.segmentTree.buildFromModel(model);\n        }\n      });\n    } }, { key: \"updateSnapperIndicators\", value: function updateSnapperIndicators()\n\n    {\n      // Note: All LMV snappers use (and clear) the same overlay scene. Therefore, we can call render() only on one of the Snapper\n      // indicators. Otherwise, when snapping to sheet geometry, calling layerSnapper.indicator.render() afterwards would clear \n      // the sheet-snapping indicator again.\n      if (this.sheetSnapper.isSnapped()) {\n        this.sheetSnapper.indicator.render();\n      } else {\n        // If none is snapped, it doesn't matter which indicator we call: Both will just clear the overlay.\n        this.layerSnapper.indicator.render();\n      }\n    }\n\n    // Returns snapPosition as Vector2 in layer-coords. If no snapping happens, it just maps the position directly.\n    //  @param {function(shape)} [snappingFilter] - Option filter to restrict EditLayer snapping to certain EditLayer shapes.\n  }, { key: \"getSnapPosition\", value: function getSnapPosition(canvasX, canvasY, snappingFilter) {\n\n      var p = this._getSnapPosition(canvasX, canvasY, snappingFilter);\n\n      // keep snapping gizmos up to date\n      this.angleSnapper.updateSnapLineGizmos(p);\n\n      this.updateSnapperIndicators();\n\n      return p;\n    } }, { key: \"clearSnappingGizmos\", value: function clearSnappingGizmos()\n\n    {\n      this.angleSnapper.clearSnappingGizmos();\n      this.sheetSnapper.clearSnapped();\n      this.sheetSnapper.indicator && this.sheetSnapper.indicator.clearOverlays();\n      this.layerSnapper.clearSnapped();\n      this.layerSnapper.indicator && this.layerSnapper.indicator.clearOverlays();\n    }\n\n    // Angle and Alignment snapping can only be used when explicitly activated for a given polygon.\n    // Otherwise, it has no effect.\n  }, { key: \"startAngleSnapping\", value: function startAngleSnapping(poly, draggedVertex) {\n      this.angleSnapper.startSnapping(poly, draggedVertex);\n    }\n\n    // Stop snapping to angles. (No effect if angleSnapping is already off).\n  }, { key: \"stopAngleSnapping\", value: function stopAngleSnapping() {\n      this.angleSnapper.stopSnapping();\n    }\n\n    // Like getSnapPosition, but excluding Snapping gizmo updates.\n  }, { key: \"_getSnapPosition\", value: function _getSnapPosition(canvasX, canvasY, snappingFilter) {\n\n      // Discard any outdated snapping results\n      this.angleSnapper.clearSnappingResult();\n      this.sheetSnapper.clearSnapped();\n      this.layerSnapper.clearSnapped();\n\n      var p = this.layer.canvasToLayer(canvasX, canvasY);\n\n      // Check if geom-snapping is possible (pGeom is in layer-coords)\n      var pGeom = this._getGeomSnapPosition(canvasX, canvasY, snappingFilter);\n\n      // Check if we snapped to line geometry. If so, we can still allow angle-snapping - as long as we constrain it to the geometry snapLine.\n      var geomSnapLine = this._getGeomSnapLine();\n\n      if (pGeom && !geomSnapLine) {\n        // We snapped to geometry and the snapType does not allow us to combine it with angle snapping\n        // => Just return result of geometry snapping\n        return pGeom;\n      }\n\n      // Apply angle-snapping. If we snapped to line geometry already, constrain angleSnapping to this line.\n      this.angleSnapper.snapToAngle(p, geomSnapLine);\n\n      // If there is no angle-snap, just apply the geometry snap\n      if (geomSnapLine && !this.angleSnapper.isSnapped()) {\n        return pGeom;\n      }\n\n      // By default, SnapperIndicator only considers the geometry snapping result. If we corrected the snap point and used the intersection with an\n      // angle snapLine, we have to update the SnapResult so that the snapPoint is correctly reflected by the SnapperIndicator.\n      if (geomSnapLine && this.angleSnapper.isSnapped()) {\n        var result = this._getGeomSnapResult();\n\n        // p is in 2D layer coords, but LMV Snapper snapResults are always stored in LMV world coords\n        var pWorld = new THREE.Vector3(p.x, p.y, 0.0).applyMatrix4(this.layer.layerToWorld);\n\n        result.geomType = SnapType.SNAP_INTERSECTION;\n        result.snapPoint = pWorld;\n        result.geomVertex = result.snapPoint; // Otherwise, snapResult.isEmpty() returns true\n      }\n\n      return p;\n    }\n\n    // Gets snap position from mouse event. \n    //  @returns {Vector2|null} Snapped position or null if not snapped.\n  }, { key: \"_getGeomSnapPosition\", value: function _getGeomSnapPosition(canvasX, canvasY, snappingFilter) {\n\n      var p = this.layer.canvasToLayer(canvasX, canvasY);\n\n      // Compute snap position for model geom and edit layer. \n      // Both may be undefined if there was nothing to snap to.\n      var pSheet = this._getSheetSnapPosition(canvasX, canvasY);\n      var pLayer = this._getEditLayerSnapPosition(canvasX, canvasY, snappingFilter);\n\n      // If nothing is snapped, don't snap\n      if (!pSheet && !pLayer) {\n        return null;\n      }\n\n      // If only one snap point was found, use it\n      if (!pLayer) {\n        return pSheet;\n      } else if (!pSheet) {\n        return pLayer;\n      }\n\n      // Get distances of snapPoints to accurate position\n      var distSheet = THREE.Vector2.prototype.distanceToSquared.call(pSheet, p);\n      var distLayer = THREE.Vector2.prototype.distanceToSquared.call(pLayer, p);\n\n      // Choose the closer snap. If equal, prefer edit layer snap.\n      // We discard unused snap results here, so that snapper indicator keeps correct\n      if (distSheet < distLayer) {\n        // Use sheet snap and discard the other snap result\n        this.layerSnapper.clearSnapped();\n        return pSheet;\n      } else {\n        // Use layer snap and discard the other snap result\n        this.sheetSnapper.clearSnapped();\n        return pLayer;\n      }\n    }\n\n    // Returns the SnapResult of sheetSnapper or layerSnapper if any of them is currently snapped. Returns null otherwise.\n    // Note that LMV snapResults contain values in lmv world coords.\n  }, { key: \"_getGeomSnapResult\", value: function _getGeomSnapResult() {\n\n      // Check which of the snappers has snapped\n      var sheetSnap = this.sheetSnapper.isSnapped();\n      var layerSnap = this.layerSnapper.isSnapped();\n      if (!sheetSnap && !layerSnap) {\n        return null;\n      }\n\n      // Get latest SnapResult\n      var geomSnapper = sheetSnap ? this.sheetSnapper : this.layerSnapper;\n      return geomSnapper.getSnapResult();\n    }\n\n    // If the last geometry snapping successfully snapped to a line segment, this function returns this line segment.\n    // Result is in layer-coords.\n    //  @returns {Object} - If we snapped to a line segment, we return r={a, b} where r.a and r.b are line start/end as Vector2.\n  }, { key: \"_getGeomSnapLine\", value: function _getGeomSnapLine() {\n\n      var result = this._getGeomSnapResult();\n      if (!result) {\n        return null;\n      }\n\n      // If we snapped to an edge, return this edge. Note that SnapType may be SNAP_EDGE, but may also be SNAP_VERTEX\n      var edgeGeom = result.geomEdge;\n      if (edgeGeom) {\n        var verts = result.geomEdge.vertices;\n\n        // Copy edge start/end to this.geomSnapLine\n        this.geomSnapLine.a.copy(verts[0]);\n        this.geomSnapLine.b.copy(verts[1]);\n\n        // SnapResults are in world coords. We want the geomSnapLine in layer coords.\n        this.geomSnapLine.a.applyMatrix4(this.layer.worldToLayer);\n        this.geomSnapLine.b.applyMatrix4(this.layer.worldToLayer);\n\n        return this.geomSnapLine;\n      }\n\n      // Another SnapType => No line constraint.\n      return null;\n    }\n\n    // Snaps to 2D edit layer geometry. Returns the snapped point in layer coordinates or undefined if not snapped.\n    //  @returns {Vector2} - snap position in layer coords.\n  }, { key: \"_getEditLayerSnapPosition\", value: function _getEditLayerSnapPosition(canvasX, canvasY, snappingFilter) {\n\n      // Note that snapper needs a Vector3 to work.\n      var point = this.layer.canvasToLayer(canvasX, canvasY, this.tmpVec);\n\n      // compute snap radius in layer coords\n      var radius = this.layerSnapper.detectRadiusInPixels * this.layer.getUnitsPerPixel();\n\n      // create bbox centered at the point and expanded by snapRadius in each direction\n      this.snapBox.min.set(point.x - radius, point.y - radius);\n      this.snapBox.max.set(point.x + radius, point.y + radius);\n\n      // Build dictionary of dbIds of all shapes intersecting the snapBox\n      var dbIds = {};\n      this.layer.enumShapes(this.snapBox, function (shape) {\n        // Collect dbId - unless shape is excluded from snapping\n        if (!snappingFilter || snappingFilter(shape)) {\n          dbIds[shape.id] = true;\n        }\n      });\n\n      // Collect all triangulated meshes intersecting the snapBox\n      var meshes = [];\n      this.layer.enumMeshes(this.snapBox, function (mesh) {return meshes.push(mesh);});\n\n      // Only consider edges/arcs/vertices within snapRadius\n      var filter = function filter(dbId) {return Boolean(dbIds[dbId]);};\n\n      // Run snapper on the given meshes/dbIds. Note that we run snapping in layer coords.\n      this.layerSnapper.clearSnapped();\n      this.layerSnapper.snapping2DOverlay(point, meshes, filter, radius);\n\n      // Stop here if nothing was snapped\n      if (!this.layerSnapper.isSnapped()) {\n        return undefined;\n      }\n\n      // get snapped position in layer-coords\n      var res = this.layerSnapper.getSnapResult();\n      var snapPos = Autodesk.Viewing.MeasureCommon.getSnapResultPosition(res, this.viewer);\n\n      // snapPos points to a vector inside snapResult. SnapResult will finally be converted to \n      // LMV world coords to make SnapperIndicator work. So, we copy it to a 2D vector first.\n      snapPos = new THREE.Vector2().copy(snapPos);\n\n      // SnapperIndicator requires world-coords in getSnapResult() to display correctly. \n      // Since we computed snapping in layer-coords, we finally convert it to LMV world coords.\n      res.applyMatrix4(this.layer.layerToWorld);\n\n      // Return snap position in layer coords\n      return snapPos;\n    }\n\n    // Snaps to sheet geometry. Returns the snapped point in layer coordinates or undefined if not snapped.\n  }, { key: \"_getSheetSnapPosition\", value: function _getSheetSnapPosition(canvasX, canvasY) {var _this = this;\n\n      // Make sure that SegmentTree exists for all visible 2D models\n      this.initSegmentTrees();\n\n      // Callback to enum segments of all visible models\n      var enumSegments = function enumSegments() {for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {args[_key] = arguments[_key];}\n        var models = _this.viewer.getVisibleModels();\n        models.forEach(function (model) {\n          // NOTE: SegmentTree may not be available yet if a model is still loading.\n          //       In this case, we exclude it from snapping until loading is done.\n          if (model.is2d() && model.segmentTree) {var _model$segmentTree;\n            (_model$segmentTree = model.segmentTree).enumSegments.apply(_model$segmentTree, args);\n          }\n        });\n      };\n\n      // Note that we cannot use layer.canvasToLayer here, because snapper needs a Vector3 to work.\n      var pos = this.viewer.impl.intersectGround(canvasX, canvasY);\n      this.sheetSnapper.snapping2DWithSegmentEnum(pos, enumSegments);\n\n      // If not snapped, just return current position\n      if (!this.sheetSnapper.isSnapped()) {\n        return undefined;\n      }\n\n      // get snapped position\n      var res = this.sheetSnapper.getSnapResult();\n      var p3D = Autodesk.Viewing.MeasureCommon.getSnapResultPosition(res, this.viewer); // returns Vector3\n\n      // convert result from LMV world coords to layer coords\n      // Note that we have to copy first, because p3D is a reference into the SnapResult. \n      // The SnapResult itself must remain in world coords to keep SnapperIndicator correct.\n      p3D = this.tmpVec.copy(p3D).applyMatrix4(this.layer.worldToLayer);\n\n      // Make sure that we consistently return 2D for all snapping types. Otherwise, we produce traps when using things like distanceTo()\n      return new THREE.Vector2().copy(p3D);\n    } }]);return Edit2DSnapper;}();export { Edit2DSnapper as default };\n\n\nav.GlobalManagerMixin.call(Edit2DSnapper.prototype);","function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}var Edit2DContextMenu = /*#__PURE__*/function () {\n\n  // @param {ToolSet} toolSet (see Edit2D.js)\n  function Edit2DContextMenu(viewer, toolSet) {_classCallCheck(this, Edit2DContextMenu);\n\n    this.viewer = viewer;\n    this.toolSet = toolSet;\n\n    // Define ContextMenu callback\n    this.callbackId = \"Edit2D_\".concat(toolSet.name);\n    this.callback = this.onContextMenu.bind(this);\n  }_createClass(Edit2DContextMenu, [{ key: \"register\", value: function register()\n\n    {\n      this.viewer.registerContextMenuCallback(this.callbackId, this.callback);\n    } }, { key: \"unregister\", value: function unregister()\n\n    {\n      this.viewer.unregisterContextMenuCallback(this.callbackId);\n    }\n\n    // Note that editTool.getVertexIndex() does not work if a context menu is already open.\n    // Reason is that the evens are all consumed by an invisible full-screen-div, so that a\n    // gizmos cannot detect anymore if the mouse is on it.\n  }, { key: \"vertexGizmoUnderMouse\", value: function vertexGizmoUnderMouse(clientX, clientY) {\n\n      // get vertex gizmos from EditTool\n      var editTool = this.toolSet.tools.polygonEditTool;\n      var gizmos = editTool.vertexGizmos;\n\n      // Check element under mouse\n      var elem = document.elementFromPoint(clientX, clientY);\n\n      // Check if it matches with any vertex gizmo\n      return gizmos.findIndex(function (g) {return g.container === elem;});\n    }\n\n    // Define callback to modify the viewer context menu\n    //  @param {Object[]} menuItems - items to be modified\n    //  @param {Object}   status    - ObjectContextMenu.js\n  }, { key: \"onContextMenu\", value: function onContextMenu(menu, status) {\n\n      var editTool = this.toolSet.tools.polygonEditTool;\n      var layer = this.toolSet.context.layer;\n      var event = status.event;\n\n      // Check if a shape is selected for editing\n      var shapeSelected = Boolean(editTool.poly);\n      if (!shapeSelected) {\n        // If not, keep original viewer context menu\n        return;\n      }\n\n      // get mouse pos in layer coords\n      var mousePos = layer.canvasToLayer(status.canvasX, status.canvasY);\n\n      // Check if we hit a vertex gizmo. Note that a VertexGizmo exceeds the actual shape.\n      var vertex = this.vertexGizmoUnderMouse(event.clientX, event.clientY);\n      var mouseOnGizmo = vertex >= 0;\n\n      // Check if \"insert vertex\" is possible at the current position\n      var edgeIndex = editTool.findEdgeUnderMouse(mousePos);\n      var newVertexPos = editTool.getNewVertexPosition(mousePos, edgeIndex);\n      var mouseCloseToEdge = Boolean(newVertexPos);\n\n      // If the mouse is neither on a shape nor on a vertex gizmo, exist here.\n      // Note that the gizmos exceed the actual shape by a few pixels, so we may hit one without hitting the shape.\n      var mouseOnShape = layer.hitTest(mousePos.x, mousePos.y);\n      if (!mouseOnShape && !mouseOnGizmo && !mouseCloseToEdge) {\n        // When clicking somewhere else, leave default context menu\n        return;\n      }\n\n      // If a polygon is selected for editing, we hijack the menu completely and remove the \n      // viewer default stuff (Show all layers etc.) - assuming that the user is focusing on 2D editing.\n      menu.length = 0;\n\n      // If so, add RemoveVertex item\n      if (mouseOnGizmo) {\n        menu.push({\n          title: 'Remove Vertex',\n          target: function target() {\n            editTool.removePoint(vertex);\n          } });\n\n      } else if (newVertexPos) {\n        // Add \"Insert Vertex\" menu item\n        menu.push({\n          title: 'Insert Vertex',\n          target: function target() {\n            // insert new vertex after edge starting point\n            var newVertex = edgeIndex + 1;\n            editTool.insertPoint(newVertex, newVertexPos);\n          } });\n\n      }\n    } }]);return Edit2DContextMenu;}();export { Edit2DContextMenu as default };","function _typeof(obj) {if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return self;}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _inherits(subClass, superClass) {if (typeof superClass !== \"function\" && superClass !== null) {throw new TypeError(\"Super expression must either be null or a function\");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}\n\n\n// Workaround to choose a viewport for a given 2d sheet.\n// \n// Actually, we should choose it based on 2d-position. But, F2D doesn't give us proper data to \n// do this. Also, even with proper viewport outlines, it wouldn't always unique as viewports may overlap.\n// Therefore, we have to use a workaround here to make it use for simple single-viewport sheets at least.\n//\n// @returns {number|-1} Either -1 or a valid viewportId.\nvar chooseViewportId = function chooseViewportId(model) {\n\n  var data = model.getData();\n  var viewports = data.viewports;\n  if (!viewports) {\n    return -1;\n  }\n\n  // find viewport with maximum number of dbIds    \n  var vpIndex = -1;\n  var maxDbIds = -1;\n  for (var i = 0; i < viewports.length; i++) {\n\n    // Skip viewports without transform\n    var vp = viewports[i];\n    if (!vp.transform) {\n      continue;\n    }\n\n    // Use current vp if it has most dbIds\n    var numDbIds = vp.geom_metrics.db_ids;\n    if (numDbIds > maxDbIds) {\n      vpIndex = i;\n      maxDbIds = numDbIds;\n    }\n  }\n\n  return vpIndex;\n};\n\n// A MeasureTransform allows for doing length/area measurements in another coordinate system than the actual shape geometry.\n// The transform is applied to all points before doing calculations.\nexport var MeasureTransform = /*#__PURE__*/function () {function MeasureTransform() {_classCallCheck(this, MeasureTransform);}_createClass(MeasureTransform, [{ key: \"apply\",\n\n    // @param {Vector2} p - Point to be transformed in-place.\n    value: function apply(p) {} }]);return MeasureTransform;}();\n;\n\n\n// Sets the pageToModel transform in LMV as MeasureTransform to make measurements consistent with Measure extension.\nexport var DefaultMeasureTransform = /*#__PURE__*/function (_MeasureTransform) {_inherits(DefaultMeasureTransform, _MeasureTransform);\n\n  function DefaultMeasureTransform(viewer) {var _this;_classCallCheck(this, DefaultMeasureTransform);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DefaultMeasureTransform).call(this));\n    _this.viewer = viewer;return _this;\n  }\n\n  // Transform geometry point to the coordinate system in which measurements should be computed and displayed.\n  //\n  // @param {vector2} p\n  //\n  // Note: Currently, we do some simplifying assumptions here that may need additional\n  //       work to support scenarios with multiple viewports or multiple 2d models.\n  _createClass(DefaultMeasureTransform, [{ key: \"apply\", value: function apply(p) {\n      // Get viewportId\n      var model = this.viewer.model;\n      if (!model) {\n        return;\n      }\n\n      var vpId = chooseViewportId(model);\n\n      // In case there are no viewports, there still might be a pageToModelTransform,\n      // which we need to take into account. This is the case for raster PDF.\n      model.pageToModel(p, null, vpId);\n    } }]);return DefaultMeasureTransform;}(MeasureTransform);","function _typeof(obj) {if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}function _get(target, property, receiver) {if (typeof Reflect !== \"undefined\" && Reflect.get) {_get = Reflect.get;} else {_get = function _get(target, property, receiver) {var base = _superPropBase(target, property);if (!base) return;var desc = Object.getOwnPropertyDescriptor(base, property);if (desc.get) {return desc.get.call(receiver);}return desc.value;};}return _get(target, property, receiver || target);}function _superPropBase(object, property) {while (!Object.prototype.hasOwnProperty.call(object, property)) {object = _getPrototypeOf(object);if (object === null) break;}return object;}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return self;}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _inherits(subClass, superClass) {if (typeof superClass !== \"function\" && superClass !== null) {throw new TypeError(\"Super expression must either be null or a function\");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}import { DefaultMeasureTransform } from './MeasureTransform.js';\n\nvar avp = Autodesk.Viewing.Private;\n\n// Interface to control display of length/area units.\nexport var UnitHandler = /*#__PURE__*/function () {\n\n  function UnitHandler() {_classCallCheck(this, UnitHandler);\n    // Optional: Returns a transform that is applied to all points for length/area calculations.\n    //  @returns {MeasureTransform}\n    this.measureTransform = null;\n  }\n\n  // @param   {number} val - length in layer coords\n  // @returns {string} String to display, including units.\n  _createClass(UnitHandler, [{ key: \"lengthToString\", value: function lengthToString(val) {\n      console.error('Not implemented');\n    }\n\n    // @param   {number} val - area in layer coords\n    // @returns {string} String to display - including units.\n  }, { key: \"areaToString\", value: function areaToString(val) {\n      console.error('Not implemented');\n    } }]);return UnitHandler;}();\n;\n\n// If nothing is specified, we display with 2 digits and assume all unit in inches.\nvar DefaultPrecision = 2;\nvar DefaultUnits = \"inch\";\n\n// Format length / area strings based on:\n//  - layerUnits:  We assume the layer to be specified in these units.\n//  - displayUnit: Values are converted from layerUnits to displayUnits for display\n//  - precision:   Number of digits shown\n//  - scaleFactor: Optional scale factor applied to all values\nexport var SimpleUnitHandler = /*#__PURE__*/function (_UnitHandler) {_inherits(SimpleUnitHandler, _UnitHandler);\n\n  function SimpleUnitHandler(viewer) {var _this;_classCallCheck(this, SimpleUnitHandler);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SimpleUnitHandler).call(this));\n\n    _this.viewer = viewer;\n\n    _this.config = {\n      // {string} We assume layers to be in these units (in GNU units format)\n      layerUnits: DefaultUnits,\n\n      // {string} Units in which we display lengths/areas (in GNU units format)\n      displayUnits: DefaultUnits,\n\n      // {number} Number of digits that we display\n      precision: DefaultPrecision,\n\n      // {number} Optional scale factor applied to all values\n      scaleFactor: 1.0 };return _this;\n\n  }_createClass(SimpleUnitHandler, [{ key: \"lengthToString\", value: function lengthToString(\n\n    val) {\n      var cfg = this.config;\n\n      // Convert length units\n      val = avp.convertUnits(cfg.layerUnits, cfg.displayUnits, cfg.scaleFactor, val);\n\n      // Format length value with unit string\n      return avp.formatValueWithUnits(val, cfg.displayUnits, 3, cfg.precision);\n    } }, { key: \"areaToString\", value: function areaToString(\n\n    val) {\n      var cfg = this.config;\n\n      // Convert area units\n      val = avp.convertUnits(cfg.layerUnits, cfg.displayUnits, cfg.scaleFactor, val, 'square');\n\n      // Format length value with unit string\n      var units = cfg.displayUnits ? \"\".concat(cfg.displayUnits, \"^2\") : null;\n      return avp.formatValueWithUnits(val, units, 3, cfg.precision);\n    } }]);return SimpleUnitHandler;}(UnitHandler);\n\n\n// The DefaultUnitHandler synchronizes the unit configuration based on current viewer model \n// and current settings from MeasureToolExtension:\n//  - If MeasureExtension is loaded, it displays in the same way as Measure tools\n//  - If MeasureExtension is not loaded, it just uses units of the current model without unit conversion.\n//  - If there is not even a model, it falls back to a fixed default configuration (see SimpleUnitHandler)\nexport var DefaultUnitHandler = /*#__PURE__*/function (_SimpleUnitHandler) {_inherits(DefaultUnitHandler, _SimpleUnitHandler);\n\n  function DefaultUnitHandler(viewer) {var _this2;_classCallCheck(this, DefaultUnitHandler);\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(DefaultUnitHandler).call(this, viewer));\n\n    _this2.measureTransform = new DefaultMeasureTransform(viewer);return _this2;\n  }_createClass(DefaultUnitHandler, [{ key: \"updateConfig\", value: function updateConfig()\n\n    {\n      var cfg = this.config;\n\n      // Assume values to be in model units or default units\n      var model = this.viewer.model;\n      cfg.layerUnits = model ? model.getUnitString() : DefaultUnits;\n\n      // Set other configuration values\n      var ext = this.viewer.getExtension('Autodesk.Measure');\n      var msrCfg = ext && ext.sharedMeasureConfig;\n      if (msrCfg) {\n        // get from measure extension\n        cfg.displayUnits = msrCfg.units;\n        cfg.precision = msrCfg.precision;\n        cfg.scaleFactor = msrCfg.calibrationFactor;\n      } else {\n        // No Measure extension available => use defaults\n        cfg.displayUnits = this.config.layerUnits;\n        cfg.precision = DefaultPrecision;\n        cfg.scaleFactor = 1.0;\n      }\n    } }, { key: \"lengthToString\", value: function lengthToString(\n\n    val) {\n      this.updateConfig();\n      return _get(_getPrototypeOf(DefaultUnitHandler.prototype), \"lengthToString\", this).call(this, val);\n    } }, { key: \"areaToString\", value: function areaToString(\n\n    val) {\n      this.updateConfig();\n      return _get(_getPrototypeOf(DefaultUnitHandler.prototype), \"areaToString\", this).call(this, val);\n    } }]);return DefaultUnitHandler;}(SimpleUnitHandler);","function _typeof(obj) {if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}function _get(target, property, receiver) {if (typeof Reflect !== \"undefined\" && Reflect.get) {_get = Reflect.get;} else {_get = function _get(target, property, receiver) {var base = _superPropBase(target, property);if (!base) return;var desc = Object.getOwnPropertyDescriptor(base, property);if (desc.get) {return desc.get.call(receiver);}return desc.value;};}return _get(target, property, receiver || target);}function _superPropBase(object, property) {while (!Object.prototype.hasOwnProperty.call(object, property)) {object = _getPrototypeOf(object);if (object === null) break;}return object;}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return self;}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _inherits(subClass, superClass) {if (typeof superClass !== \"function\" && superClass !== null) {throw new TypeError(\"Super expression must either be null or a function\");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}\nimport { Math2D } from './Math2D.js';\n\n// int value to string, e.g. 50 => \"50px\" - to used for style assignments.\nvar toPixels = function toPixels(val) {\n  return val.toString() + 'px';\n};\n\nexport var AlignX = {\n  Left: 1,\n  Center: 2,\n  Right: 3 };\n\n\nexport var AlignY = {\n  Top: 1,\n  Center: 2,\n  Bottom: 3 };\n\n\nvar av = Autodesk.Viewing;\n\n// Base class for any gizmo that needs to be synchronized with the shapes of an EditLayer.\nexport var CanvasGizmoBase = /*#__PURE__*/function () {\n  function CanvasGizmoBase() {_classCallCheck(this, CanvasGizmoBase);}\n\n  // Called whenever the layer or camera changes.\n  _createClass(CanvasGizmoBase, [{ key: \"update\", value: function update() {} }]);return CanvasGizmoBase;}();\n\n\nav.GlobalManagerMixin.call(CanvasGizmoBase.prototype);\n\n// A CanvasGizmo is an html div anchored at a position in layer-coords\nexport var CanvasGizmo = /*#__PURE__*/function (_CanvasGizmoBase) {_inherits(CanvasGizmo, _CanvasGizmoBase);\n  function CanvasGizmo(layer) {var _this;var visible = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;_classCallCheck(this, CanvasGizmo);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CanvasGizmo).call(this));\n\n    _this.layer = layer;\n    _this.setGlobalManager(layer.globalManager);\n\n    // position in layer-coords. The transform origin of the div will appear at this position.\n    _this.layerPos = new THREE.Vector2();\n\n    // position in canvas-coords (updated based on this.layerPos and camera)\n    _this.canvasPos = new THREE.Vector2();\n\n    // html content to be shown\n    var _document = _this.getDocument();\n    _this.container = _document.createElement('div');\n\n    // Make sure that label is displayed on top of the canvas and not \"pushed away\" by it.\n    _this.container.style.position = 'absolute';\n\n    // Rotate around gizmo center\n    _this.container.style.transformOrigin = '50% 50%';\n\n    // Show immediately if wanted\n    _this.visible = false;\n\n    _this.alignX = AlignX.Center;\n    _this.alignY = AlignY.Center;\n\n    // Clockwise rotation angle in degrees. Rotates around center.\n    _this.angle = 0;\n\n    if (visible) {\n      _this.setVisible(true, false);\n    }\n\n    // Allow checking if the mouse is currently on this gizmo\n    _this.isUnderMouse = false;\n    _this.container.addEventListener('mouseenter', function () {return _this.isUnderMouse = true;});\n    _this.container.addEventListener('mouseleave', function () {return _this.isUnderMouse = false;});\n\n    // By default, just delegate to viewer context menu. Edit2DContextMenu will take care\n    // that it is properly configured.\n    _this.container.addEventListener('contextmenu', function (e) {\n      _this.isUnderMouse = true;\n      _this.layer.viewer.triggerContextMenu(e);\n    });\n\n    // Make sure that isUnderMouse is set even if we didn't receive the mouseEnter event before.\n    // Unfortunately, the same edge-case problem still exists if we miss the mouseleave event.\n    // It would be safer to implement isUnderMouse as a getter using document.elementAtPoint().\n    // However, this would make isUnderMouse checks quite expensive. So, we have to find something better here.\n    _this.container.addEventListener('mousedown', function () {return _this.isUnderMouse = true;});return _this;\n  }_createClass(CanvasGizmo, [{ key: \"dtor\", value: function dtor()\n\n    {\n      this.setVisible(false);\n    } }, { key: \"setVisible\", value: function setVisible(\n\n    visible) {var autoUpdate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      if (visible == this.visible) {\n        return;\n      }\n\n      if (visible) {\n        // Note: It's essential that we add it to viewer.canvasWrap instead of viewer.container:\n        //       ToolController listens to events on canvasWrap. Therefore, if we would add\n        //       it to viewer.container, all mouse events captured would never reach the ToolController\n        //       no matter whether the gizmo handles them or not.\n        this.layer.viewer.canvasWrap.appendChild(this.container);\n        this.layer.addCanvasGizmo(this);\n\n        // Make sure that position is correct\n        if (autoUpdate) {\n          this.update();\n        }\n      } else\n      {\n        this.layer.viewer.canvasWrap.removeChild(this.container);\n        this.layer.removeCanvasGizmo(this);\n      }\n      this.visible = visible;\n    } }, { key: \"setAlignX\", value: function setAlignX(\n\n    alignX) {\n      this.alignX = alignX;\n      this.update();\n    } }, { key: \"setAlignY\", value: function setAlignY(\n\n    alignY) {\n      this.alignY = alignY;\n      this.update();\n    }\n\n    // @param {number} angle - Clockwise angle in degrees\n    // \n    // Note: Do not use 'position:absolute' in child html elements.\n    //       Otherwise, the content box will be empty and it will not rotate around anymore.\n  }, { key: \"setRotation\", value: function setRotation(angle) {\n      this.angle = angle;\n      this.update();\n    } }, { key: \"update\", value: function update()\n\n    {\n      this.canvasPos.copy(this.layer.layerToCanvas(this.layerPos.x, this.layerPos.y));\n\n      var p = this.canvasPos;\n      var style = this.container.style;\n\n      // set left/top to gizmo position\n      style.left = toPixels(p.x);\n      style.top = toPixels(p.y);\n\n      // Choose translation offset in % based on X-alignment\n      var tx;\n      switch (this.alignX) {\n        case AlignX.Left:tx = '0%';break;\n        case AlignX.Center:tx = '-50%';break;\n        case AlignX.Right:tx = '-100%';break;}\n\n\n      var ty;\n      switch (this.alignY) {\n        case AlignY.Top:ty = '0%';break;\n        case AlignY.Center:ty = '-50%';break;\n        case AlignY.Bottom:ty = '-100%';break;}\n\n\n      // Update transform based on rotation angle and alignment\n      style.transform = \"translate(\".concat(tx, \", \").concat(ty, \") rotate(\").concat(this.angle, \"deg)\");\n    }\n\n    // Set position in layer coords\n  }, { key: \"setPosition\", value: function setPosition(x, y) {\n      this.layerPos.set(x, y);\n      this.update();\n    } }, { key: \"setClassEnabled\", value: function setClassEnabled(\n\n    className, enabled) {\n      if (enabled) {\n        this.container.classList.add(className);\n      } else {\n        this.container.classList.remove(className);\n      }\n    }\n\n    // Selection state is managed using a css-class 'selected'. \n    // Note that this only has an effect if the css style used for the gizmo supports it.\n  }, { key: \"setSelected\", value: function setSelected(selected) {\n      this.setClassEnabled('selected', selected);\n    } }, { key: \"isSelected\", value: function isSelected()\n\n    {\n      return this.container.classList.contains('selected');\n    }\n\n    // Optional: Hover-effect for gizmos that can be clicked or dragged.\n  }, { key: \"setHoverEnabled\", value: function setHoverEnabled(enabled) {\n      this.setClassEnabled('enable-hover', enabled);\n    }\n\n    // Optional: Assign a name to gizmo and div element to facilitate debugging and testing.\n  }, { key: \"setName\", value: function setName(name) {\n      this.name = name;\n      this.container.id = name ? name : '';\n    } }]);return CanvasGizmo;}(CanvasGizmoBase);\n\n\n// Configure CanvasGizmo as a text label.\nvar initTextLabel = function initTextLabel(gizmo) {\n\n  // Use measure-tool styles by default\n  gizmo.container.classList.add('measure-length');\n  gizmo.container.classList.add('visible');\n\n  // Create textDiv child div\n  var _document = gizmo.getDocument();\n  gizmo.textDiv = _document.createElement('div');\n  gizmo.textDiv.classList.add('measure-length-text');\n  gizmo.container.appendChild(gizmo.textDiv);\n\n  // Add setText convenience function\n  gizmo.setText = function (str) {\n    this.textDiv.textContent = str;\n  }.bind(gizmo);\n};\n\n// A ShapeLabel is a text label whose anchor position is synchronized with the bbox center of a shape in a layer.\nexport var ShapeLabel = /*#__PURE__*/function (_CanvasGizmo) {_inherits(ShapeLabel, _CanvasGizmo);\n\n  function ShapeLabel(shape, layer) {var _this2;var visible = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;_classCallCheck(this, ShapeLabel);\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(ShapeLabel).call(this, layer, visible));\n\n    initTextLabel(_assertThisInitialized(_this2));\n\n    _this2.shape = shape;\n\n    // Can be set to hidden to temporarily hide the label\n    _this2.valueValid = true;\n\n    _this2.update();return _this2;\n  }_createClass(ShapeLabel, [{ key: \"update\", value: function update()\n\n    {\n      if (this.shape && this.valueValid) {\n        // Set it to visible (in case polygon was null before)\n        this.container.style.visibility = 'visible';\n\n        if (this.shape.isPolyline()) {\n          var edgeCount = this.shape.getEdgeCount();\n          // For a start, simply position the label on the segment roughly in the middle of the polyline\n          var edgeToLabel = Math.floor(edgeCount / 2);\n          if (this.shape.edgeIndexValid(edgeToLabel)) {\n            var posA = new THREE.Vector2();\n            var posB = new THREE.Vector2();\n            this.shape.getEdge(edgeToLabel, posA, posB);\n            this.layerPos.set(0.5 * (posA.x + posB.x), 0.5 * (posA.y + posB.y));\n          }\n        } else\n        {\n          // For a start, simply use the bbox center of the polygon. In some cases, this might end up outside the\n          // polygon, so we may consider something smarter later.\n          this.shape.computeBBox();\n          this.shape.bbox.center(this.layerPos);\n        }\n        _get(_getPrototypeOf(ShapeLabel.prototype), \"update\", this).call(this);\n      } else {\n        this.container.style.visibility = 'hidden';\n      }\n    } }, { key: \"setShape\", value: function setShape(\n\n    shape) {\n      this.shape = shape;\n      this.update();\n    } }]);return ShapeLabel;}(CanvasGizmo);\n\n\n// Only works for shapes with getLength() function\nexport var LengthLabel = /*#__PURE__*/function (_ShapeLabel) {_inherits(LengthLabel, _ShapeLabel);\n\n  // @param {Polyline}    polyline\n  // @param {EditLayer}   layer\n  // @param {UnitHandler} unitHandler - unitHandler.areaToString() is required to define how to display area values as string.\n  // @param {bool}        [visible]\n  function LengthLabel(polyline, layer, unitHandler) {var _this3;var visible = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;_classCallCheck(this, LengthLabel);\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(LengthLabel).call(this, polyline, layer, visible));\n    _this3.unitHandler = unitHandler;return _this3;\n  }_createClass(LengthLabel, [{ key: \"update\", value: function update()\n\n    {\n      // Get shape length (if shape supports it)\n      var hasLength = this.shape && this.shape.getLength;\n      var length = hasLength && this.shape.getLength(this.unitHandler.measureTransform);\n\n      // Hide label if we don't have a well-defined length.\n      // We also hide it if length is 0.0, because the shape cannot be visible anyway.\n      this.valueValid = Boolean(length);\n\n      if (this.valueValid) {\n        var text = this.unitHandler.lengthToString(length);\n        this.setText(text);\n      }\n\n      // Let base class update position\n      _get(_getPrototypeOf(LengthLabel.prototype), \"update\", this).call(this);\n    } }]);return LengthLabel;}(ShapeLabel);\n\n\n// Only works for shapes with getArea() function\nexport var AreaLabel = /*#__PURE__*/function (_ShapeLabel2) {_inherits(AreaLabel, _ShapeLabel2);\n\n  // @param {Polygon}     polygon\n  // @param {EditLayer}   layer\n  // @param {UnitHandler} unitHandler - unitHandler.areaToString() is required to define how to display area values as string.\n  // @param {bool}        [visible]\n  function AreaLabel(polygon, layer, unitHandler) {var _this4;var visible = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;_classCallCheck(this, AreaLabel);\n    _this4 = _possibleConstructorReturn(this, _getPrototypeOf(AreaLabel).call(this, polygon, layer, visible));\n    _this4.unitHandler = unitHandler;return _this4;\n  }_createClass(AreaLabel, [{ key: \"update\", value: function update()\n\n    {\n      // Get shape area (if shape supports it)\n      var hasArea = this.shape && this.shape.getArea;\n      var area = hasArea && this.shape.getArea(this.unitHandler.measureTransform);\n\n      // Hide label if we don't have a well-defined area.\n      // We also hide it if area is 0.0, because the shape cannot be visible anyway.\n      this.valueValid = Boolean(area);\n\n      if (this.valueValid) {\n        var text = this.unitHandler.areaToString(area);\n        this.setText(text);\n      }\n\n      // Let base class update position\n      _get(_getPrototypeOf(AreaLabel.prototype), \"update\", this).call(this);\n    } }]);return AreaLabel;}(ShapeLabel);\n\n\n// A html element for which position and rotation is aligned with an edge\nexport var EdgeGizmo = /*#__PURE__*/function (_CanvasGizmo2) {_inherits(EdgeGizmo, _CanvasGizmo2);\n\n  // @param {EditLayer} layer\n  // @param {bool} visible\n  function EdgeGizmo(layer) {var _this5;var visible = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;_classCallCheck(this, EdgeGizmo);\n    _this5 = _possibleConstructorReturn(this, _getPrototypeOf(EdgeGizmo).call(this, layer, visible));\n\n    _this5.posA = new THREE.Vector2();\n    _this5.posB = new THREE.Vector2();\n\n    // Indicates if a position has been set. If not, we temporarily hide the gizmo. If the gizmo is\n    // attached to an edge, this flag is set automatically.\n    _this5.posValid = false;\n\n    // Temp vectors used in update\n    _this5.edgeDir = new THREE.Vector2();\n\n    // Optional: Positions can be synchronized with an edge of a polygon or polyline\n    _this5.poly = null;\n    _this5.edgeIndex = 0;\n\n    // Use measure-length css style by default\n    _this5.container.classList.add('edge-gizmo');\n\n    // Optional: If specified, this limits the size of the gizmo relative to the edge length on screen:\n    // We hide the gizmo if it exceeds x * edgeLength on screen.\n    _this5.maxRelativeLength = undefined; // in [0,1]\n    return _this5;}\n\n  // If a poly is set, the gizmo is automatically synchronized with the edge.\n  // As long as the poly is visible in the same layer, the edge is automatically kept in sync with the edge.\n  //\n  //  @param {PolyBase} poly     - polygon or polyline containing the edge that we want to attach to. If null, positions can be set manually.\n  //  @param {number} edgeIndex  - edgeIndex in poly. If not valid, gizmo is hidden.\n  //  @param {bool} [autoUpdate] - update position immediately\n  _createClass(EdgeGizmo, [{ key: \"attachToEdge\", value: function attachToEdge(poly, edgeIndex) {\n      this.poly = poly;\n      this.edgeIndex = edgeIndex;\n      this.update();\n    } }, { key: \"detachFromEdge\", value: function detachFromEdge()\n\n    {\n      this.poly = null;\n      this.edgeIndex = -1;\n      this.posValid = false; // hide unless a position is explicitly set\n      this.update();\n    } }, { key: \"update\", value: function update()\n\n    {\n\n      // If a polygon is set, obtain positions automatically from it - or hide gizmo if edge does not exist anymore\n      if (this.poly && this.poly.edgeIndexValid(this.edgeIndex)) {\n        this.poly.getEdge(this.edgeIndex, this.posA, this.posB);\n        this.posValid = true;\n      }\n\n      // If edge is invalid or too small on screen, just hide the gizmo\n      var show = this._shouldBeShown();\n      this.container.style.visibility = show ? 'visible' : 'hidden';\n      if (!show) {\n        return;\n      }\n\n      // Center gizmo at edge center\n      this.layerPos.set(0.5 * (this.posA.x + this.posB.x), 0.5 * (this.posA.y + this.posB.y));\n\n      // Set rotation angle\n      this._updateRotation();\n\n      _get(_getPrototypeOf(EdgeGizmo.prototype), \"update\", this).call(this);\n    }\n\n    // Check if the gizmo should be shown: We hide it if the edge is too small or if the edge does not exist at all.\n  }, { key: \"_shouldBeShown\", value: function _shouldBeShown() {\n\n      // Positions must be properly set - either automatically from an attached edge or manually using setEdge()\n      if (!this.posValid) {\n        return false;\n      }\n\n      // Show/Hide gizmo depending on zoom:\n      // Gizmo has constant screen-size. So, we hide it if the screen-size of the edge becomes too small.\n      if (this.maxRelativeLength) {\n        var aScreen = this.layer.layerToCanvas(this.posA.x, this.posA.y);\n        var bScreen = this.layer.layerToCanvas(this.posB.x, this.posB.y);\n        var edgeLengthScreen = aScreen.distanceTo(bScreen);\n        var maxAllowedPixels = edgeLengthScreen * this.maxRelativeLength;\n        var _window = this.getWindow();\n        var width = parseFloat(_window.getComputedStyle(this.container).width);\n        return width < maxAllowedPixels;\n      }\n      return true;\n    }\n\n    // Set style rotation to align gizmo along edge direction, so that 'width' is along the edge\n  }, { key: \"_updateRotation\", value: function _updateRotation() {\n\n      // Compute counterClockwise angle in radians that rotates the positive x-axis to the edge direction a->b\n      var dir = Math2D.getEdgeDirection(this.posA, this.posB, this.edgeDir);\n      var angle = Math.atan2(dir.y, dir.x);\n\n      // Avoid upside-down rotation: Flip by 180 degrees if b is left of a. This is import if gizmo contains text.\n      if (dir.x < 0) {\n        angle += Math.PI;\n      }\n\n      // Convert angle to clockwise degrees and apply it to style\n      // Just set the angle here, but don't call setAngle, becaue we don't want to trigger auto-update.\n      this.angle = -THREE.Math.radToDeg(angle);\n    } }]);return EdgeGizmo;}(CanvasGizmo);\n\n\nexport var EdgeMoveGizmo = /*#__PURE__*/function (_EdgeGizmo) {_inherits(EdgeMoveGizmo, _EdgeGizmo);\n\n  function EdgeMoveGizmo(layer, name) {var _this6;var visible = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;_classCallCheck(this, EdgeMoveGizmo);\n    _this6 = _possibleConstructorReturn(this, _getPrototypeOf(EdgeMoveGizmo).call(this, layer, visible));\n\n    _this6.setName(name);\n    _this6.container.classList.add('edge-move-gizmo');\n\n    // Hide gizmo if its screenWidth exceeds 0.3 * edgeLength\n    _this6.maxRelativeLength = 0.3; // in [0,1]\n    return _this6;}return EdgeMoveGizmo;}(EdgeGizmo);\n\n\n// An EdgeGizmo to display text\nexport var EdgeLabel = /*#__PURE__*/function (_EdgeGizmo2) {_inherits(EdgeLabel, _EdgeGizmo2);\n\n  function EdgeLabel(layer) {var _this7;var visible = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;_classCallCheck(this, EdgeLabel);\n    _this7 = _possibleConstructorReturn(this, _getPrototypeOf(EdgeLabel).call(this, layer, visible));\n    initTextLabel(_assertThisInitialized(_this7));\n\n    // Hide label if it would exceed the edge length\n    _this7.maxRelativeLength = 1.0;return _this7;\n  }return EdgeLabel;}(EdgeGizmo);\n\n\nexport var VertexGizmo = /*#__PURE__*/function (_CanvasGizmo3) {_inherits(VertexGizmo, _CanvasGizmo3);\n\n  // @param {number}  x,y       - Position in layer coords\n  // @param {string}  id        - id string used to tag shapes that represent this gizmo\n  function VertexGizmo(layer, x, y, name) {var _this8;_classCallCheck(this, VertexGizmo);\n    _this8 = _possibleConstructorReturn(this, _getPrototypeOf(VertexGizmo).call(this, layer, true));\n    _this8.setPosition(x, y);\n    _this8.setName(name);\n\n    _this8.container.classList.add('vertex-gizmo');return _this8;\n  }return VertexGizmo;}(CanvasGizmo);\n\n\n// A Label filter decides for which shapes we display a label\nexport var LabelFilter = /*#__PURE__*/function () {\n\n  function LabelFilter() {_classCallCheck(this, LabelFilter);}\n\n  // If false, we don't need to acquire a label at all.\n  _createClass(LabelFilter, [{ key: \"accepts\", value: function accepts(shape, text) {\n      return true;\n    } }]);return LabelFilter;}();\n;\n\n// Get shape width in screen-pixels\nvar getShapeWidth = function getShapeWidth(shape, layer) {\n  // get shape size in screen-pixels\n  shape.updateBBox();\n  var bbox = shape.bbox;\n  var shapeWidth = bbox.max.x - bbox.min.x;\n  return shapeWidth * layer.getPixelsPerUnit() * shapeWidth;\n};\n\n// By default, we hide labels if text is empty or if the shape size on screen falls beyond a pixel threshold\nexport var DefaultLabelFilter = /*#__PURE__*/function (_LabelFilter) {_inherits(DefaultLabelFilter, _LabelFilter);\n\n  // @param {number} minWidth - minimum pixel width a shape must have to receive a label\n  function DefaultLabelFilter() {var _this9;var minWidth = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 5;_classCallCheck(this, DefaultLabelFilter);\n    _this9 = _possibleConstructorReturn(this, _getPrototypeOf(DefaultLabelFilter).call(this));\n    _this9.minWidth = minWidth;return _this9;\n  }\n\n  // Accept shape if text is not empty and its screen-width is big enough.\n  _createClass(DefaultLabelFilter, [{ key: \"accepts\", value: function accepts(shape, text, layer) {\n      var width = getShapeWidth(shape, layer);\n      return Boolean(text) && width >= this.minWidth;\n    } }]);return DefaultLabelFilter;}(LabelFilter);\n\n\n// A LabelStyle rule allows to apply css style modifications on a label, e.g., depending on screen size\nexport var LabelStyleRule = /*#__PURE__*/function () {\n\n  function LabelStyleRule() {_classCallCheck(this, LabelStyleRule);}\n\n  // Note: Labels may be reused for different shapes. So, make sure that the style parameters are \n  //       not just modified for some subset of shapes, but reset for others.\n  _createClass(LabelStyleRule, [{ key: \"apply\", value: function apply(label, shape, text, layer) {} }]);return LabelStyleRule;}();\n;\n\n// Fades out based on label size\nexport var FadeOutStyleRule = /*#__PURE__*/function (_LabelStyleRule) {_inherits(FadeOutStyleRule, _LabelStyleRule);\n\n  // @param {number} rangeStart - shape width in screen-pixels at which the label starts to fade-in\n  // @param {number} rangeEnd   - shape width in screen-pixels at which the label is fully opaque.\n  function FadeOutStyleRule() {var _this10;var rangeStart = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;var rangeEnd = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 14;_classCallCheck(this, FadeOutStyleRule);\n    _this10 = _possibleConstructorReturn(this, _getPrototypeOf(FadeOutStyleRule).call(this));\n    _this10.rangeStart = rangeStart;\n    _this10.rangeEnd = rangeEnd;return _this10;\n  }_createClass(FadeOutStyleRule, [{ key: \"apply\", value: function apply(\n\n    label, shape, layer) {\n\n      // compute opacity from shape screen-width\n      var width = getShapeWidth(shape, layer);\n      var t = (width - this.rangeStart) / (this.rangeEnd - this.rangeStart);\n      var opacity = THREE.Math.clamp(t, 0, 1);\n\n      label.container.style.opacity = opacity;\n    } }]);return FadeOutStyleRule;}(LabelStyleRule);\n;\n\n// A ShapeLabelRule maintains a set of labels that is automatically synced with the shapes in a layer.\n// It implements the CanvasGizmoBase to update the set of maintained labels.\nexport var ShapeLabelRule = /*#__PURE__*/function () {\n\n  // @param {EditLayer}               layer            - Labels are shown (and synchronized) with the content of this layer.\n  // @param {function(Shape)=>string} shapeToLabelText - A mapping that defines which text to display for a shape. If null, no label is created.\n  // @param {LabelFilter}             [filter]         - Defines which labels to show. See DefaultLabelFilter for default behavior.\n  // @param {LabelStyleRule}          [styleRule]      - Defines how label style is modified dynamically. (By default, we fade-out based on label size)\n  function ShapeLabelRule(layer, shapeToLabelText) {var labelFilter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new DefaultLabelFilter();var styleRule = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : new FadeOutStyleRule();_classCallCheck(this, ShapeLabelRule);\n    this.layer = layer;\n    this.shapeToLabelText = shapeToLabelText;\n\n    // All labels that we created. \n    this.labels = []; // {ShapeLabel[]}\n    this.labelsUsed = 0; // All remaining labels in this.labels are hidden and just cached for later reuse.\n\n    this.layer.addCanvasGizmo(this);\n    this.visible = true;\n    this.layer.update();\n\n    this.filter = labelFilter;\n    this.styleRule = styleRule;\n  }\n\n  // Replace the rule to define label texts.\n  //   @param {function(Shape)=>string} shapeToLabelText - A mapping that defines which text to display for a shape. If null, no label is created.\n  _createClass(ShapeLabelRule, [{ key: \"setTextRule\", value: function setTextRule(shapeToLabelText) {\n      this.shapeToLabelText = shapeToLabelText;\n      this.update();\n    } }, { key: \"setVisible\", value: function setVisible(\n\n    visible) {\n      if (visible === this.visible) {\n        return;\n      }\n\n      if (visible) {\n        // Note: It's essential that we add 'this' first and all maintained labels behind. In this way, this gizmo is updated first to\n        //       configure all labels - followed by the update calls for all active labels in use.\n        this.layer.addCanvasGizmo(this);\n        this.update();\n      } else {\n        this.clearLabels();\n        this.layer.removeCanvasGizmo(this);\n      }\n      this.visible = visible;\n    } }, { key: \"dtor\", value: function dtor()\n\n    {\n      // Make sure that we don't leave any of our labels in the layer\n      this.setVisible(false);\n    }\n\n    // Hide + release all current labels, so that we can re-acquire them based on latest Layer state.\n  }, { key: \"clearLabels\", value: function clearLabels() {\n      for (var i = 0; i < this.labelsUsed; i++) {\n        this.labels[i].setShape(null);\n        this.labels[i].setVisible(false);\n      }\n      this.labelsUsed = 0;\n    }\n\n    // Create new label or get it from cache\n  }, { key: \"acquireLabel\", value: function acquireLabel() {\n      // create new label if necessary\n      if (this.labelsUsed === this.labels.length) {\n        this.labels.push(new ShapeLabel(null, this.layer));\n      }\n\n      return this.labels[this.labelsUsed++];\n    } }, { key: \"update\", value: function update()\n\n    {\n\n      this.clearLabels();\n\n      var shapes = this.layer.shapes;\n      for (var i = 0; i < shapes.length; i++) {\n\n        var shape = shapes[i];\n\n        // Get label text \n        var text = this.shapeToLabelText(shape);\n\n        // Check if we want to display a label for this shape\n        if (this.filter && !this.filter.accepts(shape, text, this.layer)) {\n          continue;\n        }\n\n        // Configure label\n        var label = this.acquireLabel();\n        label.setShape(shape);\n        label.setText(text);\n        label.setVisible(true);\n\n        // Apply optional custom style rule\n        this.styleRule && this.styleRule.apply(label, shape, this.layer);\n      }\n    } }]);return ShapeLabelRule;}();\n\n\n// A ShapeToolTip is a label that shows up when hovering a shape.\n// By default, it appears a few pixels above the top-right corner of a shape's bbox.\nexport var ShapeToolTip = /*#__PURE__*/function (_CanvasGizmoBase2) {_inherits(ShapeToolTip, _CanvasGizmoBase2);\n\n  // @param {EditLayer}               layer - Tooltip will appear for all shapes in the given layer.\n  // @param {function(shape)=>string} getText - Function to define the text for a given shape\n  function ShapeToolTip(layer) {var _this11;var getText = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;_classCallCheck(this, ShapeToolTip);\n    _this11 = _possibleConstructorReturn(this, _getPrototypeOf(ShapeToolTip).call(this));\n\n    _this11.layer = layer;\n    _this11.textCb = getText;\n    _this11.viewer = _this11.layer.viewer;\n\n    // track latest mouse position in layer coords (init on first mouse move)\n    _this11.mousePos = null;\n\n    // distance between tooltip and shape bbox\n    _this11.distanceToBox = 5; // in pixels\n\n    // Create tooltip div\n    _this11.container = _this11.getDocument().createElement('div');\n    _this11.container.classList.add('adsk-control-tooltip');\n\n    // Add div to viewer canvas container and layer\n    _this11.viewer.canvasWrap.appendChild(_this11.container);\n\n    // Update if layer changed\n    _this11.layer.addCanvasGizmo(_assertThisInitialized(_this11));\n\n    // Update if mouse moved\n    _this11.onMouseMoved = _this11.onMouseMoved.bind(_assertThisInitialized(_this11));\n    _this11.viewer.canvasWrap.addEventListener('mousemove', _this11.onMouseMoved);\n\n    _this11.layer.updateCanvasGizmos();return _this11;\n  }_createClass(ShapeToolTip, [{ key: \"dtor\", value: function dtor()\n\n    {\n      this.layer.removeCanvasGizmo();\n      this.viewer.canvasWrap.removeEventListener('mousemove', this.onMouseMoved);\n      this.viewer.canvasWrap.removeChild(this.container);\n    }\n\n    // Set callback that defines which text to display for each shape. Returning '' or null will hide the tooltip.\n    // @param {function(shape)=>string} getText - Function to define the text for a given shape\n  }, { key: \"setTextCallback\", value: function setTextCallback(getText) {\n      this.textCb = getText;\n      this.update();\n    } }, { key: \"onMouseMoved\", value: function onMouseMoved(\n\n    event) {\n\n      // Add canvas coords to event\n      this.viewer.toolController.__clientToCanvasCoords(event);\n\n      // Track mouse position\n      this.mousePos = this.layer.canvasToLayer(event.canvasX, event.canvasY);\n\n      this.update();\n    } }, { key: \"update\", value: function update()\n\n    {\n\n      // If a textCb is set, check shape under mouse\n      var shape = this.mousePos && this.textCb && this.layer.hitTest(this.mousePos.x, this.mousePos.y);\n\n      // Choose label text\n      var text = shape && this.textCb(shape);\n\n      // Apply text\n      this.container.textContent = text || '';\n\n      // Stop here if nothing to display\n      if (!text) {\n        this.container.style.visibility = 'hidden';\n        return;\n      }\n\n      // Show label\n      this.container.style.visibility = 'visible';\n\n      // Get top-right corner of bbox\n      shape.updateBBox(); // Make sure bbox is up-to-date\n      var corner = shape.bbox.max;\n\n      // Get anchor in canvas coords\n      var anchor = this.layer.layerToCanvas(corner.x, corner.y);\n\n      // Add some pixels y-offset\n      anchor.y -= this.distanceToBox;\n\n      // get canvas size\n      var width = this.viewer.canvas.width;\n      var height = this.viewer.canvas.height;\n\n      // Update tooltip position\n      this.container.style.right = width - anchor.x + 'px';\n      this.container.style.bottom = height - anchor.y + 'px';\n\n      this.container.style.left = 'auto';\n      this.container.style.top = 'auto';\n    } }]);return ShapeToolTip;}(CanvasGizmoBase);\n;","function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;} // A tangent gizmo is a dashed line with two vertex gizmos at the end.\n// It is used to control tangents for Bezier arcs.\n\nimport { Math2D } from './Math2D.js';\nimport { Polyline } from './EditShapes.js';\nimport { VertexGizmo } from './CanvasGizmo.js';\n\nvar tangentGizmoName = function tangentGizmoName(vertexIndex, sideIndex) {\n  return \"TangentGizmo-$vertexIndex-$sideIndex\";\n};\n\n// Indicates which endpoint of the tangent is being dragged\nvar DragIndex = {\n  None: -1, // Nothing dragged\n  Start: 0, // Dragging start point\n  End: 1 // Dragging end point\n};var\n\nTangentGizmo = /*#__PURE__*/function () {\n\n  function TangentGizmo(path, index, layer, gizmoLayer) {_classCallCheck(this, TangentGizmo);\n\n    this.path = path;\n    this.gizmoLayer = gizmoLayer;\n    this.layer = layer;\n\n    // index of the vertex whose tangent we control\n    this.index = index;\n\n    // dashed tangent line\n    this.line = new Polyline();\n    this.lineVisible = false;\n\n    // configure style of dashed line\n    this.line.style.isScreenSpace = true;\n    this.line.style.lineColor = 'rgb(255, 0, 255)',\n    this.line.style.lineWidth = 1.0,\n    this.line.style.lineStyle = 10;\n    this.line.style.lineAlpha = 1.0;\n\n    // VertexGizmos at both ends of the tangent line\n    this.vertexGizmo1 = new VertexGizmo(this.gizmoLayer, 0, 0, tangentGizmoName(index, 1));\n    this.vertexGizmo2 = new VertexGizmo(this.gizmoLayer, 0, 0, tangentGizmoName(index, 2));\n\n    // Hide vertex gizmos until we have proper positions\n    this.vertexGizmo1.setVisible(false);\n    this.vertexGizmo2.setVisible(false);\n\n    // Start/end vertex of tangent Gizmo\n    this.pStart = new THREE.Vector2();\n    this.pEnd = new THREE.Vector2();\n\n    // Add this to main layer. This triggers this.update() on layer updates to respond to\n    // vertex position changes.\n    this.layer.addCanvasGizmo(this);\n\n    // 0: dragging startPoint, 1: dragging endPoint, 2: nothing dragged\n    this.dragIndex = DragIndex.None;\n\n    // Last tracked dragging position for currently dragged vertex\n    this.lastDragPos = new THREE.Vector2(); // in layer coords\n\n    // When dragging vertices, we store the offset (in layer-coords) between \n    // the accurate click position and the center of the clicked vertex gizmo\n    this.dragOffset = new THREE.Vector2(0, 0); // in pixels\n\n    this.update();\n  }_createClass(TangentGizmo, [{ key: \"dtor\", value: function dtor()\n\n    {\n      this.setVisible(false);\n      this.layer.removeCanvasGizmo(this);\n    } }, { key: \"setVisible\", value: function setVisible(\n\n    visible) {\n\n      this.vertexGizmo1.setVisible(visible);\n      this.vertexGizmo2.setVisible(visible);\n\n      // Show/Hide tangent line gizmo\n      if (visible !== this.lineVisible) {\n        if (visible) {\n          this.gizmoLayer.addShape(this.line);\n        } else {\n          this.gizmoLayer.removeShape(this.line);\n        }\n      }\n      this.lineVisible = visible;\n    } }, { key: \"update\", value: function update()\n\n    {\n\n      // get index of previous edge (ending at the vertex)\n      var prevIndex = this.path.prevIndex(this.index);\n\n      // Check which of the adjacent edges are arcs\n      var prevIsArc = this.path.isBezierArc(prevIndex);\n      var nextIsArc = this.path.isBezierArc(this.index);\n\n      // If none of the edges is an Arc, just hide all gizmos\n      if (!prevIsArc && !nextIsArc) {\n        this.setVisible(false);\n        return;\n      }\n\n      // Compute both endpoints of tangent gizmo\n      var p = this.path.points[this.index];\n      if (nextIsArc) {\n\n        // End point is first control point of the arc starting at p            \n        this.pEnd.set(p.cp1x, p.cp1y);\n\n        // In general, the start point would be cp2 of the previous arc. \n        // But, we enforce tangents to be identical for previous edge and next edge.\n        // Therefore, we obtain the other endpoint by mirroring the tangent of the leaving edge\n        // on point p\n        Math2D.mirrorPointOnPoint(this.pEnd, p, this.pStart);\n      } else {\n        // Only previous edge is an arc: We have to obtain the tangent from\n        // control point 2 of the previous edge.\n        var pPrev = this.path.points[prevIndex];\n        this.pStart.set(pPrev.cp2x, pPrev.cp2y);\n\n        Math2D.mirrorPointOnPoint(this.pStart, p, this.pEnd);\n      }\n\n      // update vertex gizmos\n      this.vertexGizmo1.setPosition(this.pStart.x, this.pStart.y);\n      this.vertexGizmo2.setPosition(this.pEnd.x, this.pEnd.y);\n\n      // update line gizmo\n      this.line.makeLine(this.pStart.x, this.pStart.y, this.pEnd.x, this.pEnd.y);\n      this.gizmoLayer.update();\n\n      this.setVisible(true);\n    }\n\n    // Apply modified tangent endpoints after dragging on of the tangent vertices.\n    //\n    // @param {Vector2} pStart, pEnd - Tangent start/end point in layer coords.\n  }, { key: \"setTangentEndPoints\", value: function setTangentEndPoints(pStart, pEnd) {\n\n      // Set start point: This is cp2 of previous arc segment (if any)\n      var prevIndex = this.path.prevIndex(this.index);\n      if (this.path.isBezierArc(prevIndex)) {\n        this.path.updateControlPoint(prevIndex, 2, pStart.x, pStart.y);\n      }\n\n      // Set end point: This is cp1 of current segment\n      if (this.path.isBezierArc(this.index)) {\n        this.path.updateControlPoint(this.index, 1, pEnd.x, pEnd.y);\n      }\n\n      // update gizmos\n      this.update();\n    }\n\n    // @param {Vector2} newPos - new position in layer coords\n  }, { key: \"onStartVertexMoved\", value: function onStartVertexMoved(startPos) {\n      // get new tangent end point by mirroring on vertex position\n      var center = this.path.getPoint(this.index);\n      var endPos = Math2D.mirrorPointOnPoint(startPos, center);\n\n      this.setTangentEndPoints(startPos, endPos);\n    }\n\n    // @param {Vector2} startPos - new position in layer coords\n  }, { key: \"onEndVertexMoved\", value: function onEndVertexMoved(endPos) {\n      // get new tangent start point by mirroring on vertex position\n      var center = this.path.getPoint(this.index);\n      var startPos = Math2D.mirrorPointOnPoint(endPos, center);\n\n      this.setTangentEndPoints(startPos, endPos);\n    }\n\n    // @param {DragIndex} dragIndex\n  }, { key: \"startDrag\", value: function startDrag(canvasX, canvasY, dragIndex) {\n\n      this.dragIndex = dragIndex;\n\n      // Store offset between exact mouse pos and the vertex we are dragging\n      var vpos = dragIndex === DragIndex.Start ? this.pStart : this.pEnd;\n      var vposScreen = this.layer.layerToCanvas(vpos.x, vpos.y);\n      this.dragOffset.set(vposScreen.x - canvasX, vposScreen.y - canvasY);\n\n      this.lastDragPos.copy(vpos);\n    }\n\n    // process last position and finish dragging\n  }, { key: \"endDrag\", value: function endDrag(canvasX, canvasY) {\n      this.moveDrag(canvasX, canvasY);\n      this.dragIndex = DragIndex.None;\n    } }, { key: \"moveDrag\", value: function moveDrag(\n\n    canvasX, canvasY) {\n\n      // Compute canvas position of the gizmo after drag\n      // Note that the vertex we are dragging does not always match exactly with the mouse position. \n      // E.g., we may have picked the bottom-left boundary of a vertex gizmo at drag-start.\n      var x = canvasX + this.dragOffset.x;\n      var y = canvasY + this.dragOffset.y;\n      var p = this.layer.canvasToLayer(x, y);\n\n      // Move tangent vertex by dx/dy\n      if (this.dragIndex === DragIndex.Start) {\n        this.onStartVertexMoved(p);\n      } else if (this.dragIndex === DragIndex.End) {\n        this.onEndVertexMoved(p);\n      }\n\n      this.layer.update();\n    }\n\n    // @returns {bool} true if dragging started\n  }, { key: \"onButtonDown\", value: function onButtonDown(canvasX, canvasY) {\n\n      var startDragged = this.vertexGizmo1.isUnderMouse;\n      var endDragged = this.vertexGizmo2.isUnderMouse;\n\n      if (!startDragged && !endDragged) {\n        return false;\n      }\n\n      var dragIndex = startDragged ? DragIndex.Start : DragIndex.End;\n      this.startDrag(canvasX, canvasY, dragIndex);\n\n      return true;\n    } }, { key: \"isDragging\", value: function isDragging()\n\n    {\n      return this.dragIndex !== DragIndex.None;\n    } }]);return TangentGizmo;}();export { TangentGizmo as default };\n;","function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}\nimport { Actions } from '../Actions.js';\n\nvar MoveToolName = \"Edit2_MoveTool\";\n\nvar av = Autodesk.Viewing;var\n\nMoveTool = /*#__PURE__*/function () {\n\n  function MoveTool(ctx) {_classCallCheck(this, MoveTool);\n\n    this.layer = ctx.layer;\n    this.selection = ctx.selection;\n    this.undoStack = ctx.undoStack;\n    this.nameSuffix = \"_\".concat(ctx.toolSetName);\n\n    // Only set during dragging\n    this.shape = null;\n\n    // drag-start position in layer coords\n    this.dragStartPoint = new THREE.Vector2();\n\n    // backup original shape on drag-start as long as we are modifying it on-hover\n    this.backupShape = null;\n\n    this.keyMap = {\n      CancelEdit: av.KeyCode.ESCAPE };\n\n\n    // Remember last mouse-pos on mouse-move events\n    this.lastMousePos = new THREE.Vector2(); // in layer coords\n  }_createClass(MoveTool, [{ key: \"getNames\", value: function getNames()\n\n    {\n      return [this.getName()];\n    } }, { key: \"getName\", value: function getName()\n\n    {\n      return MoveToolName + this.nameSuffix;\n    } }, { key: \"activate\", value: function activate()\n\n    {} }, { key: \"deactivate\", value: function deactivate()\n    {} }, { key: \"register\", value: function register()\n    {} }, { key: \"handleButtonDown\", value: function handleButtonDown(\n\n    event, button) {\n      // Only respond to left button\n      if (button !== 0) {\n        return;\n      }\n\n      var p = this.layer.canvasToLayer(event.canvasX, event.canvasY);\n      var hitShape = this.layer.hitTest(p.x, p.y);\n\n      if (hitShape) {\n        this.startDrag(hitShape, p);\n      }\n\n      // Set selection to the shape that we picked\n      if (this.shape) {\n        this.selection.selectOnly(this.shape);\n      } else {\n        this.selection.clear();\n      }\n\n      return Boolean(this.shape);\n    }\n\n    // Start dragging a shape\n    //  @param {Shape}   shape\n    //  @param {Vector2} startPos - in layer coords\n  }, { key: \"startDrag\", value: function startDrag(shape, startPos) {\n      this.shape = shape;\n      this.dragStartPoint.copy(startPos);\n      this.backupShape = shape.clone();\n    }\n\n    // p is in layer coords\n  }, { key: \"moveDrag\", value: function moveDrag(p) {\n      var dx = p.x - this.dragStartPoint.x;\n      var dy = p.y - this.dragStartPoint.y;\n\n      // Apply this offset to shape. We always start with the original shape as a reference \n      // to avoid accumulating delta inaccuracies.\n      this.shape.copy(this.backupShape);\n      this.shape.move(dx, dy);\n      this.layer.update();\n    }\n\n    // Clean up data hold during a drag interaction\n  }, { key: \"resetDragging\", value: function resetDragging() {\n      this.shape = null;\n      this.backupShape = null;\n    } }, { key: \"endDrag\", value: function endDrag(\n\n    p) {\n      // No drag active\n      if (!this.shape) {\n        return;\n      }\n\n      // Revert any temporary modifications done during mouse move\n      this.shape.copy(this.backupShape);\n\n      // Apply move operation\n      var dx = p.x - this.dragStartPoint.x;\n      var dy = p.y - this.dragStartPoint.y;\n      this.undoStack.run(new Actions.MoveShape(this.layer, this.shape, dx, dy));\n\n      if (this.shape) {\n        this.shape = null;\n        return true;\n      }\n      return false;\n    } }, { key: \"cancelDrag\", value: function cancelDrag()\n\n    {\n      if (this.isDragging()) {\n\n        // Revert shape o state when dragging was started\n        this.shape.copy(this.backupShape);\n        this.layer.update();\n\n        this.resetDragging();\n      }\n    } }, { key: \"isDragging\", value: function isDragging()\n\n    {\n      return Boolean(this.shape);\n    } }, { key: \"handleMouseMove\", value: function handleMouseMove(\n\n    event) {\n\n      // Get and store latest mouse position\n      var p = this.layer.canvasToLayer(event.canvasX, event.canvasY);\n      this.lastMousePos.copy(p);\n\n      if (!this.shape) {\n        return false;\n      }\n\n      // get delta between last and current position        \n      this.moveDrag(p);\n\n      return true;\n    } }, { key: \"handleButtonUp\", value: function handleButtonUp(\n\n    event, button) {\n      // Only respond to left button\n      if (button !== 0) {\n        return;\n      }\n\n      var p = this.layer.canvasToLayer(event.canvasX, event.canvasY);\n      return this.endDrag(p);\n    } }, { key: \"handleKeyDown\", value: function handleKeyDown(\n\n    event, keyCode) {\n      if (keyCode === this.keyMap.CancelEdit) {\n        this.cancelDrag();\n      }\n    }\n\n    // Display move cursor if a shape is under mouse or if we are dragging\n  }, { key: \"getCursor\", value: function getCursor() {\n      if (this.shape) {\n        return 'move';\n      }\n\n      // Show move cursor if a shape is under mouse\n      var shapeAtMouse = this.layer.hitTest(this.lastMousePos.x, this.lastMousePos.y);\n      return shapeAtMouse ? 'move' : undefined;\n    } }]);return MoveTool;}();export { MoveTool as default };","function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}\n\nimport Selection from '../Selection.js';\nimport UndoStack from '../UndoStack.js';\n\nvar av = Autodesk.Viewing;\n\n\n// Utility class shared by Edit2D tools to facilitate snapping\nvar EditToolBase = /*#__PURE__*/function () {\n\n  function EditToolBase(ctx) {var _this = this;_classCallCheck(this, EditToolBase);\n\n    this.viewer = ctx.viewer;\n    this.setGlobalManager(this.viewer.globalManager);\n    this.layer = ctx.layer;\n    this.gizmoLayer = ctx.gizmoLayer;\n    this.snapper = ctx.snapper;\n    this.selection = ctx.selection;\n    this.undoStack = ctx.undoStack;\n    this.unitHandler = ctx.unitHandler;\n    this.nameSuffix = \"_\".concat(ctx.toolSetName);\n\n    // If true, all mouse-dragging handlers just return false, so that the events are handled by LMV navigation tools instead.\n    this.ignoreDragging = false;\n\n    // This flag is used to avoid triggering handleExternalAction if we triggered an action ourselves.\n    this.ignoreActions = false;\n\n    // If another tool applies changes while this tool is active, we want to keep the tool state consistent.\n    // E.g., the UndoTool or CopyTool may be active in parallel and may modify/remove a polygon we are working on.\n    // his event listener makes sure that handleExternalAction() is called in this case so that this tool can respond. \n    this.onActionCb = function (a) {\n      if (!_this.ignoreActions) {\n        _this.handleExternalAction(a);\n      }\n    };\n\n    // indicates if snapping is currently suppressed by hold modifier key\n    this.suppressSnapping = false;\n\n    this.keyMap = {\n      SnapKey: av.KeyCode.SHIFT, // Holding this key suppresses snapping\n      PanKey: av.KeyCode.SPACE // Holding space bypasses all edit tools, so that default navigation (usually panning) steps in\n    };\n\n    // When using selection, register a handler to notify about selection changed\n    if (this.selection) {\n      this.selectionCb = function () {\n\n        // Only respond if tool is activated\n        if (!_this.active) {\n          return;\n        }\n\n        // Call handler if derived class defines one\n        _this.onSelectionChanged && _this.onSelectionChanged();\n      };\n\n      this.selection.addEventListener(Selection.Events.SELECTION_CHANGED, this.selectionCb);\n    }\n\n    this.active = false;\n\n    // Track last mouse position in canvas coords. Note that derived classes must call\n    // the base class mouse handlers to keep this value valid.\n    this.canvasPos = new THREE.Vector2();\n\n    // Track which keys are currently hold down\n    this.keyState = {\n      ctrl: false,\n      shift: false,\n      alt: false };\n\n  }_createClass(EditToolBase, [{ key: \"getSnapPosition\", value: function getSnapPosition(\n\n    canvasX, canvasY) {var _this2 = this;\n      var useSnapper = this.snapper && !this.suppressSnapping;\n      if (useSnapper) {\n        return this.snapper.getSnapPosition(canvasX, canvasY, function (s) {return _this2.snappingFilter(s);});\n      } else {\n        // Make sure that we don't keep outdated snapping gizmos\n        this.snapper.clearSnappingGizmos();\n\n        // Just convert canvas pos to layer pos\n        return this.layer.canvasToLayer(canvasX, canvasY);\n      }\n    } }, { key: \"dtor\", value: function dtor()\n\n    {\n      if (this.selectionCb) {\n        this.selection.removeEventListener(Selection.Events.SELECTION_CHANGED, this.selectionCb);\n      }\n    } }, { key: \"getNames\", value: function getNames()\n\n    {\n      return [this.getName()];\n    } }, { key: \"handleKeyDown\", value: function handleKeyDown(\n\n    event, keyCode) {\n\n      this.keyState[keyCode] = true;\n\n      // Hold key to suppress snapping\n      if (keyCode === this.keyMap.SnapKey && !this.suppressSnapping) {\n        this.suppressSnapping = true;\n\n        // Let tool instantly update hover-gizmos\n        this.onSnappingToggled && this.onSnappingToggled(this.canvasPos.x, this.canvasPos.y);\n      }\n\n      // While edit tools are active the BACKSPACE key should not make the browser go back in history, otherwise\n      // the customer might lose his drawings when he's in an editing session, does a invalid selection and\n      // hits backspace.\n      if (keyCode === av.KeyCode.BACKSPACE) {\n        return true;\n      }\n\n      if (keyCode === this.keyMap.PanKey) {\n        this.ignoreDragging = true;\n      }\n    } }, { key: \"handleKeyUp\", value: function handleKeyUp(\n\n    event, keyCode) {\n\n      this.keyState[keyCode] = false;\n\n      if (keyCode === this.keyMap.SnapKey && this.suppressSnapping) {\n        this.suppressSnapping = false;\n\n        // Let tool instantly update hover-gizmos\n        this.onSnappingToggled && this.onSnappingToggled(this.canvasPos.x, this.canvasPos.y);\n      }\n\n      if (keyCode === this.keyMap.PanKey) {\n        this.ignoreDragging = false;\n      }\n    }\n\n    // Invoked whenever another tool triggered \n  }, { key: \"handleExternalAction\", value: function handleExternalAction(action) {}\n\n    // Run an action without triggering handleExternalAction\n  }, { key: \"runAction\", value: function runAction(action) {\n      this.ignoreActions = true;\n      this.undoStack.run(action);\n      this.ignoreActions = false;\n    } }, { key: \"activate\", value: function activate()\n\n    {\n      this.active = true;\n      this.undoStack.addEventListener(UndoStack.AFTER_ACTION, this.onActionCb);\n    } }, { key: \"deactivate\", value: function deactivate()\n\n    {\n      this.active = false;\n      this.undoStack.removeEventListener(UndoStack.AFTER_ACTION, this.onActionCb);\n\n      // Make sure we don't keep outdated snapping indicators\n      this.snapper && this.snapper.clearSnappingGizmos();\n    } }, { key: \"register\", value: function register()\n\n    {}\n\n    // Maps a key event to a function key in the key-map.\n  }, { key: \"mapKey\", value: function mapKey(event, keyMap) {\n\n      for (var key in keyMap) {\n        var assigned = keyMap[key];\n\n        // If a single key is assigned to this function and it matches, return the function key\n        if (event.keyCode == assigned) {\n          return key;\n        }\n\n        // If multiple keys are assigned, check if one matches.\n        if (Array.isArray(assigned) && assigned.includes(event.keyCode)) {\n          return key;\n        }\n      }\n      // event does not match any assigned keyCode\n      return null;\n    } }, { key: \"snappingFilter\",\n\n    // By default, we consider all EditShapes for snapping\n    value: function snappingFilter() {\n      return true;\n    }\n\n    // Remember last mouse position\n  }, { key: \"trackMousePos\", value: function trackMousePos(e) {\n      this.canvasPos.set(e.canvasX, e.canvasY);\n    } }, { key: \"handleMouseMove\", value: function handleMouseMove(\n    e) {this.trackMousePos(e);} }, { key: \"handleSingleClick\", value: function handleSingleClick(\n    e) {this.trackMousePos(e);} }, { key: \"handleDoubleClick\", value: function handleDoubleClick(\n    e) {this.trackMousePos(e);} }, { key: \"handleButtonUp\", value: function handleButtonUp(\n    e) {this.trackMousePos(e);} }, { key: \"handleButtonDown\", value: function handleButtonDown(\n    e) {this.trackMousePos(e);} }]);return EditToolBase;}();export { EditToolBase as default };\n;\n\nav.GlobalManagerMixin.call(EditToolBase.prototype);","function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;} // Helper to check whether certain modifiers are currently hold or not.\n// See https://developer.mozilla.org/de/docs/Web/API/KeyboardEvent/getModifierState for list of supported keys.\n// E.g.:\n//  \"Control\", \"Shift\", \"Alt\", ..\nvar ModifierMask = /*#__PURE__*/function () {\n\n  function ModifierMask() {_classCallCheck(this, ModifierMask);\n    // By default, don't check any modifers.\n    this.checkedModifiers = {};\n  }\n\n  // Add a modifier to be checked. E.g. addCondition(\"Control\", true).\n  _createClass(ModifierMask, [{ key: \"addCondition\", value: function addCondition(modifierName, expectedState) {\n      this.checkedModifiers[modifierName] = expectedState;\n    }\n\n    // Remove condition - accept any state of this modifier\n  }, { key: \"removeCondition\", value: function removeCondition(modifierName) {\n      delete this.checkedModifiers[modifierName];\n    }\n\n    // Check if current event meets all modifier conditions\n  }, { key: \"accepts\", value: function accepts(event) {\n      for (var key in this.checkedModifiers) {\n        var state = event.getModifierState(key);\n        var expected = this.checkedModifiers[key];\n        if (state !== expected) {\n          return false;\n        }\n      }\n      return true;\n    } }]);return ModifierMask;}();export { ModifierMask as default };\n;","function _typeof(obj) {if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {return call;}return _assertThisInitialized(self);}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return self;}function _inherits(subClass, superClass) {if (typeof superClass !== \"function\" && superClass !== null) {throw new TypeError(\"Super expression must either be null or a function\");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}\nimport { Polygon } from '../EditShapes.js';\nimport { Actions } from '../Actions.js';\n\nimport EditToolBase from './EditToolBase.js';\nimport { Style } from '../EditShapes.js';\nimport { AreaLabel } from '../CanvasGizmo.js';\nimport ModifierMask from '../ModifierMask.js';\n\nvar RectangleToolName = \"Edit2_RectangleTool\";\n\nvar av = Autodesk.Viewing;\n\n// Creates rectangles by dragging\nvar RectangleTool = /*#__PURE__*/function (_EditToolBase) {_inherits(RectangleTool, _EditToolBase);\n\n  function RectangleTool(ctx) {var _this;var style = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Style();_classCallCheck(this, RectangleTool);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RectangleTool).call(this, ctx));\n\n    Autodesk.Viewing.EventDispatcher.prototype.apply(_assertThisInitialized(_this));\n\n    _this.style = style;\n\n    // New polygon created by dragging\n    _this.rect = null;\n\n    // First corner of the new rectangle\n    _this.startPoint = new THREE.Vector2();\n    _this.endPoint = new THREE.Vector2();\n\n    // Indicates that we interrupted dragging with Esc. In this case, we still consume the mouse-up\n    // event to avoid inconsistencies in other tool.\n    _this.dragCanceled = false;\n\n    // Create area label. Default hidden - showing is optional.\n    _this.areaLabel = new AreaLabel(null, _this.layer, ctx.unitHandler, false);\n\n    // Allow to enable/disable tool based on modifiers\n    _this.modifiers = new ModifierMask();return _this;\n  }\n\n  // Enable the area labels (public API)\n  _createClass(RectangleTool, [{ key: \"setAreaLabelVisible\", value: function setAreaLabelVisible(visible) {\n      this.areaLabel.setVisible(visible);\n    } }, { key: \"getName\", value: function getName()\n\n    {\n      return RectangleToolName + this.nameSuffix;\n    } }, { key: \"activate\", value: function activate()\n\n    {} }, { key: \"deactivate\", value: function deactivate()\n    {} }, { key: \"register\", value: function register()\n    {} }, { key: \"handleButtonDown\", value: function handleButtonDown(\n\n    event, button) {\n\n      // Check if modifers allow starting an interaction\n      if (!this.modifiers.accepts(event)) {\n        return false;\n      }\n\n      // Only respond to left button\n      if (button != 0) {\n        return;\n      }\n\n      var p = this.getSnapPosition(event.canvasX, event.canvasY);\n      this.startDrag(p);\n      return true;\n    } }, { key: \"handleButtonUp\", value: function handleButtonUp(\n\n    event, button) {\n\n      // Only respond to left button\n      if (button != 0) {\n        return false;\n      }\n\n      // If drag has been interrupted, consider the endDrag() as handled\n      if (this.dragCanceled) {\n        this.dragCanceled = false;\n        return true;\n      }\n\n      // Make sure that we consider latest mouse position\n      this.handleMouseMove(event);\n\n      return this.endDrag();\n    } }, { key: \"handleMouseMove\", value: function handleMouseMove(\n\n    event) {\n\n      // Get snapping position. Note that this even makes sense when not dragging: In this case, we \n      // just do it to update the snapping indicator.\n      var p = this.getSnapPosition(event.canvasX, event.canvasY);\n\n      if (!this.rect) {\n        return false;\n      }\n\n      this.moveDrag(p, event.shiftKey);\n\n      return true;\n    }\n\n    // Start dragging a shape\n    //  @param {Shape}   shape\n    //  @param {Vector2} startPos - in layer coords\n  }, { key: \"startDrag\", value: function startDrag(startPos) {\n      this.rect = new Polygon([startPos.clone(), startPos.clone(), startPos.clone(), startPos.clone()], this.style.clone());\n      this.startPoint.copy(startPos);\n      this.endPoint.copy(startPos);\n\n      this.gizmoLayer.addShape(this.rect);\n    } }, { key: \"updateRect\", value: function updateRect(\n\n    forceQuad) {\n\n      if (!this.isDragging()) {\n        return;\n      }\n\n      var p0 = this.startPoint;\n      var p1 = this.endPoint;\n\n      if (forceQuad) {\n\n        // Use maximum of dx/dy as edge length\n        var dx = p1.x - p0.x;\n        var dy = p1.y - p0.y;\n\n        var edgeLength = Math.max(Math.abs(dx), Math.abs(dy));\n\n        // Consider drag direction to span quad right/left resp. up/down\n        var sx = Math.sign(dx);\n        var sy = Math.sign(dy);\n\n        this.rect.updatePoint(1, p0.x + edgeLength * sx, p0.y);\n        this.rect.updatePoint(2, p0.x + edgeLength * sx, p0.y + edgeLength * sy);\n        this.rect.updatePoint(3, p0.x, p0.y + edgeLength * sy);\n\n      } else {\n        this.rect.updatePoint(1, p1.x, p0.y);\n        this.rect.updatePoint(2, p1.x, p1.y);\n        this.rect.updatePoint(3, p0.x, p1.y);\n      }\n\n      this.gizmoLayer.update();\n\n      this.areaLabel.setShape(this.rect);\n    }\n\n    // p is in layer coords\n  }, { key: \"moveDrag\", value: function moveDrag(p, forceQuad) {\n\n      // update rectangle\n      this.endPoint.copy(p);\n      this.updateRect(forceQuad);\n    } }, { key: \"endDrag\", value: function endDrag()\n\n    {\n\n      if (!this.rect) {\n        return false;\n      }\n\n      // Check if rect is valid\n      var dx = this.endPoint.x - this.startPoint.x;\n      var dy = this.endPoint.y - this.startPoint.y;\n      var Eps = 1.e-10;\n      var rectValid = Math.abs(dx) > Eps && Math.abs(dy) > Eps;\n\n      // Move shape to main layer (or just remove if invalid)\n      this.gizmoLayer.removeShape(this.rect);\n      if (rectValid) {\n        this.undoStack.run(new Actions.AddShape(this.layer, this.rect));\n      }\n\n      this.rect = null;\n\n      this.areaLabel.setShape(null);\n\n      return true;\n    } }, { key: \"cancelDrag\", value: function cancelDrag()\n\n    {\n      if (this.rect) {\n        // Remove temporary gizmo shape\n        this.gizmoLayer.removeShape(this.rect);\n        this.rect = null;\n\n        this.dragCanceled = true;\n\n        this.areaLabel.setShape(null);\n      }\n    } }, { key: \"isDragging\", value: function isDragging()\n\n    {\n      return Boolean(this.rect);\n    } }, { key: \"handleKeyDown\", value: function handleKeyDown(\n\n    event, keyCode) {\n      // Update shape when toggling between rect and quad mode\n      if (keyCode == av.KeyCode.SHIFT) {\n        this.updateRect(true);\n      }\n    } }, { key: \"handleKeyUp\", value: function handleKeyUp(\n\n    event, keyCode) {\n      // Update shape when toggling between rect and quad mode\n      if (keyCode == av.KeyCode.SHIFT) {\n        this.updateRect(false);\n      }\n    } }]);return RectangleTool;}(EditToolBase);export { RectangleTool as default };","function _typeof(obj) {if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return self;}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _inherits(subClass, superClass) {if (typeof superClass !== \"function\" && superClass !== null) {throw new TypeError(\"Super expression must either be null or a function\");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}import { Polyline } from '../EditShapes.js';\nimport { Actions } from '../Actions.js';\nimport { Math2D } from '../Math2D.js';\n\nimport EditToolBase from './EditToolBase.js';\nimport { Style } from '../EditShapes';\nimport { LengthLabel } from '../CanvasGizmo';\n\nvar LineToolName = \"Edit2_LineTool\";\n\nvar av = Autodesk.Viewing;\n\n// Draws lines with single drag\nvar LineTool = /*#__PURE__*/function (_EditToolBase) {_inherits(LineTool, _EditToolBase);\n\n  function LineTool(ctx) {var _this;var style = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Style();_classCallCheck(this, LineTool);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LineTool).call(this, ctx));\n\n    _this.style = style;\n\n    // New polyline created by dragging\n    _this.line = null;\n\n    // Start/Endpoint of the line being dragged\n    _this.startPoint = new THREE.Vector2();\n    _this.endPoint = new THREE.Vector2();\n\n    // Indicates that we interrupted dragging with Esc. In this case, we still consume the mouse-up\n    // event to avoid inconsistencies in other tool.\n    _this.dragCanceled = false;\n\n    // Create length label. Default hidden - showing is optional.\n    _this.lengthLabel = new LengthLabel(null, _this.layer, ctx.unitHandler, false);return _this;\n  }\n\n  // Enable the length labels (public API)\n  _createClass(LineTool, [{ key: \"setLengthLabelVisible\", value: function setLengthLabelVisible(visible) {\n      this.lengthLabel.setVisible(visible);\n    } }, { key: \"getName\", value: function getName()\n\n    {\n      return LineToolName + this.nameSuffix;\n    } }, { key: \"activate\", value: function activate()\n\n    {} }, { key: \"deactivate\", value: function deactivate()\n    {} }, { key: \"register\", value: function register()\n    {} }, { key: \"handleButtonDown\", value: function handleButtonDown(\n\n    event, button) {\n\n      // Only respond to left button\n      if (button != 0) {\n        return;\n      }\n\n      var p = this.getSnapPosition(event.canvasX, event.canvasY);\n      this.startDrag(p);\n      return true;\n    } }, { key: \"handleButtonUp\", value: function handleButtonUp(\n\n    event, button) {\n\n      // Only respond to left button\n      if (button != 0) {\n        return;\n      }\n\n      // Make sure that we consider latest end-coords\n      this.handleMouseMove(event);\n\n      // If drag has been interrupted, consider the endDrag() as handled\n      if (this.dragCanceled) {\n        this.dragCanceled = false;\n        return true;\n      }\n\n      return this.endDrag();\n    } }, { key: \"handleMouseMove\", value: function handleMouseMove(\n\n    event) {\n\n      // Get snapping position. Note that this even makes sense when not dragging: In this case, we \n      // just do it to update the snapping indicator.\n      var p = this.getSnapPosition(event.canvasX, event.canvasY);\n\n      if (!this.line) {\n        return false;\n      }\n\n      this.moveDrag(p, event.shiftKey);\n\n      return true;\n    }\n\n    // Start dragging a shape\n    //  @param {Shape}   shape\n    //  @param {Vector2} startPos - in layer coords\n  }, { key: \"startDrag\", value: function startDrag(startPos) {\n      this.line = new Polyline([startPos.clone(), startPos.clone()], this.style.clone());\n      this.startPoint.copy(startPos);\n      this.endPoint.copy(startPos);\n\n      this.gizmoLayer.addShape(this.line);\n    } }, { key: \"updateLine\", value: function updateLine()\n\n    {\n\n      if (!this.isDragging()) {\n        return;\n      }\n\n      this.line.updatePoint(1, this.endPoint.x, this.endPoint.y);\n      this.gizmoLayer.update();\n\n      this.lengthLabel.setShape(this.line);\n    }\n\n    // p is in layer coords\n  }, { key: \"moveDrag\", value: function moveDrag(p, forceQuad) {\n\n      // update rectangle\n      this.endPoint.copy(p);\n      this.updateLine();\n    } }, { key: \"endDrag\", value: function endDrag()\n\n    {\n\n      if (!this.line) {\n        return false;\n      }\n\n      // Remove temporary gizmo shape\n      this.gizmoLayer.removeShape(this.line);\n\n      // Add line shape if valid\n      var lineValid = !Math2D.edgeIsDegenerated(this.startPoint, this.endPoint);\n      if (lineValid) {\n        this.undoStack.run(new Actions.AddShape(this.layer, this.line));\n      }\n\n      this.line = null;\n\n      this.lengthLabel.setShape(null);\n\n      return true;\n    } }, { key: \"cancelDrag\", value: function cancelDrag()\n\n    {\n      if (this.line) {\n        // Remove temporary gizmo shape\n        this.gizmoLayer.removeShape(this.line);\n        this.line = null;\n\n        this.dragCanceled = true;\n\n        this.lengthLabel.setShape(null);\n      }\n    } }, { key: \"isDragging\", value: function isDragging()\n\n    {\n      return Boolean(this.line);\n    } }, { key: \"handleKeyDown\", value: function handleKeyDown(\n\n    event, keyCode) {\n      // Update shape when toggling between rect and quad mode\n      if (keyCode == av.KeyCode.SHIFT) {\n        this.updateLine(true);\n      }\n    } }, { key: \"handleKeyUp\", value: function handleKeyUp(\n\n    event, keyCode) {\n      // Update shape when toggling between rect and quad mode\n      if (keyCode == av.KeyCode.SHIFT) {\n        this.updateLine(false);\n      }\n    } }]);return LineTool;}(EditToolBase);export { LineTool as default };","function _typeof(obj) {if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return self;}function _get(target, property, receiver) {if (typeof Reflect !== \"undefined\" && Reflect.get) {_get = Reflect.get;} else {_get = function _get(target, property, receiver) {var base = _superPropBase(target, property);if (!base) return;var desc = Object.getOwnPropertyDescriptor(base, property);if (desc.get) {return desc.get.call(receiver);}return desc.value;};}return _get(target, property, receiver || target);}function _superPropBase(object, property) {while (!Object.prototype.hasOwnProperty.call(object, property)) {object = _getPrototypeOf(object);if (object === null) break;}return object;}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _inherits(subClass, superClass) {if (typeof superClass !== \"function\" && superClass !== null) {throw new TypeError(\"Super expression must either be null or a function\");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}import { Polygon, Polyline, Style } from '../EditShapes.js';\nimport { AreaLabel, VertexGizmo, EdgeLabel } from '../CanvasGizmo.js';\nimport { Actions } from '../Actions.js';\n\nimport EditToolBase from './EditToolBase.js';\nimport RectangleTool from './RectangleTool.js';\nimport LineTool from './LineTool.js';\n\nvar Mode = {\n  Polyline: 1,\n  Polygon: 2 };\n\n\nvar PolygonToolName = \"Edit2_PolygonTool\";\nvar PolylineToolName = \"Edit2_PolylineTool\";\n\nvar av = Autodesk.Viewing;\nvar DefaultStyle = new Style();var\n\nPolygonTool = /*#__PURE__*/function (_EditToolBase) {_inherits(PolygonTool, _EditToolBase);\n\n  function PolygonTool(ctx) {var _this;var mode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Mode.Polygon;var style = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new Style();_classCallCheck(this, PolygonTool);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PolygonTool).call(this, ctx));\n\n    // Delegate single-drag interactions: \n    _this.lineRectTool = mode === Mode.Polygon ?\n    new RectangleTool(ctx, style) : // PolygonMode: Draw rect/quad on drag\n    new LineTool(ctx, style) // PolylineMode: Draw simple line on drag\n    ;\n\n    Autodesk.Viewing.EventDispatcher.prototype.apply(_assertThisInitialized(_this));\n\n    // Circle shapes per vertex\n    _this.vertexGizmos = [];\n\n    // The polygon/polyline we are currently creating (if tool is active)\n    _this.poly = undefined;\n\n    // Style used for polygon creation\n    _this.style = style;\n\n    // Style used to display the thin line to connect last added vertex with current mouse position.        \n    _this.edgePreviewStyle = new Style({\n      lineWidth: 2,\n      isScreenSpace: true,\n      lineStyle: 11 // dashed line\n    });\n\n    // whether editing Polylines or Polygons\n    _this.mode = mode;\n\n    // last canvas position where we added a vertex\n    _this.lastClickX = undefined;\n    _this.lastClickY = undefined;\n\n    _this.keyMap.CANCEL_EDIT = av.KeyCode.ESCAPE;\n    _this.keyMap.REMOVE_LAST_VERTEX = av.KeyCode.BACKSPACE;\n    _this.keyMap.FINISH_EDIT = [av.KeyCode.ENTER, av.KeyCode.c];\n\n    // FillGizmo: When editing a polygon, fillGizmo displays the polygon formed by all vertices + mousePos\n    _this.fillGizmo = null;\n\n    // OutlineGizmo: Polyline that connects all added vertices\n    _this.outlineGizmo = null;\n\n    // Line to connect last added vertex with mouse position\n    _this.edgePreviewGizmo = null;\n\n    // Last tracked mouse-pos in layer-coords (after considering snapping)\n    _this.mousePos = new THREE.Vector2();\n\n    // Label to display polygon area - hidden by default\n    // Note that the polygon preview is in the gizmoLayer. So we add the areaLabel there as well to keep it in sync.\n    _this.areaLabel = new AreaLabel(null, _this.gizmoLayer, _this.unitHandler, false);\n\n    // Label to display polyline length\n    _this.lengthLabel = new EdgeLabel(_this.gizmoLayer, false);return _this;\n  }\n\n  // Enable the area labels (public API)\n  _createClass(PolygonTool, [{ key: \"setAreaLabelVisible\", value: function setAreaLabelVisible(visible) {\n      this.areaLabel.setVisible(visible);\n    } }, { key: \"setLengthLabelVisible\", value: function setLengthLabelVisible(\n\n    visible) {\n      this.lengthLabel.setVisible(visible);\n    } }, { key: \"deactivate\", value: function deactivate()\n\n    {\n      _get(_getPrototypeOf(PolygonTool.prototype), \"deactivate\", this).call(this);\n      this.cancelEdit();\n    }\n\n    // Returns true when editing a Polygon, false when editing a Polyline or nothing.\n  }, { key: \"isPolygon\", value: function isPolygon() {\n      return this.poly instanceof Polygon;\n    }\n\n    /**\n       * Set depending styles for the polygon / polyline tool. It will also set most of the styles to the temporary lines\n       * that appear during drawing. Style.isScreenSpace won't be considered.\n       * @param {Style} style         - a Style instance\n       * @param {boolean} skipDefault - If set (default) just apply the style that differ from the default Style\n       */ }, { key: \"setStyles\", value: function setStyles(\n    style) {var skipDefault = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      if (style.lineColor !== DefaultStyle.lineColor || !skipDefault) {\n        this.style.lineColor = style.lineColor;\n      }\n      if (style.lineAlpha !== DefaultStyle.lineAlpha || !skipDefault) {\n        this.style.lineAlpha = style.lineAlpha;\n      }\n      if (style.lineWidth !== DefaultStyle.lineWidth || !skipDefault) {\n        this.style.lineWidth = style.lineWidth;\n        this.lineRectTool.style.lineWidth = style.lineWidth;\n        this.edgePreviewStyle.lineWidth = style.lineWidth * 2 / 3;\n      }\n      if (style.lineStyle !== DefaultStyle.lineStyle || !skipDefault) {\n        this.style.lineStyle = style.lineStyle;\n        this.lineRectTool.style.lineStyle = style.lineStyle;\n        // skip this.edgePreviewStyle.lineStyle\n      }\n\n      if (style.fillColor !== DefaultStyle.fillColor || !skipDefault) {\n        this.style.fillColor = style.fillColor;\n      }\n      if (style.fillAlpha !== DefaultStyle.fillAlpha || !skipDefault) {\n        this.style.fillAlpha = style.fillAlpha;\n      }\n\n      // skip isScreenSpace\n    }\n\n    // Initialize all gizmos when starting to edit a Polygon/Polyline\n  }, { key: \"initGizmos\", value: function initGizmos() {\n\n      // FillGizmo: Draw fill of polygon formed by added vertices + mousePos\n      if (this.isPolygon()) {\n        this.fillGizmo = new Polygon([], this.style.clone());\n        this.fillGizmo.style.lineAlpha = 0;\n        this.gizmoLayer.addShape(this.fillGizmo);\n      }\n\n      // OutlineGizmo: Connect added vertices\n      this.outlineGizmo = new Polyline([], this.style.clone());\n      this.gizmoLayer.addShape(this.outlineGizmo);\n\n      // CurrentEdgeGizmo: Draw dashed line from last vertex to mousePos.\n      this.edgePreviewGizmo = new Polyline([], this.edgePreviewStyle);\n      this.edgePreviewGizmo.style.lineColor = this.poly.style.lineColor;\n      this.gizmoLayer.addShape(this.edgePreviewGizmo);\n\n      this.areaLabel.setShape(this.fillGizmo);\n\n      // For Polylines, attach label to preview edge that displays the summed length\n      if (this.poly && this.poly.isPolyline()) {\n        this.lengthLabel.attachToEdge(this.edgePreviewGizmo, 0);\n      }\n    } }, { key: \"clearGizmos\", value: function clearGizmos()\n\n    {\n      if (this.fillGizmo) {\n        this.gizmoLayer.removeShape(this.fillGizmo);\n        this.fillGizmo = null;\n      }\n\n      this.areaLabel.setShape(null);\n      this.lengthLabel.detachFromEdge();\n\n      if (this.outlineGizmo) {\n        this.gizmoLayer.removeShape(this.outlineGizmo);\n        this.outlineGizmo = null;\n      }\n\n      if (this.edgePreviewGizmo) {\n        this.gizmoLayer.removeShape(this.edgePreviewGizmo);\n        this.edgePreviewGizmo = null;\n      }\n\n      // clear vertex gizmos\n      for (var i = 0; i < this.vertexGizmos.length; i++) {\n        this.vertexGizmos[i].dtor();\n      }\n      this.vertexGizmos.length = 0;\n    }\n\n    // Update gizmos and snapping if polygon was modified\n  }, { key: \"polyModified\", value: function polyModified() {\n      this.updateGizmos();\n\n      // Configure angle snapping to consider latest state of the polygon\n      // Note that angleSnapper requires the shape including \"vertex under mouse\", while\n      // this.poly only contains the already added/clicked vertices.\n      // Note that we cannot use fillGizmo here, because it does not exist for polylines.\n      var snapGeom = this.poly.clone();\n      snapGeom.addPoint(this.mousePos.x, this.mousePos.y);\n      this.snapper.startAngleSnapping(snapGeom, this.poly.vertexCount);\n    }\n\n    // Update gizmos if vertices of current polygon/polyline have changed\n  }, { key: \"updateGizmos\", value: function updateGizmos() {\n\n      // FillGizmo: Show fill without outline for the polygon formed by all added\n      // vertices + current mousePos\n      if (this.fillGizmo) {\n        // copy vertices of main polygon (not geom, not style)\n        this.fillGizmo.clear();\n        for (var i = 0; i < this.poly.vertexCount; i++) {\n          var p = this.poly.getPoint(i);\n          this.fillGizmo.addPoint(p.x, p.y);\n        }\n        // add additional point that traces mouse-pos\n        this.fillGizmo.addPoint(this.mousePos.x, this.mousePos.y);\n      }\n\n      // OutlineGizmo: Solid polyline that connects all added vertices\n      this.outlineGizmo.clear();\n      if (this.poly.vertexCount >= 2) {\n        for (var _i = 0; _i < this.poly.vertexCount; _i++) {\n          var _p = this.poly.getPoint(_i);\n          this.outlineGizmo.addPoint(_p.x, _p.y);\n        }\n      }\n\n      // currentEdgeGizmo: Dashed line to connect last added vertex with mouse position\n      this.edgePreviewGizmo.clear();\n      if (this.poly.vertexCount >= 1) {\n        var pLast = this.poly.getPoint(this.poly.vertexCount - 1);\n        this.edgePreviewGizmo.addPoint(pLast.x, pLast.y);\n        this.edgePreviewGizmo.addPoint(this.mousePos.x, this.mousePos.y);\n\n        this.updateLengthLabel();\n      }\n\n      this.gizmoLayer.update();\n    } }, { key: \"updateLengthLabel\", value: function updateLengthLabel()\n\n    {\n      // Compute resulting length of polyline including previewEdge\n      if (this.poly && this.poly.isPolyline()) {\n        // get transform from geometry coords to measure coordinate system\n        var transform = this.unitHandler.measureTransform;\n\n        var length = this.poly.getLength(transform) + this.edgePreviewGizmo.getLength(transform);\n        var lengthStr = this.unitHandler.lengthToString(length);\n        this.lengthLabel.setText(lengthStr);\n      }\n    } }, { key: \"getName\", value: function getName()\n\n    {\n      return (this.mode === Mode.Polygon ? PolygonToolName : PolylineToolName) + this.nameSuffix;\n    } }, \n    \n    { key: \"handleMouseMove\", value: function handleMouseMove(event) {\n      _get(_getPrototypeOf(PolygonTool.prototype), \"handleMouseMove\", this).call(this, event);\n\n      if (!event.buttons) {\n        // When not dragging, we always return false here. Otherwise, the event will not propagated\n        // to navigation tools, so that the zoom focus is not updated properly.\n        this.onHover(event.canvasX, event.canvasY);\n        return false;\n      }\n      return this.lineRectTool.handleMouseMove(event);\n    } }, \n    \n    { key: \"onHover\", value: function onHover(canvasX, canvasY) {\n      // Check if shape editing is already in progress\n      if (!this.poly) {\n        // Perform snapping check, so that SnappingIndicator reflects if the start point would be snapped.\n        this.getSnapPosition(canvasX, canvasY);\n        return;\n      }\n\n      var pLayer = this.layer.canvasToLayer(canvasX, canvasY);\n\n      // When hovering the start vertex that will close the polygon (or line-loop), don't show any snapping indicators\n      var closingAllowed = this.poly.vertexCount >= 3;\n      var startVertexHit = closingAllowed && this.vertexGizmos[0].isUnderMouse;\n      this.setStartVertexHighlighted(startVertexHit); // indicate when hoving closing-vertex\n      if (startVertexHit) {\n        // Remove snapping indicators\n        this.snapper.clearSnappingGizmos();\n\n        // snap position to vertex center\n        pLayer.copy(this.vertexGizmos[0].layerPos);\n      } else {\n        // Standard case: If mouse is not on start vertex, allow standard snapping\n        pLayer = this.getSnapPosition(canvasX, canvasY);\n      }\n\n      // track last mouse pos\n      this.mousePos.copy(pLayer);\n\n      // Just hover: Only update vertex-positions for fillGizmo, edgePreview and alignmentGizmo\n      this.edgePreviewGizmo.updatePoint(1, pLayer.x, pLayer.y);\n      this.fillGizmo && this.fillGizmo.updatePoint(this.fillGizmo.vertexCount - 1, pLayer.x, pLayer.y); // will be null if this.poly is a Polyline\n      this.gizmoLayer.update();\n      this.updateLengthLabel();\n    }\n\n    // If we have enough vertices, clicking on the first vertex gizmo again will finish the shape.\n  }, { key: \"handleStartVertexClicked\", value: function handleStartVertexClicked(event) {\n\n      if (!this.poly && this.poly.vertexCount < 3) {\n        return;\n      }\n\n      // For polylines, we have to repeat the first vertex to close it\n      if (this.poly.isPolyline()) {\n        var pStart = this.poly.getPoint(0);\n        this.addVertex(pStart.x, pStart.y);\n      }\n\n      // Finish editing\n      this.finishPolygon();\n\n      // Make sure that the event is not passed on to ToolManager. Otherwise,\n      // we would evaluate it a second time in handleSingleClick()\n      event.stopPropagation();\n    }\n\n    // Add vertex on single-click\n  }, { key: \"handleSingleClick\", value: function handleSingleClick(event, button) {\n      _get(_getPrototypeOf(PolygonTool.prototype), \"handleSingleClick\", this).call(this, event, button);\n\n      // Only respond to left mouse button.\n      if (!button == 0) {\n        return false;\n      }\n\n      // Avoid duplicate vertices on double-clicks\n      if (this.vertexGizmos.length > 0 && event.canvasX === this.lastClickX && event.canvasY === this.lastClickY) {\n        return true;\n      }\n\n      this.lastClickX = event.canvasX;\n      this.lastClickY = event.canvasY;\n\n      this.mousePos.copy(this.getSnapPosition(event.canvasX, event.canvasY));\n\n      // Init polygon on first click\n      if (!this.poly) {\n        this.startPoly(this.mousePos.x, this.mousePos.y);\n      }\n\n      this.addVertex(this.mousePos.x, this.mousePos.y);\n      return true;\n    } }, { key: \"handleButtonDown\", value: function handleButtonDown(\n\n    event, button) {\n      // Support suppressing mouse buttons by holding a key. Note that we only need that for dragging operations.\n      if (this.ignoreDragging) {\n        return false;\n      }\n\n      // If no clicks have been made so far, allow to drag line/rectangle.\n      if (!this.poly) {\n        // Clear the selection, this will make sure all other gizmos get removed\n        this.selection.clear();\n\n        return this.lineRectTool.handleButtonDown(event, button);\n      }\n\n      return false;\n    } }, { key: \"handleButtonUp\", value: function handleButtonUp(\n\n    event, button) {\n      return this.lineRectTool.handleButtonUp(event, button);\n    } }, { key: \"handleDoubleClick\", value: function handleDoubleClick(\n\n    event, button) {\n      _get(_getPrototypeOf(PolygonTool.prototype), \"handleDoubleClick\", this).call(this, event, button);\n\n      // Only respond to left mouse button.\n      if (!button == 0) {\n        return false;\n      }\n\n      this.finishPolygon();\n      return true;\n    }\n\n    // Start new polyline or polygon\n  }, { key: \"startPoly\", value: function startPoly(x, y) {\n\n      if (this.mode === Mode.Polygon) {\n        this.poly = new Polygon([], this.style.clone());\n      } else {\n        this.poly = new Polyline([], this.style.clone());\n      }\n\n      this.initGizmos();\n    } }, \n    \n    { key: \"addVertex\", value: function addVertex(x, y) {var _this2 = this;\n\n      // add \"next\" point - which will follow the mouse motion \n      // until next click\n      this.poly.addPoint(x, y);\n\n      // add vertex-gizmo\n      var name = 'PolygonTool_vertexGizmo_' + this.vertexGizmos.length;\n      var vertex = new VertexGizmo(this.gizmoLayer, x, y, name);\n      this.vertexGizmos.push(vertex);\n\n      // For the start vertex-gizmo, we register a handler to finish the polygon when clicking it again\n      var isStartVertex = this.vertexGizmos.length === 1;\n      if (isStartVertex) {\n        vertex.container.addEventListener('click', function (e) {return _this2.handleStartVertexClicked(e);});\n      }\n\n      this.polyModified();\n    } }, { key: \"removeLastVertex\", value: function removeLastVertex()\n\n    {\n      if (!this.poly || !this.poly.vertexCount) {\n        return;\n      }\n\n      // Cancel edit if there was only the starting point.\n      if (this.poly.vertexCount <= 1) {\n        this.cancelEdit();\n        return;\n      }\n\n      this.poly.removePoint(this.poly.vertexCount - 1);\n\n      // remove last added vertex gizmo\n      var lastGizmo = this.vertexGizmos[this.vertexGizmos.length - 1];\n      lastGizmo.dtor();\n      this.vertexGizmos.pop();\n\n      this.polyModified();\n    } }, { key: \"finishPolygon\", value: function finishPolygon()\n\n    {\n\n      // remove all vertex gizmos\n      this.clearGizmos();\n\n      // Stop snapping to edges of this polygon\n      this.snapper.stopAngleSnapping();\n\n      // move polygon to main layer\n      this.runAction(new Actions.AddShape(this.layer, this.poly));\n\n      this.dispatchEvent({ type: PolygonTool.POLYGON_ADDED, polygon: this.poly });\n\n      // Start another polygon on next click\n      this.poly = null;\n    } }, { key: \"cancelEdit\", value: function cancelEdit()\n\n    {\n\n      if (this.lineRectTool.isDragging()) {\n        this.lineRectTool.cancelDrag();\n      }\n\n      if (this.poly) {\n        this.gizmoLayer.removeShape(this.poly);\n        this.poly = null;\n      }\n\n      this.clearGizmos();\n      this.snapper.stopAngleSnapping();\n    } }, { key: \"handleFinishKey\", value: function handleFinishKey(\n\n    event) {\n      if (!this.poly) {\n        return false;\n      }\n\n      // Avoid closing if it would result in a polygon that is degenerated to a line.\n      if (this.isPolygon() && this.poly.vertexCount < 3) {\n        return false;\n      }\n\n      this.finishPolygon();\n      return true;\n    } }, { key: \"handleKeyDown\", value: function handleKeyDown(\n\n    event, keyCode) {\n      var handled = _get(_getPrototypeOf(PolygonTool.prototype), \"handleKeyDown\", this).call(this, event, keyCode);\n\n      // delegate to rectTool\n      handled = this.lineRectTool.handleKeyDown(event, keyCode) || handled;\n\n      // Map event to any known key in this.keyMap\n      var funcKey = this.mapKey(event, this.keyMap);\n      switch (funcKey) {\n        case 'CANCEL_EDIT':this.cancelEdit();handled = true;break;\n        case 'REMOVE_LAST_VERTEX':this.removeLastVertex();handled = true;break;\n        case 'FINISH_EDIT':handled = this.handleFinishKey(event);break;}\n\n      return handled;\n    } }, { key: \"handleKeyUp\", value: function handleKeyUp(\n\n    event, keyCode) {\n      _get(_getPrototypeOf(PolygonTool.prototype), \"handleKeyUp\", this).call(this, event, keyCode);\n      this.lineRectTool.handleKeyUp(event, keyCode);\n    }\n\n    // If snapping has toggled on/off, we instantly \"replay\" hovering at current mouse position. Purpose is to\n    // give instant feedback (e.g. hide/show SnapLine gizmos and adjust position of preview edge)\n  }, { key: \"onSnappingToggled\", value: function onSnappingToggled(canvasX, canvasY) {\n      this.onHover(canvasX, canvasY);\n    } }, { key: \"mouseOnStartVertex\", value: function mouseOnStartVertex(\n\n    event) {\n      if (!this.vertexGizmos[0]) {\n        return false;\n      }\n\n      // Check if start vertex was clicked\n      var pLayer = this.layer.canvasToLayer(event.canvasX, event.canvasY);\n      return this.vertexGizmos[0].isUnderMouse;\n    } }, { key: \"setStartVertexHighlighted\", value: function setStartVertexHighlighted(\n\n    enable) {\n      if (this.vertexGizmos[0]) {\n        this.vertexGizmos[0].setSelected(enable);\n      }\n    } }, { key: \"getCursor\", value: function getCursor()\n\n    {\n      return 'crosshair';\n    } }]);return PolygonTool;}(EditToolBase);export { PolygonTool as default };\n\n\nPolygonTool.POLYGON_ADDED = \"polygonAdded\";\nPolygonTool.Mode = Mode;","function _typeof(obj) {if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return self;}function _get(target, property, receiver) {if (typeof Reflect !== \"undefined\" && Reflect.get) {_get = Reflect.get;} else {_get = function _get(target, property, receiver) {var base = _superPropBase(target, property);if (!base) return;var desc = Object.getOwnPropertyDescriptor(base, property);if (desc.get) {return desc.get.call(receiver);}return desc.value;};}return _get(target, property, receiver || target);}function _superPropBase(object, property) {while (!Object.prototype.hasOwnProperty.call(object, property)) {object = _getPrototypeOf(object);if (object === null) break;}return object;}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _inherits(subClass, superClass) {if (typeof superClass !== \"function\" && superClass !== null) {throw new TypeError(\"Super expression must either be null or a function\");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}import { Path, PolyBase, Polygon, Polyline } from '../EditShapes.js';\nimport { Actions } from '../Actions.js';\nimport { Math2D } from '../Math2D.js';\nimport { AreaLabel, EdgeMoveGizmo, LengthLabel, VertexGizmo } from '../CanvasGizmo.js';\nimport TangentGizmo from '../TangentGizmo.js';\n\nimport MoveTool from './MoveTool.js';\nimport EditToolBase from './EditToolBase.js';\n\nvar PolygonEditToolName = 'Edit2_PolygonEditTool';\n\nvar av = Autodesk.Viewing;\n\n// Allow to pick an edge within \nvar EdgeSelectTolerance = 17;\n\nvar vertexGizmoName = function vertexGizmoName(index) {\n  return 'PolygonEditTool_vertexGizmo_' + index.toString();\n};\n\nvar edgeGizmoName = function edgeGizmoName(index) {\n  return 'PolygonEditTool_edgeGizmo_' + index.toString();\n};\n\nvar updateVertexGizmoNames = function updateVertexGizmoNames(vertexGizmos) {\n  for (var i = 0; i < vertexGizmos.length; i++) {\n    var gizmo = vertexGizmos[i];\n    gizmo.setName(vertexGizmoName(i));\n    gizmo.update(false); // Make sure that the shapes get the name immediately - we don't need a layer update for this.\n  }\n};\n\n// Return 2D edge normal\nvar getLeftEdgeNormal = function getLeftEdgeNormal(poly, edgeIndex, target) {\n  // get start/end point of the edge\n  var vi1 = edgeIndex;\n  var vi2 = (edgeIndex + 1) % poly.vertexCount;\n  var v1 = poly.getPoint(vi1);\n  var v2 = poly.getPoint(vi2);\n\n  // get edge direction\n  target.subVectors(v2, v1).normalize();\n\n  // rotate by 90 degrees\n  var tmp = target.x;\n  target.x = -target.y;\n  target.y = tmp;\n\n  return target;\n};\n\n// Given a Polyline/Polygon and a vertex index, check if the two edges next to 'vertex' are collinear.\n// Returns false if vertex does not have 2 different neighbor edges.\nvar edgesCollinear = function edgesCollinear(poly, vertex) {\n\n  // check if neighbor edges exist\n  var isLine = poly.isPolyline();\n  var prevExists = poly.vertexCount >= 3 && !(isLine && vertex === 0);\n  var nextExists = poly.vertexCount >= 3 && !(isLine && vertex === poly.vertexCount - 1);\n\n  // If poly has only 1 edge or 'vertex' is an end vertex of a polyline, stop here.\n  if (!prevExists || !nextExists && prevEdge === nextEdge) {\n    return false;\n  }\n\n  // get points before and after vertex\n  var prevIndex = poly.prevIndex(vertex);\n  var nextIndex = poly.nextIndex(vertex);\n\n  var precision = 1.e-5;\n\n  var a = poly.getPoint(prevIndex);\n  var b = poly.getPoint(vertex);\n  var c = poly.getPoint(nextIndex);\n  return Math2D.isPointOnLine(b, a, c, precision);\n};var\n\nPolygonEditTool = /*#__PURE__*/function (_EditToolBase) {_inherits(PolygonEditTool, _EditToolBase);\n\n  function PolygonEditTool(ctx) {var _this;_classCallCheck(this, PolygonEditTool);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PolygonEditTool).call(this, ctx));\n\n    _this.moveTool = new MoveTool(ctx);\n\n    // Only set during dragging\n    _this.poly = null;\n\n    // Last drag position in layer coords\n    _this.lastDragPoint = new THREE.Vector2();\n\n    // Circles around each vertex\n    _this.vertexGizmos = [];\n\n    // Index of the vertex currently being dragged (or -1 if no dragging is active)\n    _this.draggedVertex = -1;\n\n    // When dragging a vertex, this stores a copy of its original position\n    _this.dragVertexStartPos = new THREE.Vector2();\n\n    // When dragging an edge, this stores a copy of its original position\n    _this.dragEdgeStartPos = {\n      a: new THREE.Vector2(),\n      b: new THREE.Vector2() };\n\n\n    // Index of the edge being dragged or -1\n    _this.draggedEdge = -1;\n\n    // In some cases, we duplicate start/end vertex when beginning to drag an edge. This may shift this.draggedEdge by 1 or 2.\n    // draggedEdgeBefore stores the original edgeIndex before duplicating vertices.\n    _this.draggedEdgeBefore = -1;\n\n    // Reused to store edge normal of dragged edge\n    _this.draggedEdgeNormal = new THREE.Vector2();\n\n    // Used when dragging an edge: Indicates whether we had to duplicate \n    // start/end vertex of the edge in order to move it.\n    _this.duplicateStartVertex = false;\n    _this.duplicateEndVertex = false;\n\n    // selectedVertex is the one that was last clicked on. It is set together with draggedVertex, \n    // but (unlike draggedVertex) keeps the same after dragEnd.\n    // selectedVertex is the one that is highlighted and which will be deleted when pressing backspace.\n    _this.selectedVertex = -1;\n\n    // When dragging vertices, we store the offset (in layer-coords) between the accurate click position and the center of the clicked vertex gizmo\n    // Stored in pixels.\n    _this.dragOffset = new THREE.Vector2(0, 0);\n\n    // Used to highlight a dragged edge in a different color by drawing a single-edge overlay.\n    _this.edgeGizmo = new Polyline();\n    _this.edgeGizmoShown = false; // indicates that gizmo is currently added to gizmoLayer\n\n    _this.keyMap.DeleteSelectedVertex = av.KeyCode.BACKSPACE;\n    _this.keyMap.CancelEdit = av.KeyCode.ESCAPE;\n\n    // Track mouse position in layer-coords\n    _this.mousePos = new THREE.Vector2();\n\n    // Create area label. Default hidden - showing is optional.\n    _this.areaLabel = new AreaLabel(null, _this.layer, ctx.unitHandler, false);\n\n    // Create length label. Default hidden - showing is optional.\n    _this.lengthLabel = new LengthLabel(null, _this.layer, ctx.unitHandler, false);\n\n    // {EdgeGizmo[]} Array of Gizmos used for moving edges. \n    _this.edgeGizmos = [];\n\n    // {TangentGizmo[]} Array of TangentGizmos for BezierArcs\n    _this.tangentGizmos = [];\n\n    // If true, we apply hover-highlight on shape under mouse.\n    _this.hoverEnabled = true;return _this;\n  }_createClass(PolygonEditTool, [{ key: \"setHoverEnabled\", value: function setHoverEnabled(\n\n    enabled) {\n\n      // On disable, make sure that we don't leave any highlight behind\n      if (this.hoverEnabled && !enabled) {\n        this.selection.setHovered(null);\n      }\n\n      this.hoverEnabled = enabled;\n    }\n\n    // Enable the area labels (public API)\n  }, { key: \"setAreaLabelVisible\", value: function setAreaLabelVisible(visible) {\n      this.areaLabel.setVisible(visible);\n    }\n\n    // Enable the length labels (public API)\n  }, { key: \"setLengthLabelVisible\", value: function setLengthLabelVisible(visible) {\n      this.lengthLabel.setVisible(visible);\n    } }, { key: \"getName\", value: function getName()\n\n    {\n      return PolygonEditToolName + this.nameSuffix;\n    } }, { key: \"deactivate\", value: function deactivate()\n\n    {\n      _get(_getPrototypeOf(PolygonEditTool.prototype), \"deactivate\", this).call(this);\n      this.reset();\n    } }, { key: \"createVertexGizmos\", value: function createVertexGizmos()\n\n    {\n      for (var i = 0; i < this.poly.points.length; i++) {\n        // create new vertex gizmo\n        var p = this.poly.points[i];\n        var vertex = new VertexGizmo(this.gizmoLayer, p.x, p.y, vertexGizmoName(i), this.poly.style);\n        this.vertexGizmos.push(vertex);\n\n        // We implement drag-behavior, so we want hover-highlight\n        vertex.setHoverEnabled(true);\n      }\n    }\n\n    // Make sure that VertexGizmos reflect latest state of the shape\n  }, { key: \"updateVertexGizmos\", value: function updateVertexGizmos() {\n      var vertexCount = this.poly ? this.poly.vertexCount : 0;\n\n      // If just the positions changed (e.g. while moving the shape), we just update the positions.\n      var p = new THREE.Vector2();\n      if (vertexCount == this.vertexGizmos.length) {\n        for (var i = 0; i < vertexCount; i++) {\n          this.poly.getPoint(i, p);\n          this.vertexGizmos[i].setPosition(p.x, p.y);\n        }\n      } else {\n        // just re-create all VertexGizmos\n        this.clearVertexGizmos();\n        this.createVertexGizmos();\n      }\n    } }, { key: \"clearVertexGizmos\", value: function clearVertexGizmos()\n\n    {\n      for (var i = 0; i < this.vertexGizmos.length; i++) {\n        this.vertexGizmos[i].dtor();\n      }\n      this.vertexGizmos.length = 0;\n    } }, { key: \"clearEdgeGizmos\", value: function clearEdgeGizmos()\n\n    {\n      for (var i = 0; i < this.edgeGizmos.length; i++) {\n        this.edgeGizmos[i].dtor();\n      }\n      this.edgeGizmos.length = 0;\n    }\n\n    // Update edgeGizmos to this.poly or hide all if poly is null\n  }, { key: \"createEdgeGizmos\", value: function createEdgeGizmos() {\n      // Make sure that we don't leak outdated ones\n      this.clearEdgeGizmos();\n\n      // Create gizmo per edge\n      var edgeCount = this.poly ? this.poly.getEdgeCount() : 0;\n      for (var i = 0; i < edgeCount; i++) {\n        var gizmo = new EdgeMoveGizmo(this.layer, edgeGizmoName(i));\n        gizmo.attachToEdge(this.poly, i);\n        this.edgeGizmos.push(gizmo);\n      }\n    }\n\n    // Make sure that only the vertexGizmo is only highlighted for the selectedVertex (if any)\n  }, { key: \"updateVertexHighlighting\", value: function updateVertexHighlighting() {\n      for (var i = 0; i < this.vertexGizmos.length; i++) {\n        this.vertexGizmos[i].setSelected(i === this.selectedVertex);\n      }\n    }\n\n    // Update vertex-gizmos, edge gizmos (for edge highlighting), and tangent gizmos.\n  }, { key: \"updateAllGizmos\", value: function updateAllGizmos() {\n      this.updateVertexGizmos();\n      this.createEdgeGizmos();\n      this.createTangentGizmos();\n    } }, { key: \"setSelectedVertex\", value: function setSelectedVertex(\n\n    index) {\n      this.selectedVertex = this.poly ? index : -1;\n      this.updateVertexHighlighting();\n    }\n\n    // Returns the index of the vertex gizmo at the given position (or -1 if no vertexGizmo is hit)\n  }, { key: \"getVertexIndex\", value: function getVertexIndex(x, y) {\n      for (var i = 0; i < this.vertexGizmos.length; i++) {\n        var gizmo = this.vertexGizmos[i];\n        if (gizmo.isUnderMouse) {\n          return i;\n        }\n      }\n      return -1;\n    }\n\n    // Returns the index of the edge gizmo under mouse (or -1 if no EdgeGizmo is hit)\n    // (x,y) are in layer-coords\n  },\n  \n  { key: \"getEdgeIndex\", value: function getEdgeIndex(x, y) {\n      for (var i = 0; i < this.edgeGizmos.length; i++) {\n        if (this.edgeGizmos[i].isUnderMouse) {\n          return i;\n        }\n      }\n      return -1;\n    }\n\n    // Finishes editing of a previous polygon\n  }, \n  \n  \n  { key: \"reset\", value: function reset() {\n\n      if (!this.poly) {\n        return;\n      }\n\n      // Clear any gizmos from previous polygon\n      this.clearVertexGizmos();\n      this.clearEdgeGizmos();\n      this.clearTangentGizmos();\n\n      // Cleanup area and length labels\n      this.areaLabel.setShape(null);\n      this.lengthLabel.setShape(null);\n\n      this.poly = null;\n      this.draggedVertex = -1;\n      this.draggedEdge = -1;\n      this.selectedVertex = -1;\n\n      this.snapper.stopAngleSnapping();\n    }\n\n    // Selects a new polygon / polyline for editing\n  }, \n  \n  { key: \"setEditPoly\", value: function setEditPoly(poly) {\n\n      this.reset();\n\n      if (poly) {\n        this.poly = poly;\n        this.updateAllGizmos();\n      }\n\n      // Sync label with polygon or polyline. If this.poly is null, it will be hidden\n      var polygon = poly && poly.isPolygon() ? poly : null;\n      this.areaLabel.setShape(polygon);\n      var polyline = poly && poly.isPolyline() ? poly : null;\n      this.lengthLabel.setShape(polyline);\n    } }, \n    \n    { key: \"insertPoint\", value: function insertPoint(index, p) {\n\n      this.runAction(new Actions.AddVertex(this.layer, this.poly, index, p));\n\n      // insert new VertexGizmo\n      var gizmo = new VertexGizmo(this.gizmoLayer, p.x, p.y, undefined, this.poly.style);\n      gizmo.setHoverEnabled(true);\n\n      // update vertex gizmos\n      this.vertexGizmos.splice(index, 0, gizmo);\n      updateVertexGizmoNames(this.vertexGizmos);\n\n      // removeupdate edge gizmos and tangent gizmos\n      this.updateAllGizmos();\n\n      // Display polygon change and new gizmo\n      this.layer.update();\n    } }, \n    \n    \n    { key: \"removePoint\", value: function removePoint(index) {\n\n      // If removing a vertex would make the shape degenerate, remove it completely\n      var minVerts = this.poly.isPolygon() ? 3 : 2;\n      if (this.poly.vertexCount <= minVerts) {\n        this.runAction(new Actions.RemoveShape(this.layer, this.poly));\n        this.reset();\n        return;\n      }\n\n      this.runAction(new Actions.RemoveVertex(this.layer, this.poly, index));\n\n      // update vertex gizmos\n      var gizmo = this.vertexGizmos.splice(index, 1)[0];\n      updateVertexGizmoNames(this.vertexGizmos);\n\n      // update edge gizmos and tangent gizmos\n      this.updateAllGizmos();\n\n      // Display changed polygon and removed vertex gizmo\n      gizmo.dtor();\n\n      // Make sure that this vertex is not selected anymore\n      if (this.selectedVertex === index) {\n        this.setSelectedVertex(-1);\n      }\n\n      this.layer.update();\n    } }, \n    \n    { key: \"startDragVertex\", value: function startDragVertex(event, draggedVertex) {\n\n      // Configure angle snapping to consider latest state of the polygon\n      this.snapper.startAngleSnapping(this.poly.clone(), draggedVertex);\n\n      this.draggedVertex = draggedVertex;\n\n      // Store offset between exact mouse pos and the vertex we are dragging\n      var vpos = this.poly.points[this.draggedVertex];\n      var vposScreen = this.layer.layerToCanvas(vpos.x, vpos.y);\n      this.dragOffset.set(vposScreen.x - event.canvasX, vposScreen.y - event.canvasY);\n\n      // highlight the vertex we clicked on\n      this.setSelectedVertex(this.draggedVertex);\n\n      this.lastDragPoint.copy(vpos);\n      this.dragVertexStartPos.copy(vpos);\n    } }, \n    \n    { key: \"moveDragVertex\", value: function moveDragVertex(canvasX, canvasY) {\n      // Note that the vertex we are dragging does not always match exactly with the mouse position. E.g., we may have picked the bottom-left boundary of a vertex gizmo at drag-start.\n      var x = canvasX + this.dragOffset.x;\n      var y = canvasY + this.dragOffset.y;\n\n      // get delta between last and current position\n      var p = this.getSnapPosition(x, y);\n      var dx = p.x - this.lastDragPoint.x;\n      var dy = p.y - this.lastDragPoint.y;\n\n      // apply this offset to polygon point\n      var point = this.poly.points[this.draggedVertex];\n      this.poly.updatePoint(this.draggedVertex, point.x + dx, point.y + dy);\n\n      // re-center gizmo at new point position\n      var vertexGizmo = this.vertexGizmos[this.draggedVertex];\n      vertexGizmo.setPosition(point.x, point.y);\n\n      this.gizmoLayer.update(); // we moved the vertex gizmo\n      this.layer.update(); // we changed the main polygon\n\n      this.lastDragPoint.copy(p);\n    } }, { key: \"restoreDragVertex\", value: function restoreDragVertex()\n\n    {\n      this.poly.updatePoint(this.draggedVertex, this.dragVertexStartPos.x, this.dragVertexStartPos.y);\n    } }, \n    \n    \n    { key: \"endDragVertex\", value: function endDragVertex()\n    {\n\n      // First, restore \"before move\" position of the vertex\n      this.restoreDragVertex();\n\n      var pBefore = this.dragVertexStartPos;\n      var pAfter = this.lastDragPoint;\n\n      // don't add extra undo-operation if the vertex was hardly moved at all\n      var minDist = this.layer.getUnitsPerPixel() * 0.5;\n      var moved = pBefore.distanceTo(pAfter) > minDist;\n\n      if (moved) {\n        // Finalize vertex-move\n        this.runAction(new Actions.MoveVertex(this.layer, this.poly, this.draggedVertex, pAfter));\n      }\n\n      this.draggedVertex = -1;\n      this.snapper.clearSnappingGizmos();\n    } }, \n    \n    \n    { key: \"startDragEdge\", value: function startDragEdge(event, draggedEdge) {\n\n      // store edge normal for the edge being dragged\n      this.draggedEdgeNormal = getLeftEdgeNormal(this.poly, draggedEdge, this.draggedEdgeNormal);\n      this.lastDragPoint.copy(this.layer.canvasToLayer(event.canvasX, event.canvasY));\n\n      // store original position of the two edge vertices\n      var ia = draggedEdge;\n      var ib = (draggedEdge + 1) % this.poly.vertexCount;\n      this.dragEdgeStartPos.a.copy(this.poly.getPoint(ia));\n      this.dragEdgeStartPos.b.copy(this.poly.getPoint(ib));\n\n      // Check if we need to duplicate start and/or end vertex of the edge.\n      // This happens when the neighbor edges are collinear with the ones being moved.\n      this.duplicateStartVertex = edgesCollinear(this.poly, ia);\n      this.duplicateEndVertex = edgesCollinear(this.poly, ib);\n\n      // Duplicate start/end vertices if necessary\n      Actions.MoveEdge.duplicateVertices(this.poly, draggedEdge, this.duplicateStartVertex, this.duplicateEndVertex);\n\n      // Store initial edge index (not considering any duplicated vertices)\n      this.draggedEdgeBefore = draggedEdge;\n\n      // Select the edge - using its index after duplicating vertices\n      var newEdgeIndex = Actions.MoveEdge.getNewEdgeIndex(this.poly, draggedEdge, this.duplicateStartVertex, this.duplicateEndVertex);\n      this.setSelectedEdge(newEdgeIndex);\n\n      // Make sure that all gizmos are updated if we duplicated vertices\n      if (this.duplicateStartVertex || this.duplicateEndVertex) {\n        this.updateAllGizmos();\n      }\n    } }, \n    \n    { key: \"moveDragEdge\", value: function moveDragEdge(event) {\n\n      // get delta between last and current position\n      var p = this.layer.canvasToLayer(event.canvasX, event.canvasY);\n      var delta = p.clone().sub(this.lastDragPoint);\n\n      // get indices of prev and next edge\n      var prevEdgeIndex = this.poly.prevIndex(this.draggedEdge);\n      var nextEdgeIndex = this.poly.nextIndex(this.draggedEdge);\n\n      // get previous, current, and next edge vertices\n      var prevEdgeA = new THREE.Vector2();\n      var prevEdgeB = new THREE.Vector2();\n      var curEdgeA = new THREE.Vector2();\n      var curEdgeB = new THREE.Vector2();\n      var nextEdgeA = new THREE.Vector2();\n      var nextEdgeB = new THREE.Vector2();\n      this.poly.getEdge(prevEdgeIndex, prevEdgeA, prevEdgeB);\n      this.poly.getEdge(this.draggedEdge, curEdgeA, curEdgeB);\n      this.poly.getEdge(nextEdgeIndex, nextEdgeA, nextEdgeB);\n\n      // Compute line after applying edge move offset\n      curEdgeA.add(delta);\n      curEdgeB.add(delta);\n\n      // Compute directions for each edge to intersect\n      var prevEdgeDir = Math2D.getEdgeDirection(prevEdgeA, prevEdgeB);\n      var curEdgeDir = Math2D.getEdgeDirection(curEdgeA, curEdgeB);\n      var nextEdgeDir = Math2D.getEdgeDirection(nextEdgeA, nextEdgeB);\n\n      // If we added extra vertices, the (newly inserted) neighbor edges will be degenerated\n      // and the edge directions will be invalid. In this case, we choose the edge direction\n      // perpendicular to the edge that we are dragging.\n      if (this.duplicateStartVertex) prevEdgeDir.copy(this.draggedEdgeNormal);\n      if (this.duplicateEndVertex) nextEdgeDir.copy(this.draggedEdgeNormal);\n\n      // Compute new edge endpoints as intersection of prev/next edge with the moved line\n      var newEdgeA = new THREE.Vector2();\n      var newEdgeB = new THREE.Vector2();\n\n      if (!Math2D.intersectLines(prevEdgeA, prevEdgeDir, curEdgeA, curEdgeDir, newEdgeA) ||\n      !Math2D.intersectLines(nextEdgeA, nextEdgeDir, curEdgeA, curEdgeDir, newEdgeB)) {\n        return;\n      }\n\n      // get indices of the points to modify\n      var ia = this.draggedEdge;\n      var ib = this.poly.nextIndex(ia);\n\n      // The intersections gives us the new position for the edge vertices\n      this.poly.updatePoint(ia, newEdgeA.x, newEdgeA.y);\n      this.poly.updatePoint(ib, newEdgeB.x, newEdgeB.y);\n\n      // update affected vertex gizmos\n      this.vertexGizmos[ia].setPosition(newEdgeA.x, newEdgeA.y);\n      this.vertexGizmos[ib].setPosition(newEdgeB.x, newEdgeB.y);\n\n      this.gizmoLayer.update();\n      this.layer.update();\n\n      this.lastDragPoint.copy(p);\n\n      // We moved the edge => Keep gizmo in-sync\n      this.updateEdgeGizmo();\n    }\n\n    // While dragging an edge, this function restores the original position at drag start\n  }, { key: \"restoreDragEdge\", value: function restoreDragEdge() {\n      var a = this.dragEdgeStartPos.a;\n      var b = this.dragEdgeStartPos.b;\n\n      var ia = this.draggedEdge;\n      var ib = this.poly.nextIndex(ia);\n\n      this.poly.updatePoint(ia, a.x, a.y);\n      this.poly.updatePoint(ib, b.x, b.y);\n\n      // Revert insertion of extra vertices\n      Actions.MoveEdge.revertDuplicateVertices(this.poly, this.draggedEdgeBefore, this.duplicateStartVertex, this.duplicateEndVertex);\n    } }, { key: \"endDragEdge\", value: function endDragEdge()\n\n    {\n\n      // get final position of the edge vertices\n      var ia = this.draggedEdge;\n      var ib = this.poly.nextIndex(ia);\n\n      var newPos1 = this.poly.getPoint(ia);\n      var newPos2 = this.poly.getPoint(ib);\n\n      this.restoreDragEdge();\n\n      // If the edge was hardly moved at all, we drop the operation. Otherwise, the only effect would be to add invisible\n      // vertex duplicates.\n      var delta = this.dragEdgeStartPos.a.distanceTo(newPos1) * this.layer.getPixelsPerUnit();\n      if (delta < 3) {\n        return;\n      }\n\n      this.runAction(new Actions.MoveEdge(this.layer, this.poly, this.draggedEdgeBefore, newPos1, newPos2, this.duplicateStartVertex, this.duplicateEndVertex));\n      this.setSelectedEdge(-1);\n\n      // update all gizmos\n      this.updateAllGizmos();\n    } }, { key: \"edgeMovePossible\", value: function edgeMovePossible()\n\n    {\n      return this.poly && this.poly.vertexCount > 2;\n    }\n\n    // If the given mousePos (in layerCoords) is located close to an edge (not edge gizmo), \n    // the edge index is returned, otherwise -1.\n  }, { key: \"findEdgeUnderMouse\", value: function findEdgeUnderMouse(pos) {\n      var precision = EdgeSelectTolerance * this.layer.getUnitsPerPixel();\n      return this.poly ? this.poly.findEdgeIndex(pos, precision) : -1;\n    }\n\n    // Checks if a point p can be inserted to split the given edge. If so, it returns the projected\n    // position that is located exactly on edge to be split.\n    //\n    //  @param {Vector2} p         - pos in layer coords - usually close to given edge.\n    //  @param {number}  edgeIndex - index of the edge to be split by this vertex\n    //  @returns {Vector2|null} Adjusted position where the new point will be added.\n  }, { key: \"getNewVertexPosition\", value: function getNewVertexPosition(p, edgeIndex) {\n\n      if (!this.poly || !this.poly.edgeIndexValid(edgeIndex)) {\n        return null;\n      }\n\n      // get edge\n      var a = new THREE.Vector2();\n      var b = new THREE.Vector2();\n      this.poly.getEdge(edgeIndex, a, b);\n\n      // get edge direction\n      var edgeDir = Math2D.getEdgeDirection(a, b);\n\n      // compute projection of p to the line spanned by the edge\n      var newPos = p.clone();\n      Math2D.projectToLine(newPos, a, edgeDir);\n\n      // Reject position if the projection is outside the segment\n      if (!Math2D.isPointOnEdge(newPos, a, b, 0.0001)) {\n        return null;\n      }\n\n      // Return position where to insert the new vertex\n      return newPos;\n    } }, { key: \"handleButtonDown\", value: function handleButtonDown(\n\n    event, button) {\n      // Support suppressing mouse buttons by holding a key\n      if (this.ignoreDragging) {\n        return false;\n      }\n\n      _get(_getPrototypeOf(PolygonEditTool.prototype), \"handleButtonDown\", this).call(this, event, button);\n\n      // Only respond to left mouse button.\n      if (!button == 0) {\n        return false;\n      }\n\n      var p = this.layer.canvasToLayer(event.canvasX, event.canvasY);\n      this.mousePos.copy(p);\n\n      // If we hit an existing vertex, start dragging it\n      var draggedVertex = this.getVertexIndex(p.x, p.y);\n      if (draggedVertex != -1) {\n        this.startDragVertex(event, draggedVertex);\n        return true;\n      }\n\n      // Handle Vertex-Add: Check if we hold ctrl and hit an edge\n      var newVertex = -1;\n      if (event.ctrlKey) {\n        // Is mouse close to an edge and can be projected onto that edge?\n        var edgeIndex = this.findEdgeUnderMouse(this.mousePos);\n        var newVertexPos = this.getNewVertexPosition(this.mousePos, edgeIndex);\n        if (newVertexPos) {\n          // We don't insert exactly at the mouse position. Instead, new vertices\n          // are always located exactly on the edge being split. Therefore, newVertexPos is\n          // usually slightly different from mousePos.\n\n          // insert new vertex after edge starting point\n          newVertex = edgeIndex + 1;\n          this.insertPoint(newVertex, newVertexPos);\n\n          // Allow to drag the new vertex immediately\n          this.startDragVertex(event, newVertex);\n\n          return true;\n        }\n      }\n\n      // Reset vertex-highlighting: No vertex is selected anymore.\n      this.setSelectedVertex(-1);\n\n      // Handle dragging of TangentGizmo control points for Bezier arcs.\n      for (var i = 0; i < this.tangentGizmos.length; i++) {\n        var gizmo = this.tangentGizmos[i];\n        if (gizmo.onButtonDown(event.canvasX, event.canvasY)) {\n          // We started dragging of a Bezier control point\n          return true;\n        }\n      }\n\n      // Handle Edge-Move: If we hit an EdgeGizmo, start dragging it\n      var selectedEdgeGizmo = this.getEdgeIndex(p.x, p.y);\n      if (this.edgeMovePossible() && selectedEdgeGizmo !== -1) {\n        this.startDragEdge(event, selectedEdgeGizmo);\n        return true;\n      }\n\n      // If we just clicked inside the already active polygon, delegate to MoveTool\n      if (this.poly) {\n        // Note: this.poly may be a Polyline. To allow moving it, it's essential to use a hitRadius for picking.\n        var hitRadius = this.layer.getLineHitRadius(this.poly);\n        if (this.poly.hitTest(p.x, p.y, hitRadius)) {\n          this.moveTool.startDrag(this.poly, p);\n          return true;\n        }\n      }\n\n      // Check if we selected a new polygon\n      var newPolygon = this.layer.hitTest(p.x, p.y);\n\n      // If the clicked object is neither polygon nor polyline, ignore it.\n      var isPolygon = newPolygon instanceof Polygon;\n      var isPolyline = newPolygon instanceof Polyline;\n      var isPath = newPolygon instanceof Path;\n      if (!isPolygon && !isPolyline && !isPath) {\n        newPolygon = null;\n      }\n\n      // Set selection to current polygon. This will also trigger setEditPoly() \n      // via selectionChanged event.\n      this.selection.selectOnly(newPolygon);\n\n      return Boolean(this.poly);\n    } }, \n    \n    { key: \"handleSingleClick\", value: function handleSingleClick(e) {\n      _get(_getPrototypeOf(PolygonEditTool.prototype), \"handleSingleClick\", this).call(this, e);\n      console.log('poly', this.poly)\n      return Boolean(this.poly);\n    } }, \n    \n    { key: \"handleMouseMove\", value: function handleMouseMove(event) {\n      _get(_getPrototypeOf(PolygonEditTool.prototype), \"handleMouseMove\", this).call(this, event);\n\n      this.mousePos.copy(this.layer.canvasToLayer(event.canvasX, event.canvasY));\n      this.updateMouseOverHighlights();\n\n      if (!this.poly) {\n        return false;\n      }\n\n      if (this.draggedVertex != -1) {\n        this.moveDragVertex(event.canvasX, event.canvasY);\n        return true;\n      }\n\n      if (this.draggedEdge != -1) {\n        this.moveDragEdge(event);\n      }\n\n      if (this.moveTool.isDragging()) {\n        this.moveTool.moveDrag(this.mousePos);\n\n        // keep vertex-gizmos in-sync\n        this.updateVertexGizmos();\n      }\n\n      // Check if we are dragging an endpoint of any tangent gizmo\n      var tangentGizmo = this.findDraggedTangentGizmo();\n      if (tangentGizmo) {\n        tangentGizmo.moveDrag(event.canvasX, event.canvasY);\n      }\n\n      return false;\n    } }, { key: \"handleButtonUp\", value: function handleButtonUp(\n\n    event, button) {\n      _get(_getPrototypeOf(PolygonEditTool.prototype), \"handleButtonUp\", this).call(this, event, button);\n\n      if (this.draggedVertex !== -1) {\n        this.endDragVertex();\n        return true;\n      }\n\n      if (this.draggedEdge !== -1) {\n        this.endDragEdge();\n        return true;\n      }\n\n      if (this.moveTool.isDragging()) {\n        var p = this.layer.canvasToLayer(event.canvasX, event.canvasY);\n\n        // Avoid triggering the handler for external modifications, because we control the MoveTool ourselves\n        this.ignoreActions = true;\n        this.moveTool.endDrag(p);\n        this.ignoreActions = false;\n\n        // keep vertex-gizmos in-sync\n        this.updateVertexGizmos();\n        return true;\n      }\n\n      // Check if we are dragging an endpoint of any tangent gizmo\n      var tangentGizmo = this.findDraggedTangentGizmo();\n      if (tangentGizmo) {\n        tangentGizmo.endDrag(event.canvasX, event.canvasY);\n      }\n\n      // Consider all left-button events as handled. E.g., if dragging was cancelled using Esc,\n      // we do nothing here, but letting the mouseUp pass to navigation classes would cause camera jumps.\n      return !this.ignoreDragging && this.poly && button == 0;\n    }\n\n    // Exclude currently edited polygon from snapping: The polygon shouldn't snap to itself, but rather\n    // to geometry below it.\n  }, { key: \"snappingFilter\", value: function snappingFilter(shape) {\n      return shape !== this.poly;\n    }\n\n    // If selection changes (may also be triggered outside this tool), we choose the selected polyon for editing\n  }, { key: \"onSelectionChanged\", value: function onSelectionChanged() {\n      var selected = this.selection.getSelectedShapes();\n      var shape = selected[0];\n      if (shape instanceof PolyBase) {\n        this.setEditPoly(shape);\n      } else {\n        this.setEditPoly(null);\n      }\n    } }, { key: \"handleKeyDown\", value: function handleKeyDown(\n\n    event, keyCode) {\n      var handled = _get(_getPrototypeOf(PolygonEditTool.prototype), \"handleKeyDown\", this).call(this, event, keyCode);\n\n      if (keyCode === this.keyMap.DeleteSelectedVertex) {\n        if (this.poly && this.selectedVertex !== -1) {\n          this.removePoint(this.selectedVertex);\n          handled = true;\n        }\n      }\n\n      if (keyCode === this.keyMap.CancelEdit) {\n        this.cancelDrag();\n        return true;\n      }\n\n      return handled;\n    } }, { key: \"onSnappingToggled\",\n\n    // If snapping has toggled on/off, we instantly \"replay\" hovering at current mouse position. Purpose is to\n    // give instant feedback (e.g. hide/show SnapLine gizmos and adjust position of preview edge)\n    value: function onSnappingToggled(canvasX, canvasY) {\n\n      // If we are dragging a vertex, toggling snapping will affect the result and \n      // we should update line gizmos and snapping lines.\n      if (this.draggedVertex !== -1) {\n        this.moveDragVertex(canvasX, canvasY);\n      }\n    } }, { key: \"cancelDrag\", value: function cancelDrag()\n\n    {\n\n      var needsUpdate = false;\n\n      if (this.draggedVertex !== -1) {\n        this.restoreDragVertex();\n        this.draggedVertex = -1;\n        needsUpdate = true;\n      }\n\n      if (this.draggedEdge !== -1) {\n        this.restoreDragEdge();\n        this.draggedEdge = -1;\n        needsUpdate = true;\n      }\n\n      if (this.moveTool.isDragging()) {\n        this.moveTool.cancelDrag();\n        this.updateVertexGizmos();\n      }\n\n      if (needsUpdate) {\n        this.layer.update();\n        this.updateAllGizmos();\n      }\n\n      this.snapper.clearSnappingGizmos();\n    } }, { key: \"handleExternalAction\", value: function handleExternalAction()\n\n    {\n      // If nothing is active, we don't need to care\n      if (!this.poly) {\n        return;\n      }\n\n      // If shape was removed, reset state\n      var shapeFound = Boolean(this.layer.findShapeById(this.poly.id));\n      if (!shapeFound) {\n        this.reset();\n      }\n\n      // Sync gizmos in case vertices were modified\n      this.updateAllGizmos();\n\n      // Stop any ongoing drag-operations (e.g., an undo operation might have removed the vertex that we are just dragging)\n      this.cancelDrag();\n\n      this.snapper.clearSnappingGizmos();\n    }\n\n    // Make sure that EdgeGizmo is up-to-date: Its purpose is to highlight the edge being dragged.\n  }, { key: \"updateEdgeGizmo\", value: function updateEdgeGizmo() {\n\n      // Check if mouse is on an edge gizmo\n      var edgeUnderMouse = this.getEdgeIndex(this.mousePos.x, this.mousePos.y);\n\n      // Check if a vertex gizmo is under mouse or being dragged. If so, it has precedence, so that we don't highlight the edge anymore\n      var vertexUnderMouse = this.getVertexIndex(this.mousePos.x, this.mousePos.y);\n      var vertexHighlighted = vertexUnderMouse != -1 || this.draggedVertex != -1;\n      var edgeMovePossible = this.edgeMovePossible();\n\n      // Check if we need any highlight\n      var edgeSelected = this.poly && this.draggedEdge != -1;\n      var edgeHovered = edgeMovePossible && edgeUnderMouse != -1 && !vertexHighlighted;\n      var gizmoNeeded = edgeSelected || edgeHovered;\n\n      // Make sure that edge gizmo is shown if needed\n      if (gizmoNeeded && !this.edgeGizmoShown) {\n        this.gizmoLayer.addShape(this.edgeGizmo);\n        this.edgeGizmoShown = true;\n      } else\n      if (!gizmoNeeded && this.edgeGizmoShown) {\n        this.gizmoLayer.removeShape(this.edgeGizmo);\n        this.edgeGizmoShown = false;\n      }\n\n      // If we just had to hide it, we are done here\n      if (!gizmoNeeded) {\n        return;\n      }\n\n      // Update edge gizmo position\n      var edgeToHighlight = edgeSelected ? this.draggedEdge : edgeUnderMouse;\n\n      // get the two vertex positions of the edge\n      var a = new THREE.Vector2();\n      var b = new THREE.Vector2();\n      this.poly.getEdge(edgeToHighlight, a, b);\n\n      // copy values to edge gizmo\n      this.edgeGizmo.makeLine(a.x, a.y, b.x, b.y);\n\n      // Adopt lineWidth from selected polygon\n      this.edgeGizmo.style.lineWidth = this.poly.style.lineWidth;\n      this.edgeGizmo.style.isScreenSpace = this.poly.style.isScreenSpace;\n\n      if (edgeSelected) {\n        // Override color by green\n        this.edgeGizmo.style.lineColor = 'rgb(0, 255, 0)';\n        this.edgeGizmo.style.lineAlpha = 1.0;\n      } else {\n        // Just make it a bit brighter using a semitransparent white overlay\n        this.edgeGizmo.style.lineColor = 'rgb(0, 255, 0)';\n        this.edgeGizmo.style.lineAlpha = 0.5;\n      }\n\n      this.gizmoLayer.update();\n    } }, { key: \"setSelectedEdge\", value: function setSelectedEdge(\n\n    edgeIndex) {\n      this.draggedEdge = edgeIndex;\n      this.updateEdgeGizmo();\n\n      // Update selection state for edge gizmos\n      for (var i = 0; i < this.edgeGizmos.length; i++) {\n        var gizmo = this.edgeGizmos[i];\n        gizmo.setSelected(i == this.draggedEdge);\n      }\n    } }, { key: \"updateMouseOverHighlights\", value: function updateMouseOverHighlights()\n\n    {\n      this.updateEdgeGizmo();\n\n      // Handle mouse-over highlighting for shapes\n      if (this.hoverEnabled) {\n        var shape = this.layer.hitTest(this.mousePos.x, this.mousePos.y);\n        this.selection.setHoveredId(shape ? shape.id : 0);\n      }\n    } }, { key: \"getCursor\", value: function getCursor()\n\n    {\n\n      if (!this.poly) {\n        return;\n      }\n\n      // Note: Vertex gizmos and edge gizmos are separate DomElements and define own mouse cursors via style.\n\n      var p = this.mousePos;\n\n      // Indicate: \"Moving whole shape\"\n      // While dragging, keep the move-cursor, even if the mouse is temporarily leaving polygon and gizmos\n      if (this.moveTool.isDragging()) {\n        return 'move';\n      }\n\n      // Indicate: \"Moving a gizmo\". Currently, we use the same as for shape move. Note that\n      //           the cursor for gizmo dragging must be consistent with the one we have if the mouse is on the gizmo.\n      //           Otherwise, the mouse cursor would change its state when temporarily leaving the gizmo on fast moves.\n      if (this.draggedVertex != -1 || this.draggedEdge != -1) {\n        return 'move';\n      }\n\n      // Indicate: \"Click to insert new vertex\"\n      //\n      // If we are holding down Ctrl and hover over an edge, clicking would insert a vertex.\n      var ctrlHold = this.keyState[av.KeyCode.CONTROL];\n      if (ctrlHold) {\n        var precision = EdgeSelectTolerance * this.layer.getUnitsPerPixel();\n        var edgeIndex = this.poly ? this.poly.findEdgeIndex(this.mousePos, precision) : -1;\n        if (edgeIndex !== -1) {\n          return 'copy';\n        }\n      }\n\n      // Are we about to move a shape?\n      var hitRadius = this.layer.getLineHitRadius(this.poly);\n      var moveShape = this.poly.hitTest(p.x, p.y, hitRadius);\n      if (moveShape) {\n        return 'move';\n      }\n\n      // => Just default cursor\n      return undefined;\n    } }, { key: \"clearTangentGizmos\", value: function clearTangentGizmos()\n\n    {\n      this.tangentGizmos.forEach(function (g) {return g.dtor();});\n      this.tangentGizmos.length = 0;\n    } }, { key: \"createTangentGizmos\", value: function createTangentGizmos()\n\n    {\n\n      // Clear any previous gizmos (if any)\n      this.clearTangentGizmos();\n\n      if (!this.poly || !this.poly.isPath()) {\n        return;\n      }\n\n      // For simplicity, we create a TangentGizmo for every vertex.\n      // If a vertex has no adjacent arcs, it will be hidden anyway.   \n      for (var i = 0; i < this.poly.points.length; i++) {\n        this.tangentGizmos.push(new TangentGizmo(this.poly, i, this.layer, this.gizmoLayer));\n      }\n    }\n\n    // If any tangent gizmo is being dragged, it is returned.\n    // Result is null if nothing is dragged.\n  }, { key: \"findDraggedTangentGizmo\", value: function findDraggedTangentGizmo() {\n      return this.tangentGizmos.find(function (gizmo) {return gizmo.isDragging();});\n    } }]);return PolygonEditTool;}(EditToolBase);export { PolygonEditTool as default };","function _typeof(obj) {if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {return call;}return _assertThisInitialized(self);}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return self;}function _inherits(subClass, superClass) {if (typeof superClass !== \"function\" && superClass !== null) {throw new TypeError(\"Super expression must either be null or a function\");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}import { Style, Circle } from '../EditShapes.js';\nimport { Actions } from '../Actions.js';\nimport EditToolBase from './EditToolBase';\n\nvar InsertSymbolToolName = \"Edit2_InsertSymbolTool\";var\n\nInsertSymbolTool = /*#__PURE__*/function (_EditToolBase) {_inherits(InsertSymbolTool, _EditToolBase);\n\n  function InsertSymbolTool(ctx) {var _this;_classCallCheck(this, InsertSymbolTool);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(InsertSymbolTool).call(this, ctx));\n\n    Autodesk.Viewing.EventDispatcher.prototype.apply(_assertThisInitialized(_this));\n\n    _this.symbol = new Circle(\n      0,\n      0,\n      0.2,\n      new Style({\n        fillAlpha: 1.0,\n        lineWidth: 0.01,\n        fillColor: 'rgb(255, 255, 0)' })\n    );\n\n    return _this;\n  }\n  _createClass(InsertSymbolTool, [{ key: \"getName\", value: function getName()\n\n    {\n      return InsertSymbolToolName + this.nameSuffix;\n    } }, \n    { key: \"activate\", value: function activate(){} }, \n    { key: \"deactivate\", value: function deactivate(){} }, \n    { key: \"register\", value: function register(){} }, \n    { key: \"setSymbol\", value: function setSymbol(symbol) { this.symbol = symbol; } },\n    { key: \"handleMouseMove\", value: function handleMouseMove(event) {\n\n    } }, \n    { key: \"handleSingleClick\", value: function handleSingleClick(event) {\n      var res = this.layer.canvasToLayer(event.canvasX, event.canvasY);\n      var symbol = this.symbol.clone();\n      symbol.move(res.x, res.y);\n      this.undoStack.run(new Actions.AddShape(this.layer, symbol));\n      this.dispatchEvent({ type: InsertSymbolTool.SYMBOL_INSERTED, symbol: symbol });\n\n      return true;\n    } }, \n    { key: \"handleAutoDraw\", value: function handleAutoDraw(position) {\n        var symbol = this.symbol.clone();\n        symbol.move(position.x, position.y);\n        this.undoStack.run(new Actions.AddShape(this.layer, symbol));\n        this.dispatchEvent({ type: InsertSymbolTool.SYMBOL_INSERTED, symbol: symbol });\n        return true;\n      } }, \n\n      { key: \"moveDraw\", value: function moveDraw(position) {\n        this.symbol.move(position.x, position.y);\n        return true;\n      } }, \n\n    { key: \"handleDoubleClick\", value: function handleDoubleClick()\n    /*event , button */{\n      return true;\n    } }, \n    { key: \"getCursor\", value: function getCursor()\n    {\n      return 'crosshair';\n    } }]);\n    return InsertSymbolTool;\n  }(EditToolBase);\n  \n  export { InsertSymbolTool as default };\nInsertSymbolTool.SYMBOL_INSERTED = \"symbolInserted\";","function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}var UndoToolname = 'Edit2_UndoTool';\n\nvar av = Autodesk.Viewing;\n\n// Simple tool that triggers undo/redo on ctrl-z/ctrl-shift-z\nvar UndoTool = /*#__PURE__*/function () {\n\n  function UndoTool(undoStack) {_classCallCheck(this, UndoTool);\n    this.undoStack = undoStack;\n  }_createClass(UndoTool, [{ key: \"handleKeyDown\", value: function handleKeyDown(\n\n    event, keyCode) {\n\n      if (keyCode !== av.KeyCode.z || !event.ctrlKey) {\n        return false;\n      }\n\n      if (event.shiftKey) {\n        this.undoStack.redo();\n      } else {\n        this.undoStack.undo();\n      }\n    } }, { key: \"getName\",\n\n    // Some paperwork for ToolController\n    value: function getName() {\n      return UndoToolname;\n    } }, { key: \"getNames\", value: function getNames()\n    {\n      return [this.getName()];\n    } }, { key: \"activate\", value: function activate()\n    {} }, { key: \"deactivate\", value: function deactivate()\n    {} }, { key: \"register\", value: function register()\n    {} }]);return UndoTool;}();export { UndoTool as default };\n;","function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}import { Actions } from '../Actions.js';\n\nvar CopyToolName = 'Edit2_CopyTool';\n\nvar av = Autodesk.Viewing;\n\n// Apply constant offset in x/y for each paste step, so that shape copies are not exactly on top of the src shapes.\nvar PasteOffset = 30;var\n\nCopyTool = /*#__PURE__*/function () {\n\n  function CopyTool(ctx) {_classCallCheck(this, CopyTool);\n\n    Autodesk.Viewing.EventDispatcher.prototype.apply(this);\n\n    this.viewer = ctx.viewer;\n    this.layer = ctx.layer;\n    this.selection = ctx.selection;\n    this.undoStack = ctx.undoStack;\n    this.nameSuffix = \"_\".concat(ctx.toolSetName);\n\n    // {Shape[]}\n    this.clipBoard = [];\n\n    // After copying some shapes, this counts the number of times that we paste those.\n    this.pasteCounter = 0;\n  }_createClass(CopyTool, [{ key: \"copy\", value: function copy()\n\n    {\n      this.clipBoard.length = 0;\n\n      var shapes = this.selection.getSelectedShapes();\n\n      // Store the original shapes that get copied for event handlers\n      this.originalShapes = shapes;\n\n      // Remember selected shapes\n      this.clipBoard = shapes.slice();\n\n      // Reset paste counter\n      this.pasteCounter = 0;\n    } }, { key: \"paste\", value: function paste()\n\n    {\n\n      // Track how often we pasted the same clipboard content\n      this.pasteCounter++;\n\n      // Compute how far we want to shift the copy that we create.\n      // On first paste, we shift by 30pixels, then by 60 etc.\n      var offset = this.pasteCounter * PasteOffset * this.layer.getUnitsPerPixel();\n\n      // Insert copies of shapes in the clipboard (+ add offset per paste steps)\n      var shapes = [];\n\n      var eventArgs = { type: CopyTool.BEFORE_PASTE, originalShapes: this.originalShapes, veto: false };\n      this.dispatchEvent(eventArgs);\n      if (eventArgs.veto) {\n        return;\n      }\n\n      for (var i = 0; i < this.clipBoard.length; i++) {\n        var newShape = this.clipBoard[i].clone();\n\n        // Apply offset before cloning, so that another paste will add another offset\n        newShape.move(offset, offset);\n\n        // Insert copy\n        shapes.push(newShape);\n      }\n\n      // Change selection to new shapes\n      this.selection.setSelection(shapes);\n\n      this.undoStack.run(new Actions.AddShapes(this.layer, shapes));\n\n      this.dispatchEvent({ type: CopyTool.AFTER_PASTE, originalShapes: this.originalShapes, shapes: shapes });\n    }\n\n    // delete all selected shapes\n  }, { key: \"delete\", value: function _delete() {\n      var shapes = this.selection.getSelectedShapes();\n      this.undoStack.run(new Actions.RemoveShapes(this.layer, shapes));\n      this.selection.clear();\n    } }, { key: \"handleKeyDown\", value: function handleKeyDown(\n\n    event, keyCode) {\n      if (!this.selection.empty()) {\n        if (keyCode === av.KeyCode.DELETE) {\n          this[\"delete\"]();\n          return true;\n        }\n\n        if (event.ctrlKey && keyCode === av.KeyCode.c) {\n          this.copy();\n          return true;\n        }\n      }\n\n      if (this.clipBoard.length !== 0) {\n        if (event.ctrlKey && keyCode === av.KeyCode.v) {\n          this.paste();\n          return true;\n        }\n      }\n    } }, { key: \"getName\",\n\n    // Some paperwork for ToolController\n    value: function getName() {\n      return CopyToolName + this.nameSuffix;\n    } }, { key: \"getNames\", value: function getNames()\n    {\n      return [this.getName()];\n    } }, { key: \"activate\", value: function activate()\n    {} }, { key: \"deactivate\", value: function deactivate()\n    {} }, { key: \"register\", value: function register()\n    {} }]);return CopyTool;}();export { CopyTool as default };\n;\n\nCopyTool.BEFORE_PASTE = \"BEFORE_PASTE\";\nCopyTool.AFTER_PASTE = \"AFTER_PASTE\";","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!./Edit2D.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!./Edit2D.css\";\n       export default content && content.locals ? content.locals : undefined;\n","function _typeof(obj) {if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {try {var info = gen[key](arg);var value = info.value;} catch (error) {reject(error);return;}if (info.done) {resolve(value);} else {Promise.resolve(value).then(_next, _throw);}}function _asyncToGenerator(fn) {return function () {var self = this,args = arguments;return new Promise(function (resolve, reject) {var gen = fn.apply(self, args);function _next(value) {asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);}function _throw(err) {asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);}_next(undefined);});};}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {return call;}return _assertThisInitialized(self);}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return self;}function _inherits(subClass, superClass) {if (typeof superClass !== \"function\" && superClass !== null) {throw new TypeError(\"Super expression must either be null or a function\");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}import EditLayer from './EditLayer.js';\nimport { Shape, Style, Polygon, Polyline, PolyBase, Path, Circle, ShapeWrapper } from './EditShapes.js';\nimport Selection from './Selection.js';\nimport { Math2D } from './Math2D.js';\nimport { Actions } from './Actions.js';\nimport UndoStack from './UndoStack.js';\nimport Edit2DSnapper from './Edit2DSnapper.js';\nimport Edit2DContextMenu from './Edit2DContextMenu.js';\nimport { UnitHandler, DefaultUnitHandler } from './UnitHandler.js';\nimport { CanvasGizmoBase, CanvasGizmo, EdgeLabel, ShapeLabel, AreaLabel, AlignX, AlignY, VertexGizmo, ShapeLabelRule, ShapeToolTip } from './CanvasGizmo.js';\nimport TangentGizmo from './TangentGizmo.js';\nimport SegmentTree from './SegmentTree.js';\n\nimport MoveTool from './tools/MoveTool.js';\nimport PolygonTool from './tools/PolygonTool.js';\nimport PolygonEditTool from './tools/PolygonEditTool.js';\nimport InsertSymbolTool from './tools/InsertSymbolTool.js';\nimport RectangleTool from './tools/RectangleTool.js';\nimport UndoTool from './tools/UndoTool.js';\nimport CopyTool from './tools/CopyTool.js';\nimport LineTool from './tools/LineTool.js';\nimport { MeasureTransform, DefaultMeasureTransform } from './MeasureTransform.js';\n\nimport './Edit2D.css'; // IMPORTANT!!\n\nvar myExtensionName = 'Autodesk.Edit2D';\nvar namespace = AutodeskNamespace('Autodesk.Edit2D');\nvar av = Autodesk.Viewing;\n\nvar OverlayName = 'Edit2D';var\n\nToolSet =\nfunction ToolSet(name, autoReactivate) {_classCallCheck(this, ToolSet);\n  this.name = name;\n  this.autoReactivate = autoReactivate;\n  this.context = null;\n  this.tools = {};\n};\n\n\n/** \n    * Edit2D extension provides API for implementing 2D vector editing. \n    * Loading the extension does not add UI or changes behavior in the viewer. Its purpose is only\n    * to provide a basis for other extensions and client applications.\n    * \n    * The extension id is: `Autodesk.Edit2D`\n    * \n    * @example\n    *   viewer.loadExtension('Autodesk.Edit2D')\n    *\n    * @memberof Autodesk.Viewing.Extensions\n    * @see {@link Autodesk.Viewing.Extension} for common inherited methods.\n    * @alias Autodesk.Viewing.Extensions.Edit2DExtension\n    * @class\n    */var\nEdit2DExtension = /*#__PURE__*/function (_av$Extension) {_inherits(Edit2DExtension, _av$Extension);\n  function Edit2DExtension(viewer, options) {var _this;_classCallCheck(this, Edit2DExtension);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Edit2DExtension).call(this, viewer, options));\n\n    _this.undoStack = new UndoStack();\n\n    // A map containing all registered Edit 3D tools (value as ToolSet) for a specific tool set name (key)\n    _this._registeredTools = new Map();\n    _this._boundOnModelAdded = _this._onModelAdded.bind(_assertThisInitialized(_this));\n    _this._boundOnModelRemoved = _this._onModelRemoved.bind(_assertThisInitialized(_this));\n    _this._boundOnSelectionChanged = _this._onSelectionChanged.bind(_assertThisInitialized(_this));return _this;\n  }_createClass(Edit2DExtension, [{ key: \"load\", value: function () {var _load = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {return regeneratorRuntime.wrap(function _callee$(_context) {while (1) {switch (_context.prev = _context.next) {case 0:\n\n\n\n                // The overlay \"Edit2D\" contains subscenes for each edit layer.\n                this.viewer.impl.createOverlayScene(OverlayName);\n\n                // We require Snapping and Autodesk.CompGeom (already a dependency of Autodesk.Snapping)\n                _context.next = 3;return this.viewer.loadExtension('Autodesk.Snapping');case 3:\n\n                this.viewer.addEventListener(av.MODEL_ADDED_EVENT, this._boundOnModelAdded);\n                this.viewer.addEventListener(av.MODEL_REMOVED_EVENT, this._boundOnModelRemoved);\n\n                // activate UndoTool immediately, because it runs in parallel to other tools and for all tools\n                this.undoTool = new UndoTool(this.undoStack);\n                this.viewer.toolController.registerTool(this.undoTool);\n                this.viewer.toolController.activateTool(this.undoTool.getName());case 8:case \"end\":return _context.stop();}}}, _callee, this);}));function load() {return _load.apply(this, arguments);}return load;}() }, { key: \"unload\", value: function unload()\n\n\n    {var _iteratorNormalCompletion = true;var _didIteratorError = false;var _iteratorError = undefined;try {\n        for (var _iterator = this._registeredTools.keys()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {var toolSetName = _step.value;\n          this.unregisterTools(toolSetName);\n        }} catch (err) {_didIteratorError = true;_iteratorError = err;} finally {try {if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {_iterator[\"return\"]();}} finally {if (_didIteratorError) {throw _iteratorError;}}}\n\n      this.viewer.toolController.deregisterTool(this.undoTool);\n      this.undoTool = null;\n\n      this.viewer.removeEventListener(av.MODEL_ADDED_EVENT, this._boundOnModelAdded);\n      this.viewer.removeEventListener(av.MODEL_REMOVED_EVENT, this._boundOnModelRemoved);\n\n      return true;\n    } }, { key: \"_onModelAdded\", value: function _onModelAdded()\n\n    {var _this2 = this;\n      if (this.viewer.getVisibleModels().length !== 1) {\n        // Do the reactivation only when the first model got loaded.\n        return;\n      }var _iteratorNormalCompletion2 = true;var _didIteratorError2 = false;var _iteratorError2 = undefined;try {\n\n        for (var _iterator2 = this._registeredTools.values()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {var toolSet = _step2.value;\n          if (toolSet.autoReactivate) {\n            toolSet.toolsToReactivate.forEach(function (name) {return _this2.viewer.toolController.activateTool(name);});\n          }\n        }} catch (err) {_didIteratorError2 = true;_iteratorError2 = err;} finally {try {if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {_iterator2[\"return\"]();}} finally {if (_didIteratorError2) {throw _iteratorError2;}}}\n    } }, { key: \"_onModelRemoved\", value: function _onModelRemoved()\n\n    {\n      if (this.viewer.getVisibleModels().length !== 0) {\n        // Only deactivate tools when no model is active anymore.\n        return;\n      }\n\n      var controller = this.viewer.toolController;var _iteratorNormalCompletion3 = true;var _didIteratorError3 = false;var _iteratorError3 = undefined;try {\n        for (var _iterator3 = this._registeredTools.values()[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {var toolSet = _step3.value;\n          if (toolSet.autoReactivate) {\n            // The next statement gets all possible names of all tools of a toolSet,\n            // flatten the resulting array\n            // and returns a list tool names that are active.\n            toolSet.toolsToReactivate = Object.values(toolSet.tools).\n            map(function (t) {return t.getNames();}).\n            reduce(function (res, names) {return res.concat(names);}, []) // flatten\n            .filter(function (name) {return controller.isToolActivated(name);});\n\n            toolSet.toolsToReactivate.forEach(function (name) {return controller.deactivateTool(name);});\n          }\n        }} catch (err) {_didIteratorError3 = true;_iteratorError3 = err;} finally {try {if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {_iterator3[\"return\"]();}} finally {if (_didIteratorError3) {throw _iteratorError3;}}}\n    }\n\n    // If multiple tools are registered, we have to clear the other selections as the mouse events are handled on the first one.\n  }, { key: \"_onSelectionChanged\", value: function _onSelectionChanged(_ref) {var selectionSource = _ref.target;var _iteratorNormalCompletion4 = true;var _didIteratorError4 = false;var _iteratorError4 = undefined;try {\n        for (var _iterator4 = this._registeredTools.values()[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {var toolSet = _step4.value;\n          if (selectionSource !== toolSet.context.selection && !selectionSource.empty()) {\n            toolSet.context.selection.clear();\n          }\n        }} catch (err) {_didIteratorError4 = true;_iteratorError4 = err;} finally {try {if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {_iterator4[\"return\"]();}} finally {if (_didIteratorError4) {throw _iteratorError4;}}}\n    } }, { key: \"registerDefaultTools\", value: function registerDefaultTools()\n\n    {\n      this.defaultContext = this.registerTools('default');\n    }\n\n    // Get default tools. registerDefaultTools() must be called first, otherwise it returns null.\n  }, { key: \"registerTools\", value: function registerTools(\n\n\n\n\n    toolSetName) {var autoReactivate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var toolSet = this._registeredTools.get(toolSetName);\n      if (toolSet) {\n        console.warn(\"Edit 2D tools are already registered for tool set '\".concat(toolSetName, \"'\"));\n        return toolSet.context;\n      }\n\n      toolSet = new ToolSet(toolSetName, autoReactivate);\n      this._registeredTools.set(toolSetName, toolSet);\n\n      // create context\n      var context = toolSet.context = new Edit2DContext(this, toolSetName);\n      context.selection.addEventListener(Selection.Events.SELECTION_CHANGED, this._boundOnSelectionChanged);\n\n      // create tools\n      toolSet.tools.polygonTool = new PolygonTool(context, PolygonTool.Mode.Polygon);\n      toolSet.tools.polylineTool = new PolygonTool(context, PolygonTool.Mode.Polyline);\n      toolSet.tools.moveTool = new MoveTool(context);\n      toolSet.tools.polygonEditTool = new PolygonEditTool(context);\n      toolSet.tools.insertSymbolTool = new InsertSymbolTool(context);\n      toolSet.tools.copyTool = new CopyTool(context);\n\n      // register them\n      var controller = this.viewer.toolController;\n      controller.registerTool(toolSet.tools.polygonTool);\n      controller.registerTool(toolSet.tools.polylineTool);\n      controller.registerTool(toolSet.tools.moveTool);\n      controller.registerTool(toolSet.tools.polygonEditTool);\n      controller.registerTool(toolSet.tools.insertSymbolTool);\n      controller.registerTool(toolSet.tools.copyTool);\n\n      // activate CopyTool immediately, because they run parallel to other tools\n      controller.activateTool(toolSet.tools.copyTool.getName());\n\n      // create and register context mneu\n      toolSet.contextMenu = new Edit2DContextMenu(this.viewer, toolSet);\n      toolSet.contextMenu.register();\n\n      return context;\n    } }, { key: \"unregisterDefaultTools\", value: function unregisterDefaultTools()\n\n    {\n      this.unregisterTools('default');\n      this.defaultContext = null;\n    } }, { key: \"unregisterTools\", value: function unregisterTools(\n\n    toolSetName) {\n      var toolSet = this._registeredTools.get(toolSetName);\n      if (!toolSet) {\n        return;\n      }\n\n      var controller = this.viewer.toolController;\n      controller.deregisterTool(toolSet.tools.polygonTool);\n      controller.deregisterTool(toolSet.tools.polylineTool);\n      controller.deregisterTool(toolSet.tools.moveTool);\n      controller.deregisterTool(toolSet.tools.polygonEditTool);\n      controller.deregisterTool(toolSet.tools.insertSymbolTool);\n      controller.deregisterTool(toolSet.tools.copyTool);\n\n      toolSet.context.selection.removeEventListener(Selection.Events.SELECTION_CHANGED, this._boundOnSelectionChanged);\n\n      // Unregister and delete context menu\n      toolSet.contextMenu.unregister();\n      toolSet.contextMenu = null;\n\n      this._registeredTools[\"delete\"](toolSetName);\n    } }, { key: \"createLayer\", value: function createLayer()\n\n    {\n\n      var model = this.viewer.model;\n      if (!model) {\n        console.error(\"A 2D model is needed to adjust viewport\");\n      }\n\n      // create new overlay scene to show\n      var layer = new EditLayer(this.viewer);\n\n      // add layer scene to our overlay scene\n      this.viewer.impl.overlayScenes[OverlayName].scene.add(layer.scene);\n\n      return layer;\n    } }, { key: \"defaultTools\", get: function get() {var toolSet = this._registeredTools.get('default');return toolSet && toolSet.tools;} }]);return Edit2DExtension;}(av.Extension);\n\n\n// Common set of objects usually needed by tools\nexport { Edit2DExtension as default };var Edit2DContext = /*#__PURE__*/function () {\n\n  // @param {Edit2D} ext - Edit2d extension\n  function Edit2DContext(ext, toolSetName) {var _this3 = this;_classCallCheck(this, Edit2DContext);\n    this.toolSetName = toolSetName;\n    this.viewer = ext.viewer;\n    this.layer = ext.createLayer();\n    this.gizmoLayer = ext.createLayer();\n    this.undoStack = ext.undoStack;\n    this.selection = new Selection(this.layer, this.undoStack);\n    this.snapper = new Edit2DSnapper(this.viewer, this.layer, this.gizmoLayer);\n    this.unitHandler = new DefaultUnitHandler(this.viewer);\n\n    // Update all visible labels if display units are changed\n    var onUnitChange = function onUnitChange() {\n      _this3.layer.updateCanvasGizmos();\n      _this3.gizmoLayer.updateCanvasGizmos();\n    };\n    this.viewer.addEventListener(Autodesk.Viewing.MeasureCommon.Events.DISPLAY_UNITS_CHANGED, onUnitChange);\n  }\n\n  // Set matrix that is applied to all displayed geometry\n  _createClass(Edit2DContext, [{ key: \"setMatrix\", value: function setMatrix(matrix) {\n      this.layer.setMatrix(matrix);\n      this.gizmoLayer.setMatrix(matrix);\n      this.layer.update();\n      this.gizmoLayer.update();\n    } }]);return Edit2DContext;}();\n\n\n// Register the extension with the extension manager.\nAutodesk.Viewing.theExtensionManager.registerExtension(myExtensionName, Edit2DExtension);\n\nnamespace.Shape = Shape;\nnamespace.Polygon = Polygon;\nnamespace.Polyline = Polyline;\nnamespace.PolyBase = PolyBase;\nnamespace.Path = Path;\nnamespace.Circle = Circle;\nnamespace.Style = Style;\nnamespace.PolygonTool = PolygonTool;\nnamespace.Selection = Selection;\nnamespace.MoveTool = MoveTool;\nnamespace.PolygonEditTool = PolygonEditTool;\nnamespace.InsertSymbolTool = InsertSymbolTool;\nnamespace.Math2D = Math2D;\nnamespace.VertexGizmo = VertexGizmo;\nnamespace.RectangleTool = RectangleTool;\nnamespace.LineTool = LineTool;\nnamespace.CopyTool = CopyTool;\nnamespace.Actions = Actions;\nnamespace.UndoStack = UndoStack;\nnamespace.UndoTool = UndoTool;\nnamespace.Edit2DContext = Edit2DContext;\nnamespace.CanvasGizmo = CanvasGizmo;\nnamespace.CanvasGizmoBase = CanvasGizmoBase;\nnamespace.ShapeLabel = ShapeLabel;\nnamespace.AlignX = AlignX;\nnamespace.AlignY = AlignY;\nnamespace.AreaLabel = AreaLabel;\nnamespace.EdgeLabel = EdgeLabel;\nnamespace.UnitHandler = UnitHandler;\nnamespace.DefaultUnitHandler = DefaultUnitHandler;\nnamespace.ShapeLabelRule = ShapeLabelRule;\nnamespace.ShapeWrapper = ShapeWrapper;\nnamespace.SegmentTree = SegmentTree;\nnamespace.TangentGizmo = TangentGizmo;\nnamespace.MeasureTransform = MeasureTransform;\nnamespace.DefaultMeasureTransform = DefaultMeasureTransform;\nnamespace.ShapeToolTip = ShapeToolTip;"],"names":["c","r","version","use_lines","use_xyz","module","exports","document","window","ClipperLib","self","navigator","userAgent","toString","toLowerCase","indexOf","a","b","d","Object","getOwnPropertyNames","prototype","f","length","getOwnPropertyDescriptor","defineProperty","$baseCtor","Path","push","Array","Paths","PolyNode","this","m_Parent","m_polygon","m_endtype","m_jointype","m_Index","m_Childs","IsOpen","IsHoleNode","ChildCount","Contour","AddChild","GetNext","GetNextSiblingUp","Childs","Parent","IsHole","PolyTree","m_AllPolys","call","Clear","GetFirst","Total","PI","PI2","FPoint","arguments","Y","X","Z","op_Equality","op_Inequality","FPoint0","FPoint1","FPoint1dp","FPoint2","FRect","left","top","right","bottom","FRect0","FRect1","FRect4","ClipType","ctIntersection","ctUnion","ctDifference","ctXor","PolyType","ptSubject","ptClip","PolyFillType","pftEvenOdd","pftNonZero","pftPositive","pftNegative","JoinType","jtSquare","jtRound","jtMiter","EndType","etOpenSquare","etOpenRound","etOpenButt","etClosedLine","etClosedPolygon","EdgeSide","esLeft","esRight","Direction","dRightToLeft","dLeftToRight","TEdge","Bot","Curr","Top","Delta","Dx","PolyTyp","Side","OutIdx","WindCnt2","WindCnt","WindDelta","PrevInSEL","NextInSEL","PrevInAEL","NextInAEL","NextInLML","Prev","Next","IntersectNode","Edge2","Edge1","Pt","MyIntersectNodeSort","Compare","LocalMinima","RightBound","LeftBound","Scanbeam","Maxima","OutRec","Idx","BottomPt","Pts","FirstLeft","OutPt","Join","OutPt2","OutPt1","OffPt","ClipperBase","m_CurrentLM","m_MinimaList","m_edges","PreserveCollinear","m_HasOpenPaths","m_ActiveEdges","m_PolyOuts","m_Scanbeam","horizontal","Skip","Unassigned","tolerance","maxValue","Math","sqrt","Number","MAX_VALUE","minValue","MIN_VALUE","near_zero","IsHorizontal","PointIsVertex","PointOnLineSegment","PointOnPolygon","SlopesEqual","SlopesEqual3","SlopesEqual4","SlopesEqual5","DisposeLocalMinimaList","e","RangeTest","Error","InitEdge","InitEdge2","SetDx","FindNextLocMin","ProcessBound","InsertLocalMinima","ReverseHorizontal","AddPath","g","h","Pt2IsBetweenPt1AndPt3","RemoveEdge","AddPaths","PopLocalMinima","v","Reset","InsertScanbeam","PopScanbeam","LocalMinimaPending","CreateOutRec","DisposeOutRec","UpdateEdgeIntoAEL","SwapPositionsInAEL","DeleteFromAEL","Clipper","m_ClipType","m_IntersectNodeComparer","m_IntersectList","m_SortedEdges","m_Maxima","m_ExecuteLocked","m_SubjFillType","m_ClipFillType","m_GhostJoins","m_Joins","StrictlySimple","ReverseSolution","m_UsingPolyTree","ZFillFunction","ioReverseSolution","ioStrictlySimple","ioPreserveCollinear","DisposeAllPolyPts","InsertMaxima","Execute","ExecuteInternal","BuildResult","BuildResult2","FixHoleLinkage","InsertLocalMinimaIntoAEL","ProcessHorizontals","ProcessIntersections","ProcessEdgesAtTopOfScanbeam","Area$1","ReversePolyPtLinks","JoinCommonEdges","FixupOutPolyline","FixupOutPolygon","DoSimplePolygons","AddJoin","AddGhostJoin","SetZ","InsertEdgeIntoAEL","SetWindingCount","IsContributing","AddOutPt","AddLocalMinPoly","AddEdgeToSEL","l","HorzSegmentsOverlap","IntersectEdges","E2InsertsBeforeE1","TopX","IsEvenOddFillType","IsEvenOddAltFillType","abs","PopEdgeFromSEL","CopyAELToSEL","SwapPositionsInSEL","AddLocalMaxPoly","AppendPolygon","SetHoleState","GetLastOutPt","SwapPoints","Value","GetDx","FirstIsBottomPt","max","min","Area","GetBottomPt","GetLowermostRec","OutRec1RightOfOutRec2","GetOutRec","k","SwapSides","SwapPolyIndexes","DeleteFromSEL","ProcessHorizontal","GetHorzDirection","Left","Right","Dir","GetMaximaPair","m","p","n","GetNextInAEL","q","IsMinima","IsMaxima","IsIntermediate","GetMaximaPairEx","BuildIntersectList","FixupIntersectionOrder","ProcessIntersectList","IntersectPoint","EdgesAdjacent","IntersectNodeSort","sort","DoMaxima","ePrev2","ReversePaths","reverse","Orientation","PointCount","DupOutPt","GetOverlap","JoinHorz","JoinPoints","GetBounds","GetBounds2","PointInPolygon","Poly2ContainsPoly1","FixupFirstLefts1","ParseFirstLeft","FixupFirstLefts2","FixupFirstLefts3","UpdateOutPtIdxs","isArray","SimplifyPolygon","SimplifyPolygons","DistanceSqrd","DistanceFromLineSqrd","SlopesNearCollinear","PointsAreClose","ExcludeOp","CleanPolygon","CleanPolygons","Minkowski","MinkowskiSum","TranslatePath","MinkowskiDiff","PolyTreeToPaths","AddPolyNodeToPaths","NodeType","ntAny","ntOpen","ntClosed","OpenPathsFromPolyTree","ClosedPathsFromPolyTree","ClipperOffset","def_arc_tolerance","m_destPolys","m_srcPoly","m_destPoly","m_normals","m_StepsPerRad","m_miterLim","m_cos","m_sin","m_sinA","m_delta","m_lowest","m_polyNodes","MiterLimit","ArcTolerance","two_pi","FixOrientations","GetUnitNormal","DoOffset","acos","sin","cos","OffsetPoint","DoSquare","DoRound","splice","DoMiter","tan","atan2","round","alert","message","JS","AreaOfPolygon","AreaOfPolygons","BoundsOfPath","BoundsOfPaths","Clean","Clone","Lighten","t","y","w","x","u","z","pop","PerimeterOfPath","PerimeterOfPaths","ExPolygons","ExPolygon","holes","outer","AddOuterPolyNodeToExPolygons","ExPolygonsToPaths","PolyTreeToExPolygons","_typeof","Symbol","iterator","obj","constructor","i","o","code","s","next","prev","steiner","M","D","prevZ","nextZ","O","deviation","flatten","vertices","dimensions","___CSS_LOADER_EXPORT___","id","cssWithMappingToString","list","map","item","content","needLayer","concat","join","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","indexByIdentifier","css","sourceMap","references","updater","addElementStyle","byIndex","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","getTarget","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","definition","key","enumerable","get","prop","hasOwnProperty","toStringTag","value","nc","TessParams","numIterations","minSegLenFraction","TesselateCubic","ctx","px1","py1","px2","py2","px3","py3","px4","py4","maxdim","tessParams","minSegLen","dt","dt3","pre1","pre2","pre3","pre4","temp1x","temp1y","temp2x","temp2y","fx","fy","dfx","dfy","ddfx","ddfy","dddfx","dddfy","error","tMax","lineTo","TesselateQuad","dt2","ax","ay","_v2","THREE","Vector2","_tmpBox","Box2","Path2D","precisionTolerance","segTypes","segData","hasCurves","bbox","_defineProperties","props","descriptor","configurable","writable","_createClass","Constructor","protoProps","staticProps","setTessParams","closePath","moveTo","expandByPoint","set","arc","radius","startAngle","endAngle","anticlockwise","arcTo","x1","y1","x2","y2","quadraticCurveTo","cp1x","cp1y","bezierCurveTo","cp2x","cp2y","forceCloseContours","ret","dataOffset","lastX","lastY","contourStartX","contourStartY","sz","size","console","warn","applyTransform","loader","xform","tx","ty","stroke","lineWidth","color","dbId","layerId","clipPathIn","lineStyle","_this","needClipping","subjFlatted","subPath","subPaths","segIndex","clipFlatted","flattened","clips","toClipperPath","subPreResult","preCheckForClipping","needCancel","myPath","solution","cpr","closed","node","strokeClipperContour","currentVpId","strokeClipperSolution","strokeFlattedPath","flatted","getCurrentTransform","st","tmpx","tmpy","_tmpx","_tmpy","flushBuffer","currentVbb","addSegment","contour","isOpen","vpId","lastIndex","startIndex","lastx","lasty","isAABB","EPS","ANGLE_EPS","seg","dxA","dyA","dxC","dyC","lenA","lenC","dot","dxB","dyB","dxD","dyD","lenB","lenD","isAABBContain","clipBox","pathBox","containsBox","bboxOverlap","clip","mode","preResult","needSwapSubject","res","isFillable","fill","isFillStrokeCombo","polygons","getPolygonFromClipperSolution","appliedTransform","cached","clipProcess","polygon","needApplytransform","vertices1","addPolyTriangle","indices","isFontChar","contours","fillPolygon","paths","path","addPoint","point","hasIntersection","box1","box2","strokeOnly","clipBound","subjBound","transformBox","addContour","holeIndices","temp","hole","msdfClipping","av","Autodesk","Viewing","avp","Private","VertexBufferBuilder","_document","getGlobal","_tmpXform","_tmpVec","_offset","Vector3","_quat","Quaternion","_scale","_axis","_mtx4","Matrix4","LmvCanvasContext","viewport","toPageUnits","meshCallback","fontEngine","usingTextLayer","fontAtlas","pdfRefMap","instance","TypeError","_classCallCheck","inContext","lmvContext","canvas","context","getContext","height","width","canvasContext","clipToViewport","offsetX","offsetY","bounds","Vector4","currentMeshIndex","imageNumber","_curPath","_curClip","first","states","glyphCache","consecutiveIds","isMobileDevice","isScreenSpace","forEach","fn","bind","layers","defaultLayerId","currentLayerId","sequencedDbId","taggedId","defaultVPId","viewports","createViewPortData","elements","viewportMap","ocgStack","idRemap","idIndexMap","msdfRender","num","gen","ref","lineDashedDef","_originalsave","state","_originalrestore","addCount","finalFlush","textureOption","vcount","isFull","mesh","toMesh","material","skipEllipticals","numEllipticals","skipCircles","numCirculars","skipTriangleGeoms","numTriangleGeoms","useInstancing","currentImage","hasLineStyles","msdfFontTexture","hasMSDFContent","viewportBounds","imageUVTexture","image","name","cacheKey","compositeOperation","globalCompositeOperation","compositeCanvasColor","opacity","globalAlpha","reset","points","inds","antialiasEdges","me","edgeMap","processEdge","iFrom","iTo","tmp","adjacentVerts","idx","lastIndexOf","antialiasOneEdge","iEnd","i0","i1","i2","isNaN","isPattern","vbase","vbb","w1","h1","addVertexImagePolytriangle","addIndices","addTriangleGeom","addVertexPolytriangle","j","addAllAntialiasEdges","fillStyle","rgb","parseInt","slice","lastStrokeStyle","strokeStyle","lastAlpha","lastRgb","mozCurrentTransform","invXform","dst","makeEmpty","copy","clone","updateDBId","getFillColor","log","character","font","fontSize","mozCurrentTransformInverse","hashKey","charCodeAt","loadedName","cachedGlyph","skipPath","scaleX","scaleY","fontName","distance","x0","y0","charsMap","charIndex","_char","chars","page","common","scale","info","flag","inverseYAxis","txoffset","tyoffset","ps","uv","scaleW","scaleH","precheckResult","x3","y3","_vbase","dy","dx","addVertexMSDFPolytriangle","pages","_i2","drawMSDFText","_beginTextChar","beginPath","scaleValue","_ref","lastArg","updateLineDashStyle","sign","getStrokeColor","param1","param2","text","maxWidth","save","translate","drawText","restore","sx","sy","sWidth","sHeight","dWidth","dHeight","inlineImageGroups","currentOpIndex","group","groups","rendered","minScale","cx","cy","decompose","angle","addTexturedQuad","properties","isRef","refKey","_processProperties","tag","DBID","VP","parse","UNITS","viewPortId","ocgId","previousState","previousTagId","param","lineStyleInitialized","exH","LineStyleDefs","exW","def","_avp$createLinePatter","createLinePatternTextureData","tex","pw","lineStyleTex","lineStyleIndex","lineStylePw","lineStyleTexData","lineStyleTexture","lineStyleIndexMap","addNewDashedLineStyle","ls","dpi","createLinePatternForDef","setLineStyleParam","repetition","pattern","_originalcreatePattern","def1","parseFloat","toFixed","circleInfo","addVertexLine","finalizeQuad","imageGroups","matrix","units","initGeomMetrics","nextLayerId","EditLayer","viewer","EventDispatcher","scene","Scene","shapes","canvasGizmos","_processMesh","setGlobalManager","globalManager","autoUpdate","styleModifiers","_originalSave","_originalRestore","_originalRotate","rotate","_originalScale","_originalTranslate","_originalTransform","transform","_originalSetTransform","setTransform","_transformMatrix","_transformStack","ad_bc","bc_ad","old","cosValue","sinValue","onCameraChange","updateCanvasGizmos","addEventListener","CAMERA_CHANGE_EVENT","layerToWorld","worldToLayer","tmp_pWorld","tmp_p0","tmp_p1","tmp_ray","Ray","is3d","plane","Plane","_updatePlane","_clearScene","removeEventListener","shape","dispatchEvent","type","SHAPE_ADDED","_onModified","SHAPE_REMOVED","LAYER_CLEARED","overrideStyle","_getOverrideStyle","draw","impl","invalidate","gizmo","hitRadius","radiusLC","getLineHitRadius","hitTest","unitsPerPixel","getUnitsPerPixel","modifier","pWorld","applyMatrix4","worldToClient","_window","getWindow","p0","layerToCanvas","p1","distanceTo","devicePixelRatio","getPixelsPerUnit","canvasX","canvasY","vpVec","clientToViewport","ray","viewportToRay","intersect","intersectPlane","cb","updateBBox","isIntersectionBox","children","meshBox","geometry","boundingBox","find","getInverse","meshData","mdata","is2d","packId","meshIndex","BufferGeometryUtils","meshToGeometry","geom","matman","getMaterials","matName","create2DMaterial","findMaterial","Mesh","matrixAutoUpdate","mod","meshes","dispose","normal","constant","GlobalManagerMixin","pProj","projectToLine","linePoint","lineDir","dp","pointLineDistance","isPointOnEdge","precision","checkInsideSegment","v1","length2","Extensions","CompGeom","pointOnLine","fuzzyEqual","Math2D","getEdgeDirection","sub","normalize","intersectLines","linePoint1","lineDir1","linePoint2","lineDir2","outPoint","denom","diffX","diffY","rotateAround","center","add","angleBetweenDirections","dir1","dir2","getEdgeCenter","getEdgeLength","turnLeft","isPointOnLine","pointDelta","digits","delta","exp","pow","edgeIsDegenerated","eps2","distanceToSquared","mirrorPointOnPoint","collinear","p2","dirEqual","dirOpposite","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","_get","property","receiver","Reflect","object","_getPrototypeOf","_superPropBase","desc","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","_setPrototypeOf","nextShapeId","domParser","DOMParser","toColor","exp4","limitDigits","Style","params","lineColor","lineAlpha","alpha","fillColor","fillAlpha","from","DefaultStyle","pointArrayBBox","dstBox","Shape","bboxDirty","toSVGPath","computeBBox","svg","dom","parseFromString","childNodes","nodeName","Circle","_fromDOMNode","PolyBase","_Shape","Polygon","Polyline","modified","insertPoint","edgeCount","getEdgeCount","ai","bi","nextIndex","getPoint","edgeIndex","enumEdges","containsP","vertexCount","previousIndex","reduceToPath","current","prefix","previous","reduce","isPolygon","outA","outB","ia","ib","measureTransform","sum","getEdge","_PolyBase","cp","ComplexPolygon","pointInContour","area","_PolyBase2","clear","updatePoint","findEdgeIndex","_PolyBase3","isBezierArc","prevIndex","pPrev","segmentIndex","arcType","ctrlPointIndex","optionalTarget","ctrlPoint","pLast","pFirst","src","_value","pathNode","getAttribute","_Path$_parsePath","_parsePath","svgPath","newPoint","pointStrings","split","previousPoint","pointString","contains","substring","coords","shift","bezierCoords","_Shape2","_this2","centerX","centerY","tessSegments","needsUpdate","stepSize","circleNode","hasAttributes","circle","attr","ShapeWrapper","_Shape3","_this3","dirty","_this$shape","_this$shape2","_this$shape3","move","_this$shape4","_this$shape5","_this$shape6","UndoStack","stack","action","BEFORE_ACTION","redo","AFTER_ACTION","isUndo","undo","Selection","undoStack","isSelected","hoveredId","tmpStyle","isHovered","onShapeRemoved","onLayerCleared","addStyleModifier","onActionCb","onAction","removeStyleModifier","changed","getSelectedShapes","_shape","keys","setSelection","values","Events","SELECTION_CHANGED","empty","selected","shapeIdExists","filter","findShapeById","Action","Actions","AddShape","_Action","removeShape","addShape","AddShapes","_Action2","_this4","MoveShape","_Action3","_this5","beforeState","afterState","RemoveShape","_Action4","_this6","RemoveShapes","_Action5","_this7","_this8","_this9","AddVertex","_Action6","poly","vIndex","_this10","removePoint","MoveVertex","_Action7","newPos","_this11","posBefore","posAfter","RemoveVertex","_Action8","_this12","MoveEdge","_Action9","newPosA","newPosB","duplicateStartVertex","duplicateEndVertex","_this13","edgeBefore","edgeAfter","getNewEdgeIndex","revertDuplicateVertices","duplicateVertices","startVertex","duplicateVertex","vNext","curEdgeIndex","iPrev","iNext","newIndex","vertexCountBefore","SnapLine","dir","line","snapRadius","snapLine","snapToLines","pos","snapLine1","snapLine2","snapToLine","getPointMod","checkSecondSnapCandidate","candidate","bestCandidate","pIntersect","xAxis","AngleSnapper","gizmoLayer","snapAngles","snapAngleTolerance","movedPoint","prevPoint","prevPoint2","edgeDir","alignAxis","edgeSnapLines","snapLineExt","snapLineStyle","snapLineGizmos","snapLineGizmosUsed","setGloblaManager","pEnd","snapLines","addEdgeSnapLines","findSnapLines","clearSnappingGizmos","pMov","pPrev2","computeAngleSnapLine","isPolyline","pNext","pNext2","lineConstraint","active","snapAxis","snapRadiusLC","prevSnapLine","getPrevSnapLine","nextSnapLine","getNextSnapLine","snapLineUsable","Boolean","isUsable","candidates","snappedPos","snapLinesToShow","shouldBeShown","sl","isDuplicate","sl2","isEqual","diag","snapLineLength","showSnapLine","makeLine","acquireSnapLineGizmo","clearSnapping","radToDeg","snapIndex","_snapAngle","snapAngle","degToRad","snapDir","dist","snapLineEnd","multiplyScalar","SegmentType","Line","CircularArc","EllipticalArc","createLineSegment","createCircularArcSegment","start","end","CirularArc","createEllipticalArcSegment","major","minor","tilt","processSegment","geomCallbacks","onLineSegment","onCircularArc","onEllipticalArc","tart","SegmentHandler","boundsCb","BoundsCallback","queryBox","tmpPoint","segment","minx","miny","maxx","maxy","getQueryBox","segmentBox","getSegmentBox","SegmentTree","model","box","getBoundingBox","tree","QuadTree","frags","getFragmentList","getCount","getGeometry","addGeometry","collectSegment","addItem","VertexBufferReader","enumGeoms","enumInBox","SnapType","MeasureCommon","Edit2DSnapper","sheetSnapper","Snapping","Snapper","layerSnapper","angleSnapper","snapBox","activate","onCameraChangeCb","initSegmentTrees","tmpVec","geomSnapLine","deactivate","updateSnapperIndicators","getVisibleModels","isLeaflet","myData","segmentTree","isLoadDone","buildFromModel","isSnapped","indicator","render","snappingFilter","_getSnapPosition","updateSnapLineGizmos","clearSnapped","clearOverlays","draggedVertex","startSnapping","stopSnapping","clearSnappingResult","canvasToLayer","pGeom","_getGeomSnapPosition","_getGeomSnapLine","snapToAngle","_getGeomSnapResult","geomType","SNAP_INTERSECTION","snapPoint","geomVertex","pSheet","_getSheetSnapPosition","pLayer","_getEditLayerSnapPosition","sheetSnap","layerSnap","getSnapResult","geomEdge","verts","detectRadiusInPixels","dbIds","enumShapes","enumMeshes","snapping2DOverlay","snapPos","getSnapResultPosition","intersectGround","snapping2DWithSegmentEnum","_len","args","_key","models","_model$segmentTree","enumSegments","p3D","Edit2DContextMenu","toolSet","callbackId","callback","onContextMenu","registerContextMenuCallback","unregisterContextMenuCallback","clientX","clientY","gizmos","tools","polygonEditTool","vertexGizmos","elem","elementFromPoint","findIndex","container","menu","status","editTool","event","mousePos","vertex","vertexGizmoUnderMouse","mouseOnGizmo","findEdgeUnderMouse","newVertexPos","getNewVertexPosition","mouseCloseToEdge","title","newVertex","MeasureTransform","DefaultMeasureTransform","_MeasureTransform","getData","vpIndex","maxDbIds","vp","numDbIds","geom_metrics","db_ids","chooseViewportId","pageToModel","UnitHandler","val","DefaultUnits","DefaultUnitHandler","_SimpleUnitHandler","cfg","config","layerUnits","getUnitString","ext","getExtension","msrCfg","sharedMeasureConfig","displayUnits","scaleFactor","calibrationFactor","updateConfig","_UnitHandler","SimpleUnitHandler","convertUnits","formatValueWithUnits","toPixels","AlignX","Center","AlignY","Bottom","CanvasGizmoBase","CanvasGizmo","_CanvasGizmoBase","visible","layerPos","canvasPos","getDocument","position","transformOrigin","alignX","alignY","setVisible","isUnderMouse","triggerContextMenu","canvasWrap","addCanvasGizmo","removeCanvasGizmo","className","enabled","classList","setClassEnabled","initTextLabel","textDiv","setText","str","textContent","ShapeLabel","_CanvasGizmo","valueValid","visibility","edgeToLabel","floor","edgeIndexValid","posA","posB","LengthLabel","_ShapeLabel","polyline","unitHandler","getLength","lengthToString","AreaLabel","_ShapeLabel2","getArea","areaToString","EdgeGizmo","_CanvasGizmo2","posValid","maxRelativeLength","show","_shouldBeShown","_updateRotation","aScreen","bScreen","maxAllowedPixels","getComputedStyle","EdgeMoveGizmo","_EdgeGizmo","setName","EdgeLabel","_EdgeGizmo2","VertexGizmo","_CanvasGizmo3","setPosition","getShapeWidth","shapeWidth","DefaultLabelFilter","_LabelFilter","minWidth","LabelFilter","FadeOutStyleRule","_LabelStyleRule","rangeStart","rangeEnd","label","clamp","LabelStyleRule","ShapeLabelRule","shapeToLabelText","labelFilter","styleRule","labels","labelsUsed","clearLabels","setShape","accepts","acquireLabel","ShapeToolTip","_CanvasGizmoBase2","getText","textCb","distanceToBox","onMouseMoved","toolController","__clientToCanvasCoords","corner","anchor","TangentGizmo","lineVisible","vertexGizmo1","vertexGizmo2","pStart","dragIndex","lastDragPos","dragOffset","prevIsArc","nextIsArc","updateControlPoint","startPos","endPos","setTangentEndPoints","vpos","vposScreen","moveDrag","onStartVertexMoved","onEndVertexMoved","startDragged","endDragged","startDrag","MoveTool","selection","nameSuffix","toolSetName","dragStartPoint","backupShape","keyMap","CancelEdit","KeyCode","ESCAPE","lastMousePos","getName","button","hitShape","selectOnly","run","isDragging","resetDragging","endDrag","keyCode","cancelDrag","EditToolBase","snapper","ignoreDragging","ignoreActions","handleExternalAction","suppressSnapping","SnapKey","SHIFT","PanKey","SPACE","selectionCb","onSelectionChanged","keyState","ctrl","alt","getSnapPosition","onSnappingToggled","BACKSPACE","assigned","includes","trackMousePos","ModifierMask","checkedModifiers","modifierName","expectedState","getModifierState","RectangleTool","_EditToolBase","rect","startPoint","endPoint","dragCanceled","areaLabel","modifiers","handleMouseMove","shiftKey","forceQuad","edgeLength","updateRect","rectValid","LineTool","lengthLabel","updateLine","Mode","PolygonTool","lineRectTool","edgePreviewStyle","lastClickX","lastClickY","CANCEL_EDIT","REMOVE_LAST_VERTEX","FINISH_EDIT","ENTER","fillGizmo","outlineGizmo","edgePreviewGizmo","cancelEdit","skipDefault","attachToEdge","detachFromEdge","dtor","updateGizmos","snapGeom","startAngleSnapping","_p","updateLengthLabel","lengthStr","buttons","onHover","startVertexHit","setStartVertexHighlighted","addVertex","finishPolygon","stopPropagation","startPoly","handleButtonDown","handleButtonUp","initGizmos","handleStartVertexClicked","polyModified","clearGizmos","stopAngleSnapping","runAction","POLYGON_ADDED","handled","handleKeyDown","mapKey","removeLastVertex","handleFinishKey","handleKeyUp","enable","setSelected","vertexGizmoName","updateVertexGizmoNames","edgesCollinear","isLine","prevExists","nextExists","prevEdge","nextEdge","PolygonEditTool","moveTool","lastDragPoint","dragVertexStartPos","dragEdgeStartPos","draggedEdge","draggedEdgeBefore","draggedEdgeNormal","selectedVertex","edgeGizmo","edgeGizmoShown","DeleteSelectedVertex","edgeGizmos","tangentGizmos","hoverEnabled","setHovered","setHoverEnabled","clearVertexGizmos","createVertexGizmos","clearEdgeGizmos","updateVertexGizmos","createEdgeGizmos","createTangentGizmos","updateVertexHighlighting","clearTangentGizmos","updateAllGizmos","minVerts","setSelectedVertex","restoreDragVertex","pBefore","pAfter","minDist","vi1","vi2","v2","subVectors","getLeftEdgeNormal","newEdgeIndex","setSelectedEdge","prevEdgeIndex","nextEdgeIndex","prevEdgeA","prevEdgeB","curEdgeA","curEdgeB","nextEdgeA","nextEdgeB","prevEdgeDir","curEdgeDir","nextEdgeDir","newEdgeA","newEdgeB","updateEdgeGizmo","newPos1","newPos2","restoreDragEdge","getVertexIndex","startDragVertex","ctrlKey","onButtonDown","selectedEdgeGizmo","getEdgeIndex","edgeMovePossible","startDragEdge","newPolygon","updateMouseOverHighlights","moveDragVertex","moveDragEdge","tangentGizmo","findDraggedTangentGizmo","endDragVertex","endDragEdge","setEditPoly","edgeUnderMouse","vertexHighlighted","edgeSelected","gizmoNeeded","edgeToHighlight","setHoveredId","CONTROL","isPath","InsertSymbolTool","symbol","SYMBOL_INSERTED","UndoTool","CopyTool","clipBoard","pasteCounter","originalShapes","offset","eventArgs","BEFORE_PASTE","veto","newShape","AFTER_PASTE","DELETE","paste","asyncGeneratorStep","resolve","reject","_next","_throw","arg","done","Promise","then","namespace","AutodeskNamespace","ToolSet","autoReactivate","Edit2DExtension","_av$Extension","_registeredTools","Map","_boundOnModelAdded","_onModelAdded","_boundOnModelRemoved","_onModelRemoved","_boundOnSelectionChanged","_onSelectionChanged","_load","regeneratorRuntime","mark","_callee","wrap","_context","createOverlayScene","loadExtension","MODEL_ADDED_EVENT","MODEL_REMOVED_EVENT","undoTool","registerTool","activateTool","stop","err","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","unregisterTools","deregisterTool","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","toolsToReactivate","controller","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","getNames","names","isToolActivated","deactivateTool","selectionSource","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","defaultContext","registerTools","Edit2DContext","polygonTool","polylineTool","insertSymbolTool","copyTool","contextMenu","register","unregister","overlayScenes","Extension","createLayer","DISPLAY_UNITS_CHANGED","setMatrix","theExtensionManager","registerExtension"],"sourceRoot":""}